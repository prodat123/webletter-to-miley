/*! For license information please see main.862fb241.js.LICENSE.txt */
!function(){var t={1851:function(t,e,n){var r=n(7061).default,i=n(7156).default,a=n(861).default,o=n(6115).default,s=n(8416).default,u=n(1588).default,l=n(3808).default,c=n(1655).default,h=n(6389).default,p=n(7424).default,f=n(2122).default,d=n(6690).default,m=n(9728).default;!function(t){"use strict";function e(t){return Math.max(0,t)}function v(t,e){return t<=0?0:e}var y=Object.freeze({__proto__:null,activate:e,measure:v});function g(t){return 1/(1+Math.exp(-t))}function x(t,e){return t*(1-t)*e}var b=Object.freeze({__proto__:null,activate:g,measure:x});function w(t){return Math.tanh(t)}function k(t,e){return(1-t*t)*e}var S=Object.freeze({__proto__:null,activate:w,measure:k});function T(t){return t>0?t:.01*t}function A(t,e){return t>0?e:.01*e}var E=Object.freeze({__proto__:null,activate:T,measure:A}),_=Object.freeze({__proto__:null,relu:y,sigmoid:b,tanh:S,leakyRelu:E}),L=function(){function t(e){d(this,t),this.json={avgs:{error:0,iterations:0,testTime:0,trainTime:0},stats:{total:0,testSize:0,trainSize:0},sets:[]},this.initClassifier=e}return m(t,[{key:"testPartition",value:function(t,e,n){var r=this.initClassifier(),i=Date.now(),a=r.train(e,t),o=Date.now(),s=r.test(n),u=Date.now();return f(f({},s),{},{trainTime:o-i,testTime:u-o,iterations:a.iterations,error:a.error,total:s.total,network:r.toJSON()})}},{key:"shuffleArray",value:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}},{key:"train",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(e.length<r)throw new Error("Training set size is too small for ".concat(e.length," k folds of ").concat(r));this.shuffleArray(e);for(var i=e.length/r,a={trainTime:0,testTime:0,iterations:0,error:0},o={total:0,testSize:0,trainSize:0},s={total:0,testSize:0,trainSize:0,truePos:0,trueNeg:0,falsePos:0,falseNeg:0,precision:0,recall:0,accuracy:0},u=[],l=null,c=0;c<r;c++){var h=e.slice(0),p=h.splice(c*i,i),f=h,d=this.testPartition(n,f,p);null===l&&(l=d.hasOwnProperty("falseNeg")&&d.hasOwnProperty("falsePos")&&d.hasOwnProperty("trueNeg")&&d.hasOwnProperty("truePos"))&&Object.assign(o,s),a.iterations+=d.iterations,a.testTime+=d.testTime,a.trainTime+=d.trainTime,a.error+=d.error,o.total+=d.total,t.isBinaryStats(o)&&t.isBinaryPartitionResults(d)&&(o.accuracy+=d.accuracy,o.falseNeg+=d.falseNeg,o.falsePos+=d.falsePos,o.precision+=d.precision,o.recall+=d.recall,o.trueNeg+=d.trueNeg,o.truePos+=d.truePos),u.push(d)}return a.error/=r,a.iterations/=r,a.testTime/=r,a.trainTime/=r,t.isBinaryStats(o)&&(o.precision=o.truePos/(o.truePos+o.falsePos),o.recall=o.truePos/(o.truePos+o.falseNeg),o.accuracy=(o.trueNeg+o.truePos)/o.total),o.testSize=i,o.trainSize=e.length-i,this.json={avgs:a,stats:o,sets:u},this.json}},{key:"toNeuralNetwork",value:function(){return this.fromJSON(this.json)}},{key:"toJSON",value:function(){return this.json}},{key:"fromJSON",value:function(t){var e=t.sets.reduce((function(t,e){return t.error<e.error?t:e}));return this.initClassifier().fromJSON(e.network)}}]),t}();L.isBinaryStats=function(t){return void 0!==t.accuracy},L.isBinaryResults=function(t){return void 0!==t.stats.accuracy},L.isBinaryPartitionResults=function(t){return void 0!==t.accuracy};var I="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function C(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return D(t,void 0===e||null===e?n.path:e)}},n.exports),n.exports}function D(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var O=C((function(t,e){var n;n=function(){return function(){function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof D&&D;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,(function(t){return i(e[o][1][t]||t)}),c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof D&&D,o=0;o<r.length;o++)i(r[o]);return i}return t}()({1:[function(t,e,n){!function(t,r){r("object"===typeof n&&"undefined"!==typeof e?n:(t=t||self).acorn={})}(this,(function(t){var e={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,"5module":n+" export import",6:n+" const class extends export import super"},i=/^in(stanceof)?$/,a="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",o="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",s=new RegExp("["+a+"]"),u=new RegExp("["+a+o+"]");a=o=null;var l=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function h(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&s.test(String.fromCharCode(t)):!1!==e&&h(t,l)))}function f(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&(h(t,l)||h(t,c)))))}var d=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function m(t,e){return new d(t,{beforeExpr:!0,binop:e})}var v={beforeExpr:!0},y={startsExpr:!0},g={};function x(t,e){return void 0===e&&(e={}),e.keyword=t,g[t]=new d(t,e)}var b={num:new d("num",y),regexp:new d("regexp",y),string:new d("string",y),name:new d("name",y),eof:new d("eof"),bracketL:new d("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new d("]"),braceL:new d("{",{beforeExpr:!0,startsExpr:!0}),braceR:new d("}"),parenL:new d("(",{beforeExpr:!0,startsExpr:!0}),parenR:new d(")"),comma:new d(",",v),semi:new d(";",v),colon:new d(":",v),dot:new d("."),question:new d("?",v),arrow:new d("=>",v),template:new d("template"),invalidTemplate:new d("invalidTemplate"),ellipsis:new d("...",v),backQuote:new d("`",y),dollarBraceL:new d("${",{beforeExpr:!0,startsExpr:!0}),eq:new d("=",{beforeExpr:!0,isAssign:!0}),assign:new d("_=",{beforeExpr:!0,isAssign:!0}),incDec:new d("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new d("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:m("||",1),logicalAND:m("&&",2),bitwiseOR:m("|",3),bitwiseXOR:m("^",4),bitwiseAND:m("&",5),equality:m("==/!=/===/!==",6),relational:m("</>/<=/>=",7),bitShift:m("<</>>/>>>",8),plusMin:new d("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:m("%",10),star:m("*",10),slash:m("/",10),starstar:new d("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",v),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",v),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",v),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",y),_if:x("if"),_return:x("return",v),_switch:x("switch"),_throw:x("throw",v),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",y),_super:x("super",y),_class:x("class",y),_extends:x("extends",v),_export:x("export"),_import:x("import",y),_null:x("null",y),_true:x("true",y),_false:x("false",y),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,k=new RegExp(w.source,"g");function S(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,_=E.hasOwnProperty,L=E.toString;function I(t,e){return _.call(t,e)}var C=Array.isArray||function(t){return"[object Array]"===L.call(t)};function D(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var O=function(t,e){this.line=t,this.column=e};O.prototype.offset=function(t){return new O(this.line,this.column+t)};var F=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function P(t,e){for(var n=1,r=0;;){k.lastIndex=r;var i=k.exec(t);if(!(i&&i.index<e))return new O(n,e-r);++n,r=i.index+i[0].length}}var M={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function R(t){var e={};for(var n in M)e[n]=t&&I(t,n)?t[n]:M[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),C(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return C(e.onComment)&&(e.onComment=N(e,e.onComment)),e}function N(t,e){return function(n,r,i,a,o,s){var u={type:n?"Block":"Line",value:r,start:i,end:a};t.locations&&(u.loc=new F(this,o,s)),t.ranges&&(u.range=[i,a]),e.push(u)}}var z=1,V=2,j=z|V,K=4,U=8,B=16,G=32,W=64,H=128;function X(t,e){return V|(t?K:0)|(e?U:0)}var Y=0,q=1,$=2,J=3,Q=4,Z=5,tt=function(t,n,i){this.options=t=R(t),this.sourceFile=t.sourceFile,this.keywords=D(r[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var a="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(a=e[o]);o--);"module"===t.sourceType&&(a+=" await")}this.reservedWords=D(a);var s=(a?a+" ":"")+e.strict;this.reservedWordsStrict=D(s),this.reservedWordsStrictBind=D(s+" "+e.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(z),this.regexpState=null},et={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};tt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},et.inFunction.get=function(){return(this.currentVarScope().flags&V)>0},et.inGenerator.get=function(){return(this.currentVarScope().flags&U)>0},et.inAsync.get=function(){return(this.currentVarScope().flags&K)>0},et.allowSuper.get=function(){return(this.currentThisScope().flags&W)>0},et.allowDirectSuper.get=function(){return(this.currentThisScope().flags&H)>0},et.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},tt.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&V)>0},tt.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},tt.parse=function(t,e){return new this(e,t).parse()},tt.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},tt.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(tt.prototype,et);var nt=tt.prototype,rt=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function it(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}nt.strictDirective=function(t){for(;;){A.lastIndex=t,t+=A.exec(this.input)[0].length;var e=rt.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,A.lastIndex=t,t+=A.exec(this.input)[0].length,";"===this.input[t]&&t++}},nt.eat=function(t){return this.type===t&&(this.next(),!0)},nt.isContextual=function(t){return this.type===b.name&&this.value===t&&!this.containsEsc},nt.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},nt.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},nt.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},nt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},nt.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},nt.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},nt.expect=function(t){this.eat(t)||this.unexpected()},nt.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},nt.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},nt.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},nt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},nt.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var at=tt.prototype;at.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var ot={kind:"loop"},st={kind:"switch"};at.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(p(r,!0)){for(var a=n+1;f(this.input.charCodeAt(a),!0);)++a;var o=this.input.slice(n,a);if(!i.test(o))return!0}return!1},at.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),e=this.pos+t[0].length;return!w.test(this.input.slice(this.pos,e))&&"function"===this.input.slice(e,e+8)&&(e+8===this.input.length||!f(this.input.charAt(e+8)))},at.parseStatement=function(t,e,n){var r,i=this.type,a=this.startNode();switch(this.isLet(t)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(a,i.keyword);case b._debugger:return this.parseDebuggerStatement(a);case b._do:return this.parseDoStatement(a);case b._for:return this.parseForStatement(a);case b._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case b._class:return t&&this.unexpected(),this.parseClass(a,!0);case b._if:return this.parseIfStatement(a);case b._return:return this.parseReturnStatement(a);case b._switch:return this.parseSwitchStatement(a);case b._throw:return this.parseThrowStatement(a);case b._try:return this.parseTryStatement(a);case b._const:case b._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case b._while:return this.parseWhileStatement(a);case b._with:return this.parseWithStatement(a);case b.braceL:return this.parseBlock(!0,a);case b.semi:return this.parseEmptyStatement(a);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){A.lastIndex=this.pos;var o=A.exec(this.input),s=this.pos+o[0].length;if(40===this.input.charCodeAt(s))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var u=this.value,l=this.parseExpression();return i===b.name&&"Identifier"===l.type&&this.eat(b.colon)?this.parseLabeledStatement(a,u,l,t):this.parseExpressionStatement(a,l)}},at.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(b.semi)||this.insertSemicolon()?t.label=null:this.type!==b.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},at.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},at.parseDoStatement=function(t){return this.next(),this.labels.push(ot),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},at.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ot),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var a=new it,o=this.parseExpression(!0,a);return this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===b._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,a),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},at.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,lt|(n?0:ct),!1,e)},at.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},at.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},at.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(b.braceL),this.labels.push(st),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(b.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},at.parseThrowStatement=function(t){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ut=[];at.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===b._catch){var e=this.startNode();if(this.next(),this.eat(b.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?G:0),this.checkLVal(e.param,n?Q:$),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(b._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},at.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},at.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(ot),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},at.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},at.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},at.parseLabeledStatement=function(t,e,n,r){for(var i=0,a=this.labels;i<a.length;i+=1)a[i].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===b._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var u=this.labels[s];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},at.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},at.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(b.braceL),t&&this.enterScope(0);!this.eat(b.braceR);){var n=this.parseStatement(null);e.body.push(n)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},at.parseFor=function(t,e){return t.init=e,this.expect(b.semi),t.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),t.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},at.parseForIn=function(t,e){var n=this.type===b._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},at.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(b.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return t},at.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?q:$,!1)};var lt=1,ct=2,ht=4;at.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&e&ct&&this.unexpected(),t.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&lt&&(t.id=e&ht&&this.type!==b.name?null:this.parseIdent(),!t.id||e&ct||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?q:$:J));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(X(t.async,t.generator)),e&lt||(t.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&lt?"FunctionDeclaration":"FunctionExpression")},at.parseFunctionParams=function(t){this.expect(b.parenL),t.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},at.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(b.braceL);!this.eat(b.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return t.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},at.parseClassElement=function(t){var e=this;if(this.eat(b.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===b.parenL||r&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,a),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(b.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(b.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return n.computed||n.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?n.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),a&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=t),this.parseClassMethod(n,i,a,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},at.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,"MethodDefinition")},at.parseClassId=function(t,e){this.type===b.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,$,!1)):(!0===e&&this.unexpected(),t.id=null)},at.parseClassSuper=function(t){t.superClass=this.eat(b._extends)?this.parseExprSubscripts():null},at.parseExport=function(t,e){if(this.next(),this.eat(b.star))return this.expectContextual("from"),this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,lt|ht,!1,n)}else if(this.type===b._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},at.checkExport=function(t,e,n){t&&(I(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},at.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(t,a)}else if("ArrayPattern"===n)for(var o=0,s=e.elements;o<s.length;o+=1){var u=s[o];u&&this.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},at.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},at.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},at.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},at.parseImport=function(t){return this.next(),this.type===b.string?(t.specifiers=ut,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},at.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,$),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return t}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,$),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(b.braceL);!this.eat(b.braceR);){if(e)e=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,$),t.push(this.finishNode(i,"ImportSpecifier"))}return t},at.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},at.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"===typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var pt=tt.prototype;pt.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},pt.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var a=t[n-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},pt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},pt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},pt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},pt.parseBindingList=function(t,e,n){for(var r=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(b.comma),e&&this.type===b.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},pt.parseBindingListItem=function(t){return t},pt.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},pt.checkLVal=function(t,e,n){switch(void 0===e&&(e=Y),t.type){case"Identifier":e===$&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(I(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==Y&&e!==Z&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var o=0,s=t.elements;o<s.length;o+=1){var u=s[o];u&&this.checkLVal(u,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var ft=tt.prototype;ft.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[r="$"+r];o?("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):o=e[r]={init:!1,get:!1,set:!1},o[a]=!0}}},ft.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===b.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(b.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return i},ft.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,a=-1;e?(i=e.parenthesizedAssign,a=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new it,r=!0);var o=this.start,s=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,o,s)),this.type.isAssign){var l=this.startNodeAt(o,s);return l.operator=this.value,l.left=this.type===b.eq?this.toAssignable(u,!1,e):u,r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.left.start&&(e.shorthandAssign=-1),this.checkLVal(u),this.next(),l.right=this.parseMaybeAssign(t),this.finishNode(l,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),a>-1&&(e.trailingComma=a),u},ft.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(b.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(b.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return i},ft.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},ft.parseExprOp=function(t,e,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==b._in)&&a>r){var o=this.type===b.logicalOR||this.type===b.logicalAND,s=this.value;this.next();var u=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),u,l,a,i),h=this.buildBinary(e,n,t,c,s,o);return this.parseExprOp(h,e,n,r,i)}return t},ft.buildBinary=function(t,e,n,r,i,a){var o=this.startNodeAt(t,e);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},ft.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===b.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(b.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},ft.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===i.type&&(t.parenthesizedAssign>=i.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=i.start&&(t.parenthesizedBind=-1)),i},ft.parseSubscripts=function(t,e,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,n,r,i);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},ft.parseSubscript=function(t,e,n,r,i){var a=this.eat(b.bracketL);if(a||this.eat(b.dot)){var o=this.startNodeAt(e,n);o.object=t,o.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!a,a&&this.expect(b.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var s=new it,u=this.yieldPos,l=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,s);if(i&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,n),h,!0);this.checkExpressionErrors(s,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var p=this.startNodeAt(e,n);p.callee=t,p.arguments=h,t=this.finishNode(p,"CallExpression")}else if(this.type===b.backQuote){var f=this.startNodeAt(e,n);f.tag=t,f.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(f,"TaggedTemplateExpression")}return t},ft.parseExprAtom=function(t){this.type===b.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(e,"Super");case b._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case b.name:var r=this.start,i=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===b.name&&!a)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[o],!0)}return o;case b.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(e=this.startNode()).value=this.type===b._null?null:this.type===b._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case b.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),l;case b.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(b.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case b.braceL:return this.parseObj(!1,t);case b._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},ft.parseExprImport=function(){var t=this.startNode();if(this.next(),this.type===b.parenL)return this.parseDynamicImport(t);this.unexpected()},ft.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var e=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},ft.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},ft.parseParenExpression=function(){this.expect(b.parenL);var t=this.parseExpression();return this.expect(b.parenR),t},ft.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,s=this.startLoc,u=[],l=!0,c=!1,h=new it,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(l?l=!1:this.expect(b.comma),i&&this.afterTrailingComma(b.parenR,!0)){c=!0;break}if(this.type===b.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var d=this.start,m=this.startLoc;if(this.expect(b.parenR),t&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(n,r,u);u.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?((e=this.startNodeAt(o,s)).expressions=u,this.finishNodeAt(e,"SequenceExpression",d,m)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,r);return v.expression=e,this.finishNode(v,"ParenthesizedExpression")}return e},ft.parseParenItem=function(t){return t},ft.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var dt=[];ft.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===b._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),a&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(b.parenL)?t.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):t.arguments=dt,this.finishNode(t,"NewExpression")},ft.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},ft.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},ft.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},ft.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,i,e),n.properties.push(a)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},ft.parseProperty=function(t,e){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===b.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===b.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(n=this.eat(b.star)));var s=this.containsEsc;return this.parsePropertyName(o),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(o,e)):r=!1,this.parsePropertyValue(o,t,n,r,i,a,e,s),this.finishNode(o,"Property")},ft.parsePropertyValue=function(t,e,n,r,i,a,o,s){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===b.comma||this.type===b.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,a,t.key):this.type===b.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var l=t.value.start;"get"===t.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},ft.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(b.bracketR),t.key;t.computed=!1}return t.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},ft.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},ft.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(X(e,r.generator)|W|(n?H:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},ft.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(X(n,!1)|B),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},ft.parseFunctionBody=function(t,e,n){var r=e&&this.type!==b.braceL,i=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!i&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,Z),this.strict=i},ft.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},ft.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,q,e?null:n)}},ft.parseExprList=function(t,e,n,r){for(var i=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(b.comma),e&&this.afterTrailingComma(t))break;var o=void 0;n&&this.type===b.comma?o=null:this.type===b.ellipsis?(o=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},ft.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},ft.parseIdent=function(t,e){var n=this.startNode();return this.type===b.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},ft.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(b.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},ft.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!1),this.finishNode(t,"AwaitExpression")};var mt=tt.prototype;mt.raise=function(t,e){var n=P(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},mt.raiseRecoverable=mt.raise,mt.curPosition=function(){if(this.options.locations)return new O(this.curLine,this.pos-this.lineStart)};var vt=tt.prototype,yt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};vt.enterScope=function(t){this.scopeStack.push(new yt(t))},vt.exitScope=function(){this.scopeStack.pop()},vt.treatFunctionsAsVarInScope=function(t){return t.flags&V||!this.inModule&&t.flags&z},vt.declareName=function(t,e,n){var r=!1;if(e===$){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&i.flags&z&&delete this.undefinedExports[t]}else if(e===Q)this.currentScope().lexical.push(t);else if(e===J){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(t)>-1&&!(s.flags&G&&s.lexical[0]===t)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(t)>-1){r=!0;break}if(s.var.push(t),this.inModule&&s.flags&z&&delete this.undefinedExports[t],s.flags&j)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},vt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},vt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},vt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&j)return e}},vt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&j&&!(e.flags&B))return e}};var gt=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new F(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},xt=tt.prototype;function bt(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}xt.startNode=function(){return new gt(this,this.start,this.startLoc)},xt.startNodeAt=function(t,e){return new gt(this,t,e)},xt.finishNode=function(t,e){return bt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},xt.finishNodeAt=function(t,e,n,r){return bt.call(this,t,e,n,r)};var wt=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},kt={b_stat:new wt("{",!1),b_expr:new wt("{",!0),b_tmpl:new wt("${",!1),p_stat:new wt("(",!1),p_expr:new wt("(",!0),q_tmpl:new wt("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new wt("function",!1),f_expr:new wt("function",!0),f_expr_gen:new wt("function",!0,!1,null,!0),f_gen:new wt("function",!1,!1,null,!0)},St=tt.prototype;St.initialContext=function(){return[kt.b_stat]},St.braceIsBlock=function(t){var e=this.curContext();return e===kt.f_expr||e===kt.f_stat||(t!==b.colon||e!==kt.b_stat&&e!==kt.b_expr?t===b._return||t===b.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):t===b._else||t===b.semi||t===b.eof||t===b.parenR||t===b.arrow||(t===b.braceL?e===kt.b_stat:t!==b._var&&t!==b._const&&t!==b.name&&!this.exprAllowed):!e.isExpr)},St.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},St.updateContext=function(t){var e,n=this.type;n.keyword&&t===b.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===kt.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?kt.b_stat:kt.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(kt.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(t){var e=t===b._if||t===b._for||t===b._with||t===b._while;this.context.push(e?kt.p_stat:kt.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(t){!t.beforeExpr||t===b.semi||t===b._else||t===b._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(t===b.colon||t===b.braceL)&&this.curContext()===kt.b_stat?this.context.push(kt.f_stat):this.context.push(kt.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===kt.q_tmpl?this.context.pop():this.context.push(kt.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(t){if(t===b._function){var e=this.context.length-1;this.context[e]===kt.f_expr?this.context[e]=kt.f_expr_gen:this.context[e]=kt.f_gen}this.exprAllowed=!0},b.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Tt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",At=Tt+" Extended_Pictographic",Et={9:Tt,10:At,11:At},_t="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Lt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",It=Lt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ct={9:Lt,10:It,11:It+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},Dt={};function Ot(t){var e=Dt[t]={binary:D(Et[t]+" "+_t),nonBinary:{General_Category:D(_t),Script:D(Ct[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Ot(9),Ot(10),Ot(11);var Ft=tt.prototype,Pt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Dt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Mt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Rt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Nt(t){return p(t,!0)||36===t||95===t}function zt(t){return f(t,!0)||36===t||95===t||8204===t||8205===t}function Vt(t){return t>=65&&t<=90||t>=97&&t<=122}function jt(t){return t>=0&&t<=1114111}function Kt(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function Ut(t){return Vt(t)||95===t}function Bt(t){return Ut(t)||Gt(t)}function Gt(t){return t>=48&&t<=57}function Wt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Ht(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Xt(t){return t>=48&&t<=55}Pt.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Pt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Pt.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var r=e.charCodeAt(t);if(!this.switchU||r<=55295||r>=57344||t+1>=n)return r;var i=e.charCodeAt(t+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},Pt.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var r,i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n||(r=e.charCodeAt(t+1))<56320||r>57343?t+1:t+2},Pt.prototype.current=function(){return this.at(this.pos)},Pt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Pt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Pt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Ft.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Ft.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Ft.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},Ft.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Ft.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Ft.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Ft.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Ft.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Ft.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Ft.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Ft.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Ft.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Ft.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Ft.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Ft.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Ft.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Ft.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Rt(e)&&(t.lastIntValue=e,t.advance(),!0)},Ft.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!Rt(n);)t.advance();return t.pos!==e},Ft.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Ft.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Ft.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Ft.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Mt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Mt(t.lastIntValue);return!0}return!1},Ft.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),Nt(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Ft.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),zt(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Ft.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Ft.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Ft.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Ft.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Ft.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Ft.regexp_eatZero=function(t){return 48===t.current()&&!Gt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Ft.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Ft.regexp_eatControlLetter=function(t){var e=t.current();return!!Vt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Ft.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(t.switchU&&n>=55296&&n<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(i>=56320&&i<=57343)return t.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}t.pos=r,t.lastIntValue=n}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&jt(t.lastIntValue))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=e}return!1},Ft.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Ft.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Ft.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Kt(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Ft.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},Ft.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){I(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},Ft.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Ft.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Ut(e=t.current());)t.lastStringValue+=Mt(e),t.advance();return""!==t.lastStringValue},Ft.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Bt(e=t.current());)t.lastStringValue+=Mt(e),t.advance();return""!==t.lastStringValue},Ft.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Ft.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Ft.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},Ft.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Xt(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},Ft.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Ft.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Gt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Ft.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Ft.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Gt(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Ft.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Wt(n=t.current());)t.lastIntValue=16*t.lastIntValue+Ht(n),t.advance();return t.pos!==e},Ft.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},Ft.regexp_eatOctalDigit=function(t){var e=t.current();return Xt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Ft.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!Wt(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Ht(i),t.advance()}return!0};var Yt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new F(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qt=tt.prototype;function $t(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}qt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Yt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},qt.getToken=function(){return this.next(),new Yt(this)},"undefined"!==typeof Symbol&&(qt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===b.eof,value:e}}}}),qt.curContext=function(){return this.context[this.context.length-1]},qt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},qt.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},qt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},qt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(k.lastIndex=n;(t=k.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},qt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!S(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},qt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},qt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},qt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},qt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},qt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=b.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(b.assign,n+1):this.finishOp(r,n)},qt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?b.logicalOR:b.logicalAND,2):61===e?this.finishOp(b.assign,2):this.finishOp(124===t?b.bitwiseOR:b.bitwiseAND,1)},qt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},qt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},qt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},qt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===t?b.eq:b.prefix,1)},qt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 63:return++this.pos,this.finishToken(b.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(b.prefix,1)}this.raise(this.pos,"Unexpected character '"+$t(t)+"'")},qt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},qt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(w.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new Pt(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,o)}catch(l){}return this.finishToken(b.regexp,{pattern:i,flags:o,value:u})},qt.readInt=function(t,e){for(var n=this.pos,r=0,i=0,a=null==e?1/0:e;i<a;++i){var o=this.input.charCodeAt(this.pos),s=void 0;if((s=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,r=r*t+s}return this.pos===n||null!=e&&this.pos-n!==e?null:r},qt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!==typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},qt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(e,this.pos),a="undefined"!==typeof BigInt?BigInt(i):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,a)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(e,this.pos),s=n?parseInt(o,8):parseFloat(o);return this.finishToken(b.num,s)},qt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},qt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(S(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(b.string,e)};var Jt={};qt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Jt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},qt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Jt;this.raise(t,e)},qt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(b.template,t)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(S(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},qt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},qt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return $t(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(t){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return S(e)?"":String.fromCharCode(e)}},qt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},qt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(f(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?p:f)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=$t(o),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},qt.readWord=function(){var t=this.readWord1(),e=b.name;return this.keywords.test(t)&&(e=g[t]),this.finishToken(e,t)};var Qt="7.1.0";function Zt(t,e){return tt.parse(t,e)}function te(t,e,n){return tt.parseExpressionAt(t,e,n)}function ee(t,e){return tt.tokenizer(t,e)}tt.acorn={Parser:tt,version:Qt,defaultOptions:M,Position:O,SourceLocation:F,getLineInfo:P,Node:gt,TokenType:d,tokTypes:b,keywordTypes:g,TokContext:wt,tokContexts:kt,isIdentifierChar:f,isIdentifierStart:p,Token:Yt,isNewLine:S,lineBreak:w,lineBreakG:k,nonASCIIwhitespace:T},t.Node=gt,t.Parser=tt,t.Position=O,t.SourceLocation=F,t.TokContext=wt,t.Token=Yt,t.TokenType=d,t.defaultOptions=M,t.getLineInfo=P,t.isIdentifierChar=f,t.isIdentifierStart=p,t.isNewLine=S,t.keywordTypes=g,t.lineBreak=w,t.lineBreakG=k,t.nonASCIIwhitespace=T,t.parse=Zt,t.parseExpressionAt=te,t.tokContexts=kt,t.tokTypes=b,t.tokenizer=ee,t.version=Qt,Object.defineProperty(t,"__esModule",{value:!0})}))},{}],2:[function(t,e,n){},{}],3:[function(t,e,n){function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.contextName,o=void 0===r?"gl":r,u=n.throwGetError,l=n.useTrackablePrimitives,c=n.readPixelsFile,h=n.recording,p=void 0===h?[]:h,f=n.variables,d=void 0===f?{}:f,m=n.onReadPixels,v=n.onUnrecognizedArgumentLookup,y=new Proxy(t,{get:k}),g=[],x={},b=0,w="";return y;function k(n,r){switch(r){case"addComment":return C;case"checkThrowError":return D;case"getReadPixelsVariableName":return e;case"insertVariable":return A;case"reset":return T;case"setIndent":return _;case"toString":return S;case"getContextVariableName":return P}return"function"===typeof t[r]?function(){switch(r){case"getError":return u?p.push("".concat(w,"if (").concat(o,".getError() !== ").concat(o,".NONE) throw new Error('error');")):p.push("".concat(w).concat(o,".getError();")),t.getError();case"getExtension":var n="".concat(o,"Variables").concat(g.length);p.push("".concat(w,"const ").concat(n," = ").concat(o,".getExtension('").concat(arguments[0],"');"));var h=t.getExtension(arguments[0]);if(h&&"object"===typeof h){var f=i(h,{getEntity:E,useTrackablePrimitives:l,recording:p,contextName:n,contextVariables:g,variables:d,indent:w,onUnrecognizedArgumentLookup:v});return g.push(f),f}return g.push(null),h;case"readPixels":var y,x=g.indexOf(arguments[6]);if(-1===x){var b=F(arguments[6]);b?(y=b,p.push("".concat(w).concat(b))):(y="".concat(o,"Variable").concat(g.length),g.push(arguments[6]),p.push("".concat(w,"const ").concat(y," = new ").concat(arguments[6].constructor.name,"(").concat(arguments[6].length,");")))}else y="".concat(o,"Variable").concat(x);e=y;var k=[arguments[0],arguments[1],arguments[2],arguments[3],E(arguments[4]),E(arguments[5]),y];return p.push("".concat(w).concat(o,".readPixels(").concat(k.join(", "),");")),c&&I(arguments[2],arguments[3]),m&&m(y,k),t.readPixels.apply(t,arguments);case"drawBuffers":return p.push("".concat(w).concat(o,".drawBuffers([").concat(a(arguments[0],{contextName:o,contextVariables:g,getEntity:E,addVariable:L,variables:d,onUnrecognizedArgumentLookup:v}),"]);")),t.drawBuffers(arguments[0])}var S=t[r].apply(t,arguments);switch(typeof S){case"undefined":return void p.push("".concat(w).concat(O(r,arguments),";"));case"number":case"boolean":if(l&&-1===g.indexOf(s(S))){p.push("".concat(w,"const ").concat(o,"Variable").concat(g.length," = ").concat(O(r,arguments),";")),g.push(S=s(S));break}default:null===S?p.push("".concat(O(r,arguments),";")):p.push("".concat(w,"const ").concat(o,"Variable").concat(g.length," = ").concat(O(r,arguments),";")),g.push(S)}return S}:(x[t[r]]=r,t[r])}function S(){return p.join("\n")}function T(){for(;p.length>0;)p.pop()}function A(t,e){d[t]=e}function E(t){var e=x[t];return e?o+"."+e:t}function _(t){w=" ".repeat(t)}function L(t,e){var n="".concat(o,"Variable").concat(g.length);return p.push("".concat(w,"const ").concat(n," = ").concat(e,";")),g.push(t),n}function I(t,e){var n="".concat(o,"Variable").concat(g.length),r="imageDatum".concat(b);p.push("".concat(w,"let ").concat(r,' = ["P3\\n# ').concat(c,'.ppm\\n", ').concat(t,", ' ', ").concat(e,', "\\n255\\n"].join("");')),p.push("".concat(w,"for (let i = 0; i < ").concat(r,".length; i += 4) {")),p.push("".concat(w,"  ").concat(r," += ").concat(n,"[i] + ' ' + ").concat(n,"[i + 1] + ' ' + ").concat(n,"[i + 2] + ' ';")),p.push("".concat(w,"}")),p.push("".concat(w,'if (typeof require !== "undefined") {')),p.push("".concat(w,"  require('fs').writeFileSync('./").concat(c,".ppm', ").concat(r,");")),p.push("".concat(w,"}")),b++}function C(t){p.push("".concat(w,"// ").concat(t))}function D(){p.push("".concat(w,"(() => {\n").concat(w,"const error = ").concat(o,".getError();\n").concat(w,"if (error !== ").concat(o,".NONE) {\n").concat(w,"  const names = Object.getOwnPropertyNames(gl);\n").concat(w,"  for (let i = 0; i < names.length; i++) {\n").concat(w,"    const name = names[i];\n").concat(w,"    if (").concat(o,"[name] === error) {\n").concat(w,"      throw new Error('").concat(o," threw ' + name);\n").concat(w,"    }\n").concat(w,"  }\n").concat(w,"}\n").concat(w,"})();"))}function O(t,e){return"".concat(o,".").concat(t,"(").concat(a(e,{contextName:o,contextVariables:g,getEntity:E,addVariable:L,variables:d,onUnrecognizedArgumentLookup:v}),")")}function F(t){if(d)for(var e in d)if(d[e]===t)return e;return null}function P(t){var e=g.indexOf(t);return-1!==e?"".concat(o,"Variable").concat(e):null}}function i(t,e){var n=new Proxy(t,{get:d}),r={},i=e.contextName,o=e.contextVariables,u=e.getEntity,l=e.useTrackablePrimitives,c=e.recording,h=e.variables,p=e.indent,f=e.onUnrecognizedArgumentLookup;return n;function d(e,n){return"function"===typeof e[n]?function(){if("drawBuffersWEBGL"===n)return c.push("".concat(p).concat(i,".drawBuffersWEBGL([").concat(a(arguments[0],{contextName:i,contextVariables:o,getEntity:m,addVariable:y,variables:h,onUnrecognizedArgumentLookup:f}),"]);")),t.drawBuffersWEBGL(arguments[0]);var e=t[n].apply(t,arguments);switch(typeof e){case"undefined":return void c.push("".concat(p).concat(v(n,arguments),";"));case"number":case"boolean":l&&-1===o.indexOf(s(e))?(c.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(v(n,arguments),";")),o.push(e=s(e))):(c.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(v(n,arguments),";")),o.push(e));break;default:null===e?c.push("".concat(v(n,arguments),";")):c.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(v(n,arguments),";")),o.push(e)}return e}:(r[t[n]]=n,t[n])}function m(t){return r.hasOwnProperty(t)?"".concat(i,".").concat(r[t]):u(t)}function v(t,e){return"".concat(i,".").concat(t,"(").concat(a(e,{contextName:i,contextVariables:o,getEntity:m,addVariable:y,variables:h,onUnrecognizedArgumentLookup:f}),")")}function y(t,e){var n="".concat(i,"Variable").concat(o.length);return o.push(t),c.push("".concat(p,"const ").concat(n," = ").concat(e,";")),n}}function a(t,e){var n=e.variables,r=e.onUnrecognizedArgumentLookup;return Array.from(t).map((function(t){var n=i(t);return n||o(t,e)})).join(", ");function i(t){if(n)for(var e in n)if(n.hasOwnProperty(e)&&n[e]===t)return e;return r?r(t):null}}function o(t,e){var n=e.contextName,r=e.contextVariables,i=e.getEntity,a=e.addVariable,o=e.onUnrecognizedArgumentLookup;if("undefined"===typeof t)return"undefined";if(null===t)return"null";var s=r.indexOf(t);if(s>-1)return"".concat(n,"Variable").concat(s);switch(t.constructor.name){case"String":var u=/\n/.test(t),l=/'/.test(t),c=/"/.test(t);return u?"`"+t+"`":l&&!c?'"'+t+'"':"'"+t+"'";case"Number":case"Boolean":return i(t);case"Array":return a(t,"new ".concat(t.constructor.name,"([").concat(Array.from(t).join(","),"])"));case"Float32Array":case"Uint8Array":case"Uint16Array":case"Int32Array":return a(t,"new ".concat(t.constructor.name,"(").concat(JSON.stringify(Array.from(t)),")"));default:if(o){var h=o(t);if(h)return h}throw new Error("unrecognized argument type ".concat(t.constructor.name))}}function s(t){return new t.constructor(t)}"undefined"!==typeof e&&(e.exports={glWiretap:r,glExtensionWiretap:i}),"undefined"!==typeof window&&(r.glExtensionWiretap=i,window.glWiretap=r)},{}],4:[function(t,e,n){function r(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var r=t[n];r.toArray?e[n]=r.toArray():e[n]=r}return e}function i(){for(var t=r(arguments),e=new Float32Array(this.output.x),n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=0,this.thread.z=0,e[n]=this._fn.apply(this,t);return e}function a(){for(var t=r(arguments),e=new Array(this.output.y),n=0;n<this.output.y;n++){for(var i=new Float32Array(this.output.x),a=0;a<this.output.x;a++)this.thread.x=a,this.thread.y=n,this.thread.z=0,i[a]=this._fn.apply(this,t);e[n]=i}return e}function o(){for(var t=r(arguments),e=0;e<this.output.y;e++)for(var n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=e,this.thread.z=0,this._fn.apply(this,t)}function s(){for(var t=r(arguments),e=new Array(this.output.z),n=0;n<this.output.z;n++){for(var i=new Array(this.output.y),a=0;a<this.output.y;a++){for(var o=new Float32Array(this.output.x),s=0;s<this.output.x;s++)this.thread.x=s,this.thread.y=a,this.thread.z=n,o[s]=this._fn.apply(this,t);i[a]=o}e[n]=i}return e}function u(t){t.setOutput=function(e){t.output=c(e),t.graphical&&l(t)},t.toJSON=function(){throw new Error("Not usable with gpuMock")},t.setConstants=function(e){return t.constants=e,t},t.setGraphical=function(e){return t.graphical=e,t},t.setCanvas=function(e){return t.canvas=e,t},t.setContext=function(e){return t.context=e,t},t.destroy=function(){},t.validateSettings=function(){},t.graphical&&t.output&&l(t),t.exec=function(){var e=arguments;return new Promise((function(n,r){try{n(t.apply(t,e))}catch(i){r(i)}}))},t.getPixels=function(e){var n=t.output,r=n.x,i=n.y;return e?f(t._imageData.data,r,i):t._imageData.data.slice(0)},t.color=function(e,n,r,i){"undefined"===typeof i&&(i=1),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r),i=Math.floor(255*i);var a=t.output.x,o=t.output.y,s=t.thread.x+(o-t.thread.y-1)*a;t._colorData[4*s+0]=e,t._colorData[4*s+1]=n,t._colorData[4*s+2]=r,t._colorData[4*s+3]=i};for(var e=function(){return t},n=["setWarnVarUsage","setArgumentTypes","setTactic","setOptimizeFloatMemory","setDebug","setLoopMaxIterations","setConstantTypes","setFunctions","setNativeFunctions","setInjectedNative","setPipeline","setPrecision","setOutputToTexture","setImmutable","setStrictIntegers","setDynamicOutput","setHardcodeConstants","setDynamicArguments","setUseLegacyEncoder","setWarnVarUsage","addSubKernel"],r=0;r<n.length;r++)t[n[r]]=e;return t}function l(t){var e=t.output,n=e.x,r=e.y;if(t.context&&t.context.createImageData){var i=new Uint8ClampedArray(n*r*4);t._imageData=t.context.createImageData(n,r),t._colorData=i}else{var a=new Uint8ClampedArray(n*r*4);t._imageData={data:a},t._colorData=a}}function c(t){var e=null;if(t.length)if(3===t.length){var n=p(t,3);e={x:n[0],y:n[1],z:n[2]}}else if(2===t.length){var r=p(t,2);e={x:r[0],y:r[1]}}else e={x:p(t,1)[0]};else e=t;return e}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.output?c(e.output):null;function r(){return r.output.z?s.apply(r,arguments):r.output.y?r.graphical?o.apply(r,arguments):a.apply(r,arguments):i.apply(r,arguments)}return r._fn=t,r.constants=e.constants||null,r.context=e.context||null,r.canvas=e.canvas||null,r.graphical=e.graphical||!1,r._imageData=null,r._colorData=null,r.output=n,r.thread={x:0,y:0,z:0},u(r)}function f(t,e,n){for(var r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),o=t.slice(0),s=0;s<r;++s){var u=s*i,l=(n-s-1)*i;a.set(o.subarray(u,u+i)),o.copyWithin(u,l,l+i),o.set(a,l)}return o}e.exports={gpuMock:h}},{}],5:[function(t,e,n){var r=t("./utils").utils;function i(t,e){var n=e.toString();return new Function("return function ".concat(t," (").concat(r.getArgumentNamesFromString(n).join(", "),") {\n  ").concat(r.getFunctionBodyFromString(n),"\n}"))()}e.exports={alias:i}},{"./utils":114}],6:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"astFunction",value:function(t,e){if(!this.isRootKernel){e.push("function"),e.push(" "),e.push(this.name),e.push("(");for(var n=0;n<this.argumentNames.length;++n){var r=this.argumentNames[n];n>0&&e.push(", "),e.push("user_"),e.push(r)}e.push(") {\n")}for(var i=0;i<t.body.body.length;++i)this.astGeneric(t.body.body[i],e),e.push("\n");return this.isRootKernel||e.push("}\n"),e}},{key:"astReturnStatement",value:function(t,e){var n=this.returnType||this.getType(t.argument);return this.returnType||(this.returnType=n),this.isRootKernel?(e.push(this.leadingReturnStatement),this.astGeneric(t.argument,e),e.push(";\n"),e.push(this.followingReturnStatement),e.push("continue;\n")):this.isSubKernel?(e.push("subKernelResult_".concat(this.name," = ")),this.astGeneric(t.argument,e),e.push(";"),e.push("return subKernelResult_".concat(this.name,";"))):(e.push("return "),this.astGeneric(t.argument,e),e.push(";")),e}},{key:"astLiteral",value:function(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);return e.push(t.value),e}},{key:"astBinaryExpression",value:function(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}},{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);return"Infinity"===t.name?e.push("Infinity"):this.constants&&this.constants.hasOwnProperty(t.name)?e.push("constants_"+t.name):e.push("user_"+t.name),e}},{key:"astForStatement",value:function(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);var n=[],r=[],i=[],a=[],o=null;if(t.init){this.pushState("in-for-loop-init"),this.astGeneric(t.init,n);for(var s=0;s<n.length;s++)n[s].includes&&n[s].includes(",")&&(o=!1);this.popState("in-for-loop-init")}else o=!1;if(t.test?this.astGeneric(t.test,r):o=!1,t.update?this.astGeneric(t.update,i):o=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===o&&(o=this.isSafe(t.init)&&this.isSafe(t.test)),o)e.push("for (".concat(n.join(""),";").concat(r.join(""),";").concat(i.join(""),"){\n")),e.push(a.join("")),e.push("}\n");else{var u=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),";\n"),e.push("for (let ".concat(u,"=0;").concat(u,"<LOOP_MAX;").concat(u,"++){\n")),r.length>0&&e.push("if (!".concat(r.join(""),") break;\n")),e.push(a.join("")),e.push("\n".concat(i.join(""),";")),e.push("}\n")}return e}},{key:"astWhileStatement",value:function(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),e.push("if ("),this.astGeneric(t.test,e),e.push(") {\n"),this.astGeneric(t.body,e),e.push("} else {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}},{key:"astDoWhileStatement",value:function(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);return e.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") {\n"),e.push("break;\n"),e.push("}\n"),e.push("}\n"),e}},{key:"astAssignmentExpression",value:function(t,e){var n=this.getDeclaration(t.left);if(n&&!n.assignable)throw this.astErrorOutput("Variable ".concat(t.left.name," is not assignable here"),t);return this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e}},{key:"astBlockStatement",value:function(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(var r=0;r<t.body.length;r++)this.astGeneric(t.body[r],e);e.push("}\n")}return e}},{key:"astVariableDeclaration",value:function(t,e){e.push("".concat(t.kind," "));for(var n=t.declarations,r=0;r<n.length;r++){r>0&&e.push(",");var i=n[r],a=this.getDeclaration(i.id);a.valueType||(a.valueType=this.getType(i.init)),this.astGeneric(i,e)}return this.isState("in-for-loop-init")||e.push(";"),e}},{key:"astIfStatement",value:function(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}},{key:"astSwitchStatement",value:function(t,e){var n=t.discriminant,r=t.cases;e.push("switch ("),this.astGeneric(n,e),e.push(") {\n");for(var i=0;i<r.length;i++)null!==r[i].test?(e.push("case "),this.astGeneric(r[i].test,e),e.push(":\n"),r[i].consequent&&r[i].consequent.length>0&&(this.astGeneric(r[i].consequent,e),e.push("break;\n"))):(e.push("default:\n"),this.astGeneric(r[i].consequent,e),r[i].consequent&&r[i].consequent.length>0&&e.push("break;\n"));e.push("\n}")}},{key:"astThisExpression",value:function(t,e){return e.push("_this"),e}},{key:"astMemberExpression",value:function(t,e){var n=this.getMemberExpressionDetails(t),r=n.signature,i=n.type,a=n.property,o=n.xProperty,s=n.yProperty,u=n.zProperty,l=n.name,c=n.origin;switch(r){case"this.thread.value":return e.push("_this.thread.".concat(l)),e;case"this.output.value":switch(l){case"x":e.push("outputX");break;case"y":e.push("outputY");break;case"z":e.push("outputZ");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":default:throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value.value":if("Math"===c)return e.push(Math[l]),e;switch(a){case"r":return e.push("user_".concat(l,"[0]")),e;case"g":return e.push("user_".concat(l,"[1]")),e;case"b":return e.push("user_".concat(l,"[2]")),e;case"a":return e.push("user_".concat(l,"[3]")),e}break;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":break;case"fn()[]":return this.astGeneric(t.object,e),e.push("["),this.astGeneric(t.property,e),e.push("]"),e;case"fn()[][]":return this.astGeneric(t.object.object,e),e.push("["),this.astGeneric(t.object.property,e),e.push("]"),e.push("["),this.astGeneric(t.property,e),e.push("]"),e}if(!t.computed)switch(i){case"Number":case"Integer":case"Float":case"Boolean":return e.push("".concat(c,"_").concat(l)),e}var h,p,f="".concat(c,"_").concat(l);if("constants"===c){var d=this.constants[l];h=(p="Input"===this.constantTypes[l])?d.size:null}else h=(p=this.isInput(l))?this.argumentSizes[this.argumentNames.indexOf(l)]:null;return e.push("".concat(f)),u&&s?p?(e.push("[("),this.astGeneric(u,e),e.push("*".concat(this.dynamicArguments?"(outputY * outputX)":h[1]*h[0],")+(")),this.astGeneric(s,e),e.push("*".concat(this.dynamicArguments?"outputX":h[0],")+")),this.astGeneric(o,e),e.push("]")):(e.push("["),this.astGeneric(u,e),e.push("]"),e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(o,e),e.push("]")):s?p?(e.push("[("),this.astGeneric(s,e),e.push("*".concat(this.dynamicArguments?"outputX":h[0],")+")),this.astGeneric(o,e),e.push("]")):(e.push("["),this.astGeneric(s,e),e.push("]"),e.push("["),this.astGeneric(o,e),e.push("]")):"undefined"!==typeof o&&(e.push("["),this.astGeneric(o,e),e.push("]")),e}},{key:"astCallExpression",value:function(t,e){if("CallExpression"!==t.type)throw this.astErrorOutput("Unknown CallExpression",t);var n=this.astMemberExpressionUnroll(t.callee);this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.isAstMathFunction(t),this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("(");for(var r=this.lookupFunctionArgumentTypes(n)||[],i=0;i<t.arguments.length;++i){var a=t.arguments[i],o=this.getType(a);r[i]||this.triggerImplyArgumentType(n,i,o,this),i>0&&e.push(", "),this.astGeneric(a,e)}return e.push(")"),e}},{key:"astArrayExpression",value:function(t,e){for(var n=this.getType(t),r=t.elements.length,i=[],a=0;a<r;++a){var o=[];this.astGeneric(t.elements[a],o),i.push(o.join(""))}switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("[".concat(i.join(", "),"]"));break;default:e.push("new Float32Array([".concat(i.join(", "),"])"))}return e}},{key:"astDebuggerStatement",value:function(t,e){return e.push("debugger;"),e}}]),n}(t("../function-node").FunctionNode);e.exports={CPUFunctionNode:r}},{"../function-node":10}],7:[function(t,e,n){var r=t("../../utils").utils;function i(t,e){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=t[r];switch(i){case"Number":case"Integer":case"Float":case"Boolean":n.push("".concat(r,":").concat(a));break;case"Array(2)":case"Array(3)":case"Array(4)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":n.push("".concat(r,":new ").concat(a.constructor.name,"(").concat(JSON.stringify(Array.from(a)),")"))}}return"{ ".concat(n.join()," }")}function a(t,e){var n=[],a=[],o=[],s=!/^function/.test(t.color.toString());if(n.push("  const { context, canvas, constants: incomingConstants } = settings;","  const output = new Int32Array(".concat(JSON.stringify(Array.from(t.output)),");"),"  const _constantTypes = ".concat(JSON.stringify(t.constantTypes),";"),"  const _constants = ".concat(i(t.constants,t.constantTypes),";")),a.push("    constants: _constants,","    context,","    output,","    thread: {x: 0, y: 0, z: 0},"),t.graphical){n.push("  const _imageData = context.createImageData(".concat(t.output[0],", ").concat(t.output[1],");")),n.push("  const _colorData = new Uint8ClampedArray(".concat(t.output[0]," * ").concat(t.output[1]," * 4);"));var u=r.flattenFunctionToString((s?"function ":"")+t.color.toString(),{thisLookup:function(e){switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:function(t,e){return null}}),l=r.flattenFunctionToString((s?"function ":"")+t.getPixels.toString(),{thisLookup:function(e){switch(e){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(t[e])},findDependency:function(){return null}});a.push("    _imageData,","    _colorData,","    color: ".concat(u,",")),o.push("  kernel.getPixels = ".concat(l,";"))}for(var c=[],h=Object.keys(t.constantTypes),p=0;p<h.length;p++)c.push(t.constantTypes[h]);if(-1!==t.argumentTypes.indexOf("HTMLImageArray")||-1!==c.indexOf("HTMLImageArray")){var f=r.flattenFunctionToString((s?"function ":"")+t._imageTo3DArray.toString(),{doNotDefine:["canvas"],findDependency:function(e,n){return"this"===e?(s?"function ":"")+t[n].toString():null},thisLookup:function(t){switch(t){case"canvas":return;case"context":return"context"}}});o.push(f),a.push("    _mediaTo2DArray,"),a.push("    _imageTo3DArray,")}else if(-1!==t.argumentTypes.indexOf("HTMLImage")||-1!==c.indexOf("HTMLImage")){var d=r.flattenFunctionToString((s?"function ":"")+t._mediaTo2DArray.toString(),{findDependency:function(t,e){return null},thisLookup:function(t){switch(t){case"canvas":return"settings.canvas";case"context":return"settings.context"}throw new Error("unhandled thisLookup")}});o.push(d),a.push("    _mediaTo2DArray,")}return"function(settings) {\n".concat(n.join("\n"),"\n  for (const p in _constantTypes) {\n    if (!_constantTypes.hasOwnProperty(p)) continue;\n    const type = _constantTypes[p];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        if (incomingConstants.hasOwnProperty(p)) {\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\n        }\n        continue;\n    }\n    if (!incomingConstants.hasOwnProperty(p)) {\n      throw new Error('constant ' + p + ' not found');\n    }\n    _constants[p] = incomingConstants[p];\n  }\n  const kernel = (function() {\n").concat(t._kernelString,"\n  })\n    .apply({ ").concat(a.join("\n")," });\n  ").concat(o.join("\n"),"\n  return kernel;\n}")}e.exports={cpuKernelString:a}},{"../../utils":114}],8:[function(t,e,n){var r=t("../kernel").Kernel,i=t("../function-builder").FunctionBuilder,a=t("./function-node").CPUFunctionNode,o=t("../../utils").utils,s=t("./kernel-string").cpuKernelString,f=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).mergeSettings(t.settings||r),i._imageData=null,i._colorData=null,i._kernelString=null,i._prependedString=[],i.thread={x:0,y:0,z:0},i.translatedSources=null,i}return m(n,[{key:"initCanvas",value:function(){return"undefined"!==typeof document?document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0}},{key:"initContext",value:function(){return this.canvas?this.canvas.getContext("2d"):null}},{key:"initPlugins",value:function(t){return[]}},{key:"validateSettings",value:function(t){if(!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var e=o.getVariableType(t[0],this.strictIntegers);if("Array"===e)this.output=o.getDimensions(e);else{if("NumberTexture"!==e&&"ArrayTexture(4)"!==e)throw new Error("Auto output not supported for input type: "+e);this.output=t[0].output}}if(this.graphical&&2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.checkOutput()}},{key:"translateSource",value:function(){if(this.leadingReturnStatement=this.output.length>1?"resultX[x] = ":"result[x] = ",this.subKernels){for(var t=[],e=0;e<this.subKernels.length;e++){var n=this.subKernels[e].name;t.push(this.output.length>1?"resultX_".concat(n,"[x] = subKernelResult_").concat(n,";\n"):"result_".concat(n,"[x] = subKernelResult_").concat(n,";\n"))}this.followingReturnStatement=t.join("")}var r=i.fromKernel(this,a);this.translatedSources=r.getPrototypes("kernel"),this.graphical||this.returnType||(this.returnType=r.getKernelResultType())}},{key:"build",value:function(){if(!this.built){if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){var t=this.canvas,e=this.output;if(!t)throw new Error("no canvas available for using graphical output");var n=e[0],r=e[1]||1;t.width=n,t.height=r,this._imageData=this.context.createImageData(n,r),this._colorData=new Uint8ClampedArray(n*r*4)}var i=this.getKernelString();this.kernelString=i,this.debug&&(console.log("Function output:"),console.log(i));try{this.run=new Function([],i).bind(this)()}catch(a){console.error("An error occurred compiling the javascript: ",a)}this.buildSignature(arguments),this.built=!0}}},{key:"color",value:function(t,e,n,r){"undefined"===typeof r&&(r=1),t=Math.floor(255*t),e=Math.floor(255*e),n=Math.floor(255*n),r=Math.floor(255*r);var i=this.output[0],a=this.output[1],o=this.thread.x+(a-this.thread.y-1)*i;this._colorData[4*o+0]=t,this._colorData[4*o+1]=e,this._colorData[4*o+2]=n,this._colorData[4*o+3]=r}},{key:"getKernelString",value:function(){if(null!==this._kernelString)return this._kernelString;var t=null,e=this.translatedSources;return e.length>1?e=e.filter((function(e){return/^function/.test(e)?e:(t=e,!1)})):t=e.shift(),this._kernelString="  const LOOP_MAX = ".concat(this._getLoopMaxString(),";\n  ").concat(this.injectedNative||"","\n  const _this = this;\n  ").concat(this._resultKernelHeader(),"\n  ").concat(this._processConstants(),"\n  return (").concat(this.argumentNames.map((function(t){return"user_"+t})).join(", "),") => {\n    ").concat(this._prependedString.join(""),"\n    ").concat(this._earlyThrows(),"\n    ").concat(this._processArguments(),"\n    ").concat(this.graphical?this._graphicalKernelBody(t):this._resultKernelBody(t),"\n    ").concat(e.length>0?e.join("\n"):"","\n  };")}},{key:"toString",value:function(){return s(this)}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";"):" 1000;"}},{key:"_processConstants",value:function(){if(!this.constants)return"";var t=[];for(var e in this.constants)switch(this.constantTypes[e]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":t.push("    const constants_".concat(e," = this._mediaTo2DArray(this.constants.").concat(e,");\n"));break;case"HTMLImageArray":t.push("    const constants_".concat(e," = this._imageTo3DArray(this.constants.").concat(e,");\n"));break;case"Input":t.push("    const constants_".concat(e," = this.constants.").concat(e,".value;\n"));break;default:t.push("    const constants_".concat(e," = this.constants.").concat(e,";\n"))}return t.join("")}},{key:"_earlyThrows",value:function(){var t=this;if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";for(var e=[],n=0;n<this.argumentTypes.length;n++)"Array"===this.argumentTypes[n]&&e.push(this.argumentNames[n]);if(0===e.length)return"";for(var r=[],i=function(){var n=e[a],i=t._mapSubKernels((function(t){return"user_".concat(n," === result_").concat(t.name)})).join(" || ");r.push("user_".concat(n," === result").concat(i?" || ".concat(i):""))},a=0;a<e.length;a++)i();return"if (".concat(r.join(" || "),") throw new Error('Source and destination arrays are the same.  Use immutable = true');")}},{key:"_processArguments",value:function(){for(var t=[],e=0;e<this.argumentTypes.length;e++){var n="user_".concat(this.argumentNames[e]);switch(this.argumentTypes[e]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":t.push("    ".concat(n," = this._mediaTo2DArray(").concat(n,");\n"));break;case"HTMLImageArray":t.push("    ".concat(n," = this._imageTo3DArray(").concat(n,");\n"));break;case"Input":t.push("    ".concat(n," = ").concat(n,".value;\n"));break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"NumberTexture":case"MemoryOptimizedNumberTexture":t.push("\n    if (".concat(n,".toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(").concat(n,");\n      if (textureIndex !== -1) {\n        ").concat(n," = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(").concat(n,");\n        ").concat(n," = ").concat(n,".toArray();\n        _this.arrayCache.push(").concat(n,");\n      }\n    }"))}}return t.join("")}},{key:"_mediaTo2DArray",value:function(t){var e=this.canvas,n=t.width>0?t.width:t.videoWidth,r=t.height>0?t.height:t.videoHeight;e.width<n&&(e.width=n),e.height<r&&(e.height=r);var i,a=this.context;t.constructor===ImageData?i=t.data:(a.drawImage(t,0,0,n,r),i=a.getImageData(0,0,n,r).data);for(var o=new Array(r),s=0,u=r-1;u>=0;u--)for(var l=o[u]=new Array(n),c=0;c<n;c++){var h=new Float32Array(4);h[0]=i[s++]/255,h[1]=i[s++]/255,h[2]=i[s++]/255,h[3]=i[s++]/255,l[c]=h}return o}},{key:"getPixels",value:function(t){var e=p(this.output,2),n=e[0],r=e[1];return t?o.flipPixels(this._imageData.data,n,r):this._imageData.data.slice(0)}},{key:"_imageTo3DArray",value:function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=this._mediaTo2DArray(t[n]);return e}},{key:"_resultKernelHeader",value:function(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";switch(this.output.length){case 1:return this._mutableKernel1DResults();case 2:return this._mutableKernel2DResults();case 3:return this._mutableKernel3DResults()}}},{key:"_resultKernelBody",value:function(t){switch(this.output.length){case 1:return(!this.immutable&&this.pipeline?this._resultMutableKernel1DLoop(t):this._resultImmutableKernel1DLoop(t))+this._kernelOutput();case 2:return(!this.immutable&&this.pipeline?this._resultMutableKernel2DLoop(t):this._resultImmutableKernel2DLoop(t))+this._kernelOutput();case 3:return(!this.immutable&&this.pipeline?this._resultMutableKernel3DLoop(t):this._resultImmutableKernel3DLoop(t))+this._kernelOutput();default:throw new Error("unsupported size kernel")}}},{key:"_graphicalKernelBody",value:function(t){if(2===this.output.length)return this._graphicalKernel2DLoop(t)+this._graphicalOutput();throw new Error("unsupported size kernel")}},{key:"_graphicalOutput",value:function(){return"\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;"}},{key:"_getKernelResultTypeConstructorString",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return"Float32Array";case"Array(2)":case"Array(3)":case"Array(4)":return"Array";default:if(this.graphical)return"Float32Array";throw new Error("unhandled returnType ".concat(this.returnType))}}},{key:"_resultImmutableKernel1DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(e,"(outputX);\n    ").concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new ").concat(e,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ").concat(t,"\n    }")}},{key:"_mutableKernel1DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(t,"(outputX);\n    ").concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new ").concat(t,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "))}},{key:"_resultMutableKernel1DLoop",value:function(t){return"  const outputX = _this.output[0];\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ".concat(t,"\n    }")}},{key:"_resultImmutableKernel2DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ").concat(e,"(outputX);\n      ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = result_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(t,"\n      }\n    }")}},{key:"_mutableKernel2DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      const resultX = result[y] = new ").concat(t,"(outputX);\n      ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = result_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join(""),"\n    }")}},{key:"_resultMutableKernel2DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y];\n      ".concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = result_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(t,"\n      }\n    }")}},{key:"_graphicalKernel2DLoop",value:function(t){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ".concat(t,"\n      }\n    }")}},{key:"_resultImmutableKernel3DLoop",value:function(t){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(t){return"const resultY_".concat(t.name," = result_").concat(t.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ").concat(e,"(outputX);\n        ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = resultY_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join("        "),"\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ").concat(t,"\n        }\n      }\n    }")}},{key:"_mutableKernel3DResults",value:function(){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(t){return"let subKernelResult_".concat(t.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(t){return"const resultY_".concat(t.name," = result_").concat(t.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        const resultX = resultY[y] = new ").concat(t,"(outputX);\n        ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = resultY_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join("        "),"\n      }\n    }")}},{key:"_resultMutableKernel3DLoop",value:function(t){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z];\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y];\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ".concat(t,"\n        }\n      }\n    }")}},{key:"_kernelOutput",value:function(){return this.subKernels?"\n    return {\n      result: result,\n      ".concat(this.subKernels.map((function(t){return"".concat(t.property,": result_").concat(t.name)})).join(",\n      "),"\n    };"):"\n    return result;"}},{key:"_mapSubKernels",value:function(t){return null===this.subKernels?[""]:this.subKernels.map(t)}},{key:"destroy",value:function(t){t&&delete this.canvas}},{key:"toJSON",value:function(){var t=u(l(n.prototype),"toJSON",this).call(this);return t.functionNodes=i.fromKernel(this,a).toJSON(),t}},{key:"setOutput",value:function(t){u(l(n.prototype),"setOutput",this).call(this,t);var e=p(this.output,2),r=e[0],i=e[1];this.graphical&&(this._imageData=this.context.createImageData(r,i),this._colorData=new Uint8ClampedArray(r*i*4))}},{key:"prependString",value:function(t){if(this._kernelString)throw new Error("Kernel already built");this._prependedString.push(t)}},{key:"hasPrependString",value:function(t){return this._prependedString.indexOf(t)>-1}}],[{key:"getFeatures",value:function(){return this.features}},{key:"features",get:function(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}},{key:"isSupported",get:function(){return!0}},{key:"isContextMatch",value:function(t){return!1}},{key:"mode",get:function(){return"cpu"}},{key:"nativeFunctionArguments",value:function(){return null}},{key:"nativeFunctionReturnType",value:function(){throw new Error("Looking up native function return type not supported on ".concat(this.name))}},{key:"combineKernels",value:function(t){return t}},{key:"getSignature",value:function(t,e){return"cpu"+(e.length>0?":"+e.join(","):"")}},{key:"destroyContext",value:function(t){}}]),n}(r);e.exports={CPUKernel:f}},{"../../utils":114,"../function-builder":9,"../kernel":36,"./function-node":6,"./kernel-string":7}],9:[function(t,e,n){var r=function(){function t(e){if(d(this,t),e=e||{},this.kernel=e.kernel,this.rootNode=e.rootNode,this.functionNodes=e.functionNodes||[],this.subKernelNodes=e.subKernelNodes||[],this.nativeFunctions=e.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(var n=0;n<this.functionNodes.length;n++)this.functionMap[this.functionNodes[n].name]=this.functionNodes[n];if(this.subKernelNodes)for(var r=0;r<this.subKernelNodes.length;r++)this.functionMap[this.subKernelNodes[r].name]=this.subKernelNodes[r];if(this.nativeFunctions)for(var i=0;i<this.nativeFunctions.length;i++){var a=this.nativeFunctions[i];this.nativeFunctionNames.push(a.name)}}return m(t,[{key:"addFunctionNode",value:function(t){if(!t.name)throw new Error("functionNode.name needs set");this.functionMap[t.name]=t,t.isRootKernel&&(this.rootNode=t)}},{key:"traceFunctionCalls",value:function(t,e){if(t=t||"kernel",e=e||[],this.nativeFunctionNames.indexOf(t)>-1){var n=e.indexOf(t);if(-1===n)e.push(t);else{var r=e.splice(n,1)[0];e.push(r)}return e}var i=this.functionMap[t];if(i){var a=e.indexOf(t);if(-1===a){e.push(t),i.toString();for(var o=0;o<i.calledFunctions.length;++o)this.traceFunctionCalls(i.calledFunctions[o],e)}else{var s=e.splice(a,1)[0];e.push(s)}}return e}},{key:"getPrototypeString",value:function(t){return this.getPrototypes(t).join("\n")}},{key:"getPrototypes",value:function(t){return this.rootNode&&this.rootNode.toString(),t?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(t,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}},{key:"getStringFromFunctionNames",value:function(t){for(var e=[],n=0;n<t.length;++n)this.functionMap[t[n]]&&e.push(this.functionMap[t[n]].toString());return e.join("\n")}},{key:"getPrototypesFromFunctionNames",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=this.nativeFunctionNames.indexOf(r);if(i>-1)e.push(this.nativeFunctions[i].source);else{var a=this.functionMap[r];a&&e.push(a.toString())}}return e}},{key:"toJSON",value:function(){var t=this;return this.traceFunctionCalls(this.rootNode.name).reverse().map((function(e){var n=t.nativeFunctions.indexOf(e);if(n>-1)return{name:e,source:t.nativeFunctions[n].source};if(t.functionMap[e])return t.functionMap[e].toJSON();throw new Error("function ".concat(e," not found"))}))}},{key:"fromJSON",value:function(t,e){this.functionMap={};for(var n=0;n<t.length;n++){var r=t[n];this.functionMap[r.settings.name]=new e(r.ast,r.settings)}return this}},{key:"getString",value:function(t){return t?this.getStringFromFunctionNames(this.traceFunctionCalls(t).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}},{key:"lookupReturnType",value:function(t,e,n){if("CallExpression"!==e.type)throw new Error('expected ast type of "CallExpression", but is '.concat(e.type));if(this._isNativeFunction(t))return this._lookupNativeFunctionReturnType(t);if(this._isFunction(t)){var r=this._getFunction(t);if(r.returnType)return r.returnType;for(var i=0;i<this.lookupChain.length;i++)if(this.lookupChain[i].ast===e){if(0===r.argumentTypes.length&&e.arguments.length>0){for(var a=e.arguments,o=0;o<a.length;o++)this.lookupChain.push({name:n.name,ast:a[i],requestingNode:n}),r.argumentTypes[o]=n.getType(a[o]),this.lookupChain.pop();return r.returnType=r.getType(r.getJsAST())}throw new Error("circlical logic detected!")}this.lookupChain.push({name:n.name,ast:e,requestingNode:n});var s=r.getType(r.getJsAST());return this.lookupChain.pop(),r.returnType=s}return null}},{key:"_getFunction",value:function(t){return this._isFunction(t),this.functionMap[t]}},{key:"_isFunction",value:function(t){return Boolean(this.functionMap[t])}},{key:"_getNativeFunction",value:function(t){for(var e=0;e<this.nativeFunctions.length;e++)if(this.nativeFunctions[e].name===t)return this.nativeFunctions[e];return null}},{key:"_isNativeFunction",value:function(t){return Boolean(this._getNativeFunction(t))}},{key:"_lookupNativeFunctionReturnType",value:function(t){var e=this._getNativeFunction(t);if(e)return e.returnType;throw new Error("Native function ".concat(t," not found"))}},{key:"lookupFunctionArgumentTypes",value:function(t){return this._isNativeFunction(t)?this._getNativeFunction(t).argumentTypes:this._isFunction(t)?this._getFunction(t).argumentTypes:null}},{key:"lookupFunctionArgumentName",value:function(t,e){return this._getFunction(t).argumentNames[e]}},{key:"lookupFunctionArgumentBitRatio",value:function(t,e){if(!this._isFunction(t))throw new Error("function not found");if(this.rootNode.name===t){var n=this.rootNode.argumentNames.indexOf(e);if(-1!==n)return this.rootNode.argumentBitRatios[n]}var r=this._getFunction(t),i=r.argumentNames.indexOf(e);if(-1===i)throw new Error("argument not found");var a=r.argumentBitRatios[i];if("number"!==typeof a)throw new Error("argument bit ratio not found");return a}},{key:"needsArgumentType",value:function(t,e){return!!this._isFunction(t)&&!this._getFunction(t).argumentTypes[e]}},{key:"assignArgumentType",value:function(t,e,n,r){if(this._isFunction(t)){var i=this._getFunction(t);i.argumentTypes[e]||(i.argumentTypes[e]=n)}}},{key:"assignArgumentBitRatio",value:function(t,e,n,r){var i=this._getFunction(t);if(this._isNativeFunction(n))return null;var a=this._getFunction(n),o=i.argumentNames.indexOf(e);if(-1===o)throw new Error("Argument ".concat(e," not found in arguments from function ").concat(t));var s=i.argumentBitRatios[o];if("number"!==typeof s)throw new Error("Bit ratio for argument ".concat(e," not found in function ").concat(t));a.argumentBitRatios||(a.argumentBitRatios=new Array(a.argumentNames.length));var u=a.argumentBitRatios[o];if("number"===typeof u){if(u!==s)throw new Error("Incompatible bit ratio found at function ".concat(t," at argument ").concat(e));return u}return a.argumentBitRatios[o]=s,s}},{key:"trackFunctionCall",value:function(t,e,n){this.functionNodeDependencies[t]||(this.functionNodeDependencies[t]=new Set,this.functionCalls[t]=[]),this.functionNodeDependencies[t].add(e),this.functionCalls[t].push(n)}},{key:"getKernelResultType",value:function(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}},{key:"getSubKernelResultType",value:function(t){for(var e=this.subKernelNodes[t],n=!1,r=0;r<this.rootNode.functionCalls.length;r++)this.rootNode.functionCalls[r].ast.callee.name===e.name&&(n=!0);if(!n)throw new Error("SubKernel ".concat(e.name," never called by kernel"));return e.returnType||e.getType(e.getJsAST())}},{key:"getReturnTypes",value:function(){for(var t=s({},this.rootNode.name,this.rootNode.getType(this.rootNode.ast)),e=this.traceFunctionCalls(this.rootNode.name),n=0;n<e.length;n++){var r=e[n],i=this.functionMap[r];t[r]=i.getType(i.ast)}return t}}],[{key:"fromKernel",value:function(e,n,r){for(var i=e.kernelArguments,a=e.kernelConstants,o=e.argumentNames,s=e.argumentSizes,u=e.argumentBitRatios,l=e.constants,c=e.constantBitRatios,h=e.debug,p=e.loopMaxIterations,f=e.nativeFunctions,d=e.output,m=e.optimizeFloatMemory,v=e.precision,y=e.plugins,g=e.source,x=e.subKernels,b=e.functions,w=e.leadingReturnStatement,k=e.followingReturnStatement,S=e.dynamicArguments,T=e.dynamicOutput,A=new Array(i.length),E={},_=0;_<i.length;_++)A[_]=i[_].type;for(var L=0;L<a.length;L++){var I=a[L];E[I.name]=I.type}var C=function(t,e){return W.needsArgumentType(t,e)},D=function(t,e,n){W.assignArgumentType(t,e,n)},O=function(t,e,n){return W.lookupReturnType(t,e,n)},F=function(t){return W.lookupFunctionArgumentTypes(t)},P=function(t,e){return W.lookupFunctionArgumentName(t,e)},M=function(t,e){return W.lookupFunctionArgumentBitRatio(t,e)},R=function(t,e,n,r){W.assignArgumentType(t,e,n,r)},N=function(t,e,n,r){W.assignArgumentBitRatio(t,e,n,r)},z=function(t,e,n){W.trackFunctionCall(t,e,n)},V=function(t,e){for(var r=[],i=0;i<t.params.length;i++)r.push(t.params[i].name);var a=new n(e,Object.assign({},j,{returnType:null,ast:t,name:t.id.name,argumentNames:r,lookupReturnType:O,lookupFunctionArgumentTypes:F,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:M,needsArgumentType:C,assignArgumentType:D,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:N,onFunctionCall:z}));a.traceFunctionAST(t),W.addFunctionNode(a)},j=Object.assign({isRootKernel:!1,onNestedFunction:V,lookupReturnType:O,lookupFunctionArgumentTypes:F,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:M,needsArgumentType:C,assignArgumentType:D,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:N,onFunctionCall:z,optimizeFloatMemory:m,precision:v,constants:l,constantTypes:E,constantBitRatios:c,debug:h,loopMaxIterations:p,output:d,plugins:y,dynamicArguments:S,dynamicOutput:T},r||{}),K=Object.assign({},j,{isRootKernel:!0,name:"kernel",argumentNames:o,argumentTypes:A,argumentSizes:s,argumentBitRatios:u,leadingReturnStatement:w,followingReturnStatement:k});if("object"===typeof g&&g.functionNodes)return(new t).fromJSON(g.functionNodes,n);var U=new n(g,K),B=null;b&&(B=b.map((function(t){return new n(t.source,{returnType:t.returnType,argumentTypes:t.argumentTypes,output:d,plugins:y,constants:l,constantTypes:E,constantBitRatios:c,optimizeFloatMemory:m,precision:v,lookupReturnType:O,lookupFunctionArgumentTypes:F,lookupFunctionArgumentName:P,lookupFunctionArgumentBitRatio:M,needsArgumentType:C,assignArgumentType:D,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:N,onFunctionCall:z,onNestedFunction:V})})));var G=null;x&&(G=x.map((function(t){var e=t.name,r=t.source;return new n(r,Object.assign({},j,{name:e,isSubKernel:!0,isRootKernel:!1}))})));var W=new t({kernel:e,rootNode:U,functionNodes:B,nativeFunctions:f,subKernelNodes:G});return W}}]),t}();e.exports={FunctionBuilder:r}},{}],10:[function(t,e,n){var r=t("acorn"),i=t("../utils").utils,a=t("./function-tracer").FunctionTracer,o=function(){function t(e,n){if(d(this,t),!e&&!n.ast)throw new Error("source parameter is missing");if(n=n||{},this.source=e,this.ast=null,this.name="string"===typeof e?n.isRootKernel?"kernel":n.name||i.getFunctionNameFromString(e):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerImplyArgumentBitRatio=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames="string"===typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,n)for(var r in n)n.hasOwnProperty(r)&&this.hasOwnProperty(r)&&(this[r]=n[r]);this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}return m(t,[{key:"validate",value:function(){if("string"!==typeof this.source&&!this.ast)throw new Error("this.source not a string");if(!this.ast&&!i.isFunctionString(this.source))throw new Error("this.source not a function string");if(!this.name)throw new Error("this.name could not be set");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error("argumentTypes count of ".concat(this.argumentTypes.length," exceeds ").concat(this.argumentNames.length));if(this.output.length<1)throw new Error("this.output is not big enough")}},{key:"isIdentifierConstant",value:function(t){return!!this.constants&&this.constants.hasOwnProperty(t)}},{key:"isInput",value:function(t){return"Input"===this.argumentTypes[this.argumentNames.indexOf(t)]}},{key:"pushState",value:function(t){this.states.push(t)}},{key:"popState",value:function(t){if(this.state!==t)throw new Error("Cannot popState ".concat(t," when in ").concat(this.state));this.states.pop()}},{key:"isState",value:function(t){return this.state===t}},{key:"state",get:function(){return this.states[this.states.length-1]}},{key:"astMemberExpressionUnroll",value:function(t){if("Identifier"===t.type)return t.name;if("ThisExpression"===t.type)return"this";if("MemberExpression"===t.type&&t.object&&t.property)return t.object.hasOwnProperty("name")&&"Math"!==t.object.name?this.astMemberExpressionUnroll(t.property):this.astMemberExpressionUnroll(t.object)+"."+this.astMemberExpressionUnroll(t.property);if(t.hasOwnProperty("expressions")){var e=t.expressions[0];if("Literal"===e.type&&0===e.value&&2===t.expressions.length)return this.astMemberExpressionUnroll(t.expressions[1])}throw this.astErrorOutput("Unknown astMemberExpressionUnroll",t)}},{key:"getJsAST",value:function(t){if(this.ast)return this.ast;if("object"===typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(t=t||r))throw new Error("Missing JS to AST parser");var e=Object.freeze(t.parse("const parser_".concat(this.name," = ").concat(this.source,";"),{locations:!0})),n=e.body[0].declarations[0].init;if(this.traceFunctionAST(n),!e)throw new Error("Failed to parse JS code");return this.ast=n}},{key:"traceFunctionAST",value:function(t){var e=new a(t),n=e.contexts,r=e.declarations,i=e.functions,o=e.identifiers,s=e.functionCalls;this.contexts=n,this.identifiers=o,this.functionCalls=s,this.functions=i;for(var u=0;u<r.length;u++){var l=r[u],c=l.ast,h=l.inForLoopInit,p=l.inForLoopTest,f=c.init,d=this.getDependencies(f),m=null;if(h&&p)m="Integer";else if(f){var v=this.getType(f);switch(v){case"Integer":case"Float":case"Number":m="MemberExpression"===f.type?v:"Number";break;case"LiteralInteger":m="Number";break;default:m=v}}l.valueType=m,l.dependencies=d,l.isSafe=this.isSafeDependencies(d)}for(var y=0;y<i.length;y++)this.onNestedFunction(i[y],this.source)}},{key:"getDeclaration",value:function(t){for(var e=0;e<this.identifiers.length;e++){var n=this.identifiers[e];if(t===n.ast)return n.declaration}return null}},{key:"getVariableType",value:function(t){if("Identifier"!==t.type)throw new Error("ast of ".concat(t.type,' not "Identifier"'));var e=null,n=this.argumentNames.indexOf(t.name);if(-1===n){var r=this.getDeclaration(t);if(r)return r.valueType}else{var i=this.argumentTypes[n];i&&(e=i)}if(!e&&this.strictTypingChecking)throw new Error("Declaration of ".concat(name," not found"));return e}},{key:"getLookupType",value:function(t){if(!s.hasOwnProperty(t))throw new Error("unknown typeLookupMap ".concat(t));return s[t]}},{key:"getConstantType",value:function(t){if(this.constantTypes[t]){var e=this.constantTypes[t];return"Float"===e?"Number":e}throw new Error('Type for constant "'.concat(t,'" not declared'))}},{key:"toString",value:function(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join("").trim()}},{key:"toJSON",value:function(){var t={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:t}}},{key:"getType",value:function(t){if(Array.isArray(t))return this.getType(t[t.length-1]);switch(t.type){case"BlockStatement":return this.getType(t.body);case"ArrayExpression":switch(this.getType(t.elements[0])){case"Array(2)":case"Array(3)":case"Array(4)":return"Matrix(".concat(t.elements.length,")")}return"Array(".concat(t.elements.length,")");case"Literal":var e=this.astKey(t);return this.literalTypes[e]?this.literalTypes[e]:Number.isInteger(t.value)?"LiteralInteger":!0===t.value||!1===t.value?"Boolean":"Number";case"AssignmentExpression":return this.getType(t.left);case"CallExpression":if(this.isAstMathFunction(t))return"Number";if(!t.callee||!t.callee.name){if("SequenceExpression"===t.callee.type&&t.callee.expressions[t.callee.expressions.length-1].property.name){var n=t.callee.expressions[t.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(n,t.arguments),this.lookupReturnType(n,t,this)}if("this.color"===this.getVariableSignature(t.callee,!0))return null;if("MemberExpression"===t.callee.type&&t.callee.object&&t.callee.property&&t.callee.property.name&&t.arguments){var r=t.callee.property.name;return this.inferArgumentTypesIfNeeded(r,t.arguments),this.lookupReturnType(r,t,this)}throw this.astErrorOutput("Unknown call expression",t)}if(t.callee&&t.callee.name){var i=t.callee.name;return this.inferArgumentTypesIfNeeded(i,t.arguments),this.lookupReturnType(i,t,this)}throw this.astErrorOutput('Unhandled getType Type "'.concat(t.type,'"'),t);case"LogicalExpression":return"Boolean";case"BinaryExpression":switch(t.operator){case"%":case"/":if(this.fixIntegerDivisionAccuracy)return"Number";break;case">":case"<":return"Boolean";case"&":case"|":case"^":case"<<":case">>":case">>>":return"Integer"}var a=this.getType(t.left);if(this.isState("skip-literal-correction"))return a;if("LiteralInteger"===a){var o=this.getType(t.right);return"LiteralInteger"===o?t.left.value%1===0?"Integer":"Float":o}return s[a]||a;case"UpdateExpression":case"ReturnStatement":return this.getType(t.argument);case"UnaryExpression":return"~"===t.operator?"Integer":this.getType(t.argument);case"VariableDeclaration":for(var u,l=t.declarations,c=0;c<l.length;c++){var h=l[c];u=this.getType(h)}if(!u)throw this.astErrorOutput("Unable to find type for declaration",t);return u;case"VariableDeclarator":var p=this.getDeclaration(t.id);if(!p)throw this.astErrorOutput("Unable to find declarator",t);if(!p.valueType)throw this.astErrorOutput("Unable to find declarator valueType",t);return p.valueType;case"Identifier":if("Infinity"===t.name)return"Number";if(this.isAstVariable(t)&&"value"===this.getVariableSignature(t))return this.getCheckVariableType(t);var f=this.findIdentifierOrigin(t);return f&&f.init?this.getType(f.init):null;case"MemberExpression":if(this.isAstMathFunction(t)){switch(t.property.name){case"ceil":case"floor":case"round":return"Integer"}return"Number"}if(this.isAstVariable(t)){switch(this.getVariableSignature(t)){case"value[]":return this.getLookupType(this.getCheckVariableType(t.object));case"value[][]":return this.getLookupType(this.getCheckVariableType(t.object.object));case"value[][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object));case"value[][][][]":return this.getLookupType(this.getCheckVariableType(t.object.object.object.object));case"value.thread.value":case"this.thread.value":return"Integer";case"this.output.value":return this.dynamicOutput?"Integer":"LiteralInteger";case"this.constants.value":return this.getConstantType(t.property.name);case"this.constants.value[]":return this.getLookupType(this.getConstantType(t.object.property.name));case"this.constants.value[][]":return this.getLookupType(this.getConstantType(t.object.object.property.name));case"this.constants.value[][][]":return this.getLookupType(this.getConstantType(t.object.object.object.property.name));case"this.constants.value[][][][]":return this.getLookupType(this.getConstantType(t.object.object.object.object.property.name));case"fn()[]":case"fn()[][]":case"fn()[][][]":return this.getLookupType(this.getType(t.object));case"value.value":if(this.isAstMathVariable(t))return"Number";switch(t.property.name){case"r":case"g":case"b":case"a":return this.getLookupType(this.getCheckVariableType(t.object))}case"[][]":return"Number"}throw this.astErrorOutput("Unhandled getType MemberExpression",t)}throw this.astErrorOutput("Unhandled getType MemberExpression",t);case"ConditionalExpression":case"IfStatement":return this.getType(t.consequent);case"FunctionDeclaration":case"FunctionExpression":var d=this.findLastReturn(t.body);return d?this.getType(d):null;case"SequenceExpression":return this.getType(t.expressions[t.expressions.length-1]);default:throw this.astErrorOutput('Unhandled getType Type "'.concat(t.type,'"'),t)}}},{key:"getCheckVariableType",value:function(t){var e=this.getVariableType(t);if(!e)throw this.astErrorOutput("".concat(t.type," is not defined"),t);return e}},{key:"inferArgumentTypesIfNeeded",value:function(t,e){for(var n=0;n<e.length;n++)if(this.needsArgumentType(t,n)){var r=this.getType(e[n]);if(!r)throw this.astErrorOutput("Unable to infer argument ".concat(n),e[n]);this.assignArgumentType(t,n,r)}}},{key:"isAstMathVariable",value:function(t){var e=["E","PI","SQRT2","SQRT1_2","LN2","LN10","LOG2E","LOG10E"];return"MemberExpression"===t.type&&t.object&&"Identifier"===t.object.type&&"Math"===t.object.name&&t.property&&"Identifier"===t.property.type&&e.indexOf(t.property.name)>-1}},{key:"isAstMathFunction",value:function(t){var e=["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","expm1","exp","floor","fround","imul","log","log2","log10","log1p","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc"];return"CallExpression"===t.type&&t.callee&&"MemberExpression"===t.callee.type&&t.callee.object&&"Identifier"===t.callee.object.type&&"Math"===t.callee.object.name&&t.callee.property&&"Identifier"===t.callee.property.type&&e.indexOf(t.callee.property.name)>-1}},{key:"isAstVariable",value:function(t){return"Identifier"===t.type||"MemberExpression"===t.type}},{key:"isSafe",value:function(t){return this.isSafeDependencies(this.getDependencies(t))}},{key:"isSafeDependencies",value:function(t){return!t||!t.every||t.every((function(t){return t.isSafe}))}},{key:"getDependencies",value:function(t,e,n){if(e||(e=[]),!t)return null;if(Array.isArray(t)){for(var r=0;r<t.length;r++)this.getDependencies(t[r],e,n);return e}switch(t.type){case"AssignmentExpression":return this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"ConditionalExpression":return this.getDependencies(t.test,e,n),this.getDependencies(t.alternate,e,n),this.getDependencies(t.consequent,e,n),e;case"Literal":e.push({origin:"literal",value:t.value,isSafe:!0!==n&&t.value>-1/0&&t.value<1/0&&!isNaN(t.value)});break;case"VariableDeclarator":return this.getDependencies(t.init,e,n);case"Identifier":var i=this.getDeclaration(t);if(i)e.push({name:t.name,origin:"declaration",isSafe:!n&&this.isSafeDependencies(i.dependencies)});else if(this.argumentNames.indexOf(t.name)>-1)e.push({name:t.name,origin:"argument",isSafe:!1});else if(this.strictTypingChecking)throw new Error('Cannot find identifier origin "'.concat(t.name,'"'));break;case"FunctionDeclaration":return this.getDependencies(t.body.body[t.body.body.length-1],e,n);case"ReturnStatement":return this.getDependencies(t.argument,e);case"BinaryExpression":case"LogicalExpression":return n="/"===t.operator||"*"===t.operator,this.getDependencies(t.left,e,n),this.getDependencies(t.right,e,n),e;case"UnaryExpression":case"UpdateExpression":return this.getDependencies(t.argument,e,n);case"VariableDeclaration":return this.getDependencies(t.declarations,e,n);case"ArrayExpression":return e.push({origin:"declaration",isSafe:!0}),e;case"CallExpression":return e.push({origin:"function",isSafe:!0}),e;case"MemberExpression":var a=this.getMemberExpressionDetails(t);switch(a.signature){case"value[]":this.getDependencies(t.object,e,n);break;case"value[][]":this.getDependencies(t.object.object,e,n);break;case"value[][][]":this.getDependencies(t.object.object.object,e,n);break;case"this.output.value":this.dynamicOutput&&e.push({name:a.name,origin:"output",isSafe:!1})}if(a)return a.property&&this.getDependencies(a.property,e,n),a.xProperty&&this.getDependencies(a.xProperty,e,n),a.yProperty&&this.getDependencies(a.yProperty,e,n),a.zProperty&&this.getDependencies(a.zProperty,e,n),e;case"SequenceExpression":return this.getDependencies(t.expressions,e,n);default:throw this.astErrorOutput("Unhandled type ".concat(t.type," in getDependencies"),t)}return e}},{key:"getVariableSignature",value:function(t,e){if(!this.isAstVariable(t))throw new Error('ast of type "'.concat(t.type,'" is not a variable signature'));if("Identifier"===t.type)return"value";for(var n=[];t;)t.computed?n.push("[]"):"ThisExpression"===t.type?n.unshift("this"):t.property&&t.property.name?"x"===t.property.name||"y"===t.property.name||"z"===t.property.name?n.unshift(e?"."+t.property.name:".value"):"constants"===t.property.name||"thread"===t.property.name||"output"===t.property.name?n.unshift("."+t.property.name):n.unshift(e?"."+t.property.name:".value"):t.name?n.unshift(e?t.name:"value"):t.callee&&t.callee.name?n.unshift(e?t.callee.name+"()":"fn()"):t.elements?n.unshift("[]"):n.unshift("unknown"),t=t.object;var r=n.join("");return e||["value","value[]","value[][]","value[][][]","value[][][][]","value.value","value.thread.value","this.thread.value","this.output.value","this.constants.value","this.constants.value[]","this.constants.value[][]","this.constants.value[][][]","this.constants.value[][][][]","fn()[]","fn()[][]","fn()[][][]","[][]"].indexOf(r)>-1?r:null}},{key:"build",value:function(){return this.toString().length>0}},{key:"astGeneric",value:function(t,e){if(null===t)throw this.astErrorOutput("NULL ast",t);if(Array.isArray(t)){for(var n=0;n<t.length;n++)this.astGeneric(t[n],e);return e}switch(t.type){case"FunctionDeclaration":return this.astFunctionDeclaration(t,e);case"FunctionExpression":return this.astFunctionExpression(t,e);case"ReturnStatement":return this.astReturnStatement(t,e);case"Literal":return this.astLiteral(t,e);case"BinaryExpression":return this.astBinaryExpression(t,e);case"Identifier":return this.astIdentifierExpression(t,e);case"AssignmentExpression":return this.astAssignmentExpression(t,e);case"ExpressionStatement":return this.astExpressionStatement(t,e);case"EmptyStatement":return this.astEmptyStatement(t,e);case"BlockStatement":return this.astBlockStatement(t,e);case"IfStatement":return this.astIfStatement(t,e);case"SwitchStatement":return this.astSwitchStatement(t,e);case"BreakStatement":return this.astBreakStatement(t,e);case"ContinueStatement":return this.astContinueStatement(t,e);case"ForStatement":return this.astForStatement(t,e);case"WhileStatement":return this.astWhileStatement(t,e);case"DoWhileStatement":return this.astDoWhileStatement(t,e);case"VariableDeclaration":return this.astVariableDeclaration(t,e);case"VariableDeclarator":return this.astVariableDeclarator(t,e);case"ThisExpression":return this.astThisExpression(t,e);case"SequenceExpression":return this.astSequenceExpression(t,e);case"UnaryExpression":return this.astUnaryExpression(t,e);case"UpdateExpression":return this.astUpdateExpression(t,e);case"LogicalExpression":return this.astLogicalExpression(t,e);case"MemberExpression":return this.astMemberExpression(t,e);case"CallExpression":return this.astCallExpression(t,e);case"ArrayExpression":return this.astArrayExpression(t,e);case"DebuggerStatement":return this.astDebuggerStatement(t,e);case"ConditionalExpression":return this.astConditionalExpression(t,e)}throw this.astErrorOutput("Unknown ast type : "+t.type,t)}},{key:"astErrorOutput",value:function(t,e){if("string"!==typeof this.source)return new Error(t);var n=i.getAstString(this.source,e),r=this.source.substr(e.start).split(/\n/),a=r.length>0?r[r.length-1]:0;return new Error("".concat(t," on line ").concat(r.length,", position ").concat(a.length,":\n ").concat(n))}},{key:"astDebuggerStatement",value:function(t,e){return e}},{key:"astConditionalExpression",value:function(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);return e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e}},{key:"astFunction",value:function(t,e){throw new Error('"astFunction" not defined on '.concat(this.constructor.name))}},{key:"astFunctionDeclaration",value:function(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}},{key:"astFunctionExpression",value:function(t,e){return this.isChildFunction(t)?e:this.astFunction(t,e)}},{key:"isChildFunction",value:function(t){for(var e=0;e<this.functions.length;e++)if(this.functions[e]===t)return!0;return!1}},{key:"astReturnStatement",value:function(t,e){return e}},{key:"astLiteral",value:function(t,e){return this.literalTypes[this.astKey(t)]="Number",e}},{key:"astBinaryExpression",value:function(t,e){return e}},{key:"astIdentifierExpression",value:function(t,e){return e}},{key:"astAssignmentExpression",value:function(t,e){return e}},{key:"astExpressionStatement",value:function(t,e){return this.astGeneric(t.expression,e),e.push(";"),e}},{key:"astEmptyStatement",value:function(t,e){return e}},{key:"astBlockStatement",value:function(t,e){return e}},{key:"astIfStatement",value:function(t,e){return e}},{key:"astSwitchStatement",value:function(t,e){return e}},{key:"astBreakStatement",value:function(t,e){return e.push("break;"),e}},{key:"astContinueStatement",value:function(t,e){return e.push("continue;\n"),e}},{key:"astForStatement",value:function(t,e){return e}},{key:"astWhileStatement",value:function(t,e){return e}},{key:"astDoWhileStatement",value:function(t,e){return e}},{key:"astVariableDeclarator",value:function(t,e){return this.astGeneric(t.id,e),null!==t.init&&(e.push("="),this.astGeneric(t.init,e)),e}},{key:"astThisExpression",value:function(t,e){return e}},{key:"astSequenceExpression",value:function(t,e){for(var n=t.expressions,r=[],i=0;i<n.length;i++){var a=n[i],o=[];this.astGeneric(a,o),r.push(o.join(""))}return r.length>1?e.push("(",r.join(","),")"):e.push(r[0]),e}},{key:"astUnaryExpression",value:function(t,e){return this.checkAndUpconvertBitwiseUnary(t,e)||(t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator))),e}},{key:"checkAndUpconvertBitwiseUnary",value:function(t,e){}},{key:"astUpdateExpression",value:function(t,e){return t.prefix?(e.push(t.operator),this.astGeneric(t.argument,e)):(this.astGeneric(t.argument,e),e.push(t.operator)),e}},{key:"astLogicalExpression",value:function(t,e){return e.push("("),this.astGeneric(t.left,e),e.push(t.operator),this.astGeneric(t.right,e),e.push(")"),e}},{key:"astMemberExpression",value:function(t,e){return e}},{key:"astCallExpression",value:function(t,e){return e}},{key:"astArrayExpression",value:function(t,e){return e}},{key:"getMemberExpressionDetails",value:function(t){if("MemberExpression"!==t.type)throw this.astErrorOutput("Expression ".concat(t.type," not a MemberExpression"),t);var e=null,n=null,r=this.getVariableSignature(t);switch(r){case"value":return null;case"value.thread.value":case"this.thread.value":case"this.output.value":return{signature:r,type:"Integer",name:t.property.name};case"value[]":if("string"!==typeof t.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.name,origin:"user",signature:r,type:this.getVariableType(t.object),xProperty:t.property};case"value[][]":if("string"!==typeof t.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object),yProperty:t.object.property,xProperty:t.property};case"value[][][]":if("string"!==typeof t.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value[][][][]":if("string"!==typeof t.object.object.object.object.name)throw this.astErrorOutput("Unexpected expression",t);return{name:e=t.object.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(t.object.object.object.object),zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"value.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(this.isAstMathVariable(t))return{name:e=t.property.name,origin:"Math",type:"Number",signature:r};switch(t.property.name){case"r":case"g":case"b":case"a":return{name:e=t.object.name,property:t.property.name,origin:"user",signature:r,type:"Number"};default:throw this.astErrorOutput("Unexpected expression",t)}case"this.constants.value":if("string"!==typeof t.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r};case"this.constants.value[]":if("string"!==typeof t.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,xProperty:t.property};case"this.constants.value[][]":if("string"!==typeof t.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,yProperty:t.object.property,xProperty:t.property};case"this.constants.value[][][]":if("string"!==typeof t.object.object.object.property.name)throw this.astErrorOutput("Unexpected expression",t);if(e=t.object.object.object.property.name,!(n=this.getConstantType(e)))throw this.astErrorOutput("Constant has no type",t);return{name:e,type:n,origin:"constants",signature:r,zProperty:t.object.object.property,yProperty:t.object.property,xProperty:t.property};case"fn()[]":case"fn()[][]":case"[][]":return{signature:r,property:t.property};default:throw this.astErrorOutput("Unexpected expression",t)}}},{key:"findIdentifierOrigin",value:function(t){for(var e=[this.ast];e.length>0;){var n=e[0];if("VariableDeclarator"===n.type&&n.id&&n.id.name&&n.id.name===t.name)return n;if(e.shift(),n.argument)e.push(n.argument);else if(n.body)e.push(n.body);else if(n.declarations)e.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e.push(n[r])}return null}},{key:"findLastReturn",value:function(t){for(var e=[t||this.ast];e.length>0;){var n=e.pop();if("ReturnStatement"===n.type)return n;if("FunctionDeclaration"!==n.type)if(n.argument)e.push(n.argument);else if(n.body)e.push(n.body);else if(n.declarations)e.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)e.push(n[r]);else n.consequent?e.push(n.consequent):n.cases&&e.push(n.cases)}return null}},{key:"getInternalVariableName",value:function(t){return this._internalVariableNames.hasOwnProperty(t)||(this._internalVariableNames[t]=0),this._internalVariableNames[t]++,1===this._internalVariableNames[t]?t:t+this._internalVariableNames[t]}},{key:"astKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(!t.start||!t.end)throw new Error("AST start and end needed");return"".concat(t.start).concat(e).concat(t.end)}}]),t}(),s={Number:"Number",Float:"Float",Integer:"Integer",Array:"Number","Array(2)":"Number","Array(3)":"Number","Array(4)":"Number","Matrix(2)":"Number","Matrix(3)":"Number","Matrix(4)":"Number",Array2D:"Number",Array3D:"Number",Input:"Number",HTMLCanvas:"Array(4)",OffscreenCanvas:"Array(4)",HTMLImage:"Array(4)",ImageBitmap:"Array(4)",ImageData:"Array(4)",HTMLVideo:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number",MemoryOptimizedNumberTexture:"Number","Array1D(2)":"Array(2)","Array1D(3)":"Array(3)","Array1D(4)":"Array(4)","Array2D(2)":"Array(2)","Array2D(3)":"Array(3)","Array2D(4)":"Array(4)","Array3D(2)":"Array(2)","Array3D(3)":"Array(3)","Array3D(4)":"Array(4)","ArrayTexture(1)":"Number","ArrayTexture(2)":"Array(2)","ArrayTexture(3)":"Array(3)","ArrayTexture(4)":"Array(4)"};e.exports={FunctionNode:o}},{"../utils":114,"./function-tracer":11,acorn:1}],11:[function(t,e,n){var r=t("../utils").utils;function i(t){return t.length>0?t[t.length-1]:null}var a={trackIdentifiers:"trackIdentifiers",memberExpression:"memberExpression",inForLoopInit:"inForLoopInit"},o=function(){function t(e){d(this,t),this.runningContexts=[],this.functionContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.trackedIdentifiers=null,this.states=[],this.newFunctionContext(),this.scan(e)}return m(t,[{key:"isState",value:function(t){return this.states[this.states.length-1]===t}},{key:"hasState",value:function(t){return this.states.indexOf(t)>-1}},{key:"pushState",value:function(t){this.states.push(t)}},{key:"popState",value:function(t){if(!this.isState(t))throw new Error('Cannot pop the non-active state "'.concat(t,'"'));this.states.pop()}},{key:"currentFunctionContext",get:function(){return i(this.functionContexts)}},{key:"currentContext",get:function(){return i(this.runningContexts)}},{key:"newFunctionContext",value:function(){var t={"@contextType":"function"};this.contexts.push(t),this.functionContexts.push(t)}},{key:"newContext",value:function(t){var e=Object.assign({"@contextType":"const/let"},this.currentContext);this.contexts.push(e),this.runningContexts.push(e),t();var n=this.currentFunctionContext;for(var r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r]);return this.runningContexts.pop(),e}},{key:"useFunctionContext",value:function(t){var e=i(this.functionContexts);this.runningContexts.push(e),t(),this.runningContexts.pop()}},{key:"getIdentifiers",value:function(t){var e=this.trackedIdentifiers=[];return this.pushState(a.trackIdentifiers),t(),this.trackedIdentifiers=null,this.popState(a.trackIdentifiers),e}},{key:"getDeclaration",value:function(t){var e=this.currentContext,n=this.currentFunctionContext,r=this.runningContexts,i=e[t]||n[t]||null;if(!i&&e===n&&r.length>0){var a=r[r.length-2];if(a[t])return a[t]}return i}},{key:"scan",value:function(t){var e=this;if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++)this.scan(t[n]);else switch(t.type){case"Program":this.useFunctionContext((function(){e.scan(t.body)}));break;case"BlockStatement":this.newContext((function(){e.scan(t.body)}));break;case"AssignmentExpression":case"LogicalExpression":case"BinaryExpression":this.scan(t.left),this.scan(t.right);break;case"UpdateExpression":if("++"===t.operator){var i=this.getDeclaration(t.argument.name);i&&(i.suggestedType="Integer")}this.scan(t.argument);break;case"UnaryExpression":this.scan(t.argument);break;case"VariableDeclaration":"var"===t.kind?this.useFunctionContext((function(){t.declarations=r.normalizeDeclarations(t),e.scan(t.declarations)})):(t.declarations=r.normalizeDeclarations(t),this.scan(t.declarations));break;case"VariableDeclarator":var o=this.currentContext,s=this.hasState(a.inForLoopInit),u={ast:t,context:o,name:t.id.name,origin:"declaration",inForLoopInit:s,inForLoopTest:null,assignable:o===this.currentFunctionContext||!s&&!o.hasOwnProperty(t.id.name),suggestedType:null,valueType:null,dependencies:null,isSafe:null};o[t.id.name]||(o[t.id.name]=u),this.declarations.push(u),this.scan(t.id),this.scan(t.init);break;case"FunctionExpression":case"FunctionDeclaration":0===this.runningContexts.length?this.scan(t.body):this.functions.push(t);break;case"IfStatement":this.scan(t.test),this.scan(t.consequent),t.alternate&&this.scan(t.alternate);break;case"ForStatement":var l,c=this.newContext((function(){e.pushState(a.inForLoopInit),e.scan(t.init),e.popState(a.inForLoopInit),l=e.getIdentifiers((function(){e.scan(t.test)})),e.scan(t.update),e.newContext((function(){e.scan(t.body)}))}));if(l)for(var h in c)"@contextType"!==h&&l.indexOf(h)>-1&&(c[h].inForLoopTest=!0);break;case"DoWhileStatement":case"WhileStatement":this.newContext((function(){e.scan(t.body),e.scan(t.test)}));break;case"Identifier":this.isState(a.trackIdentifiers)&&this.trackedIdentifiers.push(t.name),this.identifiers.push({context:this.currentContext,declaration:this.getDeclaration(t.name),ast:t});break;case"ReturnStatement":this.returnStatements.push(t),this.scan(t.argument);break;case"MemberExpression":this.pushState(a.memberExpression),this.scan(t.object),this.scan(t.property),this.popState(a.memberExpression);break;case"ExpressionStatement":this.scan(t.expression);break;case"SequenceExpression":this.scan(t.expressions);break;case"CallExpression":this.functionCalls.push({context:this.currentContext,ast:t}),this.scan(t.arguments);break;case"ArrayExpression":this.scan(t.elements);break;case"ConditionalExpression":this.scan(t.test),this.scan(t.alternate),this.scan(t.consequent);break;case"SwitchStatement":this.scan(t.discriminant),this.scan(t.cases);break;case"SwitchCase":this.scan(t.test),this.scan(t.consequent);break;case"ThisExpression":case"Literal":case"DebuggerStatement":case"EmptyStatement":case"BreakStatement":case"ContinueStatement":break;default:throw new Error('unhandled type "'.concat(t.type,'"'))}}}]),t}();e.exports={FunctionTracer:o}},{"../utils":114}],12:[function(t,e,n){var r=t("gl-wiretap").glWiretap,i=t("../../utils").utils;function a(t){return t.toString().replace("=>","").replace(/^function /,"").replace(/utils[.]/g,"/*utils.*/")}function o(t,e,n,o,h){n.built||n.build.apply(n,e),e=e?Array.from(e).map((function(t){switch(typeof t){case"boolean":return new Boolean(t);case"number":return new Number(t);default:return t}})):null;var p=[],f=r(n.context,{useTrackablePrimitives:!0,onReadPixels:function(t){if(P.subKernels){if(d){var e=P.subKernels[m++].property;p.push("    result".concat(isNaN(e)?"."+e:"[".concat(e,"]")," = ").concat(s(t,P),";"))}else p.push("    const result = { result: ".concat(s(t,P)," };")),d=!0;m===P.subKernels.length&&p.push("    return result;")}else t?p.push("    return ".concat(s(t,P),";")):p.push("    return null;")},onUnrecognizedArgumentLookup:function(t){var e=c(t,P.kernelArguments,[],f);if(e)return e;var n=c(t,P.kernelConstants,k?Object.keys(k).map((function(t){return k[t]})):[],f);return n||null}}),d=!1,m=0,v=n.source,y=n.canvas,g=n.output,x=n.pipeline,b=n.graphical,w=n.loopMaxIterations,k=n.constants,S=n.optimizeFloatMemory,T=n.precision,A=n.fixIntegerDivisionAccuracy,E=n.functions,_=n.nativeFunctions,L=n.subKernels,I=n.immutable,C=n.argumentTypes,D=n.constantTypes,O=(n.kernelArguments,n.kernelConstants),F=n.tactic,P=new t(v,{canvas:y,context:f,checkContext:!1,output:g,pipeline:x,graphical:b,loopMaxIterations:w,constants:k,optimizeFloatMemory:S,precision:T,fixIntegerDivisionAccuracy:A,functions:E,nativeFunctions:_,subKernels:L,immutable:I,argumentTypes:C,constantTypes:D,tactic:F}),M=[];if(f.setIndent(2),P.build.apply(P,e),M.push(f.toString()),f.reset(),P.kernelArguments.forEach((function(t,n){switch(t.type){case"Integer":case"Boolean":case"Number":case"Float":case"Array":case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":case"Input":f.insertVariable("uploadValue_".concat(t.name),t.uploadValue);break;case"HTMLImageArray":for(var r=0;r<e[n].length;r++){var i=e[n];f.insertVariable("uploadValue_".concat(t.name,"[").concat(r,"]"),i[r])}break;case"MemoryOptimizedNumberTexture":case"NumberTexture":case"Array1D(2)":case"Array1D(3)":case"Array1D(4)":case"Array2D(2)":case"Array2D(3)":case"Array2D(4)":case"Array3D(2)":case"Array3D(3)":case"Array3D(4)":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":f.insertVariable("uploadValue_".concat(t.name),e[n].texture);break;default:throw new Error("unhandled kernelArgumentType insertion for glWiretap of type ".concat(t.type))}})),M.push("/** start of injected functions **/"),M.push("function ".concat(a(i.flattenTo))),M.push("function ".concat(a(i.flatten2dArrayTo))),M.push("function ".concat(a(i.flatten3dArrayTo))),M.push("function ".concat(a(i.flatten4dArrayTo))),M.push("function ".concat(a(i.isArray))),P.renderOutput!==P.renderTexture&&P.formatValues&&M.push("  const renderOutput = function ".concat(a(P.formatValues),";")),M.push("/** end of injected functions **/"),M.push("  const innerKernel = function (".concat(P.kernelArguments.map((function(t){return t.varName})).join(", "),") {")),f.setIndent(4),P.run.apply(P,e),P.renderKernels?P.renderKernels():P.renderOutput&&P.renderOutput(),M.push("    /** start setup uploads for kernel values **/"),P.kernelArguments.forEach((function(t){M.push("    "+t.getStringValueHandler().split("\n").join("\n    "))})),M.push("    /** end setup uploads for kernel values **/"),M.push(f.toString()),P.renderOutput===P.renderTexture){f.reset();var R=f.getContextVariableName(P.framebuffer);if(P.renderKernels){var N=P.renderKernels(),z=f.getContextVariableName(P.texture.texture);M.push("    return {\n      result: {\n        texture: ".concat(z,",\n        type: '").concat(N.result.type,"',\n        toArray: ").concat(l(N.result,z,R),"\n      },"));for(var V=P.subKernels,j=P.mappedTextures,K=0;K<V.length;K++){var U=j[K],B=V[K],G=N[B.property],W=f.getContextVariableName(U.texture);M.push("\n      ".concat(B.property,": {\n        texture: ").concat(W,",\n        type: '").concat(G.type,"',\n        toArray: ").concat(l(G,W,R),"\n      },"))}M.push("    };")}else{var H=P.renderOutput(),X=f.getContextVariableName(P.texture.texture);M.push("    return {\n        texture: ".concat(X,",\n        type: '").concat(H.type,"',\n        toArray: ").concat(l(H,X,R),"\n      };"))}}M.push("    ".concat(h?"\n"+h+"    ":"")),M.push(p.join("\n")),M.push("  };"),P.graphical&&(M.push(u(P)),M.push("  innerKernel.getPixels = getPixels;")),M.push("  return innerKernel;");var Y=[];return O.forEach((function(t){Y.push("".concat(t.getStringValueHandler()))})),"function kernel(settings) {\n  const { context, constants } = settings;\n  ".concat(Y.join(""),"\n  ").concat(o||"","\n").concat(M.join("\n"),"\n}")}function s(t,e){var n="single"===e.precision?t:"new Float32Array(".concat(t,".buffer)");return e.output[2]?"renderOutput(".concat(n,", ").concat(e.output[0],", ").concat(e.output[1],", ").concat(e.output[2],")"):e.output[1]?"renderOutput(".concat(n,", ").concat(e.output[0],", ").concat(e.output[1],")"):"renderOutput(".concat(n,", ").concat(e.output[0],")")}function u(t){var e=t.getPixels.toString(),n=!/^function/.test(e);return i.flattenFunctionToString("".concat(n?"function ":"").concat(e),{findDependency:function(t,e){return"utils"===t?"const ".concat(e," = ").concat(i[e].toString(),";"):null},thisLookup:function(e){if("context"===e)return null;if(t.hasOwnProperty(e))return JSON.stringify(t[e]);throw new Error("unhandled thisLookup ".concat(e))}})}function l(t,e,n){var r=t.toArray.toString(),a=!/^function/.test(r),o=i.flattenFunctionToString("".concat(a?"function ":"").concat(r),{findDependency:function(e,n){if("utils"===e)return"const ".concat(n," = ").concat(i[n].toString(),";");if("this"===e)return"framebuffer"===n?"":"".concat(a?"function ":"").concat(t[n].toString());throw new Error("unhandled fromObject")},thisLookup:function(n,r){if("texture"===n)return e;if("context"===n)return r?null:"gl";if(t.hasOwnProperty(n))return JSON.stringify(t[n]);throw new Error("unhandled thisLookup ".concat(n))}});return"() => {\n  function framebuffer() { return ".concat(n,"; };\n  ").concat(o,"\n  return toArray();\n  }")}function c(t,e,n,r,i){if(null===t)return null;if(null===e)return null;switch(typeof t){case"boolean":case"number":return null}if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)for(var a=0;a<e.length;a++){var o=e[a];if(("HTMLImageArray"===o.type||!o)&&o.uploadValue===t){var s=n[a].indexOf(t);if(-1!==s){var u="uploadValue_".concat(o.name,"[").concat(s,"]");return r.insertVariable(u,t),u}}}for(var l=0;l<e.length;l++){var c=e[l];if(t===c.uploadValue){var h="uploadValue_".concat(c.name);return r.insertVariable(h,c),h}}return null}e.exports={glKernelString:o}},{"../../utils":114,"gl-wiretap":3}],13:[function(t,e,n){var r=t("../kernel").Kernel,i=t("../../utils").utils,a=t("./texture/array-2-float").GLTextureArray2Float,o=t("./texture/array-2-float-2d").GLTextureArray2Float2D,s=t("./texture/array-2-float-3d").GLTextureArray2Float3D,u=t("./texture/array-3-float").GLTextureArray3Float,l=t("./texture/array-3-float-2d").GLTextureArray3Float2D,f=t("./texture/array-3-float-3d").GLTextureArray3Float3D,v=t("./texture/array-4-float").GLTextureArray4Float,y=t("./texture/array-4-float-2d").GLTextureArray4Float2D,g=t("./texture/array-4-float-3d").GLTextureArray4Float3D,x=t("./texture/float").GLTextureFloat,b=t("./texture/float-2d").GLTextureFloat2D,w=t("./texture/float-3d").GLTextureFloat3D,k=t("./texture/memory-optimized").GLTextureMemoryOptimized,S=t("./texture/memory-optimized-2d").GLTextureMemoryOptimized2D,T=t("./texture/memory-optimized-3d").GLTextureMemoryOptimized3D,A=t("./texture/unsigned").GLTextureUnsigned,E=t("./texture/unsigned-2d").GLTextureUnsigned2D,_=t("./texture/unsigned-3d").GLTextureUnsigned3D,L=t("./texture/graphical").GLTextureGraphical,I=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).transferValues=null,i.formatValues=null,i.TextureConstructor=null,i.renderOutput=null,i.renderRawOutput=null,i.texSize=null,i.translatedSource=null,i.compiledFragmentShader=null,i.compiledVertexShader=null,i.switchingKernels=null,i._textureSwitched=null,i._mappedTextureSwitched=null,i}return m(n,[{key:"setFixIntegerDivisionAccuracy",value:function(t){return this.fixIntegerDivisionAccuracy=t,this}},{key:"setPrecision",value:function(t){return this.precision=t,this}},{key:"setFloatTextures",value:function(t){return i.warnDeprecated("method","setFloatTextures","setOptimizeFloatMemory"),this.floatTextures=t,this}},{key:"checkTextureSize",value:function(){var t=this.constructor.features;if(this.texSize[0]>t.maxTextureSize||this.texSize[1]>t.maxTextureSize)throw new Error("Texture size [".concat(this.texSize[0],",").concat(this.texSize[1],"] generated by kernel is larger than supported size [").concat(t.maxTextureSize,",").concat(t.maxTextureSize,"]"))}},{key:"translateSource",value:function(){throw new Error('"translateSource" not defined on '.concat(this.constructor.name))}},{key:"pickRenderStrategy",value:function(t){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=function(t){return t},this.TextureConstructor=L,null;if("unsigned"===this.precision)if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=_,null):this.output[1]>0?(this.TextureConstructor=E,null):(this.TextureConstructor=A,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=_,this.formatValues=i.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=E,this.formatValues=i.erect2DPackedFloat,null):(this.TextureConstructor=A,this.formatValues=i.erectPackedFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(t)}else{if("single"!==this.precision)throw new Error('unhandled precision of "'.concat(this.precision,'"'));if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=T,null):this.output[1]>0?(this.TextureConstructor=S,null):(this.TextureConstructor=k,null):this.output[2]>0?(this.TextureConstructor=w,null):this.output[1]>0?(this.TextureConstructor=b,null):(this.TextureConstructor=x,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=s,null):this.output[1]>0?(this.TextureConstructor=o,null):(this.TextureConstructor=a,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=f,null):this.output[1]>0?(this.TextureConstructor=l,null):(this.TextureConstructor=u,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=g,null):this.output[1]>0?(this.TextureConstructor=y,null):(this.TextureConstructor=v,null)}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=T,this.formatValues=i.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=S,this.formatValues=i.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=k,this.formatValues=i.erectMemoryOptimizedFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=s,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=o,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=f,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=l,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=g,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=y,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=v,this.formatValues=i.erectArray4,null)}else switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=w,this.formatValues=i.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=b,this.formatValues=i.erect2DFloat,null):(this.TextureConstructor=x,this.formatValues=i.erectFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=s,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=o,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=f,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=l,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=u,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=g,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=y,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=v,this.formatValues=i.erectArray4,null)}}throw new Error('unhandled return type "'.concat(this.returnType,'"'))}},{key:"getKernelString",value:function(){throw new Error("abstract method call")}},{key:"getMainResultTexture",value:function(){switch(this.returnType){case"LiteralInteger":case"Float":case"Integer":case"Number":return this.getMainResultNumberTexture();case"Array(2)":return this.getMainResultArray2Texture();case"Array(3)":return this.getMainResultArray3Texture();case"Array(4)":return this.getMainResultArray4Texture();default:throw new Error("unhandled returnType type ".concat(this.returnType))}}},{key:"getMainResultKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultGraphical",value:function(){throw new Error("abstract method call")}},{key:"getMainResultMemoryOptimizedFloats",value:function(){throw new Error("abstract method call")}},{key:"getMainResultPackedPixels",value:function(){throw new Error("abstract method call")}},{key:"getMainResultString",value:function(){return this.graphical?this.getMainResultGraphical():"single"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}},{key:"getMainResultNumberTexture",value:function(){return i.linesToString(this.getMainResultKernelNumberTexture())+i.linesToString(this.getMainResultSubKernelNumberTexture())}},{key:"getMainResultArray2Texture",value:function(){return i.linesToString(this.getMainResultKernelArray2Texture())+i.linesToString(this.getMainResultSubKernelArray2Texture())}},{key:"getMainResultArray3Texture",value:function(){return i.linesToString(this.getMainResultKernelArray3Texture())+i.linesToString(this.getMainResultSubKernelArray3Texture())}},{key:"getMainResultArray4Texture",value:function(){return i.linesToString(this.getMainResultKernelArray4Texture())+i.linesToString(this.getMainResultSubKernelArray4Texture())}},{key:"getFloatTacticDeclaration",value:function(){var t=this.getVariablePrecisionString(this.texSize,this.tactic);return"precision ".concat(t," float;\n")}},{key:"getIntTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic,!0)," int;\n")}},{key:"getSampler2DTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2D;\n")}},{key:"getSampler2DArrayTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2DArray;\n")}},{key:"renderTexture",value:function(){return this.immutable?this.texture.clone():this.texture}},{key:"readPackedPixelsToUint8Array",value:function(){if("unsigned"!==this.precision)throw new Error('Requires this.precision to be "unsigned"');var t=this.texSize,e=this.context,n=new Uint8Array(t[0]*t[1]*4);return e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,n),n}},{key:"readPackedPixelsToFloat32Array",value:function(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}},{key:"readFloatPixelsToFloat32Array",value:function(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');var t=this.texSize,e=this.context,n=t[0],r=t[1],i=new Float32Array(n*r*4);return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,i),i}},{key:"getPixels",value:function(t){var e=this.context,n=this.output,r=p(n,2),a=r[0],o=r[1],s=new Uint8Array(a*o*4);return e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,s),new Uint8ClampedArray((t?s:i.flipPixels(s,a,o)).buffer)}},{key:"renderKernelsToArrays",value:function(){for(var t={result:this.renderOutput()},e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].toArray();return t}},{key:"renderKernelsToTextures",value:function(){var t={result:this.renderOutput()};if(this.immutable)for(var e=0;e<this.subKernels.length;e++)t[this.subKernels[e].property]=this.mappedTextures[e].clone();else for(var n=0;n<this.subKernels.length;n++)t[this.subKernels[n].property]=this.mappedTextures[n];return t}},{key:"resetSwitchingKernels",value:function(){var t=this.switchingKernels;return this.switchingKernels=null,t}},{key:"setOutput",value:function(t){var e=this.toKernelOutput(t);if(this.program){if(!this.dynamicOutput)throw new Error("Resizing a kernel with dynamicOutput: false is not possible");var n=[e[0],e[1]||1,e[2]||1],r=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},n),a=this.texSize;if(a){var o=this.getVariablePrecisionString(a,this.tactic),s=this.getVariablePrecisionString(r,this.tactic);if(o!==s)return this.debug&&console.warn("Precision requirement changed, asking GPU instance to recompile"),void this.switchKernels({type:"outputPrecisionMismatch",precision:s,needed:t})}this.output=e,this.threadDim=n,this.texSize=r;var u=this.context;if(u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],u.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this.texture&&this.texture.delete(),this.texture=null,this._setupOutputTexture(),this.mappedTextures&&this.mappedTextures.length>0){for(var l=0;l<this.mappedTextures.length;l++)this.mappedTextures[l].delete();this.mappedTextures=null,this._setupSubOutputTextures()}}else this.output=e;return this}},{key:"renderValues",value:function(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}},{key:"switchKernels",value:function(t){this.switchingKernels?this.switchingKernels.push(t):this.switchingKernels=[t]}},{key:"getVariablePrecisionString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.texSize,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tactic,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e){if(!this.constructor.features.isSpeedTacticSupported)return"highp";var r=this.constructor.features[n?"lowIntPrecision":"lowFloatPrecision"],i=this.constructor.features[n?"mediumIntPrecision":"mediumFloatPrecision"],a=this.constructor.features[n?"highIntPrecision":"highFloatPrecision"],o=Math.log2(t[0]*t[1]);if(o<=r.rangeMax)return"lowp";if(o<=i.rangeMax)return"mediump";if(o<=a.rangeMax)return"highp";throw new Error("The required size exceeds that of the ability of your system")}switch(e){case"speed":return"lowp";case"balanced":return"mediump";case"precision":return"highp";default:throw new Error('Unknown tactic "'.concat(e,'" use "speed", "balanced", "precision", or empty for auto'))}}},{key:"updateTextureArgumentRefs",value:function(t,e){if(this.immutable)if(this.texture.texture===e.texture){var n=t.prevArg;n&&(1===n.texture._refs&&(this.texture.delete(),this.texture=n.clone(),this._textureSwitched=!0),n.delete()),t.prevArg=e.clone()}else if(this.mappedTextures&&this.mappedTextures.length>0)for(var r=this.mappedTextures,i=0;i<r.length;i++){var a=r[i];if(a.texture===e.texture){var o=t.prevArg;return o&&(1===o.texture._refs&&(a.delete(),r[i]=o.clone(),this._mappedTextureSwitched[i]=!0),o.delete()),void(t.prevArg=e.clone())}}}},{key:"onActivate",value:function(t){if(this._textureSwitched=!0,this.texture=t.texture,this.mappedTextures){for(var e=0;e<this.mappedTextures.length;e++)this._mappedTextureSwitched[e]=!0;this.mappedTextures=t.mappedTextures}}},{key:"initCanvas",value:function(){}}],[{key:"mode",get:function(){return"gpu"}},{key:"getIsFloatRead",value:function(){var t=new this("function kernelFunction() {\n      return 1;\n    }",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:"single",returnType:"Number",tactic:"speed"});t.build(),t.run();var e=t.renderOutput();return t.destroy(!0),1===e[0]}},{key:"getIsIntegerDivisionAccurate",value:function(){function t(t,e){return t[this.thread.x]/e[this.thread.x]}var e=new this(t.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[6,6030401],[3,3991]];e.build.apply(e,n),e.run.apply(e,n);var r=e.renderOutput();return e.destroy(!0),2===r[0]&&1511===r[1]}},{key:"getIsSpeedTacticSupported",value:function(){function t(t){return t[this.thread.x]}var e=new this(t.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[4],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[0,1,2,3]];e.build.apply(e,n),e.run.apply(e,n);var r=e.renderOutput();return e.destroy(!0),0===Math.round(r[0])&&1===Math.round(r[1])&&2===Math.round(r[2])&&3===Math.round(r[3])}},{key:"testCanvas",get:function(){throw new Error('"testCanvas" not defined on '.concat(this.name))}},{key:"testContext",get:function(){throw new Error('"testContext" not defined on '.concat(this.name))}},{key:"getFeatures",value:function(){var t=this.testContext,e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}},{key:"setupFeatureChecks",value:function(){throw new Error('"setupFeatureChecks" not defined on '.concat(this.name))}},{key:"getSignature",value:function(t,e){return t.getVariablePrecisionString()+(e.length>0?":"+e.join(","):"")}},{key:"nativeFunctionArguments",value:function(t){for(var e=[],n=[],r=[],i=/^[a-zA-Z_]/,a=/[a-zA-Z_0-9]/,o=0,s=null,u=null;o<t.length;){var l=t[o],c=t[o+1],h=r.length>0?r[r.length-1]:null;if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"*"!==c)if("MULTI_LINE_COMMENT"!==h||"*"!==l||"/"!==c)if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"/"!==c)if("COMMENT"!==h||"\n"!==l)if(null!==h||"("!==l){if("FUNCTION_ARGUMENTS"===h){if(")"===l){r.pop();break}if("f"===l&&"l"===c&&"o"===t[o+2]&&"a"===t[o+3]&&"t"===t[o+4]&&" "===t[o+5]){r.push("DECLARE_VARIABLE"),u="float",s="",o+=6;continue}if("i"===l&&"n"===c&&"t"===t[o+2]&&" "===t[o+3]){r.push("DECLARE_VARIABLE"),u="int",s="",o+=4;continue}if("v"===l&&"e"===c&&"c"===t[o+2]&&"2"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec2",s="",o+=5;continue}if("v"===l&&"e"===c&&"c"===t[o+2]&&"3"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec3",s="",o+=5;continue}if("v"===l&&"e"===c&&"c"===t[o+2]&&"4"===t[o+3]&&" "===t[o+4]){r.push("DECLARE_VARIABLE"),u="vec4",s="",o+=5;continue}}else if("DECLARE_VARIABLE"===h){if(""===s){if(" "===l){o++;continue}if(!i.test(l))throw new Error("variable name is not expected string")}s+=l,a.test(c)||(r.pop(),n.push(s),e.push(C[u]))}o++}else r.push("FUNCTION_ARGUMENTS"),o++;else r.pop(),o++;else r.push("COMMENT"),o+=2;else r.pop(),o+=2;else r.push("MULTI_LINE_COMMENT"),o+=2}if(r.length>0)throw new Error("GLSL function was not parsable");return{argumentNames:n,argumentTypes:e}}},{key:"nativeFunctionReturnType",value:function(t){return C[t.match(/int|float|vec[2-4]/)[0]]}},{key:"combineKernels",value:function(t,e){t.apply(null,arguments);var n,r=e.texSize,a=r.texSize,o=r.context,s=r.threadDim;if("single"===e.precision){var u=a[0],l=Math.ceil(a[1]/4);n=new Float32Array(u*l*4*4),o.readPixels(0,0,u,4*l,o.RGBA,o.FLOAT,n)}else{var c=new Uint8Array(a[0]*a[1]*4);o.readPixels(0,0,a[0],a[1],o.RGBA,o.UNSIGNED_BYTE,c),n=new Float32Array(c.buffer)}return n=n.subarray(0,s[0]*s[1]*s[2]),1===e.output.length?n:2===e.output.length?i.splitArray(n,e.output[0]):3===e.output.length?i.splitArray(n,e.output[0]*e.output[1]).map((function(t){return i.splitArray(t,e.output[0])})):void 0}}]),n}(r),C={int:"Integer",float:"Number",vec2:"Array(2)",vec3:"Array(3)",vec4:"Array(4)"};e.exports={GLKernel:I}},{"../../utils":114,"../kernel":36,"./texture/array-2-float":16,"./texture/array-2-float-2d":14,"./texture/array-2-float-3d":15,"./texture/array-3-float":19,"./texture/array-3-float-2d":17,"./texture/array-3-float-3d":18,"./texture/array-4-float":22,"./texture/array-4-float-2d":20,"./texture/array-4-float-3d":21,"./texture/float":25,"./texture/float-2d":23,"./texture/float-3d":24,"./texture/graphical":26,"./texture/memory-optimized":30,"./texture/memory-optimized-2d":28,"./texture/memory-optimized-3d":29,"./texture/unsigned":33,"./texture/unsigned-2d":31,"./texture/unsigned-3d":32}],14:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float2D:i}},{"../../../utils":114,"./float":25}],15:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float3D:i}},{"../../../utils":114,"./float":25}],16:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(2)",r}return m(n,[{key:"toArray",value:function(){return r.erectArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray2Float:i}},{"../../../utils":114,"./float":25}],17:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float2D:i}},{"../../../utils":114,"./float":25}],18:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float3D:i}},{"../../../utils":114,"./float":25}],19:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(3)",r}return m(n,[{key:"toArray",value:function(){return r.erectArray3(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray3Float:i}},{"../../../utils":114,"./float":25}],20:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float2D:i}},{"../../../utils":114,"./float":25}],21:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float3D:i}},{"../../../utils":114,"./float":25}],22:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return r.erectArray4(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureArray4Float:i}},{"../../../utils":114,"./float":25}],23:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return m(n,[{key:"toArray",value:function(){return r.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureFloat2D:i}},{"../../../utils":114,"./float":25}],24:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return m(n,[{key:"toArray",value:function(){return r.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureFloat3D:i}},{"../../../utils":114,"./float":25}],25:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(1)",r}return m(n,[{key:"textureType",get:function(){return this.context.FLOAT}},{key:"renderRawOutput",value:function(){var t=this.context,e=this.size;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);var n=new Float32Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.FLOAT,n),n}},{key:"renderValues",value:function(){return this._deleted?null:this.renderRawOutput()}},{key:"toArray",value:function(){return r.erectFloat(this.renderValues(),this.output[0])}}]),n}(t("./index").GLTexture);e.exports={GLTextureFloat:i}},{"../../../utils":114,"./index":27}],26:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="ArrayTexture(4)",r}return m(n,[{key:"toArray",value:function(){return this.renderValues()}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureGraphical:r}},{"./unsigned":33}],27:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"textureType",get:function(){throw new Error('"textureType" not implemented on '.concat(this.name))}},{key:"clone",value:function(){return new this.constructor(this)}},{key:"beforeMutate",value:function(){return this.texture._refs>1&&(this.newTexture(),!0)}},{key:"cloneTexture",value:function(){this.texture._refs--;var t=this.context,e=this.size,n=this.texture;this.kernel.debug&&console.warn("cloning internal texture"),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),i(t,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var r=t.createTexture();i(t,r),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),t.copyTexSubImage2D(t.TEXTURE_2D,0,0,0,0,0,e[0],e[1]),r._refs=1,this.texture=r}},{key:"newTexture",value:function(){this.texture._refs--;var t=this.context,e=this.size;this.kernel.debug&&console.warn("new internal texture");var n=t.createTexture();i(t,n),t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,e[0],e[1],0,this.textureFormat,this.textureType,null),n._refs=1,this.texture=n}},{key:"clear",value:function(){if(this.texture._refs){this.texture._refs--;var t=this.context,e=this.texture=t.createTexture();i(t,e);var n=this.size;e._refs=1,t.texImage2D(t.TEXTURE_2D,0,this.internalFormat,n[0],n[1],0,this.textureFormat,this.textureType,null)}var r=this.context,a=this.texture;r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer()),r.bindTexture(r.TEXTURE_2D,a),i(r,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)}},{key:"delete",value:function(){this._deleted||(this._deleted=!0,this.texture._refs&&(this.texture._refs--,this.texture._refs)||this.context.deleteTexture(this.texture))}},{key:"framebuffer",value:function(){return this._framebuffer||(this._framebuffer=this.kernel.getRawValueFramebuffer(this.size[0],this.size[1])),this._framebuffer}}]),n}(t("../../../texture").Texture);function i(t,e){t.activeTexture(t.TEXTURE15),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}e.exports={GLTexture:r}},{"../../../texture":113}],28:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized2D:i}},{"../../../utils":114,"./float":25}],29:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized3D:i}},{"../../../utils":114,"./float":25}],30:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="MemoryOptimizedNumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}]),n}(t("./float").GLTextureFloat);e.exports={GLTextureMemoryOptimized:i}},{"../../../utils":114,"./float":25}],31:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="NumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureUnsigned2D:i}},{"../../../utils":114,"./unsigned":33}],32:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="NumberTexture",r}return m(n,[{key:"toArray",value:function(){return r.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(t("./unsigned").GLTextureUnsigned);e.exports={GLTextureUnsigned3D:i}},{"../../../utils":114,"./unsigned":33}],33:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).type="NumberTexture",r}return m(n,[{key:"textureType",get:function(){return this.context.UNSIGNED_BYTE}},{key:"renderRawOutput",value:function(){var t=this.context;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer()),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);var e=new Uint8Array(this.size[0]*this.size[1]*4);return t.readPixels(0,0,this.size[0],this.size[1],t.RGBA,t.UNSIGNED_BYTE,e),e}},{key:"renderValues",value:function(){return this._deleted?null:new Float32Array(this.renderRawOutput().buffer)}},{key:"toArray",value:function(){return r.erectPackedFloat(this.renderValues(),this.output[0])}}]),n}(t("./index").GLTexture);e.exports={GLTextureUnsigned:i}},{"../../../utils":114,"./index":27}],34:[function(t,e,n){var r=t("gl"),i=t("../web-gl/kernel").WebGLKernel,a=t("../gl/kernel-string").glKernelString,o=null,s=null,p=null,f=null,v=null,y=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"initCanvas",value:function(){return{}}},{key:"initContext",value:function(){return r(2,2,{preserveDrawingBuffer:!0})}},{key:"initExtensions",value:function(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:this.context.getExtension("STACKGL_destroy_context"),OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers")}}},{key:"build",value:function(){u(l(n.prototype),"build",this).apply(this,arguments),this.fallbackRequested||this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}},{key:"destroyExtensions",value:function(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toString",value:function(){var t="const gl = context || require('gl')(1, 1);\n",e="    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n";return a(this.constructor,arguments,this,t,e)}},{key:"setOutput",value:function(t){return u(l(n.prototype),"setOutput",this).call(this,t),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]),this}}],[{key:"isSupported",get:function(){return null!==o?o:(this.setupFeatureChecks(),o=null!==p)}},{key:"setupFeatureChecks",value:function(){if(s=null,f=null,"function"===typeof r)try{if(!(p=r(2,2,{preserveDrawingBuffer:!0}))||!p.getExtension)return;f={STACKGL_resize_drawingbuffer:p.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:p.getExtension("STACKGL_destroy_context"),OES_texture_float:p.getExtension("OES_texture_float"),OES_texture_float_linear:p.getExtension("OES_texture_float_linear"),OES_element_index_uint:p.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:p.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:p.getExtension("WEBGL_color_buffer_float")},v=this.getFeatures()}catch(t){console.warn(t)}}},{key:"isContextMatch",value:function(t){try{return"ANGLE"===t.getParameter(t.RENDERER)}catch(e){return!1}}},{key:"getIsTextureFloat",value:function(){return Boolean(f.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(f.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return f.WEBGL_draw_buffers?p.getParameter(f.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return p.getParameter(p.MAX_TEXTURE_SIZE)}},{key:"testCanvas",get:function(){return s}},{key:"testContext",get:function(){return p}},{key:"features",get:function(){return v}},{key:"destroyContext",value:function(t){var e=t.getExtension("STACKGL_destroy_context");e&&e.destroy&&e.destroy()}}]),n}(i);e.exports={HeadlessGLKernel:y}},{"../gl/kernel-string":12,"../web-gl/kernel":70,gl:2}],35:[function(t,e,n){var r=function(){function t(e,n){d(this,t);var r=n.name,i=n.kernel,a=n.context,o=n.checkContext,s=n.onRequestContextHandle,u=n.onUpdateValueMismatch,l=n.origin,c=n.strictIntegers,h=n.type,p=n.tactic;if(!r)throw new Error("name not set");if(!h)throw new Error("type not set");if(!l)throw new Error("origin not set");if("user"!==l&&"constants"!==l)throw new Error('origin must be "user" or "constants" value is "'.concat(l,'"'));if(!s)throw new Error("onRequestContextHandle is not set");this.name=r,this.origin=l,this.tactic=p,this.varName="constants"===l?"constants.".concat(r):r,this.kernel=i,this.strictIntegers=c,this.type=e.type||h,this.size=e.size||null,this.index=null,this.context=a,this.checkContext=null===o||void 0===o||o,this.contextHandle=null,this.onRequestContextHandle=s,this.onUpdateValueMismatch=u,this.forceUploadEachRun=null}return m(t,[{key:"id",get:function(){return"".concat(this.origin,"_").concat(name)}},{key:"getSource",value:function(){throw new Error('"getSource" not defined on '.concat(this.constructor.name))}},{key:"updateValue",value:function(t){throw new Error('"updateValue" not defined on '.concat(this.constructor.name))}}]),t}();e.exports={KernelValue:r}},{}],36:[function(t,e,n){var r=t("../utils").utils,i=t("../input").Input,a=function(){function t(e,n){if(d(this,t),"object"!==typeof e){if("string"!==typeof e)throw new Error("source not a string");if(!r.isFunctionString(e))throw new Error("source not a function string")}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames="string"===typeof e?r.getArgumentNamesFromString(e):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.forceUploadKernelConstants=null,this.source=e,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!1,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.injectedNative=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.tactic=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.built=!1,this.signature=null}return m(t,[{key:"mergeSettings",value:function(t){for(var e in t)if(t.hasOwnProperty(e)&&this.hasOwnProperty(e)){switch(e){case"output":if(!Array.isArray(t.output)){this.setOutput(t.output);continue}break;case"functions":this.functions=[];for(var n=0;n<t.functions.length;n++)this.addFunction(t.functions[n]);continue;case"graphical":t[e]&&!t.hasOwnProperty("precision")&&(this.precision="unsigned"),this[e]=t[e];continue;case"nativeFunctions":if(!t.nativeFunctions)continue;this.nativeFunctions=[];for(var r=0;r<t.nativeFunctions.length;r++){var i=t.nativeFunctions[r],a=i.name,o=i.source;this.addNativeFunction(a,o,i)}continue}this[e]=t[e]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(t))}},{key:"build",value:function(){throw new Error('"build" not defined on '.concat(this.constructor.name))}},{key:"run",value:function(){throw new Error('"run" not defined on '.concat(this.constructor.name))}},{key:"initCanvas",value:function(){throw new Error('"initCanvas" not defined on '.concat(this.constructor.name))}},{key:"initContext",value:function(){throw new Error('"initContext" not defined on '.concat(this.constructor.name))}},{key:"initPlugins",value:function(t){throw new Error('"initPlugins" not defined on '.concat(this.constructor.name))}},{key:"addFunction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.name&&t.source&&t.argumentTypes&&"returnType"in t)this.functions.push(t);else if("settings"in t&&"source"in t)this.functions.push(this.functionToIGPUFunction(t.source,t.settings));else{if("string"!==typeof t&&"function"!==typeof t)throw new Error("function not properly defined");this.functions.push(this.functionToIGPUFunction(t,e))}return this}},{key:"addNativeFunction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.argumentTypes?o(n.argumentTypes):this.constructor.nativeFunctionArguments(e)||{},i=r.argumentTypes,a=r.argumentNames;return this.nativeFunctions.push({name:t,source:e,settings:n,argumentTypes:i,argumentNames:a,returnType:n.returnType||this.constructor.nativeFunctionReturnType(e)}),this}},{key:"setupArguments",value:function(t){if(this.kernelArguments=[],this.argumentTypes)for(var e=0;e<this.argumentTypes.length;e++)this.kernelArguments.push({type:this.argumentTypes[e]});else if(!this.argumentTypes){this.argumentTypes=[];for(var n=0;n<t.length;n++){var a=r.getVariableType(t[n],this.strictIntegers),o="Integer"===a?"Number":a;this.argumentTypes.push(o),this.kernelArguments.push({type:o})}}this.argumentSizes=new Array(t.length),this.argumentBitRatios=new Int32Array(t.length);for(var s=0;s<t.length;s++){var u=t[s];this.argumentSizes[s]=u.constructor===i?u.size:null,this.argumentBitRatios[s]=this.getBitRatio(u)}if(this.argumentNames.length!==t.length)throw new Error("arguments are miss-aligned")}},{key:"setupConstants",value:function(){this.kernelConstants=[];var t=null===this.constantTypes;if(t&&(this.constantTypes={}),this.constantBitRatios={},this.constants)for(var e in this.constants){if(t){var n=r.getVariableType(this.constants[e],this.strictIntegers);this.constantTypes[e]=n,this.kernelConstants.push({name:e,type:n})}else this.kernelConstants.push({name:e,type:this.constantTypes[e]});this.constantBitRatios[e]=this.getBitRatio(this.constants[e])}}},{key:"setOptimizeFloatMemory",value:function(t){return this.optimizeFloatMemory=t,this}},{key:"toKernelOutput",value:function(t){return t.hasOwnProperty("x")?t.hasOwnProperty("y")?t.hasOwnProperty("z")?[t.x,t.y,t.z]:[t.x,t.y]:[t.x]:t}},{key:"setOutput",value:function(t){return this.output=this.toKernelOutput(t),this}},{key:"setDebug",value:function(t){return this.debug=t,this}},{key:"setGraphical",value:function(t){return this.graphical=t,this.precision="unsigned",this}},{key:"setLoopMaxIterations",value:function(t){return this.loopMaxIterations=t,this}},{key:"setConstants",value:function(t){return this.constants=t,this}},{key:"setConstantTypes",value:function(t){return this.constantTypes=t,this}},{key:"setFunctions",value:function(t){for(var e=0;e<t.length;e++)this.addFunction(t[e]);return this}},{key:"setNativeFunctions",value:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.name,i=n.source;this.addNativeFunction(r,i,n)}return this}},{key:"setInjectedNative",value:function(t){return this.injectedNative=t,this}},{key:"setPipeline",value:function(t){return this.pipeline=t,this}},{key:"setPrecision",value:function(t){return this.precision=t,this}},{key:"setDimensions",value:function(t){return r.warnDeprecated("method","setDimensions","setOutput"),this.output=t,this}},{key:"setOutputToTexture",value:function(t){return r.warnDeprecated("method","setOutputToTexture","setPipeline"),this.pipeline=t,this}},{key:"setImmutable",value:function(t){return this.immutable=t,this}},{key:"setCanvas",value:function(t){return this.canvas=t,this}},{key:"setStrictIntegers",value:function(t){return this.strictIntegers=t,this}},{key:"setDynamicOutput",value:function(t){return this.dynamicOutput=t,this}},{key:"setHardcodeConstants",value:function(t){return r.warnDeprecated("method","setHardcodeConstants"),this.setDynamicOutput(t),this.setDynamicArguments(t),this}},{key:"setDynamicArguments",value:function(t){return this.dynamicArguments=t,this}},{key:"setUseLegacyEncoder",value:function(t){return this.useLegacyEncoder=t,this}},{key:"setWarnVarUsage",value:function(t){return r.warnDeprecated("method","setWarnVarUsage"),this}},{key:"getCanvas",value:function(){return r.warnDeprecated("method","getCanvas"),this.canvas}},{key:"getWebGl",value:function(){return r.warnDeprecated("method","getWebGl"),this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"setArgumentTypes",value:function(t){if(Array.isArray(t))this.argumentTypes=t;else for(var e in this.argumentTypes=[],t)if(t.hasOwnProperty(e)){var n=this.argumentNames.indexOf(e);if(-1===n)throw new Error("unable to find argument ".concat(e));this.argumentTypes[n]=t[e]}return this}},{key:"setTactic",value:function(t){return this.tactic=t,this}},{key:"requestFallback",value:function(t){if(!this.onRequestFallback)throw new Error('"onRequestFallback" not defined on '.concat(this.constructor.name));return this.fallbackRequested=!0,this.onRequestFallback(t)}},{key:"validateSettings",value:function(){throw new Error('"validateSettings" not defined on '.concat(this.constructor.name))}},{key:"addSubKernel",value:function(t){if(null===this.subKernels&&(this.subKernels=[]),!t.source)throw new Error('subKernel missing "source" property');if(!t.property&&isNaN(t.property))throw new Error('subKernel missing "property" property');if(!t.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(t),this}},{key:"destroy",value:function(t){throw new Error('"destroy" called on '.concat(this.constructor.name))}},{key:"getBitRatio",value:function(t){if("single"===this.precision)return 4;if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"getPixels",value:function(t){throw new Error('"getPixels" called on '.concat(this.constructor.name))}},{key:"checkOutput",value:function(){if(!this.output||!r.isArray(this.output))throw new Error("kernel.output not an array");if(this.output.length<1)throw new Error("kernel.output is empty, needs at least 1 value");for(var t=0;t<this.output.length;t++)if(isNaN(this.output[t])||this.output[t]<1)throw new Error("".concat(this.constructor.name,".output[").concat(t,"] incorrectly defined as `").concat(this.output[t],"`, needs to be numeric, and greater than 0"))}},{key:"prependString",value:function(t){throw new Error('"prependString" called on '.concat(this.constructor.name))}},{key:"hasPrependString",value:function(t){throw new Error('"hasPrependString" called on '.concat(this.constructor.name))}},{key:"toJSON",value:function(){return{settings:{output:this.output,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map((function(t){return t.name})):null,returnType:this.returnType}}}},{key:"buildSignature",value:function(t){var e=this.constructor;this.signature=e.getSignature(this,e.getArgumentTypes(this,t))}},{key:"functionToIGPUFunction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof t&&"function"!==typeof t)throw new Error("source not a string or function");var n="string"===typeof t?t:t.toString(),i=[];return i=Array.isArray(e.argumentTypes)?e.argumentTypes:"object"===typeof e.argumentTypes?r.getArgumentNamesFromString(n).map((function(t){return e.argumentTypes[t]}))||[]:e.argumentTypes||[],{name:r.getFunctionNameFromString(n)||null,source:n,argumentTypes:i,returnType:e.returnType||null}}},{key:"onActivate",value:function(t){}}],[{key:"isSupported",get:function(){throw new Error('"isSupported" not implemented on '.concat(this.name))}},{key:"isContextMatch",value:function(t){throw new Error('"isContextMatch" not implemented on '.concat(this.name))}},{key:"getFeatures",value:function(){throw new Error('"getFeatures" not implemented on '.concat(this.name))}},{key:"destroyContext",value:function(t){throw new Error('"destroyContext" called on '.concat(this.name))}},{key:"nativeFunctionArguments",value:function(){throw new Error('"nativeFunctionArguments" called on '.concat(this.name))}},{key:"nativeFunctionReturnType",value:function(){throw new Error('"nativeFunctionReturnType" called on '.concat(this.name))}},{key:"combineKernels",value:function(){throw new Error('"combineKernels" called on '.concat(this.name))}},{key:"getArgumentTypes",value:function(t,e){for(var n=new Array(e.length),i=0;i<e.length;i++){var a=e[i],o=t.argumentTypes[i];if(a.type)n[i]=a.type;else switch(o){case"Number":case"Integer":case"Float":case"ArrayTexture(1)":n[i]=r.getVariableType(a);break;default:n[i]=o}}return n}},{key:"getSignature",value:function(t,e){throw new Error('"getSignature" not implemented on '.concat(this.name))}}]),t}();function o(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;r++){var i=e[r];n.push(t[i])}return{argumentTypes:n,argumentNames:e}}e.exports={Kernel:a}},{"../input":110,"../utils":114}],37:[function(t,e,n){var r="__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nfloat acosh(float x) {\n  return log(x + sqrt(x * x - 1.0));\n}\n\nfloat sinh(float x) {\n  return (pow(".concat(Math.E,", x) - pow(").concat(Math.E,", -x)) / 2.0;\n}\n\nfloat asinh(float x) {\n  return log(x + sqrt(x * x + 1.0));\n}\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat atanh(float x) {\n  x = (x + 1.0) / (x - 1.0);\n  if (x < 0.0) {\n    return 0.5 * log(-x);\n  }\n  return 0.5 * log(x);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat cosh(float x) {\n  return (pow(").concat(Math.E,", x) + pow(").concat(Math.E,", -x)) / 2.0; \n}\n\nfloat expm1(float x) {\n  return pow(").concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat tanh(float x) {\n  float e = exp(2.0 * x);\n  return (e - 1.0) / (e + 1.0);\n}\n\nfloat trunc(float x) {\n  if (x >= 0.0) {\n    return floor(x); \n  } else {\n    return ceil(x);\n  }\n}\n\nvec4 _round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(_round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n  \n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");e.exports={fragmentShader:r}},{}],38:[function(t,e,n){var r=t("../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),i=e.call(this,t,r),r&&r.hasOwnProperty("fixIntegerDivisionAccuracy")&&(i.fixIntegerDivisionAccuracy=r.fixIntegerDivisionAccuracy),i}return m(n,[{key:"astConditionalExpression",value:function(t,e){if("ConditionalExpression"!==t.type)throw this.astErrorOutput("Not a conditional expression",t);var n=this.getType(t.consequent),r=this.getType(t.alternate);return null===n&&null===r?(e.push("if ("),this.astGeneric(t.test,e),e.push(") {"),this.astGeneric(t.consequent,e),e.push(";"),e.push("} else {"),this.astGeneric(t.alternate,e),e.push(";"),e.push("}"),e):(e.push("("),this.astGeneric(t.test,e),e.push("?"),this.astGeneric(t.consequent,e),e.push(":"),this.astGeneric(t.alternate,e),e.push(")"),e)}},{key:"astFunction",value:function(t,e){if(this.isRootKernel)e.push("void");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(t.body),"LiteralInteger"===this.returnType&&(this.returnType="Number"));var n=this.returnType;if(n){var i=a[n];if(!i)throw new Error("unknown type ".concat(n));e.push(i)}else e.push("void")}if(e.push(" "),e.push(this.name),e.push("("),!this.isRootKernel)for(var o=0;o<this.argumentNames.length;++o){var s=this.argumentNames[o];o>0&&e.push(", ");var u=this.argumentTypes[this.argumentNames.indexOf(s)];if(!u)throw this.astErrorOutput("Unknown argument ".concat(s," type"),t);"LiteralInteger"===u&&(this.argumentTypes[o]=u="Number");var l=a[u];if(!l)throw this.astErrorOutput("Unexpected expression",t);var c=r.sanitizeName(s);"sampler2D"===l||"sampler2DArray"===l?e.push("".concat(l," user_").concat(c,",ivec2 user_").concat(c,"Size,ivec3 user_").concat(c,"Dim")):e.push("".concat(l," user_").concat(c))}e.push(") {\n");for(var h=0;h<t.body.body.length;++h)this.astGeneric(t.body.body[h],e),e.push("\n");return e.push("}\n"),e}},{key:"astReturnStatement",value:function(t,e){if(!t.argument)throw this.astErrorOutput("Unexpected return statement",t);this.pushState("skip-literal-correction");var n=this.getType(t.argument);this.popState("skip-literal-correction");var r=[];switch(this.returnType||(this.returnType="LiteralInteger"===n||"Integer"===n?"Number":n),this.returnType){case"LiteralInteger":case"Number":case"Float":switch(n){case"Integer":r.push("float("),this.astGeneric(t.argument,r),r.push(")");break;case"LiteralInteger":this.castLiteralToFloat(t.argument,r),"Integer"===this.getType(t)&&(r.unshift("float("),r.push(")"));break;default:this.astGeneric(t.argument,r)}break;case"Integer":switch(n){case"Float":case"Number":this.castValueToInteger(t.argument,r);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,r);break;default:this.astGeneric(t.argument,r)}break;case"Array(4)":case"Array(3)":case"Array(2)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":case"Input":this.astGeneric(t.argument,r);break;default:throw this.astErrorOutput("unhandled return type ".concat(this.returnType),t)}return this.isRootKernel?(e.push("kernelResult = ".concat(r.join(""),";")),e.push("return;")):this.isSubKernel?(e.push("subKernelResult_".concat(this.name," = ").concat(r.join(""),";")),e.push("return subKernelResult_".concat(this.name,";"))):e.push("return ".concat(r.join(""),";")),e}},{key:"astLiteral",value:function(t,e){if(isNaN(t.value))throw this.astErrorOutput("Non-numeric literal not supported : "+t.value,t);var n=this.astKey(t);return Number.isInteger(t.value)?this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push("".concat(t.value))):(this.isState("casting-to-float")||this.isState("building-float"),this.literalTypes[n]="Number",e.push("".concat(t.value,".0"))):this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",e.push(Math.round(t.value))):(this.literalTypes[n]="Number",e.push("".concat(t.value))),e}},{key:"astBinaryExpression",value:function(t,e){if(this.checkAndUpconvertOperator(t,e))return e;if(this.fixIntegerDivisionAccuracy&&"/"===t.operator){switch(e.push("divWithIntCheck("),this.pushState("building-float"),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(", "),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return this.popState("building-float"),e.push(")"),e}e.push("(");var n=this.getType(t.left)||"Number",r=this.getType(t.right)||"Number";if(!n||!r)throw this.astErrorOutput("Unhandled binary expression",t);var i=n+" & "+r;switch(i){case"Integer & Integer":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Number & Float":case"Float & Number":case"Float & Float":case"Number & Number":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break;case"LiteralInteger & LiteralInteger":this.isState("casting-to-integer")||this.isState("building-integer")?(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.castLiteralToFloat(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float"));break;case"Integer & Float":case"Integer & Number":if((">"===t.operator||"<"===t.operator&&"Literal"===t.right.type)&&!Number.isInteger(t.right.value)){this.pushState("building-float"),this.castValueToFloat(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-float");break}if(this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.pushState("casting-to-integer"),"Literal"===t.right.type){var a=[];if(this.astGeneric(t.right,a),"Integer"!==this.getType(t.right))throw this.astErrorOutput("Unhandled binary expression with literal",t);e.push(a.join(""))}else e.push("int("),this.astGeneric(t.right,e),e.push(")");this.popState("casting-to-integer"),this.popState("building-integer");break;case"Integer & LiteralInteger":this.pushState("building-integer"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToInteger(t.right,e),this.popState("building-integer");break;case"Number & Integer":case"Float & Integer":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castValueToFloat(t.right,e),this.popState("building-float");break;case"Float & LiteralInteger":case"Number & LiteralInteger":this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.castLiteralToFloat(t.right,e),this.popState("building-float");break;case"LiteralInteger & Float":case"LiteralInteger & Number":this.isState("casting-to-integer")?(this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(o[t.operator]||t.operator),this.castValueToInteger(t.right,e),this.popState("building-integer")):(this.pushState("building-float"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.pushState("casting-to-float"),this.astGeneric(t.right,e),this.popState("casting-to-float"),this.popState("building-float"));break;case"LiteralInteger & Integer":this.pushState("building-integer"),this.castLiteralToInteger(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-integer");break;case"Boolean & Boolean":this.pushState("building-boolean"),this.astGeneric(t.left,e),e.push(o[t.operator]||t.operator),this.astGeneric(t.right,e),this.popState("building-boolean");break;default:throw this.astErrorOutput("Unhandled binary expression between ".concat(i),t)}return e.push(")"),e}},{key:"checkAndUpconvertOperator",value:function(t,e){var n=this.checkAndUpconvertBitwiseOperators(t,e);if(n)return n;var r={"%":this.fixIntegerDivisionAccuracy?"integerCorrectionModulo":"modulo","**":"pow"}[t.operator];if(!r)return null;switch(e.push(r),e.push("("),this.getType(t.left)){case"Integer":this.castValueToFloat(t.left,e);break;case"LiteralInteger":this.castLiteralToFloat(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Integer":this.castValueToFloat(t.right,e);break;case"LiteralInteger":this.castLiteralToFloat(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}},{key:"checkAndUpconvertBitwiseOperators",value:function(t,e){var n={"&":"bitwiseAnd","|":"bitwiseOr","^":"bitwiseXOR","<<":"bitwiseZeroFillLeftShift",">>":"bitwiseSignedRightShift",">>>":"bitwiseZeroFillRightShift"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.left)){case"Number":case"Float":this.castValueToInteger(t.left,e);break;case"LiteralInteger":this.castLiteralToInteger(t.left,e);break;default:this.astGeneric(t.left,e)}switch(e.push(","),this.getType(t.right)){case"Number":case"Float":this.castValueToInteger(t.right,e);break;case"LiteralInteger":this.castLiteralToInteger(t.right,e);break;default:this.astGeneric(t.right,e)}return e.push(")"),e}},{key:"checkAndUpconvertBitwiseUnary",value:function(t,e){var n={"~":"bitwiseNot"}[t.operator];if(!n)return null;switch(e.push(n),e.push("("),this.getType(t.argument)){case"Number":case"Float":this.castValueToInteger(t.argument,e);break;case"LiteralInteger":this.castLiteralToInteger(t.argument,e);break;default:this.astGeneric(t.argument,e)}return e.push(")"),e}},{key:"castLiteralToInteger",value:function(t,e){return this.pushState("casting-to-integer"),this.astGeneric(t,e),this.popState("casting-to-integer"),e}},{key:"castLiteralToFloat",value:function(t,e){return this.pushState("casting-to-float"),this.astGeneric(t,e),this.popState("casting-to-float"),e}},{key:"castValueToInteger",value:function(t,e){return this.pushState("casting-to-integer"),e.push("int("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-integer"),e}},{key:"castValueToFloat",value:function(t,e){return this.pushState("casting-to-float"),e.push("float("),this.astGeneric(t,e),e.push(")"),this.popState("casting-to-float"),e}},{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);var n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("3.402823466e+38"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push("bool(user_".concat(i,")")):e.push("user_".concat(i)),e}},{key:"astForStatement",value:function(t,e){if("ForStatement"!==t.type)throw this.astErrorOutput("Invalid for statement",t);var n=[],r=[],i=[],a=[],o=null;if(t.init){var s=t.init.declarations;s.length>1&&(o=!1),this.astGeneric(t.init,n);for(var u=0;u<s.length;u++)s[u].init&&"Literal"!==s[u].init.type&&(o=!1)}else o=!1;if(t.test?this.astGeneric(t.test,r):o=!1,t.update?this.astGeneric(t.update,i):o=!1,t.body&&(this.pushState("loop-body"),this.astGeneric(t.body,a),this.popState("loop-body")),null===o&&(o=this.isSafe(t.init)&&this.isSafe(t.test)),o){var l=n.join(""),c=";"!==l[l.length-1];e.push("for (".concat(l).concat(c?";":"").concat(r.join(""),";").concat(i.join(""),"){\n")),e.push(a.join("")),e.push("}\n")}else{var h=this.getInternalVariableName("safeI");n.length>0&&e.push(n.join(""),"\n"),e.push("for (int ".concat(h,"=0;").concat(h,"<LOOP_MAX;").concat(h,"++){\n")),r.length>0&&e.push("if (!".concat(r.join(""),") break;\n")),e.push(a.join("")),e.push("\n".concat(i.join(""),";")),e.push("}\n")}return e}},{key:"astWhileStatement",value:function(t,e){if("WhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);var n=this.getInternalVariableName("safeI");return e.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),this.astGeneric(t.body,e),e.push("}\n"),e}},{key:"astDoWhileStatement",value:function(t,e){if("DoWhileStatement"!==t.type)throw this.astErrorOutput("Invalid while statement",t);var n=this.getInternalVariableName("safeI");return e.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),this.astGeneric(t.body,e),e.push("if (!"),this.astGeneric(t.test,e),e.push(") break;\n"),e.push("}\n"),e}},{key:"astAssignmentExpression",value:function(t,e){if("%="===t.operator)this.astGeneric(t.left,e),e.push("="),e.push("mod("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")");else{if("**="!==t.operator){var n=this.getType(t.left),r=this.getType(t.right);return this.astGeneric(t.left,e),e.push(t.operator),"Integer"!==n&&"Integer"===r?(e.push("float("),this.astGeneric(t.right,e),e.push(")")):this.astGeneric(t.right,e),e}this.astGeneric(t.left,e),e.push("="),e.push("pow("),this.astGeneric(t.left,e),e.push(","),this.astGeneric(t.right,e),e.push(")")}}},{key:"astBlockStatement",value:function(t,e){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<t.body.length;n++)this.astGeneric(t.body[n],e);this.popState("block-body")}else{e.push("{\n");for(var r=0;r<t.body.length;r++)this.astGeneric(t.body[r],e);e.push("}\n")}return e}},{key:"astVariableDeclaration",value:function(t,e){var n=t.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput("Unexpected expression",t);for(var i=[],o=null,s=[],u=[],l=0;l<n.length;l++){var c=n[l],h=c.init,p=this.getDeclaration(c.id),f=this.getType(c.init),d=f;"LiteralInteger"===d&&(d="Integer"===p.suggestedType?"Integer":"Number");var m=a[d];if(!m)throw this.astErrorOutput("Markup type ".concat(d," not handled"),t);var v=[];if("Integer"===f&&"Integer"===d){if(p.valueType="Number",0===l||null===o)v.push("float ");else if(d!==o)throw new Error("Unhandled declaration");o=d,v.push("user_".concat(r.sanitizeName(c.id.name),"=")),v.push("float("),this.astGeneric(h,v),v.push(")")}else p.valueType=d,0===l||null===o?v.push("".concat(m," ")):d!==o&&(s.push(u.join(",")),u=[],v.push("".concat(m," "))),o=d,v.push("user_".concat(r.sanitizeName(c.id.name),"=")),"Number"===f&&"Integer"===d?h.left&&"Literal"===h.left.type?this.astGeneric(h,v):(v.push("int("),this.astGeneric(h,v),v.push(")")):"LiteralInteger"===f&&"Integer"===d?this.castLiteralToInteger(h,v):this.astGeneric(h,v);u.push(v.join(""))}return u.length>0&&s.push(u.join(",")),i.push(s.join(";")),e.push(i.join("")),e.push(";"),e}},{key:"astIfStatement",value:function(t,e){return e.push("if ("),this.astGeneric(t.test,e),e.push(")"),"BlockStatement"===t.consequent.type?this.astGeneric(t.consequent,e):(e.push(" {\n"),this.astGeneric(t.consequent,e),e.push("\n}\n")),t.alternate&&(e.push("else "),"BlockStatement"===t.alternate.type||"IfStatement"===t.alternate.type?this.astGeneric(t.alternate,e):(e.push(" {\n"),this.astGeneric(t.alternate,e),e.push("\n}\n"))),e}},{key:"astSwitchStatement",value:function(t,e){if("SwitchStatement"!==t.type)throw this.astErrorOutput("Invalid switch statement",t);var n=t.discriminant,r=t.cases,i=this.getType(n),a="switchDiscriminant".concat(this.astKey(t,"_"));switch(i){case"Float":case"Number":e.push("float ".concat(a," = ")),this.astGeneric(n,e),e.push(";\n");break;case"Integer":e.push("int ".concat(a," = ")),this.astGeneric(n,e),e.push(";\n")}if(1===r.length&&!r[0].test)return this.astGeneric(r[0].consequent,e),e;for(var o=!1,s=[],u=!1,l=!1,c=0;c<r.length;c++){if(r[c].test){if(0!==c&&l?o?(e.push("".concat(a," == ")),o=!1):e.push(" else if (".concat(a," == ")):(l=!0,e.push("if (".concat(a," == "))),"Integer"===i)switch(this.getType(r[c].test)){case"Number":case"Float":this.castValueToInteger(r[c].test,e);break;case"LiteralInteger":this.castLiteralToInteger(r[c].test,e)}else{if("Float"!==i)throw new Error("unhanlded");switch(this.getType(r[c].test)){case"LiteralInteger":this.castLiteralToFloat(r[c].test,e);break;case"Integer":this.castValueToFloat(r[c].test,e)}}if(!r[c].consequent||0===r[c].consequent.length){o=!0,e.push(" || ");continue}e.push(") {\n")}else{if(r.length>c+1){u=!0,this.astGeneric(r[c].consequent,s);continue}e.push(" else {\n")}this.astGeneric(r[c].consequent,e),e.push("\n}")}return u&&(e.push(" else {"),e.push(s.join("")),e.push("}")),e}},{key:"astThisExpression",value:function(t,e){return e.push("this"),e}},{key:"astMemberExpression",value:function(t,e){var n=this.getMemberExpressionDetails(t),i=n.property,a=n.name,o=n.signature,s=n.origin,u=n.type,l=n.xProperty,c=n.yProperty,h=n.zProperty;switch(o){case"value.thread.value":case"this.thread.value":if("x"!==a&&"y"!==a&&"z"!==a)throw this.astErrorOutput("Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`",t);return e.push("threadId.".concat(a)),e;case"this.output.value":if(this.dynamicOutput)switch(a){case"x":this.isState("casting-to-float")?e.push("float(uOutputDim.x)"):e.push("uOutputDim.x");break;case"y":this.isState("casting-to-float")?e.push("float(uOutputDim.y)"):e.push("uOutputDim.y");break;case"z":this.isState("casting-to-float")?e.push("float(uOutputDim.z)"):e.push("uOutputDim.z");break;default:throw this.astErrorOutput("Unexpected expression",t)}else switch(a){case"x":this.isState("casting-to-integer")?e.push(this.output[0]):e.push(this.output[0],".0");break;case"y":this.isState("casting-to-integer")?e.push(this.output[1]):e.push(this.output[1],".0");break;case"z":this.isState("casting-to-integer")?e.push(this.output[2]):e.push(this.output[2],".0");break;default:throw this.astErrorOutput("Unexpected expression",t)}return e;case"value":throw this.astErrorOutput("Unexpected expression",t);case"value[]":case"value[][]":case"value[][][]":case"value[][][][]":case"value.value":if("Math"===s)return e.push(Math[a]),e;var p=r.sanitizeName(a);switch(i){case"r":return e.push("user_".concat(p,".r")),e;case"g":return e.push("user_".concat(p,".g")),e;case"b":return e.push("user_".concat(p,".b")),e;case"a":return e.push("user_".concat(p,".a")),e}break;case"this.constants.value":if("undefined"===typeof l)switch(u){case"Array(2)":case"Array(3)":case"Array(4)":return e.push("constants_".concat(r.sanitizeName(a))),e}case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":case"this.constants.value[][][][]":break;case"fn()[]":return this.astCallExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(i)),e.push("]"),e;case"fn()[][]":return this.astCallExpression(t.object.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.object.property)),e.push("]"),e.push("["),e.push(this.memberExpressionPropertyMarkup(t.property)),e.push("]"),e;case"[][]":return this.astArrayExpression(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(i)),e.push("]"),e;default:throw this.astErrorOutput("Unexpected expression",t)}if(!1===t.computed)switch(u){case"Number":case"Integer":case"Float":case"Boolean":return e.push("".concat(s,"_").concat(r.sanitizeName(a))),e}var f="".concat(s,"_").concat(r.sanitizeName(a));switch(u){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(t.object,e),e.push("["),e.push(this.memberExpressionPropertyMarkup(l)),e.push("]");break;case"HTMLImageArray":e.push("getImage3D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(1)":e.push("getFloatFromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Array1D(2)":case"Array2D(2)":case"Array3D(2)":e.push("getMemoryOptimizedVec2(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(2)":e.push("getVec2FromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Array1D(3)":case"Array2D(3)":case"Array3D(3)":e.push("getMemoryOptimizedVec3(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(3)":e.push("getVec3FromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Array1D(4)":case"Array2D(4)":case"Array3D(4)":e.push("getMemoryOptimizedVec4(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"ArrayTexture(4)":case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":e.push("getVec4FromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"NumberTexture":case"Array":case"Array2D":case"Array3D":case"Array4D":case"Input":case"Number":case"Float":case"Integer":if("single"===this.precision)e.push("getMemoryOptimized32(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");else{var d="user"===s?this.lookupFunctionArgumentBitRatio(this.name,a):this.constantBitRatios[a];switch(d){case 1:e.push("get8(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, "));break;case 2:e.push("get16(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, "));break;case 4:case 0:e.push("get32(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, "));break;default:throw new Error("unhandled bit ratio of ".concat(d))}this.memberExpressionXYZ(l,c,h,e),e.push(")")}break;case"MemoryOptimizedNumberTexture":e.push("getMemoryOptimized32(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(l,c,h,e),e.push(")");break;case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("".concat(f,"[").concat(this.memberExpressionPropertyMarkup(c),"]")),c&&e.push("[".concat(this.memberExpressionPropertyMarkup(l),"]"));break;default:throw new Error('unhandled member expression "'.concat(u,'"'))}return e}},{key:"astCallExpression",value:function(t,e){if(!t.callee)throw this.astErrorOutput("Unknown CallExpression",t);var n=null,i=this.isAstMathFunction(t);if(!(n=i||t.callee.object&&"ThisExpression"===t.callee.object.type?t.callee.property.name:"SequenceExpression"!==t.callee.type||"Literal"!==t.callee.expressions[0].type||isNaN(t.callee.expressions[0].raw)?t.callee.name:t.callee.expressions[1].property.name))throw this.astErrorOutput("Unhandled function, couldn't find name",t);switch(n){case"pow":n="_pow";break;case"round":n="_round"}if(this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),"random"===n&&this.plugins&&this.plugins.length>0)for(var a=0;a<this.plugins.length;a++){var o=this.plugins[a];if("Math.random()"===o.functionMatch&&o.functionReplace)return e.push(o.functionReplace),e}if(this.onFunctionCall&&this.onFunctionCall(this.name,n,t.arguments),e.push(n),e.push("("),i)for(var s=0;s<t.arguments.length;++s){var u=t.arguments[s],l=this.getType(u);s>0&&e.push(", "),"Integer"===l?this.castValueToFloat(u,e):this.astGeneric(u,e)}else for(var c=this.lookupFunctionArgumentTypes(n)||[],h=0;h<t.arguments.length;++h){var p=t.arguments[h],f=c[h];h>0&&e.push(", ");var d=this.getType(p);switch(f||(this.triggerImplyArgumentType(n,h,d,this),f=d),d){case"Boolean":this.astGeneric(p,e);continue;case"Number":case"Float":if("Integer"===f){e.push("int("),this.astGeneric(p,e),e.push(")");continue}if("Number"===f||"Float"===f){this.astGeneric(p,e);continue}if("LiteralInteger"===f){this.castLiteralToFloat(p,e);continue}break;case"Integer":if("Number"===f||"Float"===f){e.push("float("),this.astGeneric(p,e),e.push(")");continue}if("Integer"===f){this.astGeneric(p,e);continue}break;case"LiteralInteger":if("Integer"===f){this.castLiteralToInteger(p,e);continue}if("Number"===f||"Float"===f){this.castLiteralToFloat(p,e);continue}if("LiteralInteger"===f){this.astGeneric(p,e);continue}break;case"Array(2)":case"Array(3)":case"Array(4)":if(f===d){if("Identifier"===p.type)e.push("user_".concat(r.sanitizeName(p.name)));else{if("ArrayExpression"!==p.type&&"MemberExpression"!==p.type&&"CallExpression"!==p.type)throw this.astErrorOutput("Unhandled argument type ".concat(p.type),t);this.astGeneric(p,e)}continue}break;case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLImageArray":case"HTMLVideo":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"Array":case"Input":if(f===d){if("Identifier"!==p.type)throw this.astErrorOutput("Unhandled argument type ".concat(p.type),t);this.triggerImplyArgumentBitRatio(this.name,p.name,n,h);var m=r.sanitizeName(p.name);e.push("user_".concat(m,",user_").concat(m,"Size,user_").concat(m,"Dim"));continue}}throw this.astErrorOutput("Unhandled argument combination of ".concat(d," and ").concat(f,' for argument named "').concat(p.name,'"'),t)}return e.push(")"),e}},{key:"astArrayExpression",value:function(t,e){var n=this.getType(t),r=t.elements.length;switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":e.push("mat".concat(r,"("));break;default:e.push("vec".concat(r,"("))}for(var i=0;i<r;++i){i>0&&e.push(", ");var a=t.elements[i];this.astGeneric(a,e)}return e.push(")"),e}},{key:"memberExpressionXYZ",value:function(t,e,n,r){return n?r.push(this.memberExpressionPropertyMarkup(n),", "):r.push("0, "),e?r.push(this.memberExpressionPropertyMarkup(e),", "):r.push("0, "),r.push(this.memberExpressionPropertyMarkup(t)),r}},{key:"memberExpressionPropertyMarkup",value:function(t){if(!t)throw new Error("Property not set");var e=[];switch(this.getType(t)){case"Number":case"Float":this.castValueToInteger(t,e);break;case"LiteralInteger":this.castLiteralToInteger(t,e);break;default:this.astGeneric(t,e)}return e.join("")}}]),n}(t("../function-node").FunctionNode),a={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4","Matrix(2)":"mat2","Matrix(3)":"mat3","Matrix(4)":"mat4",Array2D:"sampler2D",Array3D:"sampler2D",Boolean:"bool",Float:"float",Input:"sampler2D",Integer:"int",Number:"float",LiteralInteger:"float",NumberTexture:"sampler2D",MemoryOptimizedNumberTexture:"sampler2D","ArrayTexture(1)":"sampler2D","ArrayTexture(2)":"sampler2D","ArrayTexture(3)":"sampler2D","ArrayTexture(4)":"sampler2D",HTMLVideo:"sampler2D",HTMLCanvas:"sampler2D",OffscreenCanvas:"sampler2D",HTMLImage:"sampler2D",ImageBitmap:"sampler2D",ImageData:"sampler2D",HTMLImageArray:"sampler2DArray"},o={"===":"==","!==":"!="};e.exports={WebGLFunctionNode:i}},{"../../utils":114,"../function-node":10}],39:[function(t,e,n){var r=t("./kernel-value/boolean").WebGLKernelValueBoolean,i=t("./kernel-value/float").WebGLKernelValueFloat,a=t("./kernel-value/integer").WebGLKernelValueInteger,o=t("./kernel-value/html-image").WebGLKernelValueHTMLImage,s=t("./kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage,u=t("./kernel-value/html-video").WebGLKernelValueHTMLVideo,l=t("./kernel-value/dynamic-html-video").WebGLKernelValueDynamicHTMLVideo,c=t("./kernel-value/single-input").WebGLKernelValueSingleInput,h=t("./kernel-value/dynamic-single-input").WebGLKernelValueDynamicSingleInput,p=t("./kernel-value/unsigned-input").WebGLKernelValueUnsignedInput,f=t("./kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput,d=t("./kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture,m=t("./kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture,v=t("./kernel-value/number-texture").WebGLKernelValueNumberTexture,y=t("./kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture,g=t("./kernel-value/single-array").WebGLKernelValueSingleArray,x=t("./kernel-value/dynamic-single-array").WebGLKernelValueDynamicSingleArray,b=t("./kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI,w=t("./kernel-value/dynamic-single-array1d-i").WebGLKernelValueDynamicSingleArray1DI,k=t("./kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI,S=t("./kernel-value/dynamic-single-array2d-i").WebGLKernelValueDynamicSingleArray2DI,T=t("./kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI,A=t("./kernel-value/dynamic-single-array3d-i").WebGLKernelValueDynamicSingleArray3DI,E=t("./kernel-value/array2").WebGLKernelValueArray2,_=t("./kernel-value/array3").WebGLKernelValueArray3,L=t("./kernel-value/array4").WebGLKernelValueArray4,I=t("./kernel-value/unsigned-array").WebGLKernelValueUnsignedArray,C={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:t("./kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:f,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:m,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:!1,HTMLVideo:l},static:{Boolean:r,Float:i,Integer:a,Array:I,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:p,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:d,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:u}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:x,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":w,"Array1D(3)":w,"Array1D(4)":w,"Array2D(2)":S,"Array2D(3)":S,"Array2D(4)":S,"Array3D(2)":A,"Array3D(3)":A,"Array3D(4)":A,Input:h,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:m,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:!1,HTMLVideo:l},static:{Boolean:r,Float:i,Integer:a,Array:g,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":b,"Array1D(3)":b,"Array1D(4)":b,"Array2D(2)":k,"Array2D(3)":k,"Array2D(4)":k,"Array3D(2)":T,"Array3D(3)":T,"Array3D(4)":T,Input:c,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:d,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:u}}};function D(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);var i=C[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error("Could not find a KernelValue for ".concat(t));return i[t]}e.exports={lookupKernelValueType:D,kernelValueMaps:C}},{"./kernel-value/array2":41,"./kernel-value/array3":42,"./kernel-value/array4":43,"./kernel-value/boolean":44,"./kernel-value/dynamic-html-image":45,"./kernel-value/dynamic-html-video":46,"./kernel-value/dynamic-memory-optimized-number-texture":47,"./kernel-value/dynamic-number-texture":48,"./kernel-value/dynamic-single-array":49,"./kernel-value/dynamic-single-array1d-i":50,"./kernel-value/dynamic-single-array2d-i":51,"./kernel-value/dynamic-single-array3d-i":52,"./kernel-value/dynamic-single-input":53,"./kernel-value/dynamic-unsigned-array":54,"./kernel-value/dynamic-unsigned-input":55,"./kernel-value/float":56,"./kernel-value/html-image":57,"./kernel-value/html-video":58,"./kernel-value/integer":60,"./kernel-value/memory-optimized-number-texture":61,"./kernel-value/number-texture":62,"./kernel-value/single-array":63,"./kernel-value/single-array1d-i":64,"./kernel-value/single-array2d-i":65,"./kernel-value/single-array3d-i":66,"./kernel-value/single-input":67,"./kernel-value/unsigned-array":68,"./kernel-value/unsigned-input":69}],40:[function(t,e,n){var r=t("./index").WebGLKernelValue,i=t("../../../input").Input,a=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"checkSize",value:function(t,e){if(this.kernel.validate){var n=this.kernel.constructor.features.maxTextureSize;if(t>n||e>n)throw t>e?new Error("Argument texture width of ".concat(t," larger than maximum size of ").concat(n," for your GPU")):t<e?new Error("Argument texture height of ".concat(e," larger than maximum size of ").concat(n," for your GPU")):new Error("Argument texture height and width of ".concat(e," larger than maximum size of ").concat(n," for your GPU"))}}},{key:"setup",value:function(){this.requestTexture(),this.setupTexture(),this.defineTexture()}},{key:"requestTexture",value:function(){this.texture=this.onRequestTexture()}},{key:"defineTexture",value:function(){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)}},{key:"setupTexture",value:function(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+"Dim",this.sizeId=this.id+"Size"}},{key:"getBitRatio",value:function(t){if(Array.isArray(t[0]))return this.getBitRatio(t[0]);if(t.constructor===i)return this.getBitRatio(t.value);switch(t.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"destroy",value:function(){this.prevArg&&this.prevArg.delete(),this.context.deleteTexture(this.texture)}}]),n}(r);e.exports={WebGLKernelArray:a}},{"../../../input":110,"./index":59}],41:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec2 ".concat(this.id," = vec2(").concat(t[0],",").concat(t[1],");\n"):"uniform vec2 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform2fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray2:r}},{"./index":59}],42:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec3 ".concat(this.id," = vec3(").concat(t[0],",").concat(t[1],",").concat(t[2],");\n"):"uniform vec3 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform3fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray3:r}},{"./index":59}],43:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const vec4 ".concat(this.id," = vec4(").concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(t[3],");\n"):"uniform vec4 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform4fv(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueArray4:r}},{"./index":59}],44:[function(t,e,n){t("../../../utils");var r=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getSource",value:function(t){return"constants"===this.origin?"const bool ".concat(this.id," = ").concat(t,";\n"):"uniform bool ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueBoolean:r}},{"../../../utils":114,"./index":59}],45:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=t.width,r=t.height;this.checkSize(e,r),this.dimensions=[e,r,1],this.textureSize=[e,r],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./html-image").WebGLKernelValueHTMLImage);e.exports={WebGLKernelValueDynamicHTMLImage:i}},{"../../../utils":114,"./html-image":57}],46:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("./dynamic-html-image").WebGLKernelValueDynamicHTMLImage);e.exports={WebGLKernelValueDynamicHTMLVideo:r}},{"./dynamic-html-image":45}],47:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);e.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"./memory-optimized-number-texture":61}],48:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=t.dimensions,this.checkSize(t.size[0],t.size[1]),this.textureSize=t.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./number-texture").WebGLKernelValueNumberTexture);e.exports={WebGLKernelValueDynamicNumberTexture:i}},{"../../../utils":114,"./number-texture":62}],49:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array").WebGLKernelValueSingleArray);e.exports={WebGLKernelValueDynamicSingleArray:i}},{"../../../utils":114,"./single-array":63}],50:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array1d-i").WebGLKernelValueSingleArray1DI);e.exports={WebGLKernelValueDynamicSingleArray1DI:i}},{"../../../utils":114,"./single-array1d-i":64}],51:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array2d-i").WebGLKernelValueSingleArray2DI);e.exports={WebGLKernelValueDynamicSingleArray2DI:i}},{"../../../utils":114,"./single-array2d-i":65}],52:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-array3d-i").WebGLKernelValueSingleArray3DI);e.exports={WebGLKernelValueDynamicSingleArray3DI:i}},{"../../../utils":114,"./single-array3d-i":66}],53:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=p(t.size,3),i=e[0],a=e[1],o=e[2];this.dimensions=new Int32Array([i||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./single-input").WebGLKernelValueSingleInput);e.exports={WebGLKernelValueDynamicSingleInput:i}},{"../../../utils":114,"./single-input":67}],54:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var e=this.getTransferArrayType(t);this.preUploadValue=new e(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./unsigned-array").WebGLKernelValueUnsignedArray);e.exports={WebGLKernelValueDynamicUnsignedArray:i}},{"../../../utils":114,"./unsigned-array":68}],55:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=p(t.size,3),i=e[0],a=e[1],o=e[2];this.dimensions=new Int32Array([i||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var s=this.getTransferArrayType(t.value);this.preUploadValue=new s(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./unsigned-input").WebGLKernelValueUnsignedInput);e.exports={WebGLKernelValueDynamicUnsignedInput:i}},{"../../../utils":114,"./unsigned-input":69}],56:[function(t,e,n){t("../../../utils");var r=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(t){return"constants"===this.origin?Number.isInteger(t)?"const float ".concat(this.id," = ").concat(t,".0;\n"):"const float ".concat(this.id," = ").concat(t,";\n"):"uniform float ".concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueFloat:r}},{"../../../utils":114,"./index":59}],57:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,r){var i;d(this,n),i=e.call(this,t,r);var a=t.width,o=t.height;return i.checkSize(a,o),i.dimensions=[a,o,1],i.textureSize=[a,o],i.uploadValue=t,i}return m(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueHTMLImage:i}},{"../../../utils":114,"./array":40}],58:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("./html-image").WebGLKernelValueHTMLImage);e.exports={WebGLKernelValueHTMLVideo:r}},{"./html-image":57}],59:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).dimensionsId=null,i.sizeId=null,i.initialValueConstructor=t.constructor,i.onRequestTexture=r.onRequestTexture,i.onRequestIndex=r.onRequestIndex,i.uploadValue=null,i.textureSize=null,i.bitRatio=null,i.prevArg=null,i}return m(n,[{key:"id",get:function(){return"".concat(this.origin,"_").concat(r.sanitizeName(this.name))}},{key:"setup",value:function(){}},{key:"getTransferArrayType",value:function(t){if(Array.isArray(t[0]))return this.getTransferArrayType(t[0]);switch(t.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return t.constructor}return console.warn("Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros"),t.constructor}},{key:"getStringValueHandler",value:function(){throw new Error('"getStringValueHandler" not implemented on '.concat(this.constructor.name))}},{key:"getVariablePrecisionString",value:function(){return this.kernel.getVariablePrecisionString(this.textureSize||void 0,this.tactic||void 0)}},{key:"destroy",value:function(){}}]),n}(t("../../kernel-value").KernelValue);e.exports={WebGLKernelValue:i}},{"../../../utils":114,"../../kernel-value":35}],60:[function(t,e,n){t("../../../utils");var r=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).uploadValue=t,i}return m(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(t){return"constants"===this.origin?"const int ".concat(this.id," = ").concat(parseInt(t),";\n"):"uniform int ".concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("./index").WebGLKernelValue);e.exports={WebGLKernelValueInteger:r}},{"../../../utils":114,"./index":59}],61:[function(t,e,n){var r=t("../../../utils").utils,i=t("./array").WebGLKernelArray,a="Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()",o=function(t){c(n,t);var e=h(n);function n(t,r){var i;d(this,n),i=e.call(this,t,r);var a=p(t.size,2),o=a[0],s=a[1];return i.checkSize(o,s),i.dimensions=t.dimensions,i.textureSize=t.size,i.uploadValue=t.texture,i.forceUploadEachRun=!0,i}return m(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){if(this.checkContext&&t.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var e=this.kernel,n=this.context;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures)for(var r=e.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===t.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(i);e.exports={WebGLKernelValueMemoryOptimizedNumberTexture:o,sameError:a}},{"../../../utils":114,"./array":40}],62:[function(t,e,n){var r=t("../../../utils").utils,i=t("./array").WebGLKernelArray,a=t("./memory-optimized-number-texture").sameError,o=function(t){c(n,t);var e=h(n);function n(t,r){var i;d(this,n),i=e.call(this,t,r);var a=p(t.size,2),o=a[0],s=a[1];i.checkSize(o,s);var u=t.size,l=t.dimensions;return i.bitRatio=i.getBitRatio(t),i.dimensions=l,i.textureSize=u,i.uploadValue=t.texture,i.forceUploadEachRun=!0,i}return m(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){if(this.checkContext&&t.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var e=this.kernel,n=this.context;if(e.pipeline)if(e.immutable)e.updateTextureArgumentRefs(this,t);else{if(e.texture&&e.texture.texture===t.texture)throw new Error(a);if(e.mappedTextures)for(var r=e.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===t.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=t.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(i);e.exports={WebGLKernelValueNumberTexture:o}},{"../../../utils":114,"./array":40,"./memory-optimized-number-texture":61}],63:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,i){var a;return d(this,n),(a=e.call(this,t,i)).bitRatio=4,a.dimensions=r.getDimensions(t,!0),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray:i}},{"../../../utils":114,"./array":40}],64:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return m(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],1,1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten2dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray1DI:i}},{"../../../utils":114,"./array":40}],65:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return m(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten3dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray2DI:i}},{"../../../utils":114,"./array":40}],66:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).bitRatio=4,i.setShape(t),i}return m(n,[{key:"setShape",value:function(t){var e=r.getDimensions(t,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(e,this.bitRatio),this.dimensions=new Int32Array([e[1],e[2],e[3]]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flatten4dArrayTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleArray3DI:i}},{"../../../utils":114,"./array":40}],67:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,i){var a;d(this,n),(a=e.call(this,t,i)).bitRatio=4;var o=p(t.size,3),s=o[0],u=o[1],l=o[2];return a.dimensions=new Int32Array([s||1,u||1,l||1]),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,".value, uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueSingleInput:i}},{"../../../utils":114,"./array":40}],68:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,i){var a;return d(this,n),(a=e.call(this,t,i)).bitRatio=a.getBitRatio(t),a.dimensions=r.getDimensions(t,!0),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(t),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,", preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueUnsignedArray:i}},{"../../../utils":114,"./array":40}],69:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,i){var a;d(this,n),(a=e.call(this,t,i)).bitRatio=a.getBitRatio(t);var o=p(t.size,3),s=o[0],u=o[1],l=o[2];return a.dimensions=new Int32Array([s||1,u||1,l||1]),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(t.value),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return m(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,".value, preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t.value,this.preUploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(value.constructor)}}]),n}(t("./array").WebGLKernelArray);e.exports={WebGLKernelValueUnsignedInput:i}},{"../../../utils":114,"./array":40}],70:[function(t,e,n){var r=t("../gl/kernel").GLKernel,i=t("../function-builder").FunctionBuilder,a=t("./function-node").WebGLFunctionNode,o=t("../../utils").utils,s=t("../../plugins/math-random-uniformly-distributed"),p=t("./fragment-shader").fragmentShader,f=t("./vertex-shader").vertexShader,v=t("../gl/kernel-string").glKernelString,y=t("./kernel-value-maps").lookupKernelValueType,g=null,x=null,b=null,w=null,k=null,S=[s],T=[],A={},E=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).program=null,i.pipeline=r.pipeline,i.endianness=o.systemEndianness(),i.extensions={},i.argumentTextureCount=0,i.constantTextureCount=0,i.fragShader=null,i.vertShader=null,i.drawBuffersMap=null,i.maxTexSize=null,i.onRequestSwitchKernel=null,i.texture=null,i.mappedTextures=null,i.mergeSettings(t.settings||r),i.threadDim=null,i.framebuffer=null,i.buffer=null,i.textureCache=[],i.programUniformLocationCache={},i.uniform1fCache={},i.uniform1iCache={},i.uniform2fCache={},i.uniform2fvCache={},i.uniform2ivCache={},i.uniform3fvCache={},i.uniform3ivCache={},i.uniform4fvCache={},i.uniform4ivCache={},i}return m(n,[{key:"initCanvas",value:function(){if("undefined"!==typeof document){var t=document.createElement("canvas");return t.width=2,t.height=2,t}if("undefined"!==typeof OffscreenCanvas)return new OffscreenCanvas(0,0)}},{key:"initContext",value:function(){var t={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t)}},{key:"initPlugins",value:function(t){var e=[],n=this.source;if("string"===typeof n)for(var r=0;r<S.length;r++){var i=S[r];n.match(i.functionMatch)&&e.push(i)}else if("object"===typeof n&&t.pluginNames)for(var a=function(){var n=S[o];t.pluginNames.some((function(t){return t===n.name}))&&e.push(n)},o=0;o<S.length;o++)a();return e}},{key:"initExtensions",value:function(){this.extensions={OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:this.context.getExtension("WEBGL_color_buffer_float")}}},{key:"validateSettings",value:function(t){if(this.validate){var e=this.constructor.features;if(!0===this.optimizeFloatMemory&&!e.isTextureFloat)throw new Error("Float textures are not supported");if("single"===this.precision&&!e.isFloatRead)throw new Error("Single precision not supported");if(!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision=e.isFloatRead?"single":"unsigned"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error("could not instantiate draw buffers extension");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var n=o.getVariableType(t[0],this.strictIntegers);switch(n){case"Array":this.output=o.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"precision"===this.precision&&(this.precision="unsigned",console.warn("Cannot use graphical mode and single precision at the same time")),void(this.texSize=o.clone(this.output))}null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"updateMaxTexSize",value:function(){var t=this.texSize,e=this.canvas;if(null===this.maxTexSize){var n=T.indexOf(e);-1===n&&(n=T.length,T.push(e),A[n]=[t[0],t[1]]),this.maxTexSize=A[n]}this.maxTexSize[0]<t[0]&&(this.maxTexSize[0]=t[0]),this.maxTexSize[1]<t[1]&&(this.maxTexSize[1]=t[1])}},{key:"setupArguments",value:function(t){var e=this;this.kernelArguments=[],this.argumentTextureCount=0;var n=null===this.argumentTypes;if(n&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],t.length<this.argumentNames.length)throw new Error("not enough arguments for kernel");if(t.length>this.argumentNames.length)throw new Error("too many arguments for kernel");for(var r=this.context,i=0,a=function(){return e.createTexture()},s=function(){return e.constantTextureCount+i++},u=function(t){e.switchKernels({type:"argumentMismatch",needed:t})},l=function(){return r.TEXTURE0+e.constantTextureCount+e.argumentTextureCount++},c=0;c<t.length;c++){var h=t[c],p=this.argumentNames[c],f=void 0;n?(f=o.getVariableType(h,this.strictIntegers),this.argumentTypes.push(f)):f=this.argumentTypes[c];var d=this.constructor.lookupKernelValueType(f,this.dynamicArguments?"dynamic":"static",this.precision,t[c]);if(null===d)return this.requestFallback(t);var m=new d(h,{name:p,type:f,tactic:this.tactic,origin:"user",context:r,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:a,onRequestIndex:s,onUpdateValueMismatch:u,onRequestContextHandle:l});this.kernelArguments.push(m),m.setup(),this.argumentSizes.push(m.textureSize),this.argumentBitRatios[c]=m.bitRatio}}},{key:"createTexture",value:function(){var t=this.context.createTexture();return this.textureCache.push(t),t}},{key:"setupConstants",value:function(t){var e=this,n=this.context;this.kernelConstants=[],this.forceUploadKernelConstants=[];var r=null===this.constantTypes;r&&(this.constantTypes={}),this.constantBitRatios={};var i=0;for(var a in this.constants){var s=this.constants[a],u=void 0;r?(u=o.getVariableType(s,this.strictIntegers),this.constantTypes[a]=u):u=this.constantTypes[a];var l=this.constructor.lookupKernelValueType(u,"static",this.precision,s);if(null===l)return this.requestFallback(t);var c=new l(s,{name:a,type:u,tactic:this.tactic,origin:"constants",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:function(){return e.createTexture()},onRequestIndex:function(){return i++},onRequestContextHandle:function(){return n.TEXTURE0+e.constantTextureCount++}});this.constantBitRatios[a]=c.bitRatio,this.kernelConstants.push(c),c.setup(),c.forceUploadEachRun&&this.forceUploadKernelConstants.push(c)}}},{key:"build",value:function(){if(!this.built&&(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),!this.fallbackRequested&&(this.setupArguments(arguments),!this.fallbackRequested))){this.updateMaxTexSize(),this.translateSource();var t=this.pickRenderStrategy(arguments);if(t)return t;var e=this.texSize,n=this.context,r=this.canvas;n.enable(n.SCISSOR_TEST),this.pipeline&&this.precision,n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1];for(var i=this.threadDim=Array.from(this.output);i.length<3;)i.push(1);var a=this.getVertexShader(arguments),o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,a),n.compileShader(o),this.vertShader=o;var s=this.getFragmentShader(arguments),u=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(u,s),n.compileShader(u),this.fragShader=u,this.debug&&(console.log("GLSL Shader Output:"),console.log(s)),!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+n.getShaderInfoLog(o));if(!n.getShaderParameter(u,n.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+n.getShaderInfoLog(u));var l=this.program=n.createProgram();n.attachShader(l,o),n.attachShader(l,u),n.linkProgram(l),this.framebuffer=n.createFramebuffer(),this.framebuffer.width=e[0],this.framebuffer.height=e[1],this.rawValueFramebuffers={};var c=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),p=c.byteLength,f=this.buffer;f?n.bindBuffer(n.ARRAY_BUFFER,f):(f=this.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,f),n.bufferData(n.ARRAY_BUFFER,c.byteLength+h.byteLength,n.STATIC_DRAW)),n.bufferSubData(n.ARRAY_BUFFER,0,c),n.bufferSubData(n.ARRAY_BUFFER,p,h);var d=n.getAttribLocation(this.program,"aPos");n.enableVertexAttribArray(d),n.vertexAttribPointer(d,2,n.FLOAT,!1,0,0);var m=n.getAttribLocation(this.program,"aTexCoord");n.enableVertexAttribArray(m),n.vertexAttribPointer(m,2,n.FLOAT,!1,0,p),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer);var v=0;for(var y in n.useProgram(this.program),this.constants)this.kernelConstants[v++].updateValue(this.constants[y]);this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&(this._mappedTextureSwitched={},this._setupSubOutputTextures()),this.buildSignature(arguments),this.built=!0}}},{key:"translateSource",value:function(){var t=i.fromKernel(this,a,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}},{key:"setupReturnTypes",value:function(t){if(this.graphical||this.returnType||(this.returnType=t.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(var e=0;e<this.subKernels.length;e++){var n=this.subKernels[e];n.returnType||(n.returnType=t.getSubKernelResultType(e))}}},{key:"run",value:function(){var t=this.kernelArguments,e=this.texSize,n=this.forceUploadKernelConstants,r=this.context;r.useProgram(this.program),r.scissor(0,0,e[0],e[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",e)),this.setUniform2f("ratio",e[0]/this.maxTexSize[0],e[1]/this.maxTexSize[1]);for(var i=0;i<n.length;i++){var a=n[i];if(a.updateValue(this.constants[a.name]),this.switchingKernels)return}for(var o=0;o<t.length;o++)if(t[o].updateValue(arguments[o]),this.switchingKernels)return;if(this.plugins)for(var s=0;s<this.plugins.length;s++){var u=this.plugins[s];u.onBeforeRun&&u.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.immutable?this.texture.clone():this.texture):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),null!==this.subKernels&&(this.immutable&&this._replaceSubOutputTextures(),this.drawBuffers()),r.drawArrays(r.TRIANGLE_STRIP,0,4)}},{key:"drawBuffers",value:function(){this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)}},{key:"getInternalFormat",value:function(){return this.context.RGBA}},{key:"getTextureFormat",value:function(){var t=this.context;if(this.getInternalFormat()===t.RGBA)return t.RGBA;throw new Error("Unknown internal format")}},{key:"_replaceOutputTexture",value:function(){if(this.texture.beforeMutate()||this._textureSwitched){var t=this.context;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0),this._textureSwitched=!1}}},{key:"_setupOutputTexture",value:function(){var t=this.context,e=this.texSize;if(this.texture)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);else{var n=this.createTexture();t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var r=this.getInternalFormat();"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,r,e[0],e[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),this.texture=new this.TextureConstructor({texture:n,size:e,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_replaceSubOutputTextures",value:function(){for(var t=this.context,e=0;e<this.mappedTextures.length;e++){var n=this.mappedTextures[e];(n.beforeMutate()||this._mappedTextureSwitched[e])&&(t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,n.texture,0),this._mappedTextureSwitched[e]=!1)}}},{key:"_setupSubOutputTextures",value:function(){var t=this.context;if(this.mappedTextures)for(var e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);else{var n=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+r+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r+1,t.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"setUniform1f",value:function(t,e){if(!this.uniform1fCache.hasOwnProperty(t)||e!==this.uniform1fCache[t]){this.uniform1fCache[t]=e;var n=this.getUniformLocation(t);this.context.uniform1f(n,e)}}},{key:"setUniform1i",value:function(t,e){if(!this.uniform1iCache.hasOwnProperty(t)||e!==this.uniform1iCache[t]){this.uniform1iCache[t]=e;var n=this.getUniformLocation(t);this.context.uniform1i(n,e)}}},{key:"setUniform2f",value:function(t,e,n){if(this.uniform2fCache.hasOwnProperty(t)){var r=this.uniform2fCache[t];if(e===r[0]&&n===r[1])return}this.uniform2fCache[t]=[e,n];var i=this.getUniformLocation(t);this.context.uniform2f(i,e,n)}},{key:"setUniform2fv",value:function(t,e){if(this.uniform2fvCache.hasOwnProperty(t)){var n=this.uniform2fvCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform2fv(r,e)}},{key:"setUniform2iv",value:function(t,e){if(this.uniform2ivCache.hasOwnProperty(t)){var n=this.uniform2ivCache[t];if(e[0]===n[0]&&e[1]===n[1])return}this.uniform2ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform2iv(r,e)}},{key:"setUniform3fv",value:function(t,e){if(this.uniform3fvCache.hasOwnProperty(t)){var n=this.uniform3fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform3fv(r,e)}},{key:"setUniform3iv",value:function(t,e){if(this.uniform3ivCache.hasOwnProperty(t)){var n=this.uniform3ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2])return}this.uniform3ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform3iv(r,e)}},{key:"setUniform4fv",value:function(t,e){if(this.uniform4fvCache.hasOwnProperty(t)){var n=this.uniform4fvCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4fvCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform4fv(r,e)}},{key:"setUniform4iv",value:function(t,e){if(this.uniform4ivCache.hasOwnProperty(t)){var n=this.uniform4ivCache[t];if(e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3])return}this.uniform4ivCache[t]=e;var r=this.getUniformLocation(t);this.context.uniform4iv(r,e)}},{key:"getUniformLocation",value:function(t){return this.programUniformLocationCache.hasOwnProperty(t)?this.programUniformLocationCache[t]:this.programUniformLocationCache[t]=this.context.getUniformLocation(this.program,t)}},{key:"_getFragShaderArtifactMap",value:function(t){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),INJECTED_NATIVE:this._getInjectedNative(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(t),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString(),FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getVertShaderArtifactMap",value:function(t){return{FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getHeaderString",value:function(){return null!==this.subKernels?"#extension GL_EXT_draw_buffers : require\n":""}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";\n"):" 1000;\n"}},{key:"_getPluginsString",value:function(){var t=this;return this.plugins?this.plugins.map((function(e){return e.source&&t.source.match(e.functionMatch)?e.source:""})).join("\n"):"\n"}},{key:"_getConstantsString",value:function(){var t=[],e=this.threadDim,n=this.texSize;return this.dynamicOutput?t.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"):t.push("ivec3 uOutputDim = ivec3(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"),"ivec2 uTexSize = ivec2(".concat(n[0],", ").concat(n[1],")")),o.linesToString(t)}},{key:"_getTextureCoordinate",value:function(){var t=this.subKernels;return null===t||t.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}},{key:"_getDecode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getEncode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getDivideWithIntegerCheckString",value:function(){return this.fixIntegerDivisionAccuracy?"float divWithIntCheck(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x) / int(y));\n  }\n  return x / y;\n}\n\nfloat integerCorrectionModulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\n}":""}},{key:"_getMainArgumentsString",value:function(t){for(var e=[],n=this.argumentNames,r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}},{key:"_getInjectedNative",value:function(){return this.injectedNative||""}},{key:"_getMainConstantsString",value:function(){var t=[],e=this.constants;if(e){var n=0;for(var r in e)this.constants.hasOwnProperty(r)&&t.push(this.kernelConstants[n++].getSource(this.constants[r]))}return t.join("")}},{key:"getRawValueFramebuffer",value:function(t,e){if(this.rawValueFramebuffers[t]||(this.rawValueFramebuffers[t]={}),!this.rawValueFramebuffers[t][e]){var n=this.context.createFramebuffer();n.width=t,n.height=e,this.rawValueFramebuffers[t][e]=n}return this.rawValueFramebuffers[t][e]}},{key:"getKernelResultDeclaration",value:function(){switch(this.returnType){case"Array(2)":return"vec2 kernelResult";case"Array(3)":return"vec3 kernelResult";case"Array(4)":return"vec4 kernelResult";case"LiteralInteger":case"Float":case"Number":case"Integer":return"float kernelResult";default:if(this.graphical)return"float kernelResult";throw new Error('unrecognized output type "'.concat(this.returnType,'"'))}}},{key:"getKernelString",value:function(){var t=[this.getKernelResultDeclaration()],e=this.subKernels;if(null!==e)switch(this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<e.length;n++){var r=e[n];t.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"))}break;case"Array(2)":for(var i=0;i<e.length;i++)t.push("vec2 subKernelResult_".concat(e[i].name));break;case"Array(3)":for(var a=0;a<e.length;a++)t.push("vec3 subKernelResult_".concat(e[a].name));break;case"Array(4)":for(var s=0;s<e.length;s++)t.push("vec4 subKernelResult_".concat(e[s].name))}return o.linesToString(t)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var t=[];if(!this.subKernels)return"";for(var e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push("  gl_FragData[".concat(e+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[e].name,"))")):t.push("  gl_FragData[".concat(e+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[e].name,")"));return o.linesToString(t)}},{key:"getMainResultMemoryOptimizedFloats",value:function(){var t=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":for(var e=["r","g","b","a"],n=0;n<e.length;n++){var r=e[n];this.getMainResultKernelMemoryOptimizedFloats(t,r),this.getMainResultSubKernelMemoryOptimizedFloats(t,r),n+1<e.length&&t.push("  index += 1")}break;default:throw new Error("optimized output only usable with Numbers, ".concat(this.returnType," specified"))}return o.linesToString(t)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0].".concat(e," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(t,e){if(!this.subKernels)return t;for(var n=0;n<this.subKernels.length;n++)"Integer"===this.subKernels[n].returnType?t.push("  gl_FragData[".concat(n+1,"].").concat(e," = float(subKernelResult_").concat(this.subKernels[n].name,")")):t.push("  gl_FragData[".concat(n+1,"].").concat(e," = subKernelResult_").concat(this.subKernels[n].name))}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];"Integer"===n.returnType?t.push("  gl_FragData[".concat(e+1,"][0] = float(subKernelResult_").concat(n.name,")")):t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(n.name))}return t}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(this.subKernels[e].name,"[0]"),"  gl_FragData[".concat(e+1,"][1] = subKernelResult_").concat(this.subKernels[e].name,"[1]"));return t}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]","  gl_FragData[0][2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  gl_FragData[".concat(e+1,"][0] = subKernelResult_").concat(this.subKernels[e].name,"[0]"),"  gl_FragData[".concat(e+1,"][1] = subKernelResult_").concat(this.subKernels[e].name,"[1]"),"  gl_FragData[".concat(e+1,"][2] = subKernelResult_").concat(this.subKernels[e].name,"[2]"));return t}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var t=[];if(!this.subKernels)return t;switch(this.returnType){case"Number":case"Float":case"Integer":for(var e=0;e<this.subKernels.length;++e)"Integer"===this.subKernels[e].returnType?t.push("  gl_FragData[".concat(e+1,"] = float(subKernelResult_").concat(this.subKernels[e].name,")")):t.push("  gl_FragData[".concat(e+1,"] = subKernelResult_").concat(this.subKernels[e].name));break;case"Array(2)":for(var n=0;n<this.subKernels.length;++n)t.push("  gl_FragData[".concat(n+1,"][0] = subKernelResult_").concat(this.subKernels[n].name,"[0]"),"  gl_FragData[".concat(n+1,"][1] = subKernelResult_").concat(this.subKernels[n].name,"[1]"));break;case"Array(3)":for(var r=0;r<this.subKernels.length;++r)t.push("  gl_FragData[".concat(r+1,"][0] = subKernelResult_").concat(this.subKernels[r].name,"[0]"),"  gl_FragData[".concat(r+1,"][1] = subKernelResult_").concat(this.subKernels[r].name,"[1]"),"  gl_FragData[".concat(r+1,"][2] = subKernelResult_").concat(this.subKernels[r].name,"[2]"));break;case"Array(4)":for(var i=0;i<this.subKernels.length;++i)t.push("  gl_FragData[".concat(i+1,"][0] = subKernelResult_").concat(this.subKernels[i].name,"[0]"),"  gl_FragData[".concat(i+1,"][1] = subKernelResult_").concat(this.subKernels[i].name,"[1]"),"  gl_FragData[".concat(i+1,"][2] = subKernelResult_").concat(this.subKernels[i].name,"[2]"),"  gl_FragData[".concat(i+1,"][3] = subKernelResult_").concat(this.subKernels[i].name,"[3]"))}return t}},{key:"replaceArtifacts",value:function(t,e){return t.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\n/g,(function(t,n){if(e.hasOwnProperty(n))return e[n];throw"unhandled artifact ".concat(n)}))}},{key:"getFragmentShader",value:function(t){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(t))}},{key:"getVertexShader",value:function(t){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.replaceArtifacts(this.constructor.vertexShader,this._getVertShaderArtifactMap(t))}},{key:"toString",value:function(){var t=o.linesToString(["const gl = context"]);return v(this.constructor,arguments,this,t)}},{key:"destroy",value:function(t){if(this.context){for(var e in this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer),this.rawValueFramebuffers){for(var n in this.rawValueFramebuffers[e])this.context.deleteFramebuffer(this.rawValueFramebuffers[e][n]),delete this.rawValueFramebuffers[e][n];delete this.rawValueFramebuffers[e]}if(this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program),this.texture){this.texture.delete();var r=this.textureCache.indexOf(this.texture.texture);r>-1&&this.textureCache.splice(r,1),this.texture=null}if(this.mappedTextures&&this.mappedTextures.length){for(var i=0;i<this.mappedTextures.length;i++){var a=this.mappedTextures[i];a.delete();var o=this.textureCache.indexOf(a.texture);o>-1&&this.textureCache.splice(o,1)}this.mappedTextures=null}if(this.kernelArguments)for(var s=0;s<this.kernelArguments.length;s++)this.kernelArguments[s].destroy();if(this.kernelConstants)for(var u=0;u<this.kernelConstants.length;u++)this.kernelConstants[u].destroy();for(;this.textureCache.length>0;){var l=this.textureCache.pop();this.context.deleteTexture(l)}if(t){var c=T.indexOf(this.canvas);c>=0&&(T[c]=null,A[c]=null)}if(this.destroyExtensions(),delete this.context,delete this.canvas,this.gpu){var h=this.gpu.kernels.indexOf(this);-1!==h&&this.gpu.kernels.splice(h,1)}}}},{key:"destroyExtensions",value:function(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toJSON",value:function(){var t=u(l(n.prototype),"toJSON",this).call(this);return t.functionNodes=i.fromKernel(this,a).toJSON(),t.settings.threadDim=this.threadDim,t}}],[{key:"isSupported",get:function(){return null!==g?g:(this.setupFeatureChecks(),g=this.isContextMatch(b))}},{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?x=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(x=new OffscreenCanvas(0,0)),x&&(b=x.getContext("webgl")||x.getContext("experimental-webgl"))&&b.getExtension&&(w={OES_texture_float:b.getExtension("OES_texture_float"),OES_texture_float_linear:b.getExtension("OES_texture_float_linear"),OES_element_index_uint:b.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:b.getExtension("WEBGL_draw_buffers")},k=this.getFeatures())}},{key:"isContextMatch",value:function(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext}},{key:"getIsTextureFloat",value:function(){return Boolean(w.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(w.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return w.WEBGL_draw_buffers?b.getParameter(w.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return b.getParameter(b.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(t,e,n,r){return y(t,e,n,r)}},{key:"testCanvas",get:function(){return x}},{key:"testContext",get:function(){return b}},{key:"features",get:function(){return k}},{key:"fragmentShader",get:function(){return p}},{key:"vertexShader",get:function(){return f}},{key:"destroyContext",value:function(t){var e=t.getExtension("WEBGL_lose_context");e&&e.loseContext()}}]),n}(r);e.exports={WebGLKernel:E}},{"../../plugins/math-random-uniformly-distributed":112,"../../utils":114,"../function-builder":9,"../gl/kernel":13,"../gl/kernel-string":12,"./fragment-shader":37,"./function-node":38,"./kernel-value-maps":39,"./vertex-shader":71}],71:[function(t,e,n){var r="__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";e.exports={vertexShader:r}},{}],72:[function(t,e,n){var r="#version 300 es\n__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat expm1(float x) {\n  return pow(".concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n\n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");e.exports={fragmentShader:r}},{}],73:[function(t,e,n){var r=t("../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"astIdentifierExpression",value:function(t,e){if("Identifier"!==t.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",t);var n=this.getType(t),i=r.sanitizeName(t.name);return"Infinity"===t.name?e.push("intBitsToFloat(2139095039)"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?e.push("bool(user_".concat(i,")")):e.push("user_".concat(i)),e}}]),n}(t("../web-gl/function-node").WebGLFunctionNode);e.exports={WebGL2FunctionNode:i}},{"../../utils":114,"../web-gl/function-node":38}],74:[function(t,e,n){var r=t("./kernel-value/boolean").WebGL2KernelValueBoolean,i=t("./kernel-value/float").WebGL2KernelValueFloat,a=t("./kernel-value/integer").WebGL2KernelValueInteger,o=t("./kernel-value/html-image").WebGL2KernelValueHTMLImage,s=t("./kernel-value/dynamic-html-image").WebGL2KernelValueDynamicHTMLImage,u=t("./kernel-value/html-image-array").WebGL2KernelValueHTMLImageArray,l=t("./kernel-value/dynamic-html-image-array").WebGL2KernelValueDynamicHTMLImageArray,c=t("./kernel-value/html-video").WebGL2KernelValueHTMLVideo,h=t("./kernel-value/dynamic-html-video").WebGL2KernelValueDynamicHTMLVideo,p=t("./kernel-value/single-input").WebGL2KernelValueSingleInput,f=t("./kernel-value/dynamic-single-input").WebGL2KernelValueDynamicSingleInput,d=t("./kernel-value/unsigned-input").WebGL2KernelValueUnsignedInput,m=t("./kernel-value/dynamic-unsigned-input").WebGL2KernelValueDynamicUnsignedInput,v=t("./kernel-value/memory-optimized-number-texture").WebGL2KernelValueMemoryOptimizedNumberTexture,y=t("./kernel-value/dynamic-memory-optimized-number-texture").WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,g=t("./kernel-value/number-texture").WebGL2KernelValueNumberTexture,x=t("./kernel-value/dynamic-number-texture").WebGL2KernelValueDynamicNumberTexture,b=t("./kernel-value/single-array").WebGL2KernelValueSingleArray,w=t("./kernel-value/dynamic-single-array").WebGL2KernelValueDynamicSingleArray,k=t("./kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI,S=t("./kernel-value/dynamic-single-array1d-i").WebGL2KernelValueDynamicSingleArray1DI,T=t("./kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI,A=t("./kernel-value/dynamic-single-array2d-i").WebGL2KernelValueDynamicSingleArray2DI,E=t("./kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI,_=t("./kernel-value/dynamic-single-array3d-i").WebGL2KernelValueDynamicSingleArray3DI,L=t("./kernel-value/array2").WebGL2KernelValueArray2,I=t("./kernel-value/array3").WebGL2KernelValueArray3,C=t("./kernel-value/array4").WebGL2KernelValueArray4,D=t("./kernel-value/unsigned-array").WebGL2KernelValueUnsignedArray,O={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:t("./kernel-value/dynamic-unsigned-array").WebGL2KernelValueDynamicUnsignedArray,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:m,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:y,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:l,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:D,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:d,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:y,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:u,HTMLVideo:c}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:w,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":S,"Array1D(3)":S,"Array1D(4)":S,"Array2D(2)":A,"Array2D(3)":A,"Array2D(4)":A,"Array3D(2)":_,"Array3D(3)":_,"Array3D(4)":_,Input:f,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:y,HTMLCanvas:s,OffscreenCanvas:s,HTMLImage:s,ImageBitmap:s,ImageData:s,HTMLImageArray:l,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:b,"Array(2)":L,"Array(3)":I,"Array(4)":C,"Array1D(2)":k,"Array1D(3)":k,"Array1D(4)":k,"Array2D(2)":T,"Array2D(3)":T,"Array2D(4)":T,"Array3D(2)":E,"Array3D(3)":E,"Array3D(4)":E,Input:p,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:v,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:u,HTMLVideo:c}}};function F(t,e,n,r){if(!t)throw new Error("type missing");if(!e)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(t=r.type);var i=O[n][e];if(!1===i[t])return null;if(void 0===i[t])throw new Error("Could not find a KernelValue for ".concat(t));return i[t]}e.exports={kernelValueMaps:O,lookupKernelValueType:F}},{"./kernel-value/array2":75,"./kernel-value/array3":76,"./kernel-value/array4":77,"./kernel-value/boolean":78,"./kernel-value/dynamic-html-image":80,"./kernel-value/dynamic-html-image-array":79,"./kernel-value/dynamic-html-video":81,"./kernel-value/dynamic-memory-optimized-number-texture":82,"./kernel-value/dynamic-number-texture":83,"./kernel-value/dynamic-single-array":84,"./kernel-value/dynamic-single-array1d-i":85,"./kernel-value/dynamic-single-array2d-i":86,"./kernel-value/dynamic-single-array3d-i":87,"./kernel-value/dynamic-single-input":88,"./kernel-value/dynamic-unsigned-array":89,"./kernel-value/dynamic-unsigned-input":90,"./kernel-value/float":91,"./kernel-value/html-image":93,"./kernel-value/html-image-array":92,"./kernel-value/html-video":94,"./kernel-value/integer":95,"./kernel-value/memory-optimized-number-texture":96,"./kernel-value/number-texture":97,"./kernel-value/single-array":98,"./kernel-value/single-array1d-i":99,"./kernel-value/single-array2d-i":100,"./kernel-value/single-array3d-i":101,"./kernel-value/single-input":102,"./kernel-value/unsigned-array":103,"./kernel-value/unsigned-input":104}],75:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/array2").WebGLKernelValueArray2);e.exports={WebGL2KernelValueArray2:r}},{"../../web-gl/kernel-value/array2":41}],76:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/array3").WebGLKernelValueArray3);e.exports={WebGL2KernelValueArray3:r}},{"../../web-gl/kernel-value/array3":42}],77:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/array4").WebGLKernelValueArray4);e.exports={WebGL2KernelValueArray4:r}},{"../../web-gl/kernel-value/array4":43}],78:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/boolean").WebGLKernelValueBoolean);e.exports={WebGL2KernelValueBoolean:r}},{"../../web-gl/kernel-value/boolean":44}],79:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2DArray ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=t[0],r=e.width,i=e.height;this.checkSize(r,i),this.dimensions=[r,i,t.length],this.textureSize=[r,i],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("./html-image-array").WebGL2KernelValueHTMLImageArray);e.exports={WebGL2KernelValueDynamicHTMLImageArray:i}},{"../../../utils":114,"./html-image-array":92}],80:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage);e.exports={WebGL2KernelValueDynamicHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-html-image":45}],81:[function(t,e,n){t("../../../utils");var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("./dynamic-html-image").WebGL2KernelValueDynamicHTMLImage);e.exports={WebGL2KernelValueDynamicHTMLVideo:r}},{"../../../utils":114,"./dynamic-html-image":80}],82:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture);e.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture":47}],83:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture);e.exports={WebGL2KernelValueDynamicNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-number-texture":48}],84:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.dimensions=r.getDimensions(t,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array").WebGL2KernelValueSingleArray);e.exports={WebGL2KernelValueDynamicSingleArray:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array":98}],85:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI);e.exports={WebGL2KernelValueDynamicSingleArray1DI:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array1d-i":99}],86:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI);e.exports={WebGL2KernelValueDynamicSingleArray2DI:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array2d-i":100}],87:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){this.setShape(t),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI);e.exports={WebGL2KernelValueDynamicSingleArray3DI:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array3d-i":101}],88:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(t){var e=p(t.size,3),i=e[0],a=e[1],o=e[2];this.dimensions=new Int32Array([i||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),u(l(n.prototype),"updateValue",this).call(this,t)}}]),n}(t("../../web-gl2/kernel-value/single-input").WebGL2KernelValueSingleInput);e.exports={WebGL2KernelValueDynamicSingleInput:i}},{"../../../utils":114,"../../web-gl2/kernel-value/single-input":102}],89:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray);e.exports={WebGL2KernelValueDynamicUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-array":54}],90:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"uniform ".concat(t," ivec2 ").concat(this.sizeId),"uniform ".concat(t," ivec3 ").concat(this.dimensionsId)])}}]),n}(t("../../web-gl/kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput);e.exports={WebGL2KernelValueDynamicUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-input":55}],91:[function(t,e,n){t("../../../utils");var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("../../web-gl/kernel-value/float").WebGLKernelValueFloat);e.exports={WebGL2KernelValueFloat:r}},{"../../../utils":114,"../../web-gl/kernel-value/float":56}],92:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).checkSize(t[0].width,t[0].height),i.dimensions=[t[0].width,t[0].height,t.length],i.textureSize=[t[0].width,t[0].height],i}return m(n,[{key:"defineTexture",value:function(){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MIN_FILTER,t.NEAREST)}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2DArray ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D_ARRAY,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage3D(e.TEXTURE_2D_ARRAY,0,e.RGBA,t[0].width,t[0].height,t.length,0,e.RGBA,e.UNSIGNED_BYTE,null);for(var n=0;n<t.length;n++){var r=0,i=0,a=1;e.texSubImage3D(e.TEXTURE_2D_ARRAY,0,r,i,n,t[n].width,t[n].height,a,e.RGBA,e.UNSIGNED_BYTE,this.uploadValue=t[n])}this.kernel.setUniform1i(this.id,this.index)}}]),n}(t("../../web-gl/kernel-value/array").WebGLKernelArray);e.exports={WebGL2KernelValueHTMLImageArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/array":40}],93:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/html-image").WebGLKernelValueHTMLImage);e.exports={WebGL2KernelValueHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/html-image":57}],94:[function(t,e,n){t("../../../utils");var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(t("./html-image").WebGL2KernelValueHTMLImage);e.exports={WebGL2KernelValueHTMLVideo:r}},{"../../../utils":114,"./html-image":93}],95:[function(t,e,n){var r=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(t){var e=this.getVariablePrecisionString();return"constants"===this.origin?"const ".concat(e," int ").concat(this.id," = ").concat(parseInt(t),";\n"):"uniform ".concat(e," int ").concat(this.id,";\n")}},{key:"updateValue",value:function(t){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=t)}}]),n}(t("../../web-gl/kernel-value/integer").WebGLKernelValueInteger);e.exports={WebGL2KernelValueInteger:r}},{"../../web-gl/kernel-value/integer":60}],96:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.id,e=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,o=this.getVariablePrecisionString();return r.linesToString(["uniform sampler2D ".concat(t),"".concat(o," ivec2 ").concat(e," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(o," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(t("../../web-gl/kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);e.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/memory-optimized-number-texture":61}],97:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.id,e=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,o=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(o," sampler2D ").concat(t),"".concat(o," ivec2 ").concat(e," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(o," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(t("../../web-gl/kernel-value/number-texture").WebGLKernelValueNumberTexture);e.exports={WebGL2KernelValueNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/number-texture":62}],98:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array").WebGLKernelValueSingleArray);e.exports={WebGL2KernelValueSingleArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array":63}],99:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI);e.exports={WebGL2KernelValueSingleArray1DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array1d-i":64}],100:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI);e.exports={WebGL2KernelValueSingleArray2DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array2d-i":65}],101:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"updateValue",value:function(t){if(t.constructor===this.initialValueConstructor){var e=this.context;r.flattenTo(t,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(t.constructor)}}]),n}(t("../../web-gl/kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI);e.exports={WebGL2KernelValueSingleArray3DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array3d-i":66}],102:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(t){var e=this.context;r.flattenTo(t.value,this.uploadValue),e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA32F,this.textureSize[0],this.textureSize[1],0,e.RGBA,e.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}]),n}(t("../../web-gl/kernel-value/single-input").WebGLKernelValueSingleInput);e.exports={WebGL2KernelValueSingleInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-input":67}],103:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/unsigned-array").WebGLKernelValueUnsignedArray);e.exports={WebGL2KernelValueUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-array":68}],104:[function(t,e,n){var r=t("../../../utils").utils,i=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getSource",value:function(){var t=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(t," sampler2D ").concat(this.id),"".concat(t," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(t," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(t("../../web-gl/kernel-value/unsigned-input").WebGLKernelValueUnsignedInput);e.exports={WebGL2KernelValueUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-input":69}],105:[function(t,e,n){var r=t("../web-gl/kernel").WebGLKernel,i=t("./function-node").WebGL2FunctionNode,a=t("../function-builder").FunctionBuilder,o=t("../../utils").utils,s=t("./fragment-shader").fragmentShader,p=t("./vertex-shader").vertexShader,f=t("./kernel-value-maps").lookupKernelValueType,v=null,y=null,g=null,x=null,b=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"initContext",value:function(){var t={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl2",t)}},{key:"initExtensions",value:function(){this.extensions={EXT_color_buffer_float:this.context.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear")}}},{key:"validateSettings",value:function(t){if(this.validate){var e=this.constructor.features;if("single"===this.precision&&!e.isFloatRead)throw new Error("Float texture outputs are not supported");if(this.graphical||null!==this.precision||(this.precision=e.isFloatRead?"single":"unsigned"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==t.length)throw new Error("Auto output only supported for kernels with only one input");var n=o.getVariableType(t[0],this.strictIntegers);switch(n){case"Array":this.output=o.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=t[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"single"===this.precision&&(console.warn("Cannot use graphical mode and single precision at the same time"),this.precision="unsigned"),void(this.texSize=o.clone(this.output))}!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"translateSource",value:function(){var t=a.fromKernel(this,i,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=t.getPrototypeString("kernel"),this.setupReturnTypes(t)}},{key:"drawBuffers",value:function(){this.context.drawBuffers(this.drawBuffersMap)}},{key:"getTextureFormat",value:function(){var t=this.context;switch(this.getInternalFormat()){case t.R32F:return t.RED;case t.RG32F:return t.RG;case t.RGBA32F:case t.RGBA:return t.RGBA;default:throw new Error("Unknown internal format")}}},{key:"getInternalFormat",value:function(){var t=this.context;if("single"===this.precision){if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":return this.optimizeFloatMemory?t.RGBA32F:t.R32F;case"Array(2)":return t.RG32F;case"Array(3)":case"Array(4)":return t.RGBA32F;default:throw new Error("Unhandled return type")}return t.RGBA32F}return t.RGBA}},{key:"_setupOutputTexture",value:function(){var t=this.context;if(this.texture)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0);else{t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer);var e=t.createTexture(),n=this.texSize;t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var r=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,r,n[0],n[1]):t.texImage2D(t.TEXTURE_2D,0,r,n[0],n[1],0,r,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.texture=new this.TextureConstructor({texture:e,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_setupSubOutputTextures",value:function(){var t=this.context;if(this.mappedTextures)for(var e=0;e<this.subKernels.length;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e+1,t.TEXTURE_2D,this.mappedTextures[e].texture,0);else{var n=this.texSize;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+r+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var a=this.getInternalFormat();"single"===this.precision?t.texStorage2D(t.TEXTURE_2D,1,a,n[0],n[1]):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n[0],n[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r+1,t.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"_getHeaderString",value:function(){return""}},{key:"_getTextureCoordinate",value:function(){var t=this.subKernels,e=this.getVariablePrecisionString(this.texSize,this.tactic);return null===t||t.length<1?"in ".concat(e," vec2 vTexCoord;\n"):"out ".concat(e," vec2 vTexCoord;\n")}},{key:"_getMainArgumentsString",value:function(t){for(var e=[],n=this.argumentNames,r=0;r<n.length;r++)e.push(this.kernelArguments[r].getSource(t[r]));return e.join("")}},{key:"getKernelString",value:function(){var t=[this.getKernelResultDeclaration()],e=this.subKernels;if(null!==e)switch(t.push("layout(location = 0) out vec4 data0"),this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<e.length;n++){var r=e[n];t.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"),"layout(location = ".concat(n+1,") out vec4 data").concat(n+1))}break;case"Array(2)":for(var i=0;i<e.length;i++)t.push("vec2 subKernelResult_".concat(e[i].name),"layout(location = ".concat(i+1,") out vec4 data").concat(i+1));break;case"Array(3)":for(var a=0;a<e.length;a++)t.push("vec3 subKernelResult_".concat(e[a].name),"layout(location = ".concat(a+1,") out vec4 data").concat(a+1));break;case"Array(4)":for(var s=0;s<e.length;s++)t.push("vec4 subKernelResult_".concat(e[s].name),"layout(location = ".concat(s+1,") out vec4 data").concat(s+1))}else t.push("out vec4 data0");return o.linesToString(t)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return o.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var t=[];if(!this.subKernels)return"";for(var e=0;e<this.subKernels.length;e++)"Integer"===this.subKernels[e].returnType?t.push("  data".concat(e+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[e].name,"))")):t.push("  data".concat(e+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[e].name,")"));return o.linesToString(t)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(t,e){t.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0.".concat(e," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(t,e){if(!this.subKernels)return t;for(var n=0;n<this.subKernels.length;n++){var r=this.subKernels[n];"Integer"===r.returnType?t.push("  data".concat(n+1,".").concat(e," = float(subKernelResult_").concat(r.name,")")):t.push("  data".concat(n+1,".").concat(e," = subKernelResult_").concat(r.name))}}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];"Integer"===n.returnType?t.push("  data".concat(e+1,"[0] = float(subKernelResult_").concat(n.name,")")):t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name))}return t}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(e+1,"[1] = subKernelResult_").concat(n.name,"[1]"))}return t}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]","  data0[2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e){var n=this.subKernels[e];t.push("  data".concat(e+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(e+1,"[1] = subKernelResult_").concat(n.name,"[1]"),"  data".concat(e+1,"[2] = subKernelResult_").concat(n.name,"[2]"))}return t}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var t=[];if(!this.subKernels)return t;for(var e=0;e<this.subKernels.length;++e)t.push("  data".concat(e+1," = subKernelResult_").concat(this.subKernels[e].name));return t}},{key:"destroyExtensions",value:function(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}},{key:"toJSON",value:function(){var t=u(l(n.prototype),"toJSON",this).call(this);return t.functionNodes=a.fromKernel(this,i).toJSON(),t.settings.threadDim=this.threadDim,t}}],[{key:"isSupported",get:function(){return null!==v?v:(this.setupFeatureChecks(),v=this.isContextMatch(g))}},{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?y=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(y=new OffscreenCanvas(0,0)),y&&(g=y.getContext("webgl2"))&&g.getExtension&&(g.getExtension("EXT_color_buffer_float"),g.getExtension("OES_texture_float_linear"),x=this.getFeatures())}},{key:"isContextMatch",value:function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext}},{key:"getFeatures",value:function(){var t=this.testContext;return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),kernelMap:!0,isTextureFloat:!0,isDrawBuffers:!0,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT),lowFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT),mediumIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_INT),mediumFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),highIntPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT),highFloatPrecision:t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT)})}},{key:"getIsTextureFloat",value:function(){return!0}},{key:"getChannelCount",value:function(){return g.getParameter(g.MAX_DRAW_BUFFERS)}},{key:"getMaxTextureSize",value:function(){return g.getParameter(g.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(t,e,n,r){return f(t,e,n,r)}},{key:"testCanvas",get:function(){return y}},{key:"testContext",get:function(){return g}},{key:"features",get:function(){return x}},{key:"fragmentShader",get:function(){return s}},{key:"vertexShader",get:function(){return p}}]),n}(r);e.exports={WebGL2Kernel:b}},{"../../utils":114,"../function-builder":9,"../web-gl/kernel":70,"./fragment-shader":72,"./function-node":73,"./kernel-value-maps":74,"./vertex-shader":106}],106:[function(t,e,n){var r="#version 300 es\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";e.exports={vertexShader:r}},{}],107:[function(t,e,n){var r=t("./index"),i=r.GPU;for(var a in r)r.hasOwnProperty(a)&&"GPU"!==a&&(i[a]=r[a]);function o(t){t.GPU||Object.defineProperty(t,"GPU",{get:function(){return i}})}"undefined"!==typeof window&&o(window),"undefined"!==typeof self&&o(self),e.exports=r},{"./index":109}],108:[function(t,e,n){var r=t("gpu-mock.js").gpuMock,i=t("./utils").utils;t("./backend/kernel");var a=t("./backend/cpu/kernel").CPUKernel,o=t("./backend/headless-gl/kernel").HeadlessGLKernel,s=t("./backend/web-gl2/kernel").WebGL2Kernel,u=t("./backend/web-gl/kernel").WebGLKernel,l=t("./kernel-run-shortcut").kernelRunShortcut,c=[o,s,u],h=["gpu","cpu"],p={headlessgl:o,webgl2:s,webgl:u},f=!0,v=function(){function t(e){if(d(this,t),e=e||{},this.canvas=e.canvas||null,this.context=e.context||null,this.mode=e.mode,this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.injectedNative=null,"dev"!==this.mode){if(this.chooseKernel(),e.functions)for(var n=0;n<e.functions.length;n++)this.addFunction(e.functions[n]);if(e.nativeFunctions)for(var r in e.nativeFunctions)if(e.nativeFunctions.hasOwnProperty(r)){var i=e.nativeFunctions[r],a=i.name,o=i.source;this.addNativeFunction(a,o,i)}}}return m(t,[{key:"chooseKernel",value:function(){if(!this.Kernel){var t=null;if(this.context){for(var e=0;e<c.length;e++){var n=c[e];if(n.isContextMatch(this.context)){if(!n.isSupported)throw new Error("Kernel type ".concat(n.name," not supported"));t=n;break}}if(null===t)throw new Error("unknown Context")}else if(this.mode){if(this.mode in p)f&&!p[this.mode].isSupported||(t=p[this.mode]);else if("gpu"===this.mode){for(var r=0;r<c.length;r++)if(c[r].isSupported){t=c[r];break}}else"cpu"===this.mode&&(t=a);if(!t)throw new Error('A requested mode of "'.concat(this.mode,'" and is not supported'))}else{for(var i=0;i<c.length;i++)if(c[i].isSupported){t=c[i];break}t||(t=a)}this.mode||(this.mode=t.mode),this.Kernel=t}}},{key:"createKernel",value:function(t,e){if("undefined"===typeof t)throw new Error("Missing source parameter");if("object"!==typeof t&&!i.isFunction(t)&&"string"!==typeof t)throw new Error("source parameter not a function");var n=this.kernels;if("dev"===this.mode){var o=r(t,y(e));return n.push(o),o}t="function"===typeof t?t.toString():t;var s={},u=y(e)||{};function c(e){console.warn("Falling back to CPU");var n=new a(t,{argumentTypes:m.argumentTypes,constantTypes:m.constantTypes,graphical:m.graphical,loopMaxIterations:m.loopMaxIterations,constants:m.constants,dynamicOutput:m.dynamicOutput,dynamicArgument:m.dynamicArguments,output:m.output,precision:m.precision,pipeline:m.pipeline,immutable:m.immutable,optimizeFloatMemory:m.optimizeFloatMemory,fixIntegerDivisionAccuracy:m.fixIntegerDivisionAccuracy,functions:m.functions,nativeFunctions:m.nativeFunctions,injectedNative:m.injectedNative,subKernels:m.subKernels,strictIntegers:m.strictIntegers,debug:m.debug});n.build.apply(n,e);var r=n.run.apply(n,e);return m.replaceKernel(n),r}function h(e,r,i){i.debug&&console.warn("Switching kernels");var a=null;if(i.signature&&!s[i.signature]&&(s[i.signature]=i),i.dynamicOutput)for(var o=e.length-1;o>=0;o--){var u=e[o];"outputPrecisionMismatch"===u.type&&(a=u.needed)}var l=i.constructor,p=l.getArgumentTypes(i,r),d=l.getSignature(i,p),v=s[d];if(v)return v.onActivate(i),v;var y=s[d]=new l(t,{argumentTypes:p,constantTypes:i.constantTypes,graphical:i.graphical,loopMaxIterations:i.loopMaxIterations,constants:i.constants,dynamicOutput:i.dynamicOutput,dynamicArgument:i.dynamicArguments,context:i.context,canvas:i.canvas,output:a||i.output,precision:i.precision,pipeline:i.pipeline,immutable:i.immutable,optimizeFloatMemory:i.optimizeFloatMemory,fixIntegerDivisionAccuracy:i.fixIntegerDivisionAccuracy,functions:i.functions,nativeFunctions:i.nativeFunctions,injectedNative:i.injectedNative,subKernels:i.subKernels,strictIntegers:i.strictIntegers,debug:i.debug,gpu:i.gpu,validate:f,returnType:i.returnType,tactic:i.tactic,onRequestFallback:c,onRequestSwitchKernel:h,texture:i.texture,mappedTextures:i.mappedTextures,drawBuffersMap:i.drawBuffersMap});return y.build.apply(y,r),m.replaceKernel(y),n.push(y),y}e&&"object"===typeof e.argumentTypes&&(u.argumentTypes=Object.keys(e.argumentTypes).map((function(t){return e.argumentTypes[t]})));var p=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,injectedNative:this.injectedNative,gpu:this,validate:f,onRequestFallback:c,onRequestSwitchKernel:h},u),d=new this.Kernel(t,p),m=l(d);return this.canvas||(this.canvas=d.canvas),this.context||(this.context=d.context),n.push(d),m}},{key:"createKernelMap",value:function(){var t,e,n=typeof arguments[arguments.length-2];if("function"===n||"string"===n?(t=arguments[arguments.length-2],e=arguments[arguments.length-1]):t=arguments[arguments.length-1],"dev"!==this.mode&&(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&h.indexOf(this.mode)<0)throw new Error("kernelMap not supported on ".concat(this.Kernel.name));var r=y(e);if(e&&"object"===typeof e.argumentTypes&&(r.argumentTypes=Object.keys(e.argumentTypes).map((function(t){return e.argumentTypes[t]}))),Array.isArray(arguments[0])){r.subKernels=[];for(var a=arguments[0],o=0;o<a.length;o++){var s=a[o].toString(),u=i.getFunctionNameFromString(s);r.subKernels.push({name:u,source:s,property:o})}}else{r.subKernels=[];var l=arguments[0];for(var c in l)if(l.hasOwnProperty(c)){var p=l[c].toString(),f=i.getFunctionNameFromString(p);r.subKernels.push({name:f||c,source:p,property:c})}}return this.createKernel(t,r)}},{key:"combineKernels",value:function(){var t=arguments[arguments.length-1];if("cpu"===arguments[0].kernel.constructor.mode)return t;for(var e=arguments[0].canvas,n=arguments[0].context,r=arguments.length-1,i=0;i<r;i++)arguments[i].setCanvas(e).setContext(n).setPipeline(!0);return function(){var e=t.apply(this,arguments);return e.toArray?e.toArray():e}}},{key:"setFunctions",value:function(t){return this.functions=t,this}},{key:"setNativeFunctions",value:function(t){return this.nativeFunctions=t,this}},{key:"addFunction",value:function(t,e){return this.functions.push({source:t,settings:e}),this}},{key:"addNativeFunction",value:function(t,e,n){if(this.kernels.length>0)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');return this.nativeFunctions.push(Object.assign({name:t,source:e},n)),this}},{key:"injectNative",value:function(t){return this.injectedNative=t,this}},{key:"destroy",value:function(){var t=this;return new Promise((function(e,n){t.kernels||e(),setTimeout((function(){try{for(var r=0;r<t.kernels.length;r++)t.kernels[r].destroy(!0);var i=t.kernels[0];i&&(i.kernel&&(i=i.kernel),i.constructor.destroyContext&&i.constructor.destroyContext(t.context))}catch(a){n(a)}e()}),0)}))}}],[{key:"disableValidation",value:function(){f=!1}},{key:"enableValidation",value:function(){f=!0}},{key:"isGPUSupported",get:function(){return c.some((function(t){return t.isSupported}))}},{key:"isKernelMapSupported",get:function(){return c.some((function(t){return t.isSupported&&t.features.kernelMap}))}},{key:"isOffscreenCanvasSupported",get:function(){return"undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas||"undefined"!==typeof importScripts}},{key:"isWebGLSupported",get:function(){return u.isSupported}},{key:"isWebGL2Supported",get:function(){return s.isSupported}},{key:"isHeadlessGLSupported",get:function(){return o.isSupported}},{key:"isCanvasSupported",get:function(){return"undefined"!==typeof HTMLCanvasElement}},{key:"isGPUHTMLImageArraySupported",get:function(){return s.isSupported}},{key:"isSinglePrecisionSupported",get:function(){return c.some((function(t){return t.isSupported&&t.features.isFloatRead&&t.features.isTextureFloat}))}}]),t}();function y(t){if(!t)return{};var e=Object.assign({},t);return t.hasOwnProperty("floatOutput")&&(i.warnDeprecated("setting","floatOutput","precision"),e.precision=t.floatOutput?"single":"unsigned"),t.hasOwnProperty("outputToTexture")&&(i.warnDeprecated("setting","outputToTexture","pipeline"),e.pipeline=Boolean(t.outputToTexture)),t.hasOwnProperty("outputImmutable")&&(i.warnDeprecated("setting","outputImmutable","immutable"),e.immutable=Boolean(t.outputImmutable)),t.hasOwnProperty("floatTextures")&&(i.warnDeprecated("setting","floatTextures","optimizeFloatMemory"),e.optimizeFloatMemory=Boolean(t.floatTextures)),e}e.exports={GPU:v,kernelOrder:c,kernelTypes:h}},{"./backend/cpu/kernel":8,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/kernel":70,"./backend/web-gl2/kernel":105,"./kernel-run-shortcut":111,"./utils":114,"gpu-mock.js":4}],109:[function(t,e,n){var r=t("./gpu").GPU,i=t("./alias").alias,a=t("./utils").utils,o=t("./input"),s=o.Input,u=o.input,l=t("./texture").Texture,c=t("./backend/function-builder").FunctionBuilder,h=t("./backend/function-node").FunctionNode,p=t("./backend/cpu/function-node").CPUFunctionNode,f=t("./backend/cpu/kernel").CPUKernel,d=t("./backend/headless-gl/kernel").HeadlessGLKernel,m=t("./backend/web-gl/function-node").WebGLFunctionNode,v=t("./backend/web-gl/kernel").WebGLKernel,y=t("./backend/web-gl/kernel-value-maps").kernelValueMaps,g=t("./backend/web-gl2/function-node").WebGL2FunctionNode,x=t("./backend/web-gl2/kernel").WebGL2Kernel,b=t("./backend/web-gl2/kernel-value-maps").kernelValueMaps,w=t("./backend/gl/kernel").GLKernel,k=t("./backend/kernel").Kernel,S=t("./backend/function-tracer").FunctionTracer,T=t("./plugins/math-random-uniformly-distributed");e.exports={alias:i,CPUFunctionNode:p,CPUKernel:f,GPU:r,FunctionBuilder:c,FunctionNode:h,HeadlessGLKernel:d,Input:s,input:u,Texture:l,utils:a,WebGL2FunctionNode:g,WebGL2Kernel:x,webGL2KernelValueMaps:b,WebGLFunctionNode:m,WebGLKernel:v,webGLKernelValueMaps:y,GLKernel:w,Kernel:k,FunctionTracer:S,plugins:{mathRandom:T}}},{"./alias":5,"./backend/cpu/function-node":6,"./backend/cpu/kernel":8,"./backend/function-builder":9,"./backend/function-node":10,"./backend/function-tracer":11,"./backend/gl/kernel":13,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/function-node":38,"./backend/web-gl/kernel":70,"./backend/web-gl/kernel-value-maps":39,"./backend/web-gl2/function-node":73,"./backend/web-gl2/kernel":105,"./backend/web-gl2/kernel-value-maps":74,"./gpu":108,"./input":110,"./plugins/math-random-uniformly-distributed":112,"./texture":113,"./utils":114}],110:[function(t,e,n){var r=function(){function e(t,n){d(this,e),this.value=t,Array.isArray(n)?this.size=n:(this.size=new Int32Array(3),n.z?this.size=new Int32Array([n.x,n.y,n.z]):n.y?this.size=new Int32Array([n.x,n.y]):this.size=new Int32Array([n.x]));var r=p(this.size,3),i=r[0],a=r[1],o=r[2];if(o){if(this.value.length!==i*a*o)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," * ").concat(o," = ").concat(a*i*o))}else if(a){if(this.value.length!==i*a)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," = ").concat(a*i))}else if(this.value.length!==i)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i))}return m(e,[{key:"toArray",value:function(){var e=t("./utils").utils,n=p(this.size,3),r=n[0],i=n[1],a=n[2];return a?e.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i,a):i?e.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i):this.value}}]),e}();function i(t,e){return new r(t,e)}e.exports={Input:r,input:i}},{"./utils":114}],111:[function(t,e,n){var r=t("./utils").utils;function i(t){var e=function(){return t.build.apply(t,arguments),e=function(){var e=t.run.apply(t,arguments);if(t.switchingKernels){var r=t.resetSwitchingKernels(),i=t.onRequestSwitchKernel(r,arguments,t);n.kernel=t=i,e=i.run.apply(i,arguments)}return t.renderKernels?t.renderKernels():t.renderOutput?t.renderOutput():e},e.apply(t,arguments)},n=function(){return e.apply(t,arguments)};return n.exec=function(){var t=arguments,n=this;return new Promise((function(r,i){try{r(e.apply(n,t))}catch(a){i(a)}}))},n.replaceKernel=function(e){a(t=e,n)},a(t,n),n}function a(t,e){if(e.kernel)e.kernel=t;else{for(var n=r.allPropertiesOf(t),i=function(){var r=n[a];if("_"===r[0]&&"_"===r[1])return"continue";"function"===typeof t[r]?"add"===r.substring(0,3)||"set"===r.substring(0,3)?e[r]=function(){return e.kernel[r].apply(e.kernel,arguments),e}:e[r]=function(){return e.kernel[r].apply(e.kernel,arguments)}:(e.__defineGetter__(r,(function(){return e.kernel[r]})),e.__defineSetter__(r,(function(t){e.kernel[r]=t})))},a=0;a<n.length;a++)i();e.kernel=t}}e.exports={kernelRunShortcut:i}},{"./utils":114}],112:[function(t,e,n){var r={name:"math-random-uniformly-distributed",onBeforeRun:function(t){t.setUniform1f("randomSeed1",Math.random()),t.setUniform1f("randomSeed2",Math.random())},functionMatch:"Math.random()",functionReplace:"nrand(vTexCoord)",functionReturnType:"Number",source:"// https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0,1]\nhighp float randomSeedShift = 1.0;\nhighp float slide = 1.0;\nuniform highp float randomSeed1;\nuniform highp float randomSeed2;\n\nhighp float nrand(highp vec2 n) {\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\n  randomSeedShift = result;\n  if (randomSeedShift > 0.5) {\n    slide += 0.00009; \n  } else {\n    slide += 0.0009;\n  }\n  return result;\n}"};e.exports=r},{}],113:[function(t,e,n){var r=function(){function t(e){d(this,t);var n=e.texture,r=e.size,i=e.dimensions,a=e.output,o=e.context,s=e.type,u=void 0===s?"NumberTexture":s,l=e.kernel,c=e.internalFormat,h=e.textureFormat;if(!a)throw new Error('settings property "output" required.');if(!o)throw new Error('settings property "context" required.');if(!n)throw new Error('settings property "texture" required.');if(!l)throw new Error('settings property "kernel" required.');this.texture=n,n._refs?n._refs++:n._refs=1,this.size=r,this.dimensions=i,this.output=a,this.context=o,this.kernel=l,this.type=u,this._deleted=!1,this.internalFormat=c,this.textureFormat=h}return m(t,[{key:"toArray",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clone",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"delete",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clear",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}}]),t}();e.exports={Texture:r}},{}],114:[function(t,e,n){var r=t("acorn"),i=t("./input").Input,a=t("./texture").Texture,o=/function ([^(]*)/,s=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=/([^\s,]+)/g,l={systemEndianness:function(){return d},getSystemEndianness:function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return"LE";if(222===n[0])return"BE";throw new Error("unknown endianness")},isFunction:function(t){return"function"===typeof t},isFunctionString:function(t){return"string"===typeof t&&"function"===t.slice(0,8).toLowerCase()},getFunctionNameFromString:function(t){var e=o.exec(t);return e&&0!==e.length?e[1].trim():null},getFunctionBodyFromString:function(t){return t.substring(t.indexOf("{")+1,t.lastIndexOf("}"))},getArgumentNamesFromString:function(t){var e=t.replace(s,""),n=e.slice(e.indexOf("(")+1,e.indexOf(")")).match(u);return null===n&&(n=[]),n},clone:function(t){if(null===t||"object"!==typeof t||t.hasOwnProperty("isActiveClone"))return t;var e=t.constructor();for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t.isActiveClone=null,e[n]=l.clone(t[n]),delete t.isActiveClone);return e},isArray:function(t){return!isNaN(t.length)},getVariableType:function(t,e){if(l.isArray(t))return t.length>0&&"IMG"===t[0].nodeName?"HTMLImageArray":"Array";switch(t.constructor){case Boolean:return"Boolean";case Number:return e&&Number.isInteger(t)?"Integer":"Float";case a:return t.type;case i:return"Input"}if("nodeName"in t)switch(t.nodeName){case"IMG":case"CANVAS":return"HTMLImage";case"VIDEO":return"HTMLVideo"}else{if(t.hasOwnProperty("type"))return t.type;if("undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)return"OffscreenCanvas";if("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap)return"ImageBitmap";if("undefined"!==typeof ImageData&&t instanceof ImageData)return"ImageData"}return"Unknown"},getKernelTextureSize:function(t,e){var n=p(e,3),r=n[0],i=n[1],a=(r||1)*(i||1)*(n[2]||1);return t.optimizeFloatMemory&&"single"===t.precision&&(r=a=Math.ceil(a/4)),i>1&&r*i===a?new Int32Array([r,i]):l.closestSquareDimensions(a)},closestSquareDimensions:function(t){for(var e=Math.sqrt(t),n=Math.ceil(e),r=Math.floor(e);n*r<t;)n--,r=Math.ceil(t/n);return new Int32Array([r,Math.ceil(t/r)])},getMemoryOptimizedFloatTextureSize:function(t,e){var n=l.roundTo((t[0]||1)*(t[1]||1)*(t[2]||1)*(t[3]||1),4)/e;return l.closestSquareDimensions(n)},getMemoryOptimizedPackedTextureSize:function(t,e){var n=p(t,3),r=n[0],i=n[1],a=n[2],o=l.roundTo((r||1)*(i||1)*(a||1),4)/(4/e);return l.closestSquareDimensions(o)},roundTo:function(t,e){return Math.floor((t+e-1)/e)*e},getDimensions:function(t,e){var n;if(l.isArray(t)){for(var r=[],o=t;l.isArray(o);)r.push(o.length),o=o[0];n=r.reverse()}else if(t instanceof a)n=t.output;else{if(!(t instanceof i))throw new Error("Unknown dimensions of ".concat(t));n=t.size}if(e)for(n=Array.from(n);n.length<3;)n.push(1);return new Int32Array(n)},flatten2dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)e.set(t[r],n),n+=t[r].length},flatten3dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)e.set(t[r][i],n),n+=t[r][i].length},flatten4dArrayTo:function(t,e){for(var n=0,r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)for(var a=0;a<t[r][i].length;a++)e.set(t[r][i][a],n),n+=t[r][i][a].length},flattenTo:function(t,e){l.isArray(t[0])?l.isArray(t[0][0])?l.isArray(t[0][0][0])?l.flatten4dArrayTo(t,e):l.flatten3dArrayTo(t,e):l.flatten2dArrayTo(t,e):e.set(t)},splitArray:function(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(new t.constructor(t.buffer,4*r+t.byteOffset,e));return n},getAstString:function(t,e){var n=Array.isArray(t)?t:t.split(/\r?\n/g),r=e.loc.start,i=e.loc.end,a=[];if(r.line===i.line)a.push(n[r.line-1].substring(r.column,i.column));else{a.push(n[r.line-1].slice(r.column));for(var o=r.line;o<i.line;o++)a.push(n[o]);a.push(n[i.line-1].slice(0,i.column))}return a.join("\n")},allPropertiesOf:function(t){var e=[];do{e.push.apply(e,Object.getOwnPropertyNames(t))}while(t=Object.getPrototypeOf(t));return e},linesToString:function(t){return t.length>0?t.join(";\n")+";\n":"\n"},warnDeprecated:function(t,e,n){n?console.warn("You are using a deprecated ".concat(t,' "').concat(e,'". It has been replaced with "').concat(n,'". Fixing, but please upgrade as it will soon be removed.')):console.warn("You are using a deprecated ".concat(t,' "').concat(e,'". It has been removed. Fixing, but please upgrade as it will soon be removed.'))},flipPixels:function(t,e,n){for(var r=n/2|0,i=4*e,a=new Uint8ClampedArray(4*e),o=t.slice(0),s=0;s<r;++s){var u=s*i,l=(n-s-1)*i;a.set(o.subarray(u,u+i)),o.copyWithin(u,l,l+i),o.set(a,l)}return o},erectPackedFloat:function(t,e){return t.subarray(0,e)},erect2DPackedFloat:function(t,e,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*e,o=a+e;r[i]=t.subarray(a,o)}return r},erect3DPackedFloat:function(t,e,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var o=new Array(n),s=0;s<n;s++){var u=a*n*e+s*e,l=u+e;o[s]=t.subarray(u,l)}i[a]=o}return i},erectMemoryOptimizedFloat:function(t,e){return t.subarray(0,e)},erectMemoryOptimized2DFloat:function(t,e,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*e;r[i]=t.subarray(a,a+e)}return r},erectMemoryOptimized3DFloat:function(t,e,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var o=new Array(n),s=0;s<n;s++){var u=a*n*e+s*e;o[s]=t.subarray(u,u+e)}i[a]=o}return i},erectFloat:function(t,e){for(var n=new Float32Array(e),r=0,i=0;i<e;i++)n[i]=t[r],r+=4;return n},erect2DFloat:function(t,e,n){for(var r=new Array(n),i=0,a=0;a<n;a++){for(var o=new Float32Array(e),s=0;s<e;s++)o[s]=t[i],i+=4;r[a]=o}return r},erect3DFloat:function(t,e,n,r){for(var i=new Array(r),a=0,o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Float32Array(e),c=0;c<e;c++)l[c]=t[a],a+=4;s[u]=l}i[o]=s}return i},erectArray2:function(t,e){for(var n=new Array(e),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+2);return n},erect2DArray2:function(t,e,n){for(var r=new Array(n),i=4*e,a=0;a<n;a++){for(var o=new Array(e),s=a*i,u=0,l=0;l<i;l+=4)o[u++]=t.subarray(l+s,l+s+2);r[a]=o}return r},erect3DArray2:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Array(e),c=o*i*n+u*i,h=0,p=0;p<i;p+=4)l[h++]=t.subarray(p+c,p+c+2);s[u]=l}a[o]=s}return a},erectArray3:function(t,e){for(var n=new Array(e),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+3);return n},erect2DArray3:function(t,e,n){for(var r=4*e,i=new Array(n),a=0;a<n;a++){for(var o=new Array(e),s=a*r,u=0,l=0;l<r;l+=4)o[u++]=t.subarray(l+s,l+s+3);i[a]=o}return i},erect3DArray3:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Array(e),c=o*i*n+u*i,h=0,p=0;p<i;p+=4)l[h++]=t.subarray(p+c,p+c+3);s[u]=l}a[o]=s}return a},erectArray4:function(t,e){for(var n=new Array(t),r=4*e,i=0,a=0;a<r;a+=4)n[i++]=t.subarray(a,a+4);return n},erect2DArray4:function(t,e,n){for(var r=4*e,i=new Array(n),a=0;a<n;a++){for(var o=new Array(e),s=a*r,u=0,l=0;l<r;l+=4)o[u++]=t.subarray(l+s,l+s+4);i[a]=o}return i},erect3DArray4:function(t,e,n,r){for(var i=4*e,a=new Array(r),o=0;o<r;o++){for(var s=new Array(n),u=0;u<n;u++){for(var l=new Array(e),c=o*i*n+u*i,h=0,p=0;p<i;p+=4)l[h++]=t.subarray(p+c,p+c+4);s[u]=l}a[o]=s}return a},flattenFunctionToString:function(t,e){var n=e.findDependency,i=e.thisLookup,a=(e.doNotDefine,e.flattened);a||(a=e.flattened={});var o=r.parse(t),s=[],u=0;function c(t){if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e.push(c(t[r]));return e.join("")}switch(t.type){case"Program":return c(t.body)+("VariableDeclaration"===t.body[0].type?";":"");case"FunctionDeclaration":return"function ".concat(t.id.name,"(").concat(t.params.map(c).join(", "),") ").concat(c(t.body));case"BlockStatement":var a=[];u+=2;for(var o=0;o<t.body.length;o++){var h=c(t.body[o]);h&&a.push(" ".repeat(u)+h,";\n")}return u-=2,"{\n".concat(a.join(""),"}");case"VariableDeclaration":var p=l.normalizeDeclarations(t).map(c).filter((function(t){return null!==t}));return p.length<1?"":"".concat(t.kind," ").concat(p.join(","));case"VariableDeclarator":return t.init.object&&"ThisExpression"===t.init.object.type?i(t.init.property.name,!0)?"".concat(t.id.name," = ").concat(c(t.init)):null:"".concat(t.id.name," = ").concat(c(t.init));case"CallExpression":if("subarray"===t.callee.property.name)return"".concat(c(t.callee.object),".").concat(c(t.callee.property),"(").concat(t.arguments.map((function(t){return c(t)})).join(", "),")");if("gl"===t.callee.object.name||"context"===t.callee.object.name)return"".concat(c(t.callee.object),".").concat(c(t.callee.property),"(").concat(t.arguments.map((function(t){return c(t)})).join(", "),")");if("ThisExpression"===t.callee.object.type)return s.push(n("this",t.callee.property.name)),"".concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return c(t)})).join(", "),")");if(t.callee.object.name){var f=n(t.callee.object.name,t.callee.property.name);return null===f?"".concat(t.callee.object.name,".").concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return c(t)})).join(", "),")"):(s.push(f),"".concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return c(t)})).join(", "),")"))}if("MemberExpression"===t.callee.object.type)return"".concat(c(t.callee.object),".").concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return c(t)})).join(", "),")");throw new Error("unknown ast.callee");case"ReturnStatement":return"return ".concat(c(t.argument));case"BinaryExpression":return"(".concat(c(t.left)).concat(t.operator).concat(c(t.right),")");case"UnaryExpression":return t.prefix?"".concat(t.operator," ").concat(c(t.argument)):"".concat(c(t.argument)," ").concat(t.operator);case"ExpressionStatement":return"".concat(c(t.expression));case"SequenceExpression":return"(".concat(c(t.expressions),")");case"ArrowFunctionExpression":return"(".concat(t.params.map(c).join(", "),") => ").concat(c(t.body));case"Literal":return t.raw;case"Identifier":return t.name;case"MemberExpression":return"ThisExpression"===t.object.type?i(t.property.name):t.computed?"".concat(c(t.object),"[").concat(c(t.property),"]"):c(t.object)+"."+c(t.property);case"ThisExpression":return"this";case"NewExpression":return"new ".concat(c(t.callee),"(").concat(t.arguments.map((function(t){return c(t)})).join(", "),")");case"ForStatement":return"for (".concat(c(t.init),";").concat(c(t.test),";").concat(c(t.update),") ").concat(c(t.body));case"AssignmentExpression":return"".concat(c(t.left)).concat(t.operator).concat(c(t.right));case"UpdateExpression":return"".concat(c(t.argument)).concat(t.operator);case"IfStatement":return"if (".concat(c(t.test),") ").concat(c(t.consequent));case"ThrowStatement":return"throw ".concat(c(t.argument));case"ObjectPattern":return t.properties.map(c).join(", ");case"ArrayPattern":return t.elements.map(c).join(", ");case"DebuggerStatement":return"debugger;";case"ConditionalExpression":return"".concat(c(t.test),"?").concat(c(t.consequent),":").concat(c(t.alternate));case"Property":if("init"===t.kind)return c(t.key)}throw new Error("unhandled ast.type of ".concat(t.type))}var h=c(o);if(s.length>0){for(var p=[],f=0;f<s.length;f++){var d=s[f];a[d]||(a[d]=!0),d&&p.push(l.flattenFunctionToString(d,e)+"\n")}return p.join("")+h}return h},normalizeDeclarations:function(t){if("VariableDeclaration"!==t.type)throw new Error('Ast is not of type "VariableDeclaration"');for(var e=[],n=0;n<t.declarations.length;n++){var r=t.declarations[n];if(r.id&&"ObjectPattern"===r.id.type&&r.id.properties)for(var i=r.id.properties,a=0;a<i.length;a++){var o=i[a];if("ObjectPattern"===o.value.type&&o.value.properties)for(var s=0;s<o.value.properties.length;s++){var u=o.value.properties[s];if("Property"!==u.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:u.key.name},init:{type:"MemberExpression",object:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:o.key.name},computed:!1},property:{type:"Identifier",name:u.key.name},computed:!1}})}else{if("Identifier"!==o.value.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:o.value&&o.value.name?o.value.name:o.key.name},init:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:o.key.name},computed:!1}})}}else if(r.id&&"ArrayPattern"===r.id.type&&r.id.elements)for(var l=r.id.elements,c=0;c<l.length;c++){var h=l[c];if("Identifier"!==h.type)throw new Error("unexpected state");e.push({type:"VariableDeclarator",id:{type:"Identifier",name:h.name},init:{type:"MemberExpression",object:r.init,property:{type:"Literal",value:c,raw:c.toString(),start:h.start,end:h.end},computed:!0}})}else e.push(r)}return e},splitHTMLImageToRGB:function(t,e){var n=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].r}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),r=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].g}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),i=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].b}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),a=t.createKernel((function(t){return 255*t[this.thread.y][this.thread.x].a}),{output:[e.width,e.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),o=[n(e),r(e),i(e),a(e)];return o.rKernel=n,o.gKernel=r,o.bKernel=i,o.aKernel=a,o.gpu=t,o},splitRGBAToCanvases:function(t,e,n,r){var i=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(e.r/255,0,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});i(e);var a=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(0,e.g/255,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});a(e);var o=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(0,0,e.b/255,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});o(e);var s=t.createKernel((function(t){var e=t[this.thread.y][this.thread.x];this.color(255,255,255,e.a/255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});return s(e),[i.canvas,a.canvas,o.canvas,s.canvas]},getMinifySafeName:function(t){try{var e=r.parse("const value = ".concat(t.toString())).body[0].declarations[0].init;return e.body.name||e.body.body[0].argument.name}catch(n){throw new Error("Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }")}},sanitizeName:function(t){return c.test(t)&&(t=t.replace(c,"S_S")),h.test(t)?t=t.replace(h,"U_U"):f.test(t)&&(t=t.replace(f,"u_u")),t}},c=/\$/,h=/__/,f=/_/,d=l.getSystemEndianness();e.exports={utils:l}},{"./input":110,"./texture":113,acorn:1}]},{},[107])(107)},t.exports=n()})),F=null;function P(t){F=t}function M(t,e){var n=F;return null===n&&P(n=new O.GPU({mode:"gpu"})),n.createKernel(t,e).setPipeline(!0)}function R(t,e,n){var r=F;return null===r&&P(r=new O.GPU({mode:"gpu"})),r.createKernelMap(t,e,n).setPipeline(!0)}function N(t,e){return new O.Input(t,e)}function z(t){t instanceof O.Texture&&t.delete()}function V(t){if(t instanceof O.Texture)t.clear();else{if(Array.isArray(t))if("number"===typeof t[0])t.fill(0);else{if("number"===typeof t[0][0]){for(var e=0;e<t.length;e++)t[e].fill(0);return}if("number"===typeof t[0][0][0]){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)r[i].fill(0);return}}if(!(t instanceof Float32Array))throw new Error("unhandled value");t.fill(0)}}function j(t){if(t instanceof O.Texture)return t.clone();if(t instanceof Float32Array)return t.slice(0);if(Array.isArray(t)){if("number"===typeof t[0])return t.slice(0);if("number"===typeof t[0][0]){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n].slice(0);return e}if("number"===typeof t[0][0][0]){for(var r=new Array(t.length),i=0;i<t.length;i++)for(var a=t[i],o=new Array(a.length),s=0;s<a.length;s++)o[s]=a[s].slice(0);return r}}throw new Error("unhandled value")}function K(t){for(var e=0,n=0;n<this.constants.height;n++)for(var r=0;r<this.constants.width;r++)e+=Math.pow(t[n][r],2);return e/this.constants.length}var U=m((function t(e){var n=e.width,r=e.height;d(this,t),this.calculate=M(K,{output:[1],constants:{width:n,height:r,length:n*r},immutable:!0}),this.addAbsolute=M((function(t,e){return t[0]+Math.abs(e[0][0])}),{output:[1],immutable:!0}),this.add=M((function(t,e){return t[0]+e[0]}),{output:[1],immutable:!0}),this.divide=M((function(t,e){var n=e[0];return n>0?n/t:0}),{output:[1],immutable:!0})})),B={width:1,height:1,depth:null,weights:null,deltas:null,praxis:null,praxisOpts:null,cleanupDeltas:!0},G=function(){function t(e){d(this,t),this.praxis=null,this.predictKernel=null,this.compareKernel=null,this.settings=e?f(f({},B),e):f({},B),this.setupPraxis()}return m(t,[{key:"width",get:function(){var t;return null!==(t=this.settings.width)&&void 0!==t?t:0}},{key:"height",get:function(){var t;return null!==(t=this.settings.height)&&void 0!==t?t:0}},{key:"depth",get:function(){var t;return null!==(t=this.settings.depth)&&void 0!==t?t:0}},{key:"weights",get:function(){return this.settings.weights},set:function(t){this.settings.weights=t,this.settings.cleanupDeltas&&this.deltas&&V(this.deltas)}},{key:"deltas",get:function(){return this.settings.deltas},set:function(t){this.settings.deltas=t}},{key:"id",get:function(){var t;return null!==(t=this.settings.id)&&void 0!==t?t:""},set:function(t){this.settings.id=t}},{key:"setupPraxis",value:function(){var t=this.settings,e=t.initPraxis,n=t.praxis,r=t.praxisOpts;this.praxis||(e?this.praxis=r?e(this,r):e(this):n&&(this.praxis=n))}},{key:"validate",value:function(){if(Number.isNaN(this.height))throw new Error("".concat(this.constructor.name," layer height is not a number"));if(Number.isNaN(this.width))throw new Error("".concat(this.constructor.name," layer width is not a number"));if(this.height<1)throw new Error("".concat(this.constructor.name," layer height is less than 1"));if(this.width<1)throw new Error("".concat(this.constructor.name," layer width is less than 1"))}},{key:"setupKernels",value:function(t){}},{key:"reuseKernels",value:function(t){if(t.width!==this.width)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.width," is not ").concat(this.width));if(t.height!==this.height)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.height," is not ").concat(this.height));if(t.hasOwnProperty("predictKernel")&&null!==t.predictKernel){if(!t.predictKernel.immutable)throw new Error("".concat(t.constructor.name,".predictKernel is not reusable, set kernel.immutable = true"));this.predictKernel=t.predictKernel}if(t.hasOwnProperty("compareKernel")&&null!==t.compareKernel){if(!t.compareKernel.immutable)throw new Error("".concat(t.constructor.name,".compareKernel is not reusable, set kernel.immutable = true"));this.compareKernel=t.compareKernel}this.praxis=t.praxis}},{key:"predict",value:function(t){}},{key:"compare",value:function(t){}},{key:"learn",value:function(t){}},{key:"toArray",value:function(){return Array.isArray(this.weights)?this.weights:this.weights.toArray()}},{key:"toJSON",value:function(){return t.toJSON(this)}}],[{key:"toJSON",value:function(t){var e=t.weights;return{width:t.width,height:t.height,depth:t.depth,weights:W(e&&e instanceof O.Texture?e.toArray():e),type:t.constructor.name,praxisOpts:t.praxis?t.praxis.toJSON():null}}}]),t}();function W(t){if(null===t)return null;if(Array.isArray(t)){if("number"===typeof t[0])return t;if(Array.isArray(t[0])&&"number"===typeof t[0][0])return t;if(Array.isArray(t[0][0])&&"number"===typeof t[0][0][0])return t;if(t[0]instanceof Float32Array)return t.map((function(t){return Array.from(t)}));if(t[0][0]instanceof Float32Array)return t.map((function(t){return t.map((function(t){return Array.from(t)}))}))}else if(t)return Array.from(t);throw new Error("unexpected value")}function H(t){return new Float32Array(t)}function X(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=H(t);return n}function Y(t,e,n){for(var r=new Array(n),i=0;i<n;i++)r[i]=X(t,e);return r}var q=function(t){c(n,t);var e=h(n);function n(t,r){var i;d(this,n),(i=e.call(this,r)).inputLayer=t;var a=o(i),s=a.width,u=a.height,l=a.depth;return i.predictKernel=null,i.compareKernel=null,i.validate(),l>0?(i.weights=Y(s,u,l),i.deltas=Y(s,u,l)):u>0&&(i.weights=X(s,u),i.deltas=X(s,u)),i.setupPraxis(),i}return m(n,[{key:"width",get:function(){return this.inputLayer.width}},{key:"height",get:function(){return this.inputLayer.height}},{key:"depth",get:function(){return this.inputLayer.depth}}]),n}(G),$=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this)).settings=t,i.inputLayer=r,i}return m(n,[{key:"width",get:function(){return this.inputLayer.width}},{key:"height",get:function(){return this.inputLayer.height}},{key:"depth",get:function(){return this.inputLayer.depth}},{key:"filterCount",get:function(){return this.settings.filterCount}},{key:"filterWidth",get:function(){return this.settings.filterWidth}},{key:"filterHeight",get:function(){return this.settings.filterHeight}},{key:"filters",get:function(){return this.settings.filters},set:function(t){this.settings.filters=t}},{key:"filterDeltas",get:function(){return this.settings.filterDeltas},set:function(t){this.settings.filterDeltas=t}}]),n}(G),J=function(){function t(){d(this,t),this.predictKernel=null,this.compareKernel=null,this.praxis=null}return m(t,[{key:"width",get:function(){return this.settings.width}},{key:"height",get:function(){return this.settings.height}},{key:"depth",get:function(){return this.settings.depth}},{key:"weights",get:function(){return this.settings.weights},set:function(t){this.settings.weights=t}},{key:"deltas",get:function(){return this.settings.deltas},set:function(t){this.settings.deltas=t}},{key:"toJSON",value:function(){return G.toJSON(this)}}]),t}(),Q=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,f(f({},r),{},{width:t.width,height:t.height,depth:t.depth}))).inputLayer=t,i}return m(n,[{key:"validate",value:function(){var t;if(u(l(n.prototype),"validate",this).call(this),this.width!==this.inputLayer.width)throw new Error("width of ".concat(this.width," does not match inputLayer.width of ").concat(this.inputLayer.width));if(this.height!==this.inputLayer.height)throw new Error("height of ".concat(this.height," does not match inputLayer.height of ").concat(this.inputLayer.height));if(this.depth!==(null!==(t=this.inputLayer.depth)&&void 0!==t?t:0))throw new Error("depth of ".concat(this.depth," does not match inputLayer.depth of ").concat(this.inputLayer.depth))}}]),n}(G),Z=function(t){c(n,t);var e=h(n);function n(t,r,i){var a;return d(this,n),(a=e.call(this,i)).inputLayer1=t,a.inputLayer2=r,a.validate(),a.weights=X(a.width,a.height),a.deltas=X(a.width,a.height),a.setupPraxis(),a}return m(n)}(G);function tt(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.x]}function et(t,e){return t[this.thread.y][this.thread.x]-e[this.thread.y][this.thread.x]}var nt=function(t){c(n,t);var e=h(n);function n(t,r){var i;if(d(this,n),(i=e.call(this,t)).inputLayer=r,i.validate(),i.depth)throw new Error("Target layer not implemented for depth");return i.height?(i.weights=X(i.width,i.height),i.deltas=X(i.width,i.height),i.errors=X(i.width,i.height)):(i.weights=H(i.width),i.deltas=H(i.width),i.errors=H(i.width)),i}return m(n,[{key:"setupKernels",value:function(){1===this.width?this.compareKernel=M(tt,{output:[this.width,this.height],immutable:!0}):this.compareKernel=M(et,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){z(this.weights),this.weights=j(this.inputLayer.weights)}},{key:"compare",value:function(t){z(this.deltas),z(this.errors),z(this.inputLayer.deltas),this.deltas=this.compareKernel(this.weights,t),this.inputLayer.deltas=j(this.deltas),this.errors=j(this.deltas)}},{key:"setupPraxis",value:function(){}}]),n}(G);function rt(t,e){return new nt(t,e)}var it=m((function t(){d(this,t)})),at=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n)}(G),ot=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"learn",value:function(t){var e=this.weights;if(!this.praxis)throw new Error("this.praxis not defined");this.weights=this.praxis.run(this,t),z(e)}}]),n}(G),st={toTable:function(t){var e=t.reduce((function(t,e){return Object.assign(t,e)}),{});return st.toHash(e)},toTable2D:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=n++)}return e},toInputTable2D:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r].input,a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&(e.hasOwnProperty(s)||(e[s]=n++))}return e},toOutputTable2D:function(t){for(var e={},n=0,r=0;r<t.length;r++)for(var i=t[r].output,a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&(e.hasOwnProperty(s)||(e[s]=n++))}return e},toHash:function(t){for(var e={},n=0,r=Object.keys(t),i=0;i<r.length;i++)e[r[i]]=n++;return e},toArray:function(t,e,n){var r=new Float32Array(n);for(var i in t)t.hasOwnProperty(i)&&(r[t[i]]=e.hasOwnProperty(i)?e[i]:0);return r},toArrayShort:function(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)){if(!e.hasOwnProperty(r))break;n[t[r]]=e[r]}return Float32Array.from(n)},toArrays:function(t,e,n){for(var r=[],i=0;i<e.length;i++)r.push(this.toArray(t,e[i],n));return r},toObject:function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e[t[r]]);return n},toObjectPartial:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={},a=0;for(var o in t)t.hasOwnProperty(o)&&(n>0&&a++<n||r>0&&a++>=r||(i[o]=e[t[o]-n]));return i},dataShape:function(t){var e,n,r=[];for(t.hasOwnProperty("input")?(r.push("datum"),e=t.input):Array.isArray(t)?t[0]&&t[0].input?(r.push("array","datum"),e=t[0].input):Array.isArray(t[0])?(r.push("array"),e=t[0]):e=t:e=t;e;)if(n=Object.keys(e)[0],Array.isArray(e)||"object"===typeof e.buffer){r.push("array");var i=e[parseInt(n)];if("number"===typeof i){r.push("number");break}e=i}else{if("object"!==typeof e||"object"===typeof e.buffer)throw new Error("unhandled signature");r.push("object");var a=e[n];if("number"===typeof a){r.push("number");break}e=a}return r},addKeys:function(t,e){if(Array.isArray(t))return e;var n=Object.keys(e).length;for(var r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||(e[r]=n++));return e}},ut=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,t),this.layerTemplate=e,this.settings=f({},n),this.kernel=null}return m(t,[{key:"width",get:function(){return this.layerTemplate.width}},{key:"height",get:function(){return this.layerTemplate.height}},{key:"depth",get:function(){return this.layerTemplate.depth}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(t){if(t.width!==this.width)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.width," is not ").concat(this.width));if(t.height!==this.height)throw new Error("".concat(this.constructor.name," kernel width mismatch ").concat(t.height," is not ").concat(this.height));t.hasOwnProperty("kernel")&&(this.kernel=t.kernel)}},{key:"toJSON",value:function(){return f({},this.settings)}}]),t}();function lt(t,e){return t[this.thread.y][this.thread.x]+this.constants.learningRate*e[this.thread.y][this.thread.x]}var ct={learningRate:.3},ht=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t)).settings=f(f({},ct),r),i.kernel=null,i}return m(n,[{key:"run",value:function(t){return this.kernel(t.weights,t.deltas)}},{key:"setupKernels",value:function(){var t;this.kernel=M(lt,{output:[this.width,this.height],constants:{learningRate:null!==(t=this.settings.learningRate)&&void 0!==t?t:.01}})}}]),n}(ut);function pt(t,e){return new ht(t,e)}function ft(t){return t}function dt(t,e,n,r){var i=t[this.thread.y][this.thread.x],a=r[this.thread.y][0],o=e[this.thread.y][this.thread.x],s=n[this.thread.x][0];return o+(this.constants.learningRate*a*s+this.constants.momentum*i)}var mt={learningRate:.3,momentum:.1,weightsLayer:null,incomingLayer:null,deltaLayer:null},vt=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t)).kernelMap=null,i.settings=f(f({},mt),r),i.changes=X(t.width,t.height),i}return m(n,[{key:"learningRate",get:function(){return this.settings.learningRate}},{key:"momentum",get:function(){return this.settings.momentum}},{key:"weightsLayer",get:function(){return this.settings.weightsLayer},set:function(t){this.settings.weightsLayer=t}},{key:"deltaLayer",get:function(){return this.settings.deltaLayer},set:function(t){this.settings.deltaLayer=t}},{key:"incomingLayer",get:function(){return this.settings.incomingLayer},set:function(t){this.settings.incomingLayer=t}},{key:"run",value:function(){var t=this.kernelMap(this.changes,this.weightsLayer.weights,this.incomingLayer.weights,this.deltaLayer.deltas);return this.changes=t.changes,t.result}},{key:"setupKernels",value:function(){this.kernelMap=R({changes:ft},dt,{output:[this.width,this.height],constants:{learningRate:this.learningRate,momentum:this.momentum}})}}]),n}(ut);function yt(t,e){return new vt(t,e)}function gt(t,e,n){return n*e+(1-e)*t*t}function xt(t,e,n){return t>e?e:t<n?n:t}function bt(t,e,n){var r=e[this.thread.y][this.thread.x],i=xt(r,this.constants.clipValue,-this.constants.clipValue),a=t[this.thread.y][this.thread.x],o=n[this.thread.y][this.thread.x],s=gt(r,this.constants.decayRate,o);return a+-this.constants.learningRate*i/Math.sqrt(s+this.constants.smoothEps)-this.constants.regularizationStrength*a}var wt={decayRate:.999,regularizationStrength:1e-6,learningRate:.01,smoothEps:1e-8,clipValue:5},kt=function(t){c(n,t);var e=h(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,n),(r=e.call(this,t)).kernelMap=null,r.settings=f(f({},wt),i),r.momenta=X(t.width,t.height),r}return m(n,[{key:"clipValue",get:function(){return this.settings.clipValue}},{key:"decayRate",get:function(){return this.settings.decayRate}},{key:"learningRate",get:function(){return this.settings.learningRate}},{key:"regularizationStrength",get:function(){return this.settings.regularizationStrength}},{key:"smoothEps",get:function(){return this.settings.smoothEps}},{key:"run",value:function(t){var e=this.kernelMap(t.weights,t.deltas,this.momenta),n=e.momenta,r=e.result;return z(this.momenta),this.momenta=n,r}},{key:"setupKernels",value:function(){this.kernelMap=R({momenta:gt},bt,{output:[this.width,this.height],constants:{clipValue:this.clipValue,decayRate:this.decayRate,learningRate:this.learningRate,regularizationStrength:this.regularizationStrength,smoothEps:this.smoothEps},functions:[xt],immutable:!0})}}]),n}(ut);function St(t,e){return new kt(t,e)}var Tt=kt,At=St,Et=Object.freeze({__proto__:null,ArthurDeviationBiases:ht,arthurDeviationBiases:pt,ArthurDeviationWeights:vt,arthurDeviationWeights:yt,MomentumRootMeanSquaredPropagation:kt,momentumRootMeanSquaredPropagation:St,MRmsProp:Tt,mRmsProp:At});function _t(t,e){t.hasOwnProperty("inputLayer")?_t(t.inputLayer,e):(t.hasOwnProperty("inputLayer1")&&_t(t.inputLayer1,e),t.hasOwnProperty("inputLayer2")&&_t(t.inputLayer2,e)),e(t)}function Lt(t){for(var e=t.slice(0),n=function(t){var n=0;_t(e[t],(function(r){e.includes(r)||(e.splice(t+n,0,r),n++)}))},r=0;r<e.length;r++)n(r);return e}function It(t,e){if(t.width!==e.width)throw new Error("Layer width mismatch of ".concat(t.width," and ").concat(e.width));if(t.height!==e.height)throw new Error("Layer height mismatch of ".concat(t.height," and ").concat(e.height))}function Ct(t,e){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]}var Dt=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"width",get:function(){return this.inputLayer1.width}},{key:"height",get:function(){return this.inputLayer1.height}},{key:"depth",get:function(){return this.inputLayer1.depth}},{key:"validate",value:function(){u(l(n.prototype),"validate",this).call(this),It(this.inputLayer1,this.inputLayer2)}},{key:"setupKernels",value:function(){this.predictKernel=M(Ct,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){z(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}},{key:"compare",value:function(){z(this.inputLayer1.deltas),z(this.inputLayer2.deltas),this.inputLayer1.deltas=j(this.deltas),this.inputLayer2.deltas=j(this.deltas)}}]),n}(Z);function Ot(t,e,n){return new Dt(t,e,n)}function Ft(){return.4*Math.random()-.2}function Pt(t,e){return Math.random()*(e-t)+t}function Mt(){if(Mt.returnV)return Mt.returnV=!1,Mt.vVal;var t=2*Math.random()-1,e=2*Math.random()-1,n=t*t+e*e;if(0===n||n>1)return Mt();var r=Math.sqrt(-2*Math.log(n)/n);return Mt.vVal=e*r,Mt.returnV=!0,t*r}function Rt(t,e){return Math.floor(Math.random()*(e-t)+t)}function Nt(t,e){return t+Mt()*e}Mt.returnV=!1,Mt.vVal=0;var zt=Object.freeze({__proto__:null,randomFloat:Pt,gaussRandom:Mt,randomInteger:Rt,randomN:Nt});function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Float32Array(t);if(null===e)for(var r=0;r<t;r++)n[r]=Ft();else for(var i=0;i<t;i++)n[i]=Pt(-e,e);return n}function jt(t,e,n){for(var r=new Array(e),i=0;i<e;i++)r[i]=Vt(t,n);return r}function Kt(t,e,n,r){for(var i=new Array(n),a=0;a<n;a++)i[a]=jt(t,e,r);return i}var Ut=f(f({},B),{},{std:null}),Bt=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this)).settings=f(f({},Ut),t),r.setupPraxis(),r.validate(),r.weights||(r.weights=jt(r.width,r.height,t.std)),r.deltas||(r.deltas=X(r.width,r.height)),r}return m(n,[{key:"predict",value:function(){}},{key:"compare",value:function(){}}]),n}(ot);function Gt(t){return new Bt(t)}function Wt(t,e){for(var n=0,r=0;r<this.constants.size;r++)n+=t[this.thread.y][r]*e[r][this.thread.x];return n}function Ht(t,e,n){for(var r=e[this.thread.y][this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.y][i]*n[this.thread.x][i];return r}function Xt(t,e,n){for(var r=e[this.thread.y][this.thread.x],i=0;i<this.constants.size;i++)r+=t[i][this.thread.x]*n[i][this.thread.y];return r}var Yt=function(t){c(n,t);var e=h(n);function n(){var t;return d(this,n),(t=e.apply(this,arguments)).compareKernel1=null,t.compareKernel2=null,t}return m(n,[{key:"width",get:function(){return this.inputLayer2.width},set:function(t){throw new Error("Cannot set width on Multiply")}},{key:"height",get:function(){return this.inputLayer1.height},set:function(t){throw new Error("Cannot set height on Multiply")}},{key:"depth",get:function(){return this.inputLayer1.depth},set:function(t){throw new Error("Cannot set depth on Multiply")}},{key:"validate",value:function(){if(u(l(n.prototype),"validate",this).call(this),this.inputLayer1.width!==this.inputLayer2.height)throw new Error("Layer width mismatch of ".concat(this.inputLayer1.width," and ").concat(this.inputLayer2.height))}},{key:"setupKernels",value:function(){this.predictKernel=M(Wt,{output:[this.width,this.height],constants:{size:this.inputLayer2.height},immutable:!0}),this.compareKernel1=M(Ht,{output:[this.inputLayer1.width,this.inputLayer1.height],constants:{size:this.inputLayer2.width},immutable:!0}),this.compareKernel2=M(Xt,{output:[this.inputLayer2.width,this.inputLayer2.height],constants:{size:this.inputLayer1.height},immutable:!0})}},{key:"reuseKernels",value:function(t){u(l(n.prototype),"reuseKernels",this).call(this,t),this.compareKernel1=t.compareKernel1,this.compareKernel2=t.compareKernel2}},{key:"predict",value:function(){if(z(this.weights),!this.predictKernel)throw new Error("this.predictKernel is not set");this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}},{key:"compare",value:function(){if(!this.compareKernel1)throw new Error("this.compareKernel1 not set");if(!this.compareKernel2)throw new Error("this.compareKernel2 not set");var t=this.inputLayer1.deltas,e=this.inputLayer2.deltas,n=this.compareKernel1(this.deltas,this.inputLayer1.deltas,this.inputLayer2.weights),r=this.compareKernel2(this.deltas,this.inputLayer2.deltas,this.inputLayer1.weights);this.inputLayer2.deltas=r,this.inputLayer1.deltas=n,z(t),z(e)}},{key:"setupPraxis",value:function(){}},{key:"toJSON",value:function(){return f(f({},u(l(n.prototype),"toJSON",this).call(this)),{},{width:this.width,height:this.height})}}]),n}(Z);function qt(t,e,n){return new Yt(t,e,n)}function $t(t){return 1/(1+Math.exp(-t[this.thread.y][this.thread.x]))}function Jt(t){return 1/(1+Math.exp(-t[this.thread.z][this.thread.y][this.thread.x]))}function Qt(t,e){var n=t[this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.y][this.thread.x]}function Zt(t,e){var n=t[this.thread.z][this.thread.y][this.thread.x];return n*(1-n)*e[this.thread.z][this.thread.y][this.thread.x]}var te=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"setupKernels",value:function(){this.depth>0?(this.predictKernel=M(Jt,{output:[this.width,this.height,this.depth],functions:[g],immutable:!0}),this.compareKernel=M(Zt,{output:[this.width,this.height,this.depth],functions:[x],immutable:!0})):(this.predictKernel=M($t,{output:[this.width,this.height],functions:[g],immutable:!0}),this.compareKernel=M(Qt,{output:[this.width,this.height],functions:[x],immutable:!0}))}},{key:"predict",value:function(){z(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){z(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}},{key:"learn",value:function(t){}}]),n}(q);function ee(t,e){return new te(t,e)}function ne(t,e){var n=t.height;function r(t,e){var n=yt(t,e);return n.setupKernels(),n}function i(t,e){var n=pt(t,e);return n.setupKernels(),n}var a=Gt({id:"weights",height:n,width:e.height,initPraxis:r}),o=Gt({id:"biases",height:n,initPraxis:i}),s=ee(Ot(qt(a,e),o)),u=a.praxis;return u.weightsLayer=a,u.incomingLayer=e,u.deltaLayer=s,s}function re(t,e){if("number"===typeof t.stride)return{strideX:t.stride,strideY:t.stride};var n=e.stride,r=e.stride;return"number"===typeof t.strideX&&(n=t.strideX),"number"===typeof t.strideY&&(r=t.strideY),{strideX:n,strideY:r}}function ie(t,e){if("number"===typeof t.padding)return{paddingX:t.padding,paddingY:t.padding};var n=e.padding,r=e.padding;return"number"===typeof t.paddingX&&(n=t.paddingX),"number"===typeof t.paddingY&&(r=t.paddingY),{paddingX:n,paddingY:r}}function ae(t,e){return new Float32Array(t).fill(e)}function oe(t,e,n){for(var r=this.constants.paddingX-this.thread.x*this.constants.strideX,i=this.thread.x*this.constants.strideX-this.constants.paddingX,a=Math.min(this.constants.filterWidth,r+this.constants.inputWidth),o=this.constants.paddingY-this.thread.y*this.constants.strideY,s=this.thread.y*this.constants.strideY-this.constants.paddingY,u=Math.min(this.constants.filterHeight,o+this.constants.inputHeight),l=0,c=0;c<this.constants.inputDepth;c++)for(var h=Math.max(0,o),p=Math.max(0,s);h<u;h++,p++)for(var f=Math.max(0,r),d=Math.max(0,i);f<a;f++,d++)l+=e[c][h][f]*t[c][p][d];return l+n[this.thread.z]}function se(t,e,n){for(var r=Math.max(0,Math.ceil((this.constants.paddingX-this.thread.x)/this.constants.strideX)),i=r*this.constants.strideX+this.thread.x-this.constants.paddingX,a=Math.min(this.constants.deltaWidth,Math.floor((this.constants.inputWidth-1-this.thread.x+this.constants.paddingX)/this.constants.strideX)+1),o=Math.max(0,Math.ceil((this.constants.paddingY-this.thread.y)/this.constants.strideY)),s=o*this.constants.strideY+this.thread.y-this.constants.paddingY,u=Math.min(this.constants.deltaHeight,Math.floor((this.constants.inputHeight-1-this.thread.y+this.constants.paddingY)/this.constants.strideY)+1),l=t[this.thread.z][this.thread.y][this.thread.x],c=o,h=s;c<u;c++,h+=this.constants.strideY)for(var p=r,f=i;p<a;p++,f+=this.constants.strideX)l+=e[this.thread.z][h][f]*n[this.constants.deltaZ][c][p];return l}function ue(t,e,n){for(var r=this.thread.x+this.constants.paddingX,i=r<this.constants.filterWidth?0:Math.floor((r-this.constants.filterWidth+this.constants.strideX)/this.constants.strideX),a=r-i*this.constants.strideX,o=Math.min(i+Math.floor(a/this.constants.strideX)+1,this.constants.deltaWidth),s=this.thread.y+this.constants.paddingY,u=s<this.constants.filterHeight?0:Math.floor((s-this.constants.filterHeight+this.constants.strideY)/this.constants.strideY),l=s-u*this.constants.strideY,c=Math.min(u+Math.floor(l/this.constants.strideY)+1,this.constants.deltaHeight),h=t[this.thread.z][this.thread.y][this.thread.x],p=u,f=l;p<c;f-=this.constants.strideY,p++)for(var d=i,m=a;d<o;m-=this.constants.strideX,d++)h+=e[this.thread.z][f][m]*n[this.constants.deltaZ][p][d];return h}function le(t,e){for(var n=0,r=0;r<this.constants.deltaHeight;r++)for(var i=0;i<this.constants.deltaWidth;i++)n+=e[this.thread.z][r][i];return t[this.thread.z][this.thread.y][this.thread.x]+n}var ce={stride:0,padding:0,bias:.1,filterCount:1,filterWidth:0,filterHeight:0},he=function(t){c(n,t);var e=h(n);function n(t,r){var i,a,o,s;return d(this,n),(i=e.call(this,t,r)).compareFilterDeltasKernel=null,i.compareInputDeltasKernel=null,i.compareBiasesKernel=null,i.settings=f(f(f(f({},ce),t),ie(t,ce)),re(t,ce)),i.weights=null!==(a=t.weights)&&void 0!==a?a:Kt(i.width,i.height,i.depth),i.deltas=Y(i.width,i.height,i.depth),i.biases=ae(i.depth,i.bias),i.biasDeltas=null!==(o=t.biasDeltas)&&void 0!==o?o:Vt(i.depth),i.filters=null!==(s=t.filters)&&void 0!==s?s:Kt(i.filterWidth,i.filterHeight,i.filterCount),i.filterDeltas=Y(i.filterWidth,i.filterHeight,i.filterCount),i.validate(),i}return m(n,[{key:"strideX",get:function(){return this.settings.strideX}},{key:"strideY",get:function(){return this.settings.strideY}},{key:"paddingX",get:function(){return this.settings.paddingX}},{key:"paddingY",get:function(){return this.settings.paddingX}},{key:"width",get:function(){return Math.floor((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}},{key:"height",get:function(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}},{key:"bias",get:function(){return this.settings.bias}},{key:"depth",get:function(){return this.filterCount}},{key:"biases",get:function(){return this.settings.biases},set:function(t){this.settings.biases=t}},{key:"biasDeltas",get:function(){return this.settings.biasDeltas},set:function(t){this.settings.biasDeltas=t}},{key:"filters",get:function(){return this.settings.filters},set:function(t){this.settings.filters=t}},{key:"filterDeltas",get:function(){return this.settings.filterDeltas},set:function(t){this.settings.filterDeltas=t}},{key:"setupKernels",value:function(){this.predictKernel=M(oe,{constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareFilterDeltasKernel=M(se,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareInputDeltasKernel=M(ue,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight,filterCount:this.filterCount},output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],immutable:!0}),this.compareBiasesKernel=M(le,{output:[1,1,this.depth],constants:{deltaWidth:this.width,deltaHeight:this.height},immutable:!0})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}},{key:"compare",value:function(){var t=this.filterDeltas,e=this.biasDeltas;this.filterDeltas=this.compareFilterDeltasKernel(t,this.inputLayer.weights,this.deltas),z(t),this.biasDeltas=this.compareBiasesKernel(e,this.deltas),z(e),z(this.deltas),this.deltas=this.compareInputDeltasKernel(this.filters,this.inputLayer.deltas),z(this.inputLayer.deltas),this.inputLayer.deltas=j(this.deltas)}},{key:"learn",value:function(t){var e=this.weights;this.weights=this.praxis.run(this,t),z(e)}}]),n}($);function pe(t,e){return new he(t,e)}function fe(t){return t}function de(t){return fe(Math.random())<this.constants.probability?0:t[this.thread.y][this.thread.x]}function me(t){return t[this.thread.y][this.thread.x]*this.constants.probability}function ve(t,e){return 0===t[this.thread.y][this.thread.x]?0:e[this.thread.y][this.thread.x]}var ye=f(f({},B),{},{probability:.5}),ge=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,r,t)).predictKernelMap=null,i.settings=f(f({},ye),r),i.dropouts=null,i.validate(),i}return m(n,[{key:"setupKernels",value:function(t){var e=[this.width,this.height];t?(this.predictKernelMap=R({dropouts:fe},de,{output:e,immutable:!0}),this.compareKernel=M(ve,{output:e,immutable:!0})):this.predictKernelMap=R({},me,{output:e,immutable:!0})}},{key:"predict",value:function(){z(this.weights),this.dropouts&&z(this.dropouts);var t=this.predictKernelMap(this.inputLayer.weights),e=t.result,n=t.dropouts;this.weights=e,this.dropouts=n}},{key:"compare",value:function(){z(this.deltas),this.deltas=this.compareKernel(this.dropouts,this.inputLayer.deltas)}}]),n}($);function xe(t,e){return new ge(t,e)}function be(t,e){var n=t.height,r=t.praxisOpts,i=void 0===r?null:r,a=Gt({id:"weights",height:n,width:e.height,praxisOpts:i}),o=Gt({id:"biases",height:n,praxisOpts:i});return ee(Ot(qt(a,e,{praxisOpts:i}),o,{praxisOpts:i}),{praxisOpts:i})}function we(t,e,n){for(var r=0,i=0,a=0;a<this.constants.inputHeight;a++)for(var o=0;o<this.constants.inputWidth;o++)r+=t[a][o]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function ke(t,e,n){for(var r=0,i=0,a=0;a<this.constants.inputDepth;a++)for(var o=0;o<this.constants.inputHeight;o++)for(var s=0;s<this.constants.inputWidth;s++)r+=t[a][o][s]*e[this.thread.x][i],i++;return r+n[this.thread.x]}function Se(t,e,n){for(var r=0,i=this.thread.x+this.thread.y*this.output.x,a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.y][this.thread.x]}function Te(t,e,n){for(var r=0,i=this.thread.x+this.thread.y*this.output.x,a=0;a<this.constants.filterCount;a++)r+=n[a][i]*e[0][a];return r+t[this.thread.z][this.thread.y][this.thread.x]}function Ae(t,e){return t[this.thread.x]+e[this.thread.y][this.thread.x]}function Ee(t,e,n){return t[this.thread.y][this.thread.x]+e[this.thread.y][this.thread.x]*n[this.constants.deltaY][this.constants.deltaX]}function _e(t,e,n){var r=Math.floor(this.thread.x/(this.constants.inputWidth*this.constants.inputHeight)),i=Math.floor((this.thread.x-r*this.constants.inputWidth*this.constants.inputHeight)/this.constants.inputWidth),a=this.thread.x-this.constants.inputWidth*(i+this.constants.inputHeight*r);return t[this.thread.y][this.thread.x]+e[r][i][a]*n[0][this.thread.y]}var Le=function(t){c(n,t);var e=h(n);function n(t,r){var i;d(this,n),(i=e.call(this,t,r)).compareFilterDeltasKernel=null,i.compareInputDeltasKernel=null,i.compareBiasesKernel=null,i.settings=f({},t),i.validate();var a=r.width*r.height*r.depth;return i.biases=ae(i.height,i.bias),i.biasDeltas=H(i.height),i.filters=jt(a,i.height),i.filterDeltas=X(a,i.height),i.depth>0?(i.weights=Kt(i.width,i.height,i.depth),i.deltas=Y(i.width,i.height,i.depth)):i.height>0&&(i.weights=jt(i.width,i.height),i.deltas=X(i.width,i.height)),i}return m(n,[{key:"bias",get:function(){return this.settings.bias}},{key:"biases",get:function(){return this.settings.biases},set:function(t){this.settings.biases=t}},{key:"biasDeltas",get:function(){return this.settings.biases},set:function(t){this.settings.biasDeltas=t}},{key:"validate",value:function(){if(u(l(n.prototype),"validate",this).call(this),this.depth>0)throw new Error("depth not supported")}},{key:"setupKernels",value:function(){var t=this.inputLayer,e=t.width*t.height*t.depth;t.depth>0?(this.predictKernel=M(ke,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width,inputDepth:t.depth}}),this.compareFilterDeltasKernel=M(_e,{output:[e,this.height],constants:{deltaX:0,deltaY:0,inputWidth:t.width,inputHeight:t.height},immutable:!0}),this.compareInputDeltasKernel=M(Te,{output:[t.width,t.height,t.depth],constants:{filterCount:this.height},immutable:!0})):(this.predictKernel=M(we,{output:[this.width,this.height],constants:{inputHeight:t.height,inputWidth:t.width}}),this.compareFilterDeltasKernel=M(Ee,{output:[e,this.height],constants:{deltaX:0,deltaY:0,inputWidth:t.width,inputHeight:t.height}}),this.compareInputDeltasKernel=M(Se,{output:[t.width,t.height],constants:{filterCount:this.height}})),this.compareBiasesKernel=M(Ae,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}},{key:"compare",value:function(){var t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareInputDeltasKernel(t,this.deltas,this.filters),z(t);var e=this.biasDeltas,n=this.filterDeltas;this.biasDeltas=this.compareBiasesKernel(this.biases,this.deltas),this.filterDeltas=this.compareFilterDeltasKernel(n,this.inputLayer.weights,this.deltas),z(e),z(n)}}]),n}($);function Ie(t,e){return new Le(t,e)}function Ce(t){return-t[this.thread.y][this.thread.x]}var De=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).validate(),i}return m(n,[{key:"setupKernels",value:function(){this.predictKernel=M(Ce,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights)}}]),n}(Q);function Oe(t,e){return new De(t,e)}function Fe(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}function Pe(t,e){return t[this.thread.y][this.thread.x]*e[this.thread.y][this.thread.x]}var Me=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"width",get:function(){return this.inputLayer1.width}},{key:"height",get:function(){return this.inputLayer1.height}},{key:"depth",get:function(){return this.inputLayer1.depth}},{key:"validate",value:function(){u(l(n.prototype),"validate",this).call(this),It(this.inputLayer1,this.inputLayer2)}},{key:"setupKernels",value:function(){this.predictKernel=M(Fe,{output:[this.width,this.height],immutable:!0}),this.compareKernel=M(Pe,{output:[this.width,this.height],immutable:!0})}},{key:"predict",value:function(){z(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}},{key:"compare",value:function(){z(this.inputLayer1.deltas),z(this.inputLayer2.deltas),this.inputLayer1.deltas=this.compareKernel(this.inputLayer2.weights,this.deltas),this.inputLayer2.deltas=this.compareKernel(this.inputLayer1.weights,this.deltas)}}]),n}(Z);function Re(t,e,n){return new Me(t,e,n)}function Ne(t){return new Float32Array(t).fill(1)}function ze(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=Ne(t);return n}var Ve=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).validate(),r.weights=ze(r.width,r.height),r.deltas=X(r.width,r.height),r}return m(n)}(ot);function je(t){return new Ve(t)}function Ke(t){return w(t[this.thread.y][this.thread.x])}function Ue(t){return w(t[this.thread.z][this.thread.y][this.thread.x])}function Be(t,e){return k(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function Ge(t,e){return k(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var We=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"setupKernels",value:function(){this.depth>0?(this.predictKernel=M(Ue,{output:[this.width,this.height,this.depth],functions:[w],immutable:!0}),this.compareKernel=M(Ge,{output:[this.width,this.height,this.depth],functions:[k],immutable:!0})):(this.predictKernel=M(Ke,{output:[this.width,this.height],functions:[w],immutable:!0}),this.compareKernel=M(Be,{output:[this.width,this.height],functions:[k],immutable:!0}))}},{key:"predict",value:function(){z(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){z(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}]),n}(q);function He(t,e){return new We(t,e)}var Xe=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).validate(),r.weights=X(r.width,r.height),r.deltas=X(r.width,r.height),r}return m(n,[{key:"predict",value:function(){}},{key:"compare",value:function(){}}]),n}(ot);function Ye(t){return new Xe(t)}function qe(t,e,n){var r=t.height,i=Gt({height:r,width:n.height}),a=Gt({width:r,height:r}),o=Ye({height:r}),s=ee(Ot(Ot(qt(i,n),qt(a,e)),o)),u=Gt({height:r,width:n.height}),l=Gt({width:r,height:r}),c=Ye({height:r}),h=ee(Ot(Ot(qt(u,n),qt(l,e)),c)),p=Gt({height:r,width:n.height}),f=Gt({width:r,height:r}),d=Ye({height:r}),m=He(Ot(Ot(qt(p,n),qt(f,Re(h,e))),d));return Ot(Re(Ot(je({width:s.width,height:s.height}),Oe(s)),m),Re(e,s))}var $e={weights:null},Je=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,f(f({},$e),t))).reshapeInput=null,r.validate(),r.reshapeInput=null,r.deltas=X(r.width,r.height),r}return m(n,[{key:"setupKernels",value:function(){1===this.width&&(this.predict=this.predict1D,this.reshapeInput=M((function(t){return t[this.thread.y]}),{output:[1,this.height],immutable:!0}))}},{key:"reuseKernels",value:function(t){this.reshapeInput=t.reshapeInput}},{key:"predict",value:function(t){if((Array.isArray(t)||t instanceof Float32Array)&&"number"===typeof t[0]&&t.length===this.height*this.width)z(this.weights),this.weights=N(t,[this.width,this.height]);else{if(!Array.isArray(t)||t.length!==this.height||!(Array.isArray(t[0])||t[0]instanceof Float32Array)||t[0].length!==this.width)throw new Error("Inputs are not of sized correctly");this.weights=j(t)}}},{key:"predict1D",value:function(t){this.weights&&z(this.weights),this.reshapeInput?this.weights=this.reshapeInput(t):this.weights=t}},{key:"compare",value:function(){}},{key:"learn",value:function(){}}]),n}(at);function Qe(t){return new Je(t)}function Ze(t){return T(t[this.thread.y][this.thread.x])}function tn(t){return T(t[this.thread.z][this.thread.y][this.thread.x])}function en(t,e){return A(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function nn(t,e){return A(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var rn=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"setupKernels",value:function(){var t=this.inputLayer,e=t.width,n=t.height,r=t.depth;this.depth>0?(this.predictKernel=M(tn,{output:[e,n,r],functions:[T],immutable:!0}),this.compareKernel=M(nn,{output:[e,n,r],functions:[A],immutable:!0})):(this.predictKernel=M(Ze,{output:[e,n],functions:[T],immutable:!0}),this.compareKernel=M(en,{output:[e,n],functions:[A],immutable:!0}))}},{key:"predict",value:function(){z(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){var t=this.deltas;this.deltas=this.compareKernel(this.weights,t),z(t)}}]),n}(q);function an(t,e){return new rn(t,e)}function on(t,e,n){var r=t.height;if("number"!==typeof r)throw new Error("no settings.height given");n.setDimensions&&n.setDimensions(1,r);var i=Gt({width:e.height,height:r,std:.08,id:"inputGateWeights"}),a=Gt({width:r,height:r,std:.08,id:"inputGatePeepholes"}),o=Ye({width:1,height:r,id:"inputGateBias"}),s=ee(Ot(Ot(qt(i,e),qt(a,n)),o),{id:"inputGate"}),u=Gt({width:e.height,height:r,std:.08,id:"forgetGateWeights"}),l=Gt({width:r,height:r,std:.08,id:"forgetGatePeepholes"}),c=Ye({width:1,height:r,id:"forgetGateBias"}),h=ee(Ot(Ot(qt(u,e),qt(l,n)),c),{id:"forgetGate"}),p=Gt({width:e.height,height:r,std:.08,id:"outputGateWeights"}),f=Gt({width:r,height:r,std:.08,id:"outputGatePeepholes"}),d=Ye({width:1,height:r,id:"outputGateBias"}),m=ee(Ot(Ot(qt(p,e),qt(f,n)),d),{id:"outputGate"}),v=Gt({width:e.height,height:r,std:.08,id:"memoryWeights"}),y=Gt({width:r,height:r,std:.08,id:"memoryPeepholes"}),g=Ye({width:1,height:r,id:"memoryBias"}),x=He(Ot(Ot(qt(v,e),qt(y,n)),g),{id:"memory"}),b=Re(h,n,{id:"retainCell"}),w=Re(s,x,{id:"writeCell"});return Re(m,He(Ot(b,w,{id:"cell"})),{id:"activations"})}function sn(t,e){var n=t.height,r=Gt({height:n,width:e.height,id:"outputGate",std:.08}),i=Gt({height:n,id:"output",std:.08}),a=qt(r,e,{id:"outputGateConnected"});return rt(f({id:"target"},t),Ot(a,i))}function un(t){return t}function ln(t){return t}function cn(t){for(var e=this.thread.x*this.constants.strideX-this.constants.paddingX,n=this.thread.y*this.constants.strideY-this.constants.paddingY,r=e+this.constants.filterWidth,i=n+this.constants.filterHeight,a=Math.max(e,0),o=Math.max(n,0),s=Math.min(r,this.constants.inputWidth),u=Math.min(i,this.constants.inputHeight),l=t[this.thread.z][o][a],c=o;c<u;c++)for(var h=a;h<s;h++){var p=t[this.thread.z][c][h];p>l&&(l=p)}return l}function hn(t,e,n){for(var r=this.thread.x+.5,i=this.thread.y+.5,a=1/this.constants.strideX,o=1/this.constants.strideY,s=Math.max(0,Math.ceil((r-this.constants.filterWidth+this.constants.paddingX)*a)),u=Math.max(0,Math.ceil((i-this.constants.filterHeight+this.constants.paddingY)*o)),l=Math.min(Math.ceil((r+this.constants.paddingX)*a),this.constants.outputWidth),c=Math.min(Math.ceil((i+this.constants.paddingY)*o),this.constants.outputHeight),h=0,p=u;p<c;p++)for(var f=s;f<l;f++){var d=e[p][f],m=n[p][f];Math.abs(d-this.thread.x)<.1&&Math.abs(m-this.thread.y)<.1&&(h+=t[p][f])}return h}var pn={padding:0,stride:0,filterWidth:0,filterHeight:0,filterCount:0},fn=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).predictKernelMap=null,i.settings=f(f(f({},t),re(t,pn)),ie(t,pn)),i.weights=Kt(i.width,i.height,i.depth),i.deltas=Y(i.width,i.height,i.depth),i.validate(),i}return m(n,[{key:"strideX",get:function(){return this.settings.strideX}},{key:"strideY",get:function(){return this.settings.strideY}},{key:"paddingX",get:function(){return this.settings.paddingX}},{key:"paddingY",get:function(){return this.settings.paddingY}},{key:"width",get:function(){return Math.ceil((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}},{key:"height",get:function(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}},{key:"depth",get:function(){return this.settings.filterCount}},{key:"filterCount",get:function(){return this.settings.filterCount}},{key:"switchX",get:function(){return this.settings.switchX},set:function(t){this.settings.switchX=t}},{key:"switchY",get:function(){return this.settings.switchY},set:function(t){this.settings.switchY=t}},{key:"setupKernels",value:function(){this.predictKernelMap=R({switchX:ln,switchY:un},cn,{output:[this.width,this.height,this.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,paddingX:this.paddingX,paddingY:this.paddingY,filterHeight:this.filterHeight,filterWidth:this.filterWidth,strideX:this.strideX,strideY:this.strideY}}),this.compareKernel=M(hn,{output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,outputWidth:this.width,outputHeight:this.height,filterWidth:this.filterWidth,filterHeight:this.filterHeight,paddingX:this.paddingX,paddingY:this.paddingY,strideX:this.strideX,strideY:this.strideY}})}},{key:"predict",value:function(){var t=this.predictKernelMap(this.inputLayer.weights),e=t.result,n=t.switchX,r=t.switchY;this.switchX=n,this.switchY=r,this.weights=e}},{key:"compare",value:function(){var t=this.inputLayer.deltas;this.inputLayer.deltas=this.compareKernel(this.deltas,this.switchX,this.switchY),z(t)}}]),n}($);function dn(t,e){return new fn(t,e)}var mn=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this)).praxis=null,r.predictKernel=null,r.compareKernel=null,r.settings={},r.recurrentInput=t,r.validate(),r}return m(n,[{key:"width",get:function(){return this.recurrentInput.width}},{key:"height",get:function(){return this.recurrentInput.height}},{key:"depth",get:function(){return this.recurrentInput.depth}},{key:"deltas",get:function(){return this.recurrentInput.deltas},set:function(t){var e=this.recurrentInput.deltas;this.recurrentInput.deltas=t,z(e)}},{key:"weights",get:function(){return this.recurrentInput.weights},set:function(t){var e=this.recurrentInput.weights;this.recurrentInput.weights=t,z(e)}},{key:"validate",value:function(){if(G.prototype.validate.call(this),this.width!==this.recurrentInput.width)throw new Error("".concat(this.constructor.name," layer width ").concat(this.width," and ").concat(this.recurrentInput.constructor.name," width (").concat(this.recurrentInput.width,") are not same"));if(this.height!==this.recurrentInput.height)throw new Error("".concat(this.constructor.name," layer height ").concat(this.height," and ").concat(this.recurrentInput.constructor.name," width (").concat(this.recurrentInput.height,") are not same"))}},{key:"setDimensions",value:function(t,e){this.recurrentInput.width=t,this.recurrentInput.height=e}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(){}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}}]),n}(J),vn=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this)).praxis=null,r.settings={},r.predictKernel=null,r.compareKernel=null,t&&(r.settings=f({},t)),r}return m(n,[{key:"setDimensions",value:function(t,e){this.praxis=null,this.settings=f(f({},this.settings),{},{width:t,height:e,weights:X(t,e),deltas:X(t,e)})}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(t){var e=this.weights;this.weights=this.praxis.run(this,t),z(e)}}]),n}(J);function yn(){return new vn}function gn(t){return e(t[this.thread.y][this.thread.x])}function xn(t,e){return v(t[this.thread.y][this.thread.x],e[this.thread.y][this.thread.x])}function bn(t){return e(t[this.thread.z][this.thread.y][this.thread.x])}function wn(t,e){return v(t[this.thread.z][this.thread.y][this.thread.x],e[this.thread.z][this.thread.y][this.thread.x])}var kn=function(t){c(r,t);var n=h(r);function r(){return d(this,r),n.apply(this,arguments)}return m(r,[{key:"setupKernels",value:function(){var t=this.inputLayer,n=t.width,r=t.height,i=t.depth;i>0?(this.predictKernel=M(bn,{output:[n,r,i],functions:[e],immutable:!0}),this.compareKernel=M(wn,{output:[n,r,i],functions:[v],immutable:!0})):(this.predictKernel=M(gn,{output:[n,r],functions:[e],immutable:!0}),this.compareKernel=M(xn,{output:[n,r],functions:[v],immutable:!0}))}},{key:"predict",value:function(){z(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){z(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}]),r}(q);function Sn(t,e){return new kn(t,e)}function Tn(t,e,n){var r=t.height;if("number"!==typeof r)throw new Error("height not set");n.setDimensions&&n.setDimensions(1,r);var i=Gt({id:"weight",height:r,width:e.height,std:.08}),a=Gt({id:"transition",height:r,width:r,std:.08}),o=Ye({id:"bias",height:r});return Sn(Ot(Ot(qt(i,e),qt(a,n)),o))}var An=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t)).inputLayer=r,i.validate(),i}return m(n,[{key:"predict",value:function(){z(this.weights),this.weights=j(this.inputLayer.weights)}},{key:"learn",value:function(){}}]),n}(G);function En(t,e){return new An(t,e)}function _n(t){for(var e=-1/0,n=0;n<this.constants.inputHeight;n++)for(var r=0;r<this.constants.inputWidth;r++){var i=t[n][r];i>e&&(e=i)}return e}function Ln(t){for(var e=-1/0,n=0;n<this.constants.inputDepth;n++)for(var r=0;r<this.constants.inputHeight;r++)for(var i=0;i<this.constants.inputWidth;i++){var a=t[n][r][i];a>e&&(e=a)}return e}function In(t){for(var e=0,n=0;n<this.constants.inputHeight;n++)for(var r=0;r<this.constants.inputWidth;r++)e+=t[n][r];return e}function Cn(t){for(var e=0,n=0;n<this.constants.inputDepth;n++)for(var r=0;r<this.constants.inputHeight;r++)for(var i=0;i<this.constants.inputWidth;i++)e+=t[n][r][i];return e}function Dn(t,e){return Math.exp(t[this.thread.x]-e[0])}function On(t,e){return Math.exp(t[this.thread.z][this.thread.y][this.thread.x]-e[0])}function Fn(t,e){return t[this.thread.y][this.thread.x]/e[0]}function Pn(t,e){return t[this.thread.z][this.thread.y][this.thread.x]/e[0]}function Mn(t,e){var n=0;return this.thread.x+this.thread.y*this.output.x===t&&(n=1),-(n-e[this.thread.y][this.thread.x])}function Rn(t,e){var n=0;return this.thread.x+this.thread.y*this.output.x+this.thread.z*this.output.x*this.output.y===t&&(n=1),-(n-e[this.thread.z][this.thread.y][this.thread.x])}var Nn=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).errors=null,i.getExponentialsKernel=null,i.getMaxValueKernel=null,i.getSumKernel=null,i.validate(),i.depth>0?(i.weights=Kt(i.width,i.height,i.depth),i.deltas=Y(i.width,i.height,i.depth)):i.height>0?(i.weights=jt(i.width,i.height),i.deltas=X(i.width,i.height)):(i.weights=Vt(i.width),i.deltas=H(i.width)),i}return m(n,[{key:"setupKernels",value:function(){var t=this.width,e=this.height,n=this.depth;n>0?(this.getExponentialsKernel=M(On,{output:[t,e,n]}),this.getMaxValueKernel=M(Ln,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.getSumKernel=M(Cn,{output:[1,1,1],constants:{inputWidth:t,inputHeight:e,inputDepth:n}}),this.predictKernel=M(Pn,{output:[t,e,n]}),this.compareKernel=M(Rn,{output:[t,e,n],immutable:!0})):(this.getExponentialsKernel=M(Dn,{output:[t,e]}),this.getMaxValueKernel=M(_n,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.getSumKernel=M(In,{output:[1,1],constants:{inputWidth:t,inputHeight:e}}),this.predictKernel=M(Fn,{output:[t,e]}),this.compareKernel=M(Mn,{output:[t,e],immutable:!0}))}},{key:"predict",value:function(){var t=this.getMaxValueKernel(this.inputLayer.weights),e=this.getExponentialsKernel(this.inputLayer.weights,t),n=this.getSumKernel(e);this.weights=this.predictKernel(e,n)}},{key:"compare",value:function(t){var e=this.deltas,n=this.errors;this.errors=this.compareKernel(t[0],e),this.deltas=j(this.errors),z(e),z(n);var r=this.inputLayer.deltas;this.inputLayer.deltas=j(this.deltas),z(r)}}]),n}(Q);function zn(t,e){return new Nn(t,e)}var Vn=function(t){c(n,t);var e=h(n);function n(t,r){var i;return d(this,n),(i=e.call(this,r)).inputLayer=t,i}return m(n,[{key:"predict",value:function(){z(this.weights),this.weights=j(this.inputLayer.weights),this.validate()}},{key:"learn",value:function(){}}]),n}(G);function jn(t,e){return new Vn(t,e)}function Kn(t){return t[this.thread.x][this.thread.y]}var Un=Kn,Bn=function(t){c(n,t);var e=h(n);function n(t){var r;return d(this,n),(r=e.call(this,t)).validate(),r}return m(n,[{key:"width",get:function(){return this.inputLayer.height}},{key:"height",get:function(){return this.inputLayer.width}},{key:"setupKernels",value:function(){this.predictKernel=M(Kn,{output:[this.height,this.width]}),this.compareKernel=M(Un,{output:[this.width,this.height]})}},{key:"predict",value:function(){this.weights=this.predictKernel(this.inputLayer.weights)}},{key:"compare",value:function(){this.inputLayer.deltas=this.compareKernel(this.deltas)}}]),n}(Q);function Gn(t){return new Bn(t)}var Wn={Activation:q,Internal:J,InternalModel:it,EntryPoint:at,Filter:$,Model:ot,Modifier:Q,Operator:Z,Target:nt},Hn=Object.freeze({__proto__:null,layerTypes:Wn,Add:Dt,add:Ot,arthurFeedForward:ne,BaseLayer:G,baseLayerDefaultSettings:B,Convolution:he,convolution:pe,Dropout:ge,dropout:xe,feedForward:be,FullyConnected:Le,fullyConnected:Ie,gru:qe,Input:Je,input:Qe,LeakyRelu:rn,leakyRelu:an,lstmCell:on,Multiply:Yt,multiply:qt,MultiplyElement:Me,multiplyElement:Re,Negative:De,negative:Oe,Ones:Ve,ones:je,output:sn,Pool:fn,pool:dn,Random:Bt,random:Gt,RecurrentInput:mn,RecurrentZeros:vn,rnnCell:Tn,Regression:An,regression:En,Relu:kn,relu:Sn,Sigmoid:te,sigmoid:ee,SoftMax:Nn,softMax:zn,SVM:Vn,svm:jn,Tanh:We,tanh:He,Target:nt,target:rt,Transpose:Bn,transpose:Gn,Zeros:Xe,zeros:Ye}),Xn=Object.keys(Hn);function Yn(t,e,n){if(!Xn.find((function(e){return e===t.type})))return null;var r=Hn[t.type];if(r.prototype instanceof Wn.Filter){if(!e)throw new Error("inputLayer missing");return new r(t,e)}if(r.prototype instanceof Wn.Activation||r.prototype instanceof Wn.Modifier){if(!e)throw new Error("inputLayer missing");return new r(e,t)}if(r.prototype instanceof Wn.Internal)return new r(t);if(r.prototype instanceof Wn.Operator){if(!e)throw new Error("inputLayer1 missing");if(!n)throw new Error("inputLayer2 missing");return new r(e,n,t)}if(r.prototype instanceof Wn.InternalModel||r.prototype instanceof Wn.EntryPoint||r.prototype instanceof Wn.Model)return new r(t);if(r===nt){if(!e)throw new Error("inputLayer missing");return new r(t,e)}return null}var qn=m((function t(e,n){d(this,t),this.prop=null,this.table={},this.length=0;var r=this.table;if(n){this.prop=n;for(var i=0;i<e.length;i++){var a=e[i][n];for(var o in a)a.hasOwnProperty(o)&&(r.hasOwnProperty(o)||(r[o]=this.length++))}}else if(Array.isArray(e)&&Array.isArray(e[0]))for(var s=0;s<e.length;s++)for(var u=e[s],l=0;l<u.length;l++){var c=u[l];for(var h in c)c.hasOwnProperty(h)&&(r.hasOwnProperty(h)||(r[h]=this.length++))}else for(var p=0;p<e.length;p++){var f=e[p];for(var m in f)f.hasOwnProperty(m)&&(r.hasOwnProperty(m)||(r[m]=this.length++))}})),$n=C((function(t,e){var n=I&&I.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.thaw=e.Block=e.Thaw=void 0;var r=function(){function t(e,r){var i=this;void 0===r&&(r={});var a=n(n({},t.defaultSettings),r),o=a.each,s=a.done;this.i=0,this.isStopped=!1,this.items=e,this.options=r,this.tick=function(){if(!i.isStopped&&(i.timeout=setTimeout(i.tick,0),!t.thawing)){var e=i.items[i.i];if(i.i>=i.items.length)return null!==s&&(t.thawing=!0,s(),t.thawing=!1),i.isStopped=!0,void clearTimeout(i.timeout);null!==o?(t.thawing=!0,o(e,i.i),t.thawing=!1):void 0!==e&&e(),i.i++}},t.thaws.push(this),r.delay||this.tick()}return Object.defineProperty(t,"isThawing",{get:function(){return t.thawing},enumerable:!1,configurable:!0}),t.stopAll=function(){for(var e=0;e<t.thaws.length;e++)t.thaws[e].stop()},t.prototype.makeReady=function(){return!!this.isStopped&&(this.isStopped=!1,!0)},t.prototype.add=function(t){return this.items.push(t),this.makeReady()&&this.tick(),this},t.prototype.insert=function(t){return this.items.splice(this.i,0,t),this.makeReady()&&this.tick(),this},t.prototype.addArray=function(t){return this.items=this.items.concat(t),this.makeReady()&&this.tick(),this},t.prototype.insertArray=function(t){var e=this.items.splice(0,this.i),n=this.items;return this.items=e.concat(t,n),this.makeReady()&&this.tick(),this},t.prototype.stop=function(){return this.isStopped=!0,clearTimeout(this.timeout),this.options.done&&this.options.done(),this},t.thawing=!1,t.thaws=[],t.defaultSettings={each:null,done:null},t}();function i(t,e){return new r(t,e)}e.Thaw=r,e.thaw=i;var a=function(){function t(t,e){void 0===e&&(e=200),this.index=0,this.thaws=[],this.count=e,this.options=t}return t.prototype.add=function(t){return this.next().add(t),this},t.prototype.addArray=function(t){return this.next().addArray(t),this},t.prototype.insert=function(t){return this.next().insert(t),this},t.prototype.insertArray=function(t){return this.next().insertArray(t),this},t.prototype.stop=function(){for(var t=0;t<this.thaws.length;t++)this.thaws[t].stop();return this},t.prototype.next=function(){var t,e=this.thaws;return e.length<this.count?(t=new r([],this.options),e.push(t)):t=e[this.index]||null,this.index++,this.index>=this.count&&(this.index=0),t},t}();e.Block=a,"undefined"!==typeof window&&(window.Thaw=r,window.thaw=i,window.Thaw.Block=a)})),Jn={learningRate:.3,binaryThresh:.5,initPraxis:function(t,e){var n;return St(t,null!==(n=t.settings.praxisOpts)&&void 0!==n?n:e)}},Qn={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.3,callbackPeriod:10,errorCheckInterval:100,timeout:1/0},Zn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),this.trainOpts={},this.layers=null,this._inputLayer=null,this._hiddenLayers=null,this._outputLayer=null,this._model=null,this.meanSquaredError=null,this.inputLookup=null,this.inputLookupLength=null,this.outputLookup=null,this.outputLookupLength=null,this.options=f(f({},Jn),e),this._updateTrainingOptions(f(f({},Qn),e))}return m(t,[{key:"_setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}},{key:"_updateTrainingOptions",value:function(e){var n;this.trainOpts=f(f(f({},Qn),this.trainOpts),e),t._validateTrainingOptions(this.trainOpts),this._setLogMethod(null!==(n=e.log)&&void 0!==n?n:this.trainOpts.log);var r=this.trainOpts,i=r.callback,a=r.callbackPeriod,o=r.errorCheckInterval;i&&a!==o&&console.warn("options.callbackPeriod with value of ".concat((null!==a&&void 0!==a?a:"undefined").toString()," does not match options.errorCheckInterval with value of ").concat((null!==o&&void 0!==o?o:"undefined").toString(),", if logging error, it will repeat.  These values may need to match"))}},{key:"_connectOptionsLayers",value:function(){var t=this.options,e=t.inputLayerIndex,n=t.outputLayerIndex,r=t.layers;if(!r)throw new Error("this.options.layers in unexpected state");if("number"!==typeof e)throw new Error("inputLayerIndex not a number");if("number"!==typeof n)throw new Error("inputLayerIndex not a number");var i=r[e];if(!i)throw new Error("inputLayer not found in this.options.layers");var a=r[n];if(!a)throw new Error("outputLayer not found in this.options.layers");return this._inputLayer=i,this._hiddenLayers=r.slice(e,n-e),this._outputLayer=a,r}},{key:"_connectNewLayers",value:function(){var t=this.options,e=t.inputLayer,n=t.outputLayer;if(!e)throw new Error("inputLayer not defined");var r=[];this._inputLayer=e();var i=this._connectHiddenLayers(this._inputLayer);if(!n)throw new Error("outputLayer not defined");return this._outputLayer=n(i[i.length-1],i.length),r.push(this._inputLayer),r.push.apply(r,a(i)),r.push(this._outputLayer),Lt(r)}},{key:"_connectHiddenLayers",value:function(t){this._hiddenLayers=[];var e=[],n=this.options.hiddenLayers;if(!n)throw new Error("hiddenLayers not defined");for(var r=0;r<n.length;r++){var i=n[r](t,r);e.push(i),this._hiddenLayers.push(i),t=i}return e}},{key:"initialize",value:function(){this.layers=this.options.layers?this._connectOptionsLayers():this._connectNewLayers(),this.initializeLayers(this.layers),this._model=this.layers.filter((function(t){return t instanceof ot}))}},{key:"initializeLayers",value:function(t){for(var e,n,r=0;r<t.length;r++){var i=t[r];i.setupKernels(!0),i instanceof ot&&null===i.praxis&&"function"===typeof this.options.initPraxis&&(i.praxis=this.options.initPraxis(i,null!==(n=null!==(e=i.settings.praxisOpts)&&void 0!==e?e:this.options.praxisOpts)&&void 0!==n?n:{}),i.praxis.setupKernels())}var a=t[t.length-1];this.meanSquaredError=new U({width:a.width,height:a.height})}},{key:"run",value:function(t){var e;if(Array.isArray(t)||t.buffer)e=t;else{if(!this.inputLookup)throw new Error("input is incompatible with net");e=st.toArray(this.inputLookup,t,this.inputLookupLength)}var n=this.runInput(e);return n instanceof O.Texture&&(n=n.toArray()),this.outputLookup?st.toObject(this.outputLookup,n):n}},{key:"runInput",value:function(t){if(!this.layers)throw new Error("not initialized");this.layers[0].predict(t);for(var e=1;e<this.layers.length;e++)this.layers[e].predict();return this.layers[this.layers.length-1].weights}},{key:"train",value:function(t){for(var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._prepTraining(t,n),i=r.preparedData,a=r.status,o=r.endTime,s=!0,u=function(){return e._calculateTrainingError(i)},l=function(){return e._trainPatterns(i)};s;)s=this._trainingTick(a,o,u,l);return a}},{key:"trainAsync",value:function(){var t=i(r().mark((function t(e){var n,i,a,o,s,u=this,l=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},i=this._prepTraining(e,n),a=i.preparedData,o=i.status,s=i.endTime,t.next=4,new Promise((function(t,e){try{var n=function(){return u._calculateTrainingError(a)},r=function(){return u._trainPatterns(a)},i=new $n.Thaw(new Array(u.trainOpts.iterations),{delay:!0,each:function(){return u._trainingTick(o,s,n,r)||i.stop()},done:function(){return t(o)}});i.tick()}catch(l){e(l)}}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_trainingTick",value:function(t,e,n,r){var i=this.trainOpts;return!(t.iterations>=i.iterations||t.error<=i.errorThresh||Date.now()>=e)&&("function"===typeof i.log&&t.iterations%i.logPeriod===0?(t.error=n(),i.log("iterations: ".concat(t.iterations,", training error: ").concat(t.error))):t.iterations%i.errorCheckInterval===0?t.error=n():r(),i.callback&&t.iterations%i.callbackPeriod===0&&i.callback(Object.assign(t)),t.iterations++,!0)}},{key:"_prepTraining",value:function(t,e){this._updateTrainingOptions(e);var n=this.formatData(t),r=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,i={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(n),status:i,endTime:r}}},{key:"verifyIsInitialized",value:function(){this._model||this.initialize()}},{key:"_calculateTrainingError",value:function(t){for(var e=new Float32Array([0]),n=this.meanSquaredError,r=0;r<t.length;++r){var i=e,a=this._trainPattern(t[r].input,t[r].output,!0);e=n.add(e,a),z(a),z(i)}var o=n.divide(t.length,e);if(z(e),o instanceof O.Texture){var s=o.toArray();return z(o),s[0]}return o[0]}},{key:"_trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this._trainPattern(t[e].input,t[e].output,!1)}},{key:"_trainPattern",value:function(t,e,n){var r;if(this.runInput(t),this._calculateDeltas(e),this.adjustWeights(),n){if(!(null===(r=this._outputLayer)||void 0===r?void 0:r.errors))throw new Error("outputLayer.errors not defined");return this.meanSquaredError.calculate(this._outputLayer.errors)}return null}},{key:"_calculateDeltas",value:function(t){for(var e=this.layers,n=e.length-1;n>-1;n--)e[n].compare(t)}},{key:"adjustWeights",value:function(){for(var t=this._model,e=0;e<t.length;e++)t[e].learn(this.trainOpts.learningRate)}},{key:"formatData",value:function(t){var e=this;if(!Array.isArray(t)){var n=[];n.push(t),t=n}var r,i=t[0].input;if(!Array.isArray(t)||Array.isArray(i)||i instanceof Float32Array)r=t;else{if(!this.inputLookup){var a=new qn(t,"input");this.inputLookup=a.table,this.inputLookupLength=a.length}r=t.map((function(t){return{input:st.toArray(e.inputLookup,t.input,e.inputLookupLength)}}),this)}var o=t[0].output;if(!Array.isArray(o)&&!(o instanceof Float32Array)){if(!this.outputLookup){var s=new qn(t,"output");this.outputLookup=s.table,this.outputLookupLength=s.length}r=t.map((function(t,n){var i=st.toArray(e.outputLookup,t.output,e.inputLookupLength);return{input:r[n].input,output:i}}),this)}return r}},{key:"transferData",value:function(t){for(var e=new Array(t.length),n=M((function(t){return t[this.thread.x]}),{output:[t[0].input.length],immutable:!0}),r=M((function(t){return t[this.thread.x]}),{output:[t[0].output.length],immutable:!0}),i=0;i<t.length;i++){var a=t[i];e[i]={input:n(a.input),output:r(a.output)}}return e}},{key:"test",value:function(){throw new Error("".concat(this.constructor.name,"-test is not yet implemented"))}},{key:"toJSON",value:function(){var t;if(this.layers||this.initialize(),!this._model||!this.layers||!this._inputLayer||!this._hiddenLayers||!this._outputLayer)throw new Error("network is not initialized");for(var e=[],n=0;n<this.layers.length;n++){var r=this.layers[n],i=r.toJSON();r.hasOwnProperty("inputLayer")?i.inputLayerIndex=this.layers.indexOf(r.inputLayer):r.hasOwnProperty("inputLayer1")&&r.hasOwnProperty("inputLayer2")&&(i.inputLayer1Index=this.layers.indexOf(r.inputLayer1),i.inputLayer2Index=this.layers.indexOf(r.inputLayer2)),e.push(i)}return{type:this.constructor.name,sizes:null!==(t=this.options.sizes)&&void 0!==t?t:[this._inputLayer.height].concat(this._hiddenLayers.map((function(t){return t.height}))).concat([this._outputLayer.height]),outputLayerIndex:this.layers.indexOf(this._outputLayer),layers:e,inputLayerIndex:this.layers.indexOf(this._inputLayer)}}},{key:"toFunction",value:function(){throw new Error("".concat(this.constructor.name,"-toFunction is not yet implemented"))}}],[{key:"_validateTrainingOptions",value:function(t){var e=t.iterations,n=t.errorThresh,r=t.log,i=t.logPeriod,a=t.learningRate,o=t.callback,s=t.callbackPeriod,u=t.timeout,l={iterations:function(){return"number"===typeof e&&e>0},errorThresh:function(){return"number"===typeof n&&n>0&&n<1},log:function(){return"function"===typeof r||"boolean"===typeof r},logPeriod:function(){return"number"===typeof i&&i>0},learningRate:function(){return"number"===typeof a&&a>0&&a<1},callback:function(){return"function"===typeof o||null===o},callbackPeriod:function(){return"number"===typeof s&&s>0},timeout:function(){return"number"===typeof u&&u>0}};Object.keys(Qn).forEach((function(e){if(l.hasOwnProperty(e)&&!l[e]()){var n=t[e];throw new Error("[".concat(e,", ").concat((null!==n&&void 0!==n?n:"undefined").toString(),"] is out of normal training range, your network will probably not train."))}}))}},{key:"fromJSON",value:function(t,e){var n,r,i,a,o=t.layers,s=[],u=e?null!==(n=Yn(o[0]))&&void 0!==n?n:e(o[0]):Yn(o[0]);if(!u)throw new Error("unable to find layer");s.push(u);for(var l=1;l<o.length;l++){var c=o[l];if("undefined"===typeof c.inputLayerIndex&&"undefined"===typeof c.inputLayer1Index&&"undefined"===typeof c.inputLayer2Index){var h=e?null!==(r=Yn(c))&&void 0!==r?r:e(c):Yn(c);if(!h)throw new Error("unable to find layer");s.push(h)}else if("number"===typeof c.inputLayerIndex){var p=s[c.inputLayerIndex];if(!p)throw new Error("inputLayer1 not found");var d=e?null!==(i=Yn(c,p))&&void 0!==i?i:e(c,p):Yn(c,p);if(!d)throw new Error("unable to find layer");s.push(d)}else{if("number"!==typeof c.inputLayer1Index)throw new Error("Cannot create network from provided JSON. inputLayer1Index not defined.");if("number"!==typeof c.inputLayer2Index)throw new Error("Cannot create network from provided JSON. inputLayer2Index not defined.");var m=s[c.inputLayer1Index],v=s[c.inputLayer2Index];if(void 0===m)throw new Error("Cannot create network from provided JSON. layer of index ".concat(c.inputLayer1Index," not found."));if(void 0===v)throw new Error("Cannot create network from provided JSON. layer of index ".concat(c.inputLayer2Index," not found."));var y=e?null!==(a=Yn(c,m,v))&&void 0!==a?a:e(c,m,v):Yn(c,m,v);if(!y)throw new Error("unable to find layer");s.push(y)}}return new this(f(f({},t),{},{layers:s}))}}]),t}();function tr(t,e){if(!e)throw new TypeError("Required parameter 'net' is of type ".concat(typeof e,". Must be of type 'brain.NeuralNetwork'"));var n=e.run(t),r=null,i=-1;return Object.entries(n).forEach((function(t){var e=p(t,2),n=e[0],a=e[1];"undefined"!==typeof a&&"number"===typeof a&&a>i&&(r=n,i=a)})),r}function er(t){for(var e=[],n=0;n<t.length;n++)e.push(Float32Array.from(t[n]));return e}function nr(t,e){for(var n=[],r=0;r<t.length;r++)n.push(Float32Array.from(t[r]));for(var i=0;i<e.length;i++)n.push(Float32Array.from(e[i]));return n}function rr(t){for(var e=[],n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return e}function ir(t,e){for(var n=[],r=0;r<t.length;r++)n.push(Float32Array.from([t[r]]));for(var i=0;i<e.length;i++)n.push(Float32Array.from([e[i]]));return n}function ar(t){return Float32Array.from(t)}function or(t,e,n,r,i,a){for(var o=[],s=0;s<t.length;s++){var u=t[s],l=new Float32Array(i);for(var c in u)u.hasOwnProperty(c)&&(l[n[c]]=u[c]);o.push(l)}for(var h=0;h<e.length;h++){var p=e[h],f=new Float32Array(a);for(var d in p)p.hasOwnProperty(d)&&(f[r[d]]=p[d]);o.push(f)}return o}function sr(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(Float32Array.from([t[n]]));return e}function ur(t,e){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(Float32Array.from([t[r]]));for(var i in e)e.hasOwnProperty(i)&&n.push(Float32Array.from([e[i]]));return n}function lr(t,e,n){var r=new Float32Array(n);for(var i in t)t.hasOwnProperty(i)&&(r[e[i]]=t[i]);return r}function cr(t){return Array.isArray(t)||t instanceof Float32Array?Math.max.apply(Math,a(t)):Math.max.apply(Math,a(Object.values(t)))}function hr(t){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return e/t.length}function pr(t,e){if(t.buffer instanceof ArrayBuffer)return null;if(Array.isArray(t))return ar;if(!e)throw new Error("table is not Object");var n=Object.keys(e).length;return function(t){var r=new Float32Array(n);for(var i in e)e.hasOwnProperty(i)&&"number"===typeof t[i]&&(r[e[i]]=t[i]||0);return r}}function fr(){return{inputSize:0,outputSize:0,binaryThresh:.5}}function dr(){return{activation:"sigmoid",iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,leakyReluAlpha:.01,learningRate:.3,momentum:.1,callbackPeriod:10,timeout:1/0,beta1:.9,beta2:.999,epsilon:1e-8}}var mr=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),this.options=fr(),this.trainOpts=dr(),this.sizes=[],this.outputLayer=-1,this.biases=[],this.weights=[],this.outputs=[],this.deltas=[],this.changes=[],this.errors=[],this.errorCheckInterval=1,this.inputLookup=null,this.inputLookupLength=0,this.outputLookup=null,this.outputLookupLength=0,this._formatInput=null,this._formatOutput=null,this.runInput=function(t){return e.setActivation(),e.runInput(t)},this.calculateDeltas=function(t){return e.setActivation(),e.calculateDeltas(t)},this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0,this.options=f(f({},this.options),n),this.updateTrainingOptions(n);var r=this.options,i=r.inputSize,a=r.hiddenLayers,o=r.outputSize;i&&o&&(this.sizes=[i].concat(null!==a&&void 0!==a?a:[]).concat([o]))}return m(t,[{key:"initialize",value:function(){if(!this.sizes.length)throw new Error("Sizes must be set before initializing");this.outputLayer=this.sizes.length-1,this.biases=new Array(this.outputLayer),this.weights=new Array(this.outputLayer),this.outputs=new Array(this.outputLayer),this.deltas=new Array(this.outputLayer),this.changes=new Array(this.outputLayer),this.errors=new Array(this.outputLayer);for(var t=0;t<=this.outputLayer;t++){var e=this.sizes[t];if(this.deltas[t]=H(e),this.errors[t]=H(e),this.outputs[t]=H(e),t>0){this.biases[t]=Vt(e),this.weights[t]=new Array(e),this.changes[t]=new Array(e);for(var n=0;n<e;n++){var r=this.sizes[t-1];this.weights[t][n]=Vt(r),this.changes[t][n]=H(r)}}}this.setActivation(),"adam"===this.trainOpts.praxis&&this._setupAdam()}},{key:"setActivation",value:function(t){var e=null!==t&&void 0!==t?t:this.trainOpts.activation;switch(e){case"sigmoid":this.runInput=this._runInputSigmoid,this.calculateDeltas=this._calculateDeltasSigmoid;break;case"relu":this.runInput=this._runInputRelu,this.calculateDeltas=this._calculateDeltasRelu;break;case"leaky-relu":this.runInput=this._runInputLeakyRelu,this.calculateDeltas=this._calculateDeltasLeakyRelu;break;case"tanh":this.runInput=this._runInputTanh,this.calculateDeltas=this._calculateDeltasTanh;break;default:throw new Error("Unknown activation ".concat(e,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}}},{key:"isRunnable",get:function(){return this.sizes.length>0}},{key:"run",value:function(t){if(!this.isRunnable)throw new Error("network not runnable");var e;e=this.inputLookup?st.toArray(this.inputLookup,t,this.inputLookupLength):t,this.validateInput(e);var n=this.runInput(e).slice(0);return this.outputLookup?st.toObject(this.outputLookup,n):n}},{key:"_runInputSigmoid",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],l=a[s],c=0;c<u.length;c++)l+=u[c]*t[c];o[s]=1/(1+Math.exp(-l))}e=t=o}if(!e)throw new Error("output was empty");return e}},{key:"_runInputRelu",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],l=a[s],c=0;c<u.length;c++)l+=u[c]*t[c];o[s]=l<0?0:l}e=t=o}if(!e)throw new Error("output was empty");return e}},{key:"_runInputLeakyRelu",value:function(t){this.outputs[0]=t;for(var e=this.trainOpts.leakyReluAlpha,n=null,r=1;r<=this.outputLayer;r++){for(var i=this.sizes[r],a=this.weights[r],o=this.biases[r],s=this.outputs[r],u=0;u<i;u++){for(var l=a[u],c=o[u],h=0;h<l.length;h++)c+=l[h]*t[h];s[u]=Math.max(c,e*c)}n=t=s}if(!n)throw new Error("output was empty");return n}},{key:"_runInputTanh",value:function(t){this.outputs[0]=t;for(var e=null,n=1;n<=this.outputLayer;n++){for(var r=this.sizes[n],i=this.weights[n],a=this.biases[n],o=this.outputs[n],s=0;s<r;s++){for(var u=i[s],l=a[s],c=0;c<u.length;c++)l+=u[c]*t[c];o[s]=Math.tanh(l)}e=t=o}if(!e)throw new Error("output was empty");return e}},{key:"verifyIsInitialized",value:function(t){var e=this;this.sizes.length&&this.outputLayer>0||(this.sizes=[],this.sizes.push(t[0].input.length),this.options.hiddenLayers?this.options.hiddenLayers.forEach((function(t){e.sizes.push(t)})):this.sizes.push(Math.max(3,Math.floor(t[0].input.length/2))),this.sizes.push(t[0].output.length),this.initialize())}},{key:"updateTrainingOptions",value:function(t){var e=f(f({},this.trainOpts),t);this.validateTrainingOptions(e),this.trainOpts=e,this.setLogMethod(this.trainOpts.log)}},{key:"validateTrainingOptions",value:function(t){var e={activation:function(){return["sigmoid","relu","leaky-relu","tanh"].includes(t.activation)},iterations:function(){var e=t.iterations;return"number"===typeof e&&e>0},errorThresh:function(){var e=t.errorThresh;return"number"===typeof e&&e>0&&e<1},log:function(){var e=t.log;return"function"===typeof e||"boolean"===typeof e},logPeriod:function(){var e=t.logPeriod;return"number"===typeof e&&e>0},leakyReluAlpha:function(){var e=t.leakyReluAlpha;return"number"===typeof e&&e>0&&e<1},learningRate:function(){var e=t.learningRate;return"number"===typeof e&&e>0&&e<1},momentum:function(){var e=t.momentum;return"number"===typeof e&&e>0&&e<1},callback:function(){var e=t.callback;return"function"===typeof e||void 0===e},callbackPeriod:function(){var e=t.callbackPeriod;return"number"===typeof e&&e>0},timeout:function(){var e=t.timeout;return"number"===typeof e&&e>0},praxis:function(){var e=t.praxis;return!e||"adam"===e},beta1:function(){var e=t.beta1;return e>0&&e<1},beta2:function(){var e=t.beta2;return e>0&&e<1},epsilon:function(){var e=t.epsilon;return e>0&&e<1}};for(var n in e){var r=t;if(!e[n]())throw new Error("[".concat(n,", ").concat(r[n],"] is out of normal training range, your network will probably not train."))}}},{key:"getTrainOptsJSON",value:function(){var t=this.trainOpts,e=t.activation,n=t.iterations,r=t.errorThresh,i=t.log,a=t.logPeriod,o=t.leakyReluAlpha,s=t.learningRate,u=t.momentum,l=t.callbackPeriod,c=t.timeout;return{activation:e,iterations:n,errorThresh:r,log:"function"===typeof i||"boolean"===typeof i&&i,logPeriod:a,leakyReluAlpha:o,learningRate:s,momentum:u,callbackPeriod:l,timeout:c===1/0?"Infinity":c,praxis:t.praxis,beta1:t.beta1,beta2:t.beta2,epsilon:t.epsilon}}},{key:"setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&this.logTrainingStatus}},{key:"logTrainingStatus",value:function(t){console.log("iterations: ".concat(t.iterations,", training error: ").concat(t.error))}},{key:"calculateTrainingError",value:function(t){for(var e=0,n=0;n<t.length;++n)e+=this.trainPattern(t[n],!0);return e/t.length}},{key:"trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this.trainPattern(t[e])}},{key:"trainingTick",value:function(t,e,n){var r=this.trainOpts,i=r.callback,a=r.callbackPeriod,o=r.errorThresh,s=r.iterations,u=r.log,l=r.logPeriod;return!(e.iterations>=s||e.error<=o||Date.now()>=n)&&(e.iterations++,u&&e.iterations%l===0?(e.error=this.calculateTrainingError(t),u(e)):e.iterations%this.errorCheckInterval===0?e.error=this.calculateTrainingError(t):this.trainPatterns(t),i&&e.iterations%a===0&&i({iterations:e.iterations,error:e.error}),!0)}},{key:"prepTraining",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(e);var n=this.formatData(t),r=Date.now()+this.trainOpts.timeout,i={error:1,iterations:0};return this.verifyIsInitialized(n),this.validateData(n),{preparedData:n,status:i,endTime:r}}},{key:"train",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.prepTraining(t,e),r=n.preparedData,i=n.status,a=n.endTime;this.trainingTick(r,i,a););return i}},{key:"trainAsync",value:function(){var t=i(r().mark((function t(e){var n,i,a,o,s,u=this,l=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},i=this.prepTraining(e,n),a=i.preparedData,o=i.status,s=i.endTime,t.next=4,new Promise((function(t,e){try{var n=new $n.Thaw(new Array(u.trainOpts.iterations),{delay:!0,each:function(){return u.trainingTick(a,o,s)||n.stop()},done:function(){return t(o)}});n.tick()}catch(r){e(r)}}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"trainPattern",value:function(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?hr(this.errors[this.outputLayer]):null}},{key:"_calculateDeltasSigmoid",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.errors[e],a=this.deltas[e],o=this.weights[e+1],s=0;s<n;s++){var u=r[s],l=0;if(e===this.outputLayer)l=t[s]-u;else for(var c=this.deltas[e+1],h=0;h<c.length;h++)l+=c[h]*o[h][s];i[s]=l,a[s]=l*u*(1-u)}}},{key:"_calculateDeltasRelu",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.weights[e+1],a=this.deltas[e+1],o=this.errors[e],s=this.deltas[e],u=0;u<n;u++){var l=r[u],c=0;if(e===this.outputLayer)c=t[u]-l;else for(var h=0;h<a.length;h++)c+=a[h]*i[h][u];o[u]=c,s[u]=l>0?c:0}}},{key:"_calculateDeltasLeakyRelu",value:function(t){for(var e=this.trainOpts.leakyReluAlpha,n=this.outputLayer;n>=0;n--)for(var r=this.sizes[n],i=this.outputs[n],a=this.deltas[n+1],o=this.weights[n+1],s=this.errors[n],u=this.deltas[n],l=0;l<r;l++){var c=i[l],h=0;if(n===this.outputLayer)h=t[l]-c;else for(var p=0;p<a.length;p++)h+=a[p]*o[p][l];s[l]=h,u[l]=c>0?h:e*h}}},{key:"_calculateDeltasTanh",value:function(t){for(var e=this.outputLayer;e>=0;e--)for(var n=this.sizes[e],r=this.outputs[e],i=this.deltas[e+1],a=this.weights[e+1],o=this.errors[e],s=this.deltas[e],u=0;u<n;u++){var l=r[u],c=0;if(e===this.outputLayer)c=t[u]-l;else for(var h=0;h<i.length;h++)c+=i[h]*a[h][u];o[u]=c,s[u]=(1-l*l)*c}}},{key:"adjustWeights",value:function(){for(var t=this.trainOpts,e=t.learningRate,n=t.momentum,r=1;r<=this.outputLayer;r++)for(var i=this.outputs[r-1],a=this.sizes[r],o=this.deltas[r],s=this.changes[r],u=this.weights[r],l=this.biases[r],c=0;c<a;c++){for(var h=o[c],p=0;p<i.length;p++){var f=s[c][p];f=e*h*i[p]+n*f,s[c][p]=f,u[c][p]+=f}l[c]+=e*h}}},{key:"_setupAdam",value:function(){this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0;for(var t=0;t<=this.outputLayer;t++){var e=this.sizes[t];if(t>0){this.biasChangesLow[t]=H(e),this.biasChangesHigh[t]=H(e),this.changesLow[t]=new Array(e),this.changesHigh[t]=new Array(e);for(var n=0;n<e;n++){var r=this.sizes[t-1];this.changesLow[t][n]=H(r),this.changesHigh[t][n]=H(r)}}}this.adjustWeights=this._adjustWeightsAdam}},{key:"_adjustWeightsAdam",value:function(){this.iterations++;for(var t=this.iterations,e=this.trainOpts,n=e.beta1,r=e.beta2,i=e.epsilon,a=e.learningRate,o=1;o<=this.outputLayer;o++)for(var s=this.outputs[o-1],u=this.sizes[o],l=this.deltas[o],c=this.changesLow[o],h=this.changesHigh[o],p=this.weights[o],f=this.biases[o],d=this.biasChangesLow[o],m=this.biasChangesHigh[o],v=0;v<u;v++){for(var y=l[v],g=0;g<s.length;g++){var x=y*s[g],b=c[v][g]*n+(1-n)*x,w=h[v][g]*r+(1-r)*x*x,k=b/(1-Math.pow(n,t)),S=w/(1-Math.pow(r,t));c[v][g]=b,h[v][g]=w,p[v][g]+=a*k/(Math.sqrt(S)+i)}var T=l[v],A=d[v]*n+(1-n)*T,E=m[v]*r+(1-r)*T*T,_=d[v]/(1-Math.pow(n,t)),L=m[v]/(1-Math.pow(r,t));d[v]=A,m[v]=E,f[v]+=a*_/(Math.sqrt(L)+i)}}},{key:"validateData",value:function(t){for(var e=this.sizes[0],n=this.sizes[this.sizes.length-1],r=t.length,i=0;i<r;i++){var a=t[i],o=a.input,s=a.output;if(o.length!==e)throw new Error("input at index ".concat(i," length ").concat(o.length," must be ").concat(e));if(t[i].output.length!==n)throw new Error("output at index ".concat(i," length ").concat(s.length," must be ").concat(n))}}},{key:"validateInput",value:function(t){var e=this.sizes[0];if(t.length!==e)throw new Error("input length ".concat(t.length," must match options.inputSize of ").concat(e))}},{key:"formatData",value:function(t){if(!Array.isArray(t[0].input))if(this.inputLookup)this.inputLookupLength=Object.keys(this.inputLookup).length;else{var e=new qn(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!Array.isArray(t[0].output))if(this.outputLookup)this.outputLookupLength=Object.keys(this.outputLookup).length;else{var n=new qn(t,"output");this.outputLookup=n.table,this.outputLookupLength=n.length}if(this._formatInput||(this._formatInput=pr(t[0].input,this.inputLookup)),this._formatOutput||(this._formatOutput=pr(t[0].output,this.outputLookup)),this._formatInput&&this._formatOutput){for(var r=[],i=0;i<t.length;i++)r.push({input:this._formatInput(t[i].input),output:this._formatOutput(t[i].output)});return r}if(this._formatInput){for(var a=[],o=0;o<t.length;o++)a.push({input:this._formatInput(t[o].input),output:t[o].output});return a}if(this._formatOutput){for(var s=[],u=0;u<t.length;u++)s.push({input:t[u].input,output:this._formatOutput(t[u].output)});return s}return t}},{key:"addFormat",value:function(t){var e,n;Array.isArray(t.input)&&"number"===typeof t.input[0]||(this.inputLookup=st.addKeys(t.input,null!==(e=this.inputLookup)&&void 0!==e?e:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length)),Array.isArray(t.output)&&"number"===typeof t.output[0]||(this.outputLookup=st.addKeys(t.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length))}},{key:"test",value:function(t){var e=this,n=this.prepTraining(t).preparedData,r=1===n[0].output.length,i=[],a=0;if(r){for(var o=0,s=0,u=0,l=0,c=function(){var t=e.runInput(n[h].input),r=n[h].output,c=t[0]>e.options.binaryThresh?1:0,p=r[0];if(c!==p){var f=n[h];i.push({input:f.input,output:f.output,actual:c,expected:p})}0===c&&0===p?l++:1===c&&1===p?u++:0===c&&1===p?s++:1===c&&0===p&&o++,a+=hr(t.map((function(t,e){return r[e]-t})))},h=0;h<n.length;h++)c();return{error:a/n.length,misclasses:i,total:n.length,trueNeg:l,truePos:u,falseNeg:s,falsePos:o,precision:u>0?u/(u+o):0,recall:u>0?u/(u+s):0,accuracy:(l+u)/n.length}}for(var p=function(){var t=e.runInput(n[f].input),r=n[f].output,o=t.indexOf(cr(t)),s=r.indexOf(cr(r));if(o!==s){var u=n[f];i.push({input:u.input,output:u.output,actual:o,expected:s})}a+=hr(t.map((function(t,e){return r[e]-t})))},f=0;f<n.length;f++)p();return{error:a/n.length,misclasses:i,total:n.length}}},{key:"toJSON",value:function(){var t,e;this.isRunnable||this.initialize();for(var n=this.weights.map((function(t){return t.map((function(t){return Array.from(t)}))})),r=this.biases.map((function(t){return Array.from(t)})),i=[],o=this.sizes.length-1,s=0;s<=o;s++)i.push({weights:null!==(t=n[s])&&void 0!==t?t:[],biases:null!==(e=r[s])&&void 0!==e?e:[]});return{type:"NeuralNetwork",sizes:a(this.sizes),layers:i,inputLookup:this.inputLookup?f({},this.inputLookup):null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?f({},this.outputLookup):null,outputLookupLength:this.outputLookupLength,options:f({},this.options),trainOpts:this.getTrainOptsJSON()}}},{key:"fromJSON",value:function(t){if(this.options=f(f({},fr()),t.options),t.hasOwnProperty("trainOpts")){var e=f(f({},t.trainOpts),{},{timeout:"Infinity"===t.trainOpts.timeout?1/0:t.trainOpts.timeout});this.updateTrainingOptions(e)}this.sizes=t.sizes,this.initialize(),this.inputLookup=t.inputLookup?f({},t.inputLookup):null,this.inputLookupLength=t.inputLookupLength,this.outputLookup=t.outputLookup?f({},t.outputLookup):null,this.outputLookupLength=t.outputLookupLength;for(var n=t.layers,r=this.weights.map((function(t,e){return n[e].weights.map((function(t){return Float32Array.from(t)}))})),i=this.biases.map((function(t,e){return Float32Array.from(n[e].biases)})),a=0;a<=this.outputLayer;a++)this.weights[a]=r[a]||[],this.biases[a]=i[a]||[];return this}},{key:"toFunction",value:function(t){var e=this,n=this.trainOpts,r=n.activation,i=n.leakyReluAlpha,a=!1,o=function t(n,o){if(0===n)return"(input[".concat(o,"]||0)");var s=e.weights[n][o],u=e.biases[n][o];if(!s)throw new Error("weights at layerIndex ".concat(n," & nodeIndex ").concat(o," not found"));if(!u)throw new Error("bias as layerIndex ".concat(n," & nodeIndex ").concat(o," not found"));var l=[];s.forEach((function(e,r){e<0?l.push("".concat(e,"*").concat(t(n-1,r))):l.push("+".concat(e,"*").concat(t(n-1,r)))}));var c="(".concat(u.toString()).concat(l.join(""),")");switch(r){case"sigmoid":return"1/(1+1/Math.exp(".concat(c,"))");case"relu":return a=!0,"((v=".concat(c,")<0?0:v)");case"leaky-relu":return a=!0,"Math.max((v=".concat(c,"),").concat(i,"*v)");case"tanh":return"Math.tanh(".concat(c,")");default:throw new Error("Unknown activation ".concat(r,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}};function s(t){if(t.find((function(t){return t.includes('"')})))throw new Error("key contains '\"', which is not compatible")}var u,l=[],c="";if(this.inputLookup&&(s(Object.keys(this.inputLookup)),c="input = new Float32Array([".concat(Object.keys(this.inputLookup).map((function(t){return'input["'.concat(t,'"]')})).join(","),"]);")),this.sizes.length<1)throw new Error("No layers");for(var h=0;h<this.sizes[this.outputLayer];h++)l.push(o(this.outputLayer,h));if(this.outputLookup){var p=Object.keys(this.outputLookup);s(p);var f=p.map((function(t,e){return'"'.concat(t,'":').concat(l[e])})).join(",");u="{".concat(f,"}")}else u="[".concat(l.join(","),"]");var d="".concat(c).concat(a?"var v;":"","return ").concat(u,";");return new Function("input",t?t(d):d)}}]),t}();function vr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return 1/(1+Math.exp(-r))}function yr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:r}function gr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return r<0?0:.01*r}function xr(t,e,n){for(var r=e[this.thread.x],i=0;i<this.constants.size;i++)r+=t[this.thread.x][i]*n[i];return Math.tanh(r)}function br(t,e){return e-t}function wr(t,e){return t*e*(1-e)}function kr(t,e){return e>0?t:0}function Sr(t,e){return e>0?t:.01*t}function Tr(t,e){return(1-e*e)*t}function Ar(t,e,n,r){for(var i=0,a=0;a<e;a++)i+=r[a]*n[a][t];return i}function Er(t,e,n,r,i){return t*r*i+e*n}function _r(t,e){return t+e}function Lr(t,e){return t[this.thread.x]+e[this.thread.x]*this.constants.learningRate}function Ir(t){for(var e=0,n=0;n<this.constants.size;n++)e+=Math.pow(t[n],2);return e/this.constants.size}var Cr=function(t){c(n,t);var e=h(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(this,n),(t=e.call(this,r)).texturizeInputData=function(){throw new Error("not yet setup")},t.forwardPropagate=[],t.backwardPropagate=[],t.changesPropagate=[],t.biasesPropagate=[],t.getMSE=function(){throw new Error("not yet setup")},t._addMSE=function(){throw new Error("not yet setup")},t._divideMSESum=function(){throw new Error("not yet setup")},t.outputs=[],t.deltas=[],t.errors=[],t.weights=[],t.changes=[],t.biases=[],t.runInput=function(e){var n;t.outputs[0]=e;for(var r=1;r<=t.outputLayer;r++)z(t.outputs[r]),t.outputs[r]=t.forwardPropagate[r](t.weights[r],t.biases[r],e),n=e=t.outputs[r];return n},t.calculateDeltas=function(e){for(var n=t.outputLayer;n>0;n--){z(t.deltas[n]),z(t.errors[n]);var r=void 0;r=n===t.outputLayer?t.backwardPropagate[n](t.outputs[n],e):t.backwardPropagate[n](t.weights[n+1],t.outputs[n],t.deltas[n+1]),t.deltas[n]=r.result,t.errors[n]=r.error}},t.errorCheckInterval=100,t.gpu=new O.GPU({mode:r.mode}),t}return m(n,[{key:"initialize",value:function(){u(l(n.prototype),"initialize",this).call(this),this.buildRunInput(),this.buildCalculateDeltas(),this.buildGetChanges(),this.buildChangeBiases(),this.buildGetMSE()}},{key:"setActivation",value:function(){}},{key:"trainPattern",value:function(t,e){return this.runInput(t.input),this.calculateDeltas(t.output),this.adjustWeights(),e?this.getMSE(this.errors[this.outputLayer]):null}},{key:"calculateTrainingError",value:function(t){for(var e=new Float32Array([0]),n=0;n<t.length;++n){var r=e,i=this.trainPattern(t[n],!0);e=this._addMSE(e,i),z(i),z(r)}var a=this._divideMSESum(t.length,e);return z(e),(a instanceof O.Texture?a.toArray():a)[0]}},{key:"adjustWeights",value:function(){this.getChanges(),this.changeBiases()}},{key:"buildRunInput",value:function(){var t=null;switch(this.trainOpts.activation){case"sigmoid":t=vr;break;case"relu":t=yr;break;case"leaky-relu":t=gr;break;case"tanh":t=xr;break;default:throw new Error("Unknown activation ".concat(this.trainOpts.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}for(var e=1;e<=this.outputLayer;e++)this.forwardPropagate[e]=this.gpu.createKernel(t,{output:[this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e-1]},immutable:!0});this.texturizeInputData=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[this.sizes[1]],pipeline:!0,immutable:!0})}},{key:"buildCalculateDeltas",value:function(){var t;switch(this.trainOpts.activation){case"sigmoid":t=wr;break;case"relu":t=kr;break;case"leaky-relu":t=Sr;break;case"tanh":t=Tr;break;default:throw new Error("Unknown activation ".concat(this.trainOpts.activation,". Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'"))}t=O.alias(O.utils.getMinifySafeName((function(){return t})),t),this.gpu.addFunction(t);for(var e=this.outputLayer;e>0;e--)e===this.outputLayer?this.backwardPropagate[this.outputLayer]=this.gpu.createKernelMap({error:br},(function(e,n){var r=e[this.thread.x],i=n[this.thread.x];return t(br(r,i),r)}),{output:[this.sizes[this.outputLayer]],pipeline:!0,immutable:!0}):this.backwardPropagate[e]=this.gpu.createKernelMap({error:Ar},(function(e,n,r){var i=n[this.thread.x];return t(Ar(this.thread.x,this.constants.size,e,r),i)}),{output:[this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e+1]},immutable:!0})}},{key:"buildGetChanges",value:function(){for(var t=1;t<=this.outputLayer;t++)this.changesPropagate[t]=this.gpu.createKernelMap({weights:_r,changes:Er},(function(t,e,n,r){return _r(Er(this.constants.learningRate,this.constants.momentum,r[this.thread.y][this.thread.x],e[this.thread.y],t[this.thread.x]),n[this.thread.y][this.thread.x])}),{output:[this.sizes[t-1],this.sizes[t]],pipeline:!0,constants:{size:this.sizes[t-1],learningRate:this.trainOpts.learningRate,momentum:this.trainOpts.momentum},immutable:!0})}},{key:"getChanges",value:function(){for(var t=1;t<=this.outputLayer;t++){var e=this.weights[t],n=this.changes[t],r=this.changesPropagate[t](this.outputs[t-1],this.deltas[t],e,n);z(e),z(n),this.weights[t]=r.weights,this.changes[t]=r.changes,z(r.result)}}},{key:"buildChangeBiases",value:function(){for(var t=1;t<=this.outputLayer;t++)this.biasesPropagate[t]=this.gpu.createKernel(Lr,{output:[this.sizes[t]],pipeline:!0,constants:{learningRate:this.trainOpts.learningRate},immutable:!0})}},{key:"changeBiases",value:function(){for(var t=1;t<=this.outputLayer;t++){var e=this.biases[t];this.biases[t]=this.biasesPropagate[t](e,this.deltas[t]),z(e)}}},{key:"buildGetMSE",value:function(){this.getMSE=this.gpu.createKernel(Ir,{output:[1],constants:{size:this.sizes[this.outputLayer]},pipeline:!0,immutable:!0}),this._addMSE=this.gpu.createKernel((function(t,e){return t[0]+e[0]}),{output:[1],pipeline:!0,immutable:!0}),this._divideMSESum=this.gpu.createKernel((function(t,e){var n=e[0];return n>0?n/t:0}),{output:[1]})}},{key:"run",value:function(t){if(!this.isRunnable)throw new Error("network not runnable");var e;e=this.inputLookup?st.toArray(this.inputLookup,t,this.inputLookupLength):t,this.validateInput(e);var n=this.runInput(e),r=n instanceof O.Texture?n.toArray():n;return this.outputLookup?st.toObject(this.outputLookup,r):r}},{key:"prepTraining",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(n);var r=this.formatData(t),i=Date.now()+this.trainOpts.timeout,a={error:1,iterations:0};this.verifyIsInitialized(r);var o=this.gpu.createKernel((function(t){return t[this.thread.x]}),{output:[r[0].output.length],pipeline:!0,immutable:!0});return{preparedData:r.map((function(t){return{input:e.texturizeInputData(t.input),output:o(t.output)}})),status:a,endTime:i}}},{key:"toFunction",value:function(){throw new Error("".concat(this.constructor.name,"-toFunction is not yet implemented"))}},{key:"toJSON",value:function(){var t,e;null===this.sizes&&this.initialize();for(var n=this.weights.map((function(t){return(t instanceof O.Texture?t.toArray():t).map((function(t){return Array.from(t)}))})),r=this.biases.map((function(t){return Array.from(t instanceof O.Texture?t.toArray():t)})),i=[],o=0;o<=this.outputLayer;o++)i.push({weights:null!==(t=n[o])&&void 0!==t?t:[],biases:null!==(e=r[o])&&void 0!==e?e:[]});return{type:"NeuralNetworkGPU",sizes:a(this.sizes),layers:i,inputLookup:this.inputLookup?f({},this.inputLookup):null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?f({},this.outputLookup):null,outputLookupLength:this.outputLookupLength,options:f({},this.options),trainOpts:this.getTrainOptsJSON()}}}]),n}(mr),Dr=function(t){c(n,t);var e=h(n);function n(){var t;return d(this,n),(t=e.apply(this,arguments)).settings={},t.layer=null,t}return m(n,[{key:"setLayer",value:function(t){this.layer=t}},{key:"width",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.width},set:function(t){throw new Error("".concat(this.constructor.name,"-width is not yet implemented"))}},{key:"height",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.height},set:function(t){throw new Error("".concat(this.constructor.name,"-height is not yet implemented"))}},{key:"deltas",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.deltas},set:function(t){if(!this.layer)throw new Error("layer not set");z(this.layer.deltas),this.layer.deltas=t}},{key:"weights",get:function(){if(!this.layer)throw new Error("layer not set");return this.layer.weights},set:function(t){if(!this.layer)throw new Error("layer not set");z(this.layer.weights),this.layer.weights=t}},{key:"predict",value:function(){}},{key:"compare",value:function(){}},{key:"learn",value:function(){throw new Error("no longer using")}},{key:"setupKernels",value:function(){}},{key:"reuseKernels",value:function(){}}]),n}(J),Or=function(t){c(n,t);var e=h(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(this,n),(t=e.call(this,r)).trainOpts={},t._outputConnection=null,t._layerSets=[],t._hiddenLayerOutputIndices=[],t._model=null,t}return m(n,[{key:"_connectLayers",value:function(){if(!this.options.inputLayer)throw new Error("inputLayer not found");if(!this.options.outputLayer)throw new Error("outputLayer not found");var t=this.options.inputLayer(),e=this._connectHiddenLayers(t);return{inputLayer:t,hiddenLayers:e,outputLayer:this.options.outputLayer(e[e.length-1],-1)}}},{key:"_connectLayersDeep",value:function(){var t=[],e=this._layerSets[this._layerSets.length-1],n=0;function r(n){var r=e.indexOf(n);if(r<0)throw new Error("unable to find layer");return t[r]}function i(t){return f(f({},t.settings),{},{weights:null,deltas:null,praxis:null})}for(var a=0;a<e.length;a++){var o=e[a],s=void 0;if(o instanceof q)s=new o.constructor(r(o.inputLayer),i(o));else if(o instanceof at)s=new o.constructor(i(o));else if(o instanceof $)s=new o.constructor(i(o.inputLayer),r(o.inputLayer));else if(o instanceof J){var u=e[this._hiddenLayerOutputIndices[n++]];if(o instanceof Dr)throw new Error("unfinished");if(o instanceof mn)s=new mn(u);else{if(!(o instanceof vn))throw new Error("hidden layer ".concat(o.constructor.name," extends unknown hidden layer"));s=new mn(u)}}else if(o instanceof it||o instanceof ot)s=o;else if(o instanceof Q)s=new o.constructor(r(o.inputLayer),i(o.inputLayer));else if(o instanceof Z)s=new o.constructor(r(o.inputLayer1),r(o.inputLayer2),i(o));else{if(!(o instanceof nt))throw new Error("hidden layer ".concat(o.constructor.name," extends unknown hidden layer"));s=new o.constructor(i(o),r(o.inputLayer))}t.push(s)}return t}},{key:"_connectHiddenLayers",value:function(t){var e=[];if(!this.options.hiddenLayers)throw new Error("hiddenLayers not defined");for(var n=0;n<this.options.hiddenLayers.length;n++){var r=new vn,i=this.options.hiddenLayers[n](t,r,n);t=i,e.push(i)}return e}},{key:"initialize",value:function(){var t;if(this._outputConnection=new Dr,this.options.layers)t=this._connectOptionsLayers();else{var e=this._connectLayers(),n=e.inputLayer,r=e.hiddenLayers,i=e.outputLayer;t=Lt([n].concat(a(r),[i])),this._hiddenLayerOutputIndices=r.map((function(e){return t.indexOf(e)})),this._inputLayer=n,this._hiddenLayers=r,this._outputLayer=i}this.layers=t,this._layerSets=[t],this._model=t.filter((function(t){return t instanceof ot||t instanceof it})),this.initializeLayers(t)}},{key:"initializeDeep",value:function(){for(var t=this._connectLayersDeep(),e=0;e<t.length;e++){var n=t[e];n.setupKernels(!0),n.reuseKernels(this._layerSets[0][e])}this._layerSets.push(t)}},{key:"run",value:function(t){for(;this._layerSets.length<=t.length;)this.initializeDeep();var e=this.runInputs(t);return e instanceof O.Texture?e.toArray():e}},{key:"runInput",value:function(t){throw new Error("use .runInputs()")}},{key:"runInputs",value:function(t){for(;this._layerSets.length<t.length;)this.initializeDeep();for(var e=t.length-1,n=0;n<=e;n++){var r=this._layerSets[n];r[0].predict(t[n]);for(var i=1;i<r.length;i++)r[i].predict()}var a=this._layerSets[e],o=a[a.length-1].weights;return this.end(),o}},{key:"train",value:function(t){for(var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._prepTraining(t,n),i=r.preparedData,a=r.status,o=r.endTime,s=!0,u=function(){return e._calculateTrainingError(i)},l=function(){return e._trainPatterns(i)};s;)s=this._trainingTick(a,o,u,l);return a}},{key:"end",value:function(){var t=this._layerSets.length-1,e=this._layerSets[t];e[0].predict([new Float32Array([0])]);for(var n=1;n<e.length;n++)e[n].predict()}},{key:"transferData",value:function(t){return t}},{key:"_prepTraining",value:function(t,e){this._updateTrainingOptions(e);var n=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,r={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(t),status:r,endTime:n}}},{key:"_calculateTrainingError",value:function(t){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");for(var e=new Float32Array(1),n=0;n<t.length;++n){var r=e,i=this._trainPattern(t[n],!0);e=this.meanSquaredError.add(e,i),z(i),z(r)}var a=this.meanSquaredError.divide(t.length,e);return z(e),a instanceof O.Texture?a.toArray()[0]:a[0]}},{key:"formatData",value:function(t){return t}},{key:"_calculateDeltas",value:function(t){for(var e=this._layerSets[this._layerSets.length-1],n=e.length-2;n>=0;n--)e[n].compare();for(var r=t.length-2;r>=0;r--){var i=this._layerSets[r];i[i.length-1].compare(t[r+1]);for(var a=i.length-2;a>=0;a--)i[a].compare()}}},{key:"adjustWeights",value:function(){for(var t,e=this._model,n=0;n<e.length;n++)e[n].learn(null!==(t=this.options.learningRate)&&void 0!==t?t:0)}},{key:"_trainPatterns",value:function(t){for(var e=0;e<t.length;++e)this._trainPattern(t[e],!1)}},{key:"_trainPattern",value:function(t,e){if(this.runInputs(t),this._calculateDeltas(t),this.adjustWeights(),e){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");for(var n=new Float32Array(1),r=0,i=t.length-2;r<=i;r++){var a=this._layerSets[r],o=a[a.length-1],s=n;n=this.meanSquaredError.addAbsolute(s,o.errors),z(s)}return j(this.meanSquaredError.divide(t.length,n))}return null}}]),n}(Zn),Fr=function(){function t(e,n){d(this,t),this.rows=0,this.columns=0,e&&(this.rows=e),n&&(this.columns=n),this.weights=H(this.rows*this.columns),this.deltas=H(this.rows*this.columns)}return m(t,[{key:"getWeight",value:function(t,e){var n=this.columns*t+e;if(n<0||n>=this.weights.length)throw new Error("get accessor is skewed");return this.weights[n]}},{key:"setWeight",value:function(t,e,n){var r=this.columns*t+e;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.weights[r]=n,this}},{key:"getDelta",value:function(t,e){var n=this.columns*t+e;if(n<0||n>=this.deltas.length)throw new Error("get accessor is skewed");return this.deltas[n]}},{key:"setDelta",value:function(t,e,n){var r=this.columns*t+e;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.deltas[r]=n,this}},{key:"toJSON",value:function(){return{rows:this.rows,columns:this.columns,weights:Array.from(this.weights.slice(0))}}},{key:"deltasToArray",value:function(){return this.toArray("deltas")}},{key:"weightsToArray",value:function(){return this.toArray("weights")}},{key:"toArray",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"weights",n=new Array(this.rows);return this.iterate({row:function(e){n[e]=new Array(t.columns)},column:function(r,i){"weights"===e?n[r][i]=t.getWeight(r,i):"deltas"===e&&(n[r][i]=t.getDelta(r,i))}}),n}},{key:"fromArray",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weights";if(t.length!==this.rows)throw new Error("rows do not match");if(t[0].length!==this.columns)throw new Error("columns do not match");return this.iterate({column:function(r,i){var a=t[r][i];if("number"!==typeof a)throw new Error("value not number");"weights"===n?e.setWeight(r,i,a):"deltas"===n&&e.setDelta(r,i,a)}}),this}},{key:"iterate",value:function(t){for(var e=this.rows,n=this.columns,r=0;r<e;r++){t.row&&t.row(r);for(var i=0;i<n;i++)t.column&&t.column(r,i)}return this}}],[{key:"fromJSON",value:function(e){for(var n=new t(e.rows,e.columns),r=0,i=e.rows*e.columns;r<i;r++)n.weights[r]=e.weights[r];return n}},{key:"fromArray",value:function(e){var n=new t(e.length,e[0].length);return n.fromArray(e),n}}]),t}(),Pr=function(t){c(n,t);var e=h(n);function n(t,r,i){var a;d(this,n),(a=e.call(this,t,r)).std=i;for(var o=0,s=a.weights.length;o<s;o++)a.weights[o]=Pt(-i,i);return a}return m(n)}(Fr),Mr=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,t),this.values=e,this.indexTable={},this.characterTable={},this.characters=[],this.specialIndexes=[],this.isSetup=!1,void 0!==e&&this.setup(e,n)}return m(t,[{key:"setup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.isSetup)throw new Error("DataFormatter is already setup");this.values=t,this.buildCharactersFromIterable(t),this.buildTables(e),t[0].input&&this.addInputOutput(),this.addUnrecognized(),this.isSetup=!0}},{key:"buildCharactersFromIterable",value:function(t){for(var e={},n=0,r=t.length;n<r;n++){var i=t[n];if(i.hasOwnProperty("length"))for(var a=i,o=0,s=a.length;o<s;o++){var u=a[o];e.hasOwnProperty(u)||(e[u]=!0,this.characters.push(u))}else if("number"===typeof i){if(e.hasOwnProperty(i))continue;e[i]=!0,this.characters.push(i)}else if("boolean"===typeof i){var l=i.toString();if(e.hasOwnProperty(l))continue;e[l]=!0,this.characters.push(l)}else if(Array.isArray(i)&&"string"===typeof i[0])for(var c=0;c<i.length;c++){var h=i[c];e.hasOwnProperty(h)||(e[h]=!0,this.characters.push(h))}else if(!Array.isArray(i)||"number"!==typeof i[0]&&"boolean"!==typeof i[0]){if(!i.hasOwnProperty("input")||!i.hasOwnProperty("output"))throw new Error("Unhandled value");var p=i.input,f=i.output;Array.isArray(p)?this.addCharacters(p,e):this.addCharacters(p.toString(),e),Array.isArray(f)?this.addCharacters(f,e):this.addCharacters(f.toString(),e)}else for(var d=0;d<i.length;d++){var m=i[d].toString();e.hasOwnProperty(n)||(e[m]=!0,this.characters.push(m))}}}},{key:"addCharacters",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n].toString();e.hasOwnProperty(r)||(e[r]=!0,this.characters.push(r))}}},{key:"buildTables",value:function(t){for(var e=this.characters.length,n=0;n<e;n++){var r=this.characters[n];n>=t&&(this.indexTable[r]=n,this.characterTable[n]=r)}}},{key:"toIndexes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=this.indexTable;switch(typeof t){case"number":case"boolean":t=t.toString()}for(var i=0,a=t.length;i<a;i++){var o=t[i].toString(),s=r[o];if(void 0===s){if(!r.unrecognized)throw new Error('unrecognized character "'.concat(o,'"'));s=r.unrecognized}s<e||n.push(s)}return n}},{key:"toIndexesInputOutput",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.toIndexesValue(t,n,!0);return"undefined"===typeof e?r:r.concat(this.toIndexesValue(e,n,!1))}},{key:"toIndexesValue",value:function(t,e,n){if("string"===typeof t)t=t.split("");else if("number"===typeof t||"boolean"===typeof t)t=t.toString().split("");else{if(!Array.isArray(t)||"number"!==typeof t[0]&&"boolean"!==typeof t[0]&&"string"!==typeof t[0])throw new Error("unrecognized value");t=t.map((function(t){return t.toString()}))}return n&&(t=t.concat(["stop-input","start-output"])),this.toIndexes(t,e)}},{key:"toCharacters",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=this.indexTable,i=this.characterTable,a=0,o=t.length;a<o;a++){var s=t[a];if(!(s<e)){var u=i[s];if(void 0===u){if(!r.unrecognized)throw new Error('unrecognized index "'.concat(s,'"'));u=i[r.unrecognized]}else null!==u&&n.push(u.toString())}}return n}},{key:"toString",value:function(t,e){return this.toCharacters(t,e).join("")}},{key:"addInputOutput",value:function(){this.addSpecial("stop-input"),this.addSpecial("start-output")}},{key:"addUnrecognized",value:function(){this.addSpecial("unrecognized")}},{key:"toJSON",value:function(){return{indexTable:this.indexTable,characterTable:this.characterTable,values:this.values,characters:this.characters,specialIndexes:this.specialIndexes}}},{key:"addSpecial",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.indexTable[t]=this.characters.length;this.characterTable[n]=e,this.specialIndexes.push(this.characters.length),this.characters.push(t)}},{key:"toFunctionString",value:function(){return"\nvar characterTable = ".concat(JSON.stringify(this.characterTable),";\nvar indexTable = ").concat(JSON.stringify(this.indexTable),";\nvar characters = ").concat(JSON.stringify(this.characters),";\nvar dataFormatter = {\n  toIndexes: function ").concat(this.toIndexes.toString(),",\n  toIndexesInputOutput: function ").concat(this.toIndexesInputOutput.toString(),",\n  toCharacters: function ").concat(this.toCharacters.toString(),",\n  toIndexesValue: function ").concat(this.toIndexesValue.toString(),",\n};")}},{key:"formatDataIn",value:function(t,e){var n;return void 0===t?[]:Array.isArray(t)&&"number"===typeof t[0]?t:(null===(n=this.indexTable)||void 0===n?void 0:n.hasOwnProperty("stop-input"))?this.toIndexesInputOutput(t,e):this.toIndexes(t)}},{key:"formatDataOut",value:function(t,e){return this.toCharacters(e).join("")}},{key:"format",value:function(t){if("number"===typeof t[0]&&!Array.isArray(t[0])&&(!t[0].hasOwnProperty("input")||!t[0].hasOwnProperty("output")))return t;var e=[];if("string"===typeof t[0]||"number"===typeof t[0]||Array.isArray(t[0]))if(this.isSetup)for(var n=0,r=t.length;n<r;n++)e.push(this.formatDataIn(t[n]));else{this.setup(t);for(var i=0;i<t.length;i++)e.push(this.formatDataIn(Rr(t[i])))}else{if(!t[0].input||!t[0].output)throw new Error("unrecognized data");this.isSetup||this.setup(t);for(var a=0,o=t.length;a<o;a++)e.push(this.formatDataIn(Rr(t[a].input),Rr(t[a].output)))}return e}}],[{key:"fromAllPrintable",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"],r=32;r<=126;r++)n.push(String.fromCharCode(r));return new t(n,e)}},{key:"fromAllPrintableInputOutput",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"],r=t.fromAllPrintable(e,n);return r.addInputOutput(),r.addUnrecognized(),r}},{key:"fromStringInputOutput",value:function(e,n){var r=new t(Array.from(new Set(e)).join("").split(""),n);return r.addInputOutput(),r.addUnrecognized(),r.isSetup=!0,r}},{key:"fromArrayInputOutput",value:function(e,n){for(var r=[],i=0;i<e.length;i++){var a=e[i];r.push(Rr(a.input),Rr(a.output))}var o=Array.isArray(r)?r.flat():r,s=new t(Array.from(new Set(o)),n);return s.addInputOutput(),s.addUnrecognized(),s.isSetup=!0,s}},{key:"fromString",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new t(Array.from(new Set(e)).join("").split(""),n)}},{key:"fromJSON",value:function(e){var n=new t;return n.indexTable=e.indexTable,n.characterTable=e.characterTable,n.values=e.values,n.characters=e.characters,n.specialIndexes=e.specialIndexes,n.isSetup=!0,n}}]),t}();function Rr(t){if("string"===typeof t)return t;if("number"===typeof t)return t.toString();if("boolean"===typeof t)return t.toString();if(Array.isArray(t)&&"string"===typeof t[0])return t;if("boolean"===typeof t[0])return t.map((function(t){return t.toString()}));if("number"===typeof t[0])return t.map((function(t){return t.toString()}));throw new Error("unrecognized value, expected string[], string, number[], number, boolean[], or boolean")}function Nr(t,e){t.rows=e.rows,t.columns=e.columns,t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0)}function zr(t,e,n){for(var r=0;r<e.weights.length;r++)t.weights[r]=e.weights[r]+n.weights[r],t.deltas[r]=0}function Vr(t,e,n){for(var r=0;r<t.deltas.length;r++)e.deltas[r]=t.deltas[r],n.deltas[r]=t.deltas[r]}function jr(t){for(var e=0;e<t.weights.length;e++)t.weights[e]=1,t.deltas[e]=0}function Kr(t,e){t.rows=e.rows,t.columns=e.columns,t.weights=e.weights.slice(0),t.deltas=e.deltas.slice(0);for(var n=0;n<e.weights.length;n++)t.weights[n]=-e.weights[n],t.deltas[n]=0}function Ur(t,e,n){for(var r=e.rows,i=e.columns,a=n.columns,o=0;o<r;o++)for(var s=i*o,u=a*o,l=0;l<a;l++){for(var c=0,h=0;h<i;h++){var p=s+h,f=a*h+l;c+=e.weights[p]*n.weights[f],e.deltas[p]=0,n.deltas[f]=0}t.weights[u+l]=c}}function Br(t,e,n){for(var r=e.rows,i=e.columns,a=n.columns,o=0;o<r;o++)for(var s=i*o,u=a*o,l=0;l<a;l++)for(var c=0;c<i;c++){var h=s+c,p=a*c+l,f=t.deltas[u+l];e.deltas[h]+=n.weights[p]*f,n.deltas[p]+=e.weights[h]*f}}function Gr(t,e,n){for(var r=e.weights,i=0;i<r.length;i++)t.weights[i]=e.weights[i]*n.weights[i],t.deltas[i]=0}function Wr(t,e,n){for(var r=0;r<e.weights.length;r++)e.deltas[r]=n.weights[r]*t.deltas[r],n.deltas[r]=e.weights[r]*t.deltas[r]}function Hr(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=Math.max(0,e.weights[n]),t.deltas[n]=0}function Xr(t,e){for(var n=0;n<t.deltas.length;n++)e.deltas[n]=e.weights[n]>0?t.deltas[n]:0}function Yr(t,e,n){for(var r=e.columns,i=r*n,a=0;a<r;a++)t.weights[a]=e.weights[i+a],t.deltas[a]=0}function qr(t,e,n){for(var r=e.columns,i=r*n,a=0;a<r;a++)e.deltas[i+a]=t.deltas[a]}function $r(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=1/(1+Math.exp(-e.weights[n])),t.deltas[n]=0}function Jr(t,e){for(var n=0;n<t.deltas.length;n++){var r=t.weights[n];e.deltas[n]=r*(1-r)*t.deltas[n]}}function Qr(t){for(var e=new Fr(t.rows,t.columns),n=-999999,r=0;r<t.weights.length;r++)t.weights[r]>n&&(n=t.weights[r]);for(var i=0,a=0;a<t.weights.length;a++)e.weights[a]=Math.exp(t.weights[a]-n),i+=e.weights[a];for(var o=0;o<t.weights.length;o++)e.weights[o]/=i;return e}function Zr(t,e){for(var n=0;n<e.weights.length;n++)t.weights[n]=Math.tanh(e.weights[n]),t.deltas[n]=0}function ti(t,e){for(var n=0;n<t.deltas.length;n++){var r=t.weights[n];e.deltas[n]=(1-r*r)*t.deltas[n]}}var ei=function(){function t(){d(this,t),this.states=[],this.inputRow=0}return m(t,[{key:"add",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");var n=new Fr(t.rows,t.columns);return this.states.push({name:"add",product:n,left:t,right:e,forwardFn:zr,backpropagationFn:Vr}),n}},{key:"allOnes",value:function(t,e){var n=new Fr(t,e);return this.states.push({name:"allOnes",product:n,left:n,forwardFn:jr,backpropagationFn:function(){}}),n}},{key:"cloneNegative",value:function(t){var e=new Fr(t.rows,t.columns);return this.states.push({name:"cloneNegative",product:e,left:t,forwardFn:Kr,backpropagationFn:function(){}}),e}},{key:"subtract",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");return this.add(this.add(this.allOnes(t.rows,t.columns),this.cloneNegative(t)),e)}},{key:"multiply",value:function(t,e){if(t.columns!==e.rows)throw new Error("misaligned matrices");var n=new Fr(t.rows,e.columns);return this.states.push({name:"multiply",product:n,left:t,right:e,forwardFn:Ur,backpropagationFn:Br}),n}},{key:"multiplyElement",value:function(t,e){if(t.weights.length!==e.weights.length)throw new Error("misaligned matrices");var n=new Fr(t.rows,t.columns);return this.states.push({name:"multiplyElement",product:n,left:t,right:e,forwardFn:Gr,backpropagationFn:Wr}),n}},{key:"relu",value:function(t){var e=new Fr(t.rows,t.columns);return this.states.push({name:"relu",product:e,left:t,forwardFn:Hr,backpropagationFn:Xr}),e}},{key:"input",value:function(t){var e=this;return this.states.push({name:"input",product:t,forwardFn:function(n){if(e.inputValue){if(e.inputValue.length!==n.weights.length)throw new Error("this.inputValue is of wrong dimensions");n.weights=t.weights=e.inputValue}},backpropagationFn:function(){}}),t}},{key:"inputMatrixToRow",value:function(t){var e=this,n=new Fr(t.columns,1);return this.states.push({name:"inputMatrixToRow",product:n,left:t,get right(){return e.inputRow},forwardFn:Yr,backpropagationFn:qr}),n}},{key:"sigmoid",value:function(t){var e=new Fr(t.rows,t.columns);return this.states.push({name:"sigmoid",product:e,left:t,forwardFn:$r,backpropagationFn:Jr}),e}},{key:"tanh",value:function(t){var e=new Fr(t.rows,t.columns);return this.states.push({name:"tanh",product:e,left:t,forwardFn:Zr,backpropagationFn:ti}),e}},{key:"observe",value:function(t){return this.states.push({name:"observe",product:new Fr,forwardFn:function(){},backpropagationFn:function(){}}),t}},{key:"runIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=t;for(var e=this.states[0],n=0,r=this.states.length;n<r;n++)(e=this.states[n]).hasOwnProperty("forwardFn")&&e.forwardFn(e.product,e.left,e.right);return e.product}},{key:"runInput",value:function(t){this.inputValue=t;for(var e=this.states[0],n=0,r=this.states.length;n<r;n++)(e=this.states[n]).hasOwnProperty("forwardFn")&&e.forwardFn(e.product,e.left,e.right);return e.product}},{key:"backpropagate",value:function(){for(var t=this.states.length,e=this.states[0];t-- >0;)(e=this.states[t]).hasOwnProperty("backpropagationFn")&&e.backpropagationFn(e.product,e.left,e.right);return e.product}},{key:"backpropagateIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=t;for(var e=this.states.length,n=this.states[0];e-- >0;)(n=this.states[e]).hasOwnProperty("backpropagationFn")&&n.backpropagationFn(n.product,n.left,n.right);return n.product}},{key:"predictTarget",value:function(t,e){for(var n=0,r=this.runInput(t),i=0;i<r.weights.length;i++){var a=r.weights[i]-e[i];n+=Math.abs(a),r.deltas[i]=a}return n}},{key:"predictTargetIndex",value:function(t,e){var n=this.runIndex(t),r=n,i=Qr(n);return r.deltas=i.weights.slice(0),r.deltas[e]-=1,-Math.log2(i.weights[e])}}]),t}();function ni(t){for(var e=t.weights,n=e[0],r=0,i=1;i<e.length;i++){var a=e[i];a<n||(r=i,n=a)}return r}function ri(t){for(var e=Pt(0,1),n=t.weights,r=0,i=0;;){if((r+=n[i])>e)return i;i++}}var ii={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.01,callbackPeriod:10,timeout:1/0},ai=function(){return{inputSize:20,inputRange:20,hiddenLayers:[20,20],outputSize:20,decayRate:.999,smoothEps:1e-8,regc:1e-6,clipval:5,maxPredictionLength:100,dataFormatter:new Mr}},oi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),this.options=f({},ai()),this.trainOpts=f({},ii),this.stepCache={},this.runs=0,this.ratioClipped=0,this.model=Object.seal({isInitialized:!1,input:new Fr(0,0),hiddenLayers:[],output:new Fr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new Pr(0,0,.08)}),this.initialLayerInputs=[],this.options=f(f({},this.options),e),this.updateTrainingOptions(f({},ii)),e.json&&this.fromJSON(e.json)}return m(t,[{key:"initialize",value:function(){var t=this.options.dataFormatter;(null===t||void 0===t?void 0:t.characters.length)&&(this.options.inputSize=this.options.inputRange=this.options.outputSize=t.characters.length),this.model=this.mapModel()}},{key:"createHiddenLayers",value:function(){var t=this.options,e=t.hiddenLayers,n=t.inputSize,r=[];r.push(this.getHiddenLayer(e[0],n));for(var i=e[0],a=1;a<e.length;a++){var o=e[a];r.push(this.getHiddenLayer(o,i)),i=o}return r}},{key:"getHiddenLayer",value:function(t,e){return{weight:new Pr(t,e,.08),transition:new Pr(t,t,.08),bias:new Fr(t,1)}}},{key:"getEquation",value:function(t,e,n,r){if(!r.weight||!r.transition||!r.bias)throw new Error("hiddenLayer does not have expected properties");var i=t.relu.bind(t),a=t.add.bind(t),o=t.multiply.bind(t);return i(a(a(o(r.weight,e),o(r.transition,n)),r.bias))}},{key:"createInputMatrix",value:function(){var t=this.options,e=t.inputRange,n=t.inputSize;if(e<1)throw new Error("this.options.inputRange not an expected number");if(n<1)throw new Error("this.options.inputSize not an expected number");return new Pr(e+1,n,.08)}},{key:"createOutputMatrices",value:function(){var t=this.options,e=t.outputSize,n=si(t.hiddenLayers);return{outputConnector:new Pr(e+1,n,.08),output:new Fr(e+1,1)}}},{key:"bindEquation",value:function(){var t=this.model,e=this.options.hiddenLayers,n=new ei,r=[],i=t.equationConnections.length>0?si(t.equationConnections):this.initialLayerInputs,a=this.getEquation(n,n.inputMatrixToRow(t.input),i[0],t.hiddenLayers[0]);r.push(a);for(var o=1,s=e.length;o<s;o++){if(!i[o])throw new Error("Cannot find equation at index ".concat(o));a=this.getEquation(n,a,i[o],t.hiddenLayers[o]),r.push(a)}t.equationConnections.push(r),n.add(n.multiply(t.outputConnector,a),t.output),t.equations.push(n)}},{key:"mapModel",value:function(){var t=[];this.initialLayerInputs=this.options.hiddenLayers.map((function(t){return new Fr(t,1)}));var e=this.createInputMatrix();t.push(e);var n=this.createHiddenLayers();if(!n.length)throw new Error("net.hiddenLayers not set");for(var r=0,i=n.length;r<i;r++){var a=n[r];for(var o in a)a.hasOwnProperty(o)&&t.push(a[o])}var s=this.createOutputMatrices(),u=s.output,l=s.outputConnector;return t.push(l),t.push(u),Object.seal({isInitialized:!0,input:e,hiddenLayers:n,output:u,equations:[],allMatrices:t,equationConnections:[],outputConnector:l})}},{key:"trainInput",value:function(t){this.runs++;for(var e,n=this.model,r=t.length,i=0;n.equations.length<=t.length+1;)this.bindEquation();for(var a=-1,o=t.length;a<o;a++){var s=a+1;e=n.equations[s];var u=-1===a?0:t[a]+1,l=a===r-1?0:t[a+1]+1;i+=e.predictTargetIndex(u,l)}return Math.pow(2,i/(r-1))/100}},{key:"backpropagate",value:function(t){for(var e=t.length,n=this.model.equations;e>0;)n[e].backpropagateIndex(t[e-1]+1),e--;n[0].backpropagateIndex(0)}},{key:"adjustWeights",value:function(){for(var t=this.options,e=t.regc,n=t.clipval,r=t.decayRate,i=t.smoothEps,a=this.trainOpts,o=this.model,s=this.stepCache,u=a.learningRate,l=o.allMatrices,c=0,h=0,p=0;p<l.length;p++){var f=l[p],d=f.weights,m=f.deltas;p in s||(s[p]=H(f.rows*f.columns));for(var v=s[p],y=0;y<d.length;y++){var g=m[y],x=d[y];v[y]=v[y]*r+(1-r)*g*g,g>n?(g=n,c++):g<-n&&(g=-n,c++),h++,d[y]=x+-u*g/Math.sqrt(v[y]+i)-e*x}}this.ratioClipped=c/h}},{key:"isRunnable",get:function(){return!this.model||0!==this.model.equations.length||(console.error("No equations bound, did you run train()?"),!1)}},{key:"checkRunnable",value:function(){if(!this.isRunnable)throw new Error("Network not runnable")}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.options.maxPredictionLength+(null!==t?t.length:0)+(this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0);this.checkRunnable();for(var i=this.options.dataFormatter&&t.length>0?this.options.dataFormatter.formatDataIn(t):t,a=this.model,o=[],s=0;;){for(var u=0===s?0:s<i.length?i[s-1]+1:o[s-1];a.equations.length<=s;)this.bindEquation();var l=a.equations[s].runIndex(u),c=new Fr(a.output.rows,a.output.columns);if(Nr(c,l),1!==n&&e)for(var h=0,p=c.weights.length;h<p;h++)c.weights[h]/=n;var f=Qr(c),d=e?ri(f):ni(f);if(s++,0===d)break;if(s>=r)break;o.push(d)}return this.options.dataFormatter.formatDataOut(i,o.slice(i.length).map((function(t){return t-1})))}},{key:"verifyIsInitialized",value:function(){this.model.isInitialized||this.initialize()}},{key:"updateTrainingOptions",value:function(t){var e;this.trainOpts=f(f({},ii),t),this.validateTrainingOptions(this.trainOpts),this.setLogMethod(null!==(e=t.log)&&void 0!==e?e:this.trainOpts.log)}},{key:"validateTrainingOptions",value:function(t){var e={iterations:function(){var e=t.iterations;return"number"===typeof e&&e>0},errorThresh:function(){var e=t.errorThresh;return"number"===typeof e&&e>0&&e<1},log:function(){var e=t.log;return"function"===typeof e||"boolean"===typeof e},logPeriod:function(){var e=t.logPeriod;return"number"===typeof e&&e>0},learningRate:function(){var e=t.learningRate;return"number"===typeof e&&e>0&&e<1},callback:function(){var e=t.callback;return"function"===typeof e||void 0===e},callbackPeriod:function(){var e=t.callbackPeriod;return"number"===typeof e&&e>0},timeout:function(){var e=t.timeout;return"number"===typeof e&&e>0}};for(var n in e){var r=t;if(!e[n]())throw new Error("[".concat(n,", ").concat(r[n],"] is out of normal training range, your network will probably not train."))}}},{key:"setLogMethod",value:function(t){this.trainOpts.log="function"===typeof t?t:!!t&&console.log}},{key:"prepTraining",value:function(t,e){var n;this.updateTrainingOptions(e);var r=this.options.dataFormatter.format(t),i=Date.now()+(null!==(n=this.trainOpts.timeout)&&void 0!==n?n:0),a={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:r,status:a,endTime:i}}},{key:"train",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=n=f(f({},ii),n);var r,i,a=this.trainOpts,o=a.iterations,s=a.errorThresh,u=a.logPeriod,l=a.callback,c=a.callbackPeriod,h=!0===n.log?console.log:n.log,p=1/0;if(null===(e=this.options)||void 0===e?void 0:e.dataFormatter)i=this.options.dataFormatter.format(t);else{if(!Array.isArray(t)||!Array.isArray(t[0])||"number"!==typeof t[0][0])throw new Error("training not in expected format of number[][]");i=t}for(this.verifyIsInitialized(),r=0;r<o&&p>s;r++){for(var d=0,m=0;m<i.length;m++)d+=this.trainPattern(i[m],!0);if(p=d/t.length,isNaN(p))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");h&&r%u===0&&h("iterations: ".concat(r,", training error: ").concat(p)),l&&r%c===0&&l({error:p,iterations:r})}return{error:p,iterations:r}}},{key:"addFormat",value:function(t){}},{key:"formatData",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.options.dataFormatter.formatDataIn(t[n]));return e}},{key:"toJSON",value:function(){this.model.isInitialized||this.initialize();var t=this.model,e=this.options;return{type:this.constructor.name,options:f(f({},e),{},{dataFormatter:e.dataFormatter.toJSON()}),trainOpts:f(f({},this.trainOpts),{},{timeout:this.trainOpts.timeout===1/0?"Infinity":this.trainOpts.timeout}),input:t.input.toJSON(),hiddenLayers:t.hiddenLayers.map((function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n].toJSON());return e})),outputConnector:this.model.outputConnector.toJSON(),output:this.model.output.toJSON()}}},{key:"fromJSON",value:function(t){var e=t.options,n=[],r=Fr.fromJSON(t.input);n.push(r);var i=[];t.hiddenLayers.forEach((function(t){var e={};for(var r in t)e[r]=Fr.fromJSON(t[r]),n.push(e[r]);i.push(e)}));var a=Fr.fromJSON(t.outputConnector);n.push(a);var o=Fr.fromJSON(t.output);return n.push(o),e.dataFormatter?this.options=f(f(f({},ai()),e),{},{dataFormatter:Mr.fromJSON(e.dataFormatter)}):this.options=f(f(f({},ai()),e),{},{dataFormatter:new Mr}),this.model=Object.seal({isInitialized:!0,input:r,hiddenLayers:i,output:o,allMatrices:n,outputConnector:a,equations:[],equationConnections:[]}),this.initialLayerInputs=this.options.hiddenLayers.map((function(t){return new Fr(t,1)})),this.bindEquation(),this}},{key:"toFunction",value:function(t){var e=this.model,n=this.model.equations,r=n[1].states,i=JSON.stringify(this.toJSON());function a(t){for(var r=e.equationConnections[0],i=n[0].states,a=0,o=i.length;a<o;a++)if(i[a].product===t)return a;return r.indexOf(t)}function o(t,e){for(var n=0,i=r.length;n<i;n++){var o=r[n];if(n===e){var s=a(t);return s>-1&&(t===o.left||t===o.right)?"typeof prevStates[".concat(s,"] === 'object' ? prevStates[").concat(s,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")"):"new Matrix(".concat(t.rows,", ").concat(t.columns,")")}if(t===o.product)return"states[".concat(n,"].product");if(t===o.right)return"states[".concat(n,"].right");if(t===o.left)return"states[".concat(n,"].left")}return""}function s(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.input)return"json.input";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(var r=0,i=e.hiddenLayers.length;r<i;r++){var a=e.hiddenLayers[r];for(var s in a)if(a.hasOwnProperty(s)&&a[s]===t)return"json.hiddenLayers[".concat(r,"].").concat(s)}return o(t,n)}function u(t){var e=t.toString().split("{");e.shift();var n=e.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function l(t){return"src/recurrent/matrix/".concat(t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),".js")}for(var c=[],h={},p=[],f=0,d=r.length;f<d;f++){var m=r[f];c.push("states[".concat(f,"] = {\n      name: '").concat(m.forwardFn.name,"',\n      left: ").concat(m.left?s(m.left,f):"undefined",",\n      right: ").concat(m.right?s(m.right,f):"undefined",",\n      product: ").concat(s(m.product,f),"\n    }"));var v=m.forwardFn.name;h[v]||(h[v]=!0,p.push("        case '".concat(v,"': //compiled from ").concat(l(v),"\n          ").concat(u(m.forwardFn.toString()),"\n          break;")))}var y="\n  if (typeof rawInput === 'undefined') rawInput = [];\n  if (typeof isSampleI === 'undefined') isSampleI = false;\n  if (typeof temperature === 'undefined') temperature = 1;\n  var json = ".concat(i,";\n  ").concat(this.options.dataFormatter?"".concat(this.options.dataFormatter.toFunctionString(),";\n  Object.assign(dataFormatter, json.options.dataFormatter);"):"","\n  ").concat(this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?"const formatDataIn = function (input, output) { ".concat(u(this.options.dataFormatter.formatDataIn.toString())," }.bind(dataFormatter);"):"","\n  ").concat(null!==this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?"const formatDataOut = function formatDataOut(input, output) { ".concat(u(this.options.dataFormatter.formatDataOut.toString())," }.bind(dataFormatter);"):"","\n  var maxPredictionLength =\n    ").concat(this.options.maxPredictionLength," +\n    rawInput.length +\n    ").concat(this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0,";\n  var input = ").concat(this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?"formatDataIn(rawInput)":"rawInput",";\n  var _i = 0;\n  var output = [];\n  var states = [];\n  var prevStates;\n  while (true) {\n    var previousIndex = (_i === 0\n        ? 0\n        : _i < input.length\n          ? input[_i - 1] + 1\n          : output[_i - 1])\n          ;\n    var rowPluckIndex = previousIndex;\n    prevStates = states;\n    states = [];\n    ").concat(c.join(";\n    "),";\n    for (var stateIndex = 0, stateMax = ").concat(c.length,"; stateIndex < stateMax; stateIndex++) {\n      var state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n      switch (state.name) {\n").concat(p.join("\n"),"\n      }\n    }\n\n    var logProbabilities = state.product;\n    if (temperature !== 1 && isSampleI) {\n      for (var q = 0, nq = logProbabilities.weights.length; q < nq; q++) {\n        logProbabilities.weights[q] /= temperature;\n      }\n    }\n\n    var probs = softmax(logProbabilities);\n    var nextIndex = isSampleI ? sampleI(probs) : maxI(probs);\n\n    _i++;\n    if (nextIndex === 0) {\n      break;\n    }\n    if (_i >= maxPredictionLength) {\n      break;\n    }\n\n    output.push(nextIndex);\n  }\n  ").concat(this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?"return formatDataOut(input, output.slice(input.length).map(function(value) { return value - 1; }))":"return output.slice(input.length).map(function(value) { return value - 1; })",";\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = zeros(rows * columns);\n  }\n  ").concat(H.toString(),"\n  ").concat(Qr.toString().replace("_1.Matrix","Matrix"),"\n  ").concat(Pt.toString(),"\n  ").concat(ri.toString(),"\n  ").concat(ni.toString());return new Function("rawInput","isSampleI","temperature",t?t(y):y)}},{key:"trainPattern",value:function(t,e){var n=this.trainInput(t);return this.backpropagate(t),this.adjustWeights(),e?n:0}}]),t}();function si(t){return t[t.length-1]}var ui=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return li(t,e)}},{key:"getEquation",value:function(t,e,n,r){return ci(t,e,n,r)}}]),n}(oi);function li(t,e){return{updateGateInputMatrix:new Pr(t,e,.08),updateGateHiddenMatrix:new Pr(t,t,.08),updateGateBias:new Fr(t,1),resetGateInputMatrix:new Pr(t,e,.08),resetGateHiddenMatrix:new Pr(t,t,.08),resetGateBias:new Fr(t,1),cellWriteInputMatrix:new Pr(t,e,.08),cellWriteHiddenMatrix:new Pr(t,t,.08),cellWriteBias:new Fr(t,1)}}function ci(t,e,n,r){if(!r.updateGateInputMatrix||!r.updateGateHiddenMatrix||!r.updateGateBias||!r.resetGateInputMatrix||!r.resetGateHiddenMatrix||!r.resetGateBias||!r.cellWriteInputMatrix||!r.cellWriteHiddenMatrix||!r.cellWriteBias)throw new Error("hiddenLayer does not have expected properties");var i=t.sigmoid.bind(t),a=t.add.bind(t),o=t.multiply.bind(t),s=t.multiplyElement.bind(t),u=t.tanh.bind(t),l=t.allOnes.bind(t),c=t.cloneNegative.bind(t),h=i(a(a(o(r.updateGateInputMatrix,e),o(r.updateGateHiddenMatrix,n)),r.updateGateBias)),p=i(a(a(o(r.resetGateInputMatrix,e),o(r.resetGateHiddenMatrix,n)),r.resetGateBias)),f=u(a(a(o(r.cellWriteInputMatrix,e),o(r.cellWriteHiddenMatrix,s(p,n))),r.cellWriteBias));return a(s(a(l(h.rows,h.columns),c(h)),f),s(n,h))}var hi=m((function t(e,n){d(this,t),this.prop=n,this.length=0,this.table={};for(var r=0;r<e.length;r++)for(var i=e[r][n],a=0;a<i.length;a++){var o=i[a];for(var s in o)o.hasOwnProperty(s)&&(this.table.hasOwnProperty(s)||(this.table[s]=this.length++))}})),pi=function(){return f(f({},ai()),{},{inputSize:1,hiddenLayers:[20],outputSize:1,inputRange:0})},fi=function(t){c(n,t);var e=h(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(this,n),(t=e.call(this)).inputLookupLength=0,t.inputLookup=null,t.outputLookup=null,t.outputLookupLength=0,t.model=Object.seal({isInitialized:!1,hiddenLayers:[],output:new Fr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new Pr(0,0,.08)}),t.options=pi(),t.options=f(f({},t.options),r),t.updateTrainingOptions(f(f({},di),r)),r.json&&t.fromJSON(r.json),t}return m(n,[{key:"createInputMatrix",value:function(){throw new Error("Input Matrices do not exist on RNNTimeStep")}},{key:"createOutputMatrices",value:function(){var t=this.options.outputSize,e=si(this.options.hiddenLayers),n=new Pr(t,e,.08);return{output:new Pr(t,1,.08),outputConnector:n}}},{key:"bindEquation",value:function(){var t=this.model,e=this.options,n=e.hiddenLayers,r=e.inputSize,i=t.hiddenLayers,a=new ei,o=[],s=t.equationConnections.length>0?t.equationConnections[t.equationConnections.length-1]:this.initialLayerInputs,u=this.getEquation(a,a.input(new Fr(r,1)),s[0],i[0]);o.push(u);for(var l=1,c=n.length;l<c;l++)u=this.getEquation(a,u,s[l],i[l]),o.push(u);t.equationConnections.push(o),a.add(a.multiply(t.outputConnector,u),t.output),t.equations.push(a)}},{key:"initialize",value:function(){this.model=this.mapModel()}},{key:"mapModel",value:function(){var t=[];this.initialLayerInputs=this.options.hiddenLayers.map((function(t){return new Fr(t,1)}));for(var e=this.createHiddenLayers(),n=0,r=e.length;n<r;n++){var i=e[n];for(var a in i)i.hasOwnProperty(a)&&t.push(i[a])}var o=this.createOutputMatrices(),s=o.outputConnector,u=o.output;return t.push(s),t.push(u),Object.seal({isInitialized:!0,hiddenLayers:e,output:u,equations:[],allMatrices:t,equationConnections:[],outputConnector:s})}},{key:"backpropagate",value:function(){for(var t=this.model.equations.length-1;t>-1;t--)this.model.equations[t].backpropagate()}},{key:"run",value:function(t){var e=st.dataShape(t).join(",");switch(e){case"array,number":return this.runArray(t);case"array,array,number":return this.runArrayOfArray(t);case"object,number":return this.runObject(t);case"array,object,number":return this.runArrayOfObject(t);default:throw new Error("Unrecognized data shape ".concat(e))}}},{key:"forecast",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=st.dataShape(t).join(",");switch(n){case"array,number":return this.forecastArray(t,e);case"array,array,number":return this.forecastArrayOfArray(t,e);case"object,number":return this.runObject(t);case"array,object,number":return this.forecastArrayOfObject(t,e);default:throw new Error("Unrecognized data shape ".concat(n))}}},{key:"forecastArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();for(var n,r=this.model.equations,i=t.length+e;r.length<=i;)this.bindEquation();var a=0;if(1===this.options.inputSize)for(var o=0;o<t.length;o++)n=r[a++].runInput(Float32Array.from([t[o]]));else for(var s=0;s<t.length;s++)n=r[a++].runInput(Float32Array.from([]));if(!n)throw new Error("lastOutput not set");for(var u=[n.weights[0]],l=0,c=e-1;l<c;l++)n=r[a++].runInput(n.weights),u.push(n.weights[0]);return this.end(),Float32Array.from(u)}},{key:"forecastArrayOfArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();for(var n,r=this.model.equations,i=t.length+e;r.length<=i;)this.bindEquation();for(var a=0,o=0;o<t.length;o++)n=r[a++].runInput(t[o]);if(!n)throw new Error("lastOutput not set");for(var s=[Float32Array.from(n.weights)],u=0,l=e-1;u<l;u++)n=r[a++].runInput(n.weights),s.push(Float32Array.from(n.weights.slice(0)));return this.end(),s}},{key:"forecastArrayOfObject",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");var r=t.map((function(t){return st.toArray(e.inputLookup,t,e.inputLookupLength)}));return this.forecastArrayOfArray(r,n).map((function(t){return st.toObject(e.outputLookup,t)}))}},{key:"train",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=e=f(f({},ii),e),1===this.options.inputSize&&1===this.options.outputSize&&this.setSize(t),this.verifySize();var n,r=this.formatData(t),i=1/0;this.verifyIsInitialized();var a=this.trainOpts,o=a.iterations,s=a.errorThresh,u=a.logPeriod,l=a.callback,c=a.callbackPeriod,h=!0===e.log?console.log:e.log;for(n=0;n<o&&i>s;n++){for(var p=0,d=0;d<r.length;d++)p+=this.trainPattern(r[d],!0);if(i=p/r.length,isNaN(i))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");h&&n%u===0&&h("iterations: ".concat(n,", training error: ").concat(i)),l&&n%c===0&&l({error:i,iterations:n})}return{error:i,iterations:n}}},{key:"trainArrayOfArray",value:function(t){if(t.length<2)throw new Error("input must be an array of 2 or more");for(var e=this.model.equations;e.length<t.length;)this.bindEquation();for(var n=0,r=0,i=t.length-1;r<i;r++)n+=e[r].predictTarget(t[r],t[r+1]);return this.end(),n/t.length}},{key:"trainPattern",value:function(t,e){var n=this.trainArrayOfArray(t);return this.backpropagate(),this.adjustWeights(),e?n:0}},{key:"setSize",value:function(t){var e=0;switch(st.dataShape(t).join(",")){case"array,array,number":case"array,object,number":case"array,datum,array,number":case"array,datum,object,number":e=1;break;case"array,array,array,number":e=t[0][0].length;break;case"array,array,object,number":e=Object.keys(st.toTable2D(t)).length;break;case"array,datum,array,array,number":e=t[0].input[0].length;break;case"array,datum,array,object,number":e=Object.keys(st.toInputTable2D(t)).length;break;default:throw new Error("unknown data shape or configuration")}this.options=Object.seal(f(f({},this.options),{},{inputSize:e,outputSize:e}))}},{key:"verifySize",value:function(){if((this.options.inputSize||this.options.outputSize)&&this.options.inputSize!==this.options.outputSize)throw new Error("manually set inputSize and outputSize mismatch")}},{key:"runArray",value:function(t){this.checkRunnable();for(var e,n=this.model.equations;n.length<=t.length;)this.bindEquation();for(var r=0;r<t.length;r++)e=n[r].runInput(new Float32Array([t[r]]));return this.end(),e.weights[0]}},{key:"runArrayOfArray",value:function(t){this.checkRunnable();for(var e,n=this.model.equations;n.length<=t.length;)this.bindEquation();for(var r=0;r<t.length;r++)e=n[r].runInput(t[r]).weights;return this.end(),null!==e&&void 0!==e?e:Float32Array.from([])}},{key:"runObject",value:function(t){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set");if(this.inputLookup===this.outputLookup){var e=st.toArrayShort(this.inputLookup,t);return st.toObjectPartial(this.outputLookup,this.forecastArray(e,this.outputLookupLength-e.length),e.length)}return st.toObject(this.outputLookup,this.forecastArray(st.toArray(this.inputLookup,t,this.inputLookupLength),this.outputLookupLength))}},{key:"runArrayOfObject",value:function(t){var e=this;if(null===this.inputLookup)throw new Error("this.inputLookup not set");if(null===this.outputLookup)throw new Error("this.outputLookup not set");var n=t.map((function(t){return st.toArray(e.inputLookup,t,e.inputLookupLength)}));return this.forecastArrayOfArray(n,1).map((function(t){return st.toObject(e.outputLookup,t)}))[0]}},{key:"runArrayOfObjectOfArray",value:function(t){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");return st.toObject(this.outputLookup,this.runArrayOfArray(st.toArrays(this.inputLookup,t,this.inputLookupLength)))}},{key:"end",value:function(){this.model.equations[this.model.equations.length-1].runInput(new Float32Array(this.options.outputSize))}},{key:"requireInputOutputOfOne",value:function(){if(1!==this.options.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.options.outputSize)throw new Error("outputSize must be 1 for this data size")}},{key:"formatArray",value:function(t){var e=[];this.requireInputOutputOfOne();for(var n=0;n<t.length;n++)e.push(Float32Array.from([t[n]]));return[e]}},{key:"formatArrayOfArray",value:function(t){var e=[],n=this.options,r=n.inputSize,i=n.outputSize;if(1===r&&1===i){for(var a=0;a<t.length;a++)e.push(rr(t[a]));return e}if(r!==t[0].length)throw new Error("inputSize must match data input size");if(i!==t[0].length)throw new Error("outputSize must match data output size");for(var o=0;o<t.length;o++)e.push(Float32Array.from(t[o]));return[e]}},{key:"formatArrayOfObject",value:function(t){if(this.requireInputOutputOfOne(),!this.inputLookup){var e=new qn(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}for(var n=[],r=0;r<t.length;r++)n.push(sr(t[r]));return n}},{key:"formatArrayOfObjectMulti",value:function(t){if(!this.inputLookup){var e=new qn(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}for(var n=[],r=0;r<t.length;r++)n.push([lr(t[r],this.inputLookup,this.inputLookupLength)]);return n}},{key:"formatArrayOfDatumOfArray",value:function(t){var e=[];this.requireInputOutputOfOne();for(var n=0;n<t.length;n++){var r=t[n];e.push(ir(r.input,r.output))}return e}},{key:"formatArrayOfDatumOfObject",value:function(t){if(this.requireInputOutputOfOne(),!this.inputLookup){var e=new qn(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!this.outputLookup){var n=new qn(t,"output");this.outputLookup=n.table,this.outputLookupLength=n.length}for(var r=[],i=0;i<t.length;i++){var a=t[i];r.push(ur(a.input,a.output))}return r}},{key:"formatArrayOfArrayOfArray",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(er(t[n]));return e}},{key:"formatArrayOfArrayOfObject",value:function(t){if(!this.inputLookup){var e=new qn(t);this.inputLookup=this.outputLookup=e.table,this.inputLookupLength=this.outputLookupLength=e.length}for(var n=[],r=0;r<t.length;r++){for(var i=[],a=0;a<t[r].length;a++)i.push(lr(t[r][a],this.inputLookup,this.inputLookupLength));n.push(i)}return n}},{key:"formatArrayOfDatumOfArrayOfArray",value:function(t){var e=[],n=this.options,r=n.inputSize,i=n.outputSize;if(r!==t[0].input[0].length)throw new Error("inputSize must match data input size");if(i!==t[0].output[0].length)throw new Error("outputSize must match data output size");for(var a=0;a<t.length;a++){var o=t[a];e.push(nr(o.input,o.output))}return e}},{key:"formatArrayOfDatumOfArrayOfObject",value:function(t){if(!this.inputLookup){var e=new hi(t,"input");this.inputLookup=e.table,this.inputLookupLength=e.length}if(!this.outputLookup){var n=new hi(t,"output");this.outputLookup=n.table,this.outputLookupLength=n.length}if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set to usable number");for(var r=[],i=0;i<t.length;i++){var a=t[i];r.push(or(a.input,a.output,this.inputLookup,this.outputLookup,this.inputLookupLength,this.outputLookupLength))}return r}},{key:"formatData",value:function(t){switch(st.dataShape(t).join(",")){case"array,number":return this.formatArray(t);case"array,array,number":return this.formatArrayOfArray(t);case"array,object,number":return 1===this.options.inputSize?this.formatArrayOfObject(t):this.formatArrayOfObjectMulti(t);case"array,datum,array,number":return this.formatArrayOfDatumOfArray(t);case"array,datum,object,number":return this.formatArrayOfDatumOfObject(t);case"array,array,array,number":return this.formatArrayOfArrayOfArray(t);case"array,array,object,number":return this.formatArrayOfArrayOfObject(t);case"array,datum,array,array,number":return this.formatArrayOfDatumOfArrayOfArray(t);case"array,datum,array,object,number":return this.formatArrayOfDatumOfArrayOfObject(t);default:throw new Error("unknown data shape or configuration")}}},{key:"test",value:function(t){for(var e=[],n=0,r=this.formatData(t),i=0;i<r.length;i++){for(var a=r[i],o=this.run(a.splice(0,a.length-1)),s=a[a.length-1],u=0,l=0,c=0;c<o.length;c++){l++;var h=s[c]-o[c];u+=h*h}if(n+=u/l,Math.abs(u)>this.trainOpts.errorThresh){var p=t[i];e.push({value:p,actual:o})}}return{error:n/r.length,misclasses:e,total:r.length}}},{key:"addFormat",value:function(t){var e,n,r,i,a,o;switch(st.dataShape(t).join(",")){case"array,array,number":case"datum,array,array,number":case"array,number":case"datum,array,number":return;case"datum,object,number":this.inputLookup=st.addKeys(t.input,null!==(e=this.inputLookup)&&void 0!==e?e:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length),this.outputLookup=st.addKeys(t.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;case"object,number":this.inputLookup=this.outputLookup=st.addKeys(t,null!==(r=this.inputLookup)&&void 0!==r?r:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"array,object,number":for(var s=t,u=0;u<s.length;u++)this.inputLookup=this.outputLookup=st.addKeys(s[u],null!==(i=this.inputLookup)&&void 0!==i?i:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"datum,array,object,number":for(var l=t,c=l.input,h=0;h<c.length;h++)this.inputLookup=st.addKeys(c[h],null!==(a=this.inputLookup)&&void 0!==a?a:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length);for(var p=l.output,f=0;f<p.length;f++)this.outputLookup=st.addKeys(p[f],null!==(o=this.outputLookup)&&void 0!==o?o:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;default:throw new Error("unknown data shape or configuration")}}},{key:"toJSON",value:function(){this.model||this.initialize();var t=this.model,e=f(f({},this.options),ai);return{type:this.constructor.name,options:e,hiddenLayers:t.hiddenLayers.map((function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n].toJSON());return e})),outputConnector:t.outputConnector.toJSON(),output:t.output.toJSON(),inputLookup:this.inputLookup,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup,outputLookupLength:this.outputLookupLength}}},{key:"fromJSON",value:function(t){var e=t.options,n=[],r=[];t.hiddenLayers.forEach((function(t){var e={};for(var i in t)e[i]=Fr.fromJSON(t[i]),n.push(e[i]);r.push(e)}));var i=Fr.fromJSON(t.outputConnector);n.push(i);var a=Fr.fromJSON(t.output);return n.push(a),this.options=f(f({},pi()),e),this.inputLookup=t.inputLookup,this.inputLookupLength=t.inputLookupLength,this.outputLookup=t.outputLookup,this.outputLookupLength=t.outputLookupLength,this.model=Object.seal({isInitialized:!0,hiddenLayers:r,output:a,allMatrices:n,outputConnector:i,equations:[],equationConnections:[]}),this.initialLayerInputs=e.hiddenLayers.map((function(t){return new Fr(t,1)})),this.bindEquation(),this}},{key:"toFunction",value:function(t){var e=this.model,n=this.inputLookup,r=this.inputLookupLength,i=this.outputLookup,a=this.outputLookupLength,o=this.options.inputSize,s=e.equations,u=s[1].states,l=JSON.stringify(this.toJSON());function c(t){for(var n=e.equationConnections[0],r=s[0].states,i=0,a=r.length;i<a;i++)if(r[i].product===t)return i;return n.indexOf(t)}function h(t,e){for(var n=0,r=u.length;n<r;n++){var i=u[n];if(n===e){var a=c(t);switch(t){case i.left:if(a>-1)return"typeof prevStates[".concat(a,"] === 'object' ? prevStates[").concat(a,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")");case i.right:if(a>-1)return"typeof prevStates[".concat(a,"] === 'object' ? prevStates[").concat(a,"].product : new Matrix(").concat(t.rows,", ").concat(t.columns,")");case i.product:return"new Matrix(".concat(t.rows,", ").concat(t.columns,")");default:throw Error("unknown state")}}if(t===i.product)return"states[".concat(n,"].product");if(t===i.right)return"states[".concat(n,"].right");if(t===i.left)return"states[".concat(n,"].left")}return""}function p(t,n){if(!t||!t.rows||!t.columns)return"null";if(t===e.outputConnector)return"json.outputConnector";if(t===e.output)return"json.output";for(var r=0,i=e.hiddenLayers.length;r<i;r++){var a=e.hiddenLayers[r];for(var o in a)if(a.hasOwnProperty(o)&&a[o]===t)return"json.hiddenLayers[".concat(r,"].").concat(o)}return h(t,n)}function f(){return n?1===o?n===i?"function lookupInput(input) {\n            var table = ".concat(JSON.stringify(n),";\n            var result = [];\n            for (var p in table) {\n              if (!input.hasOwnProperty(p)) break;\n              result.push(Float32Array.from([input[p]]));\n            }\n            return result;\n          }"):"function lookupInput(input) {\n          var table = ".concat(JSON.stringify(n),";\n          var result = [];\n          for (var p in table) {\n            result.push(Float32Array.from([input[p]]));\n          }\n          return result;\n        }"):"function lookupInput(rawInputs) {\n        var table = ".concat(JSON.stringify(n),";\n        var result = [];\n        for (var i = 0; i < rawInputs.length; i++) {\n          var rawInput = rawInputs[i];\n          var input = new Float32Array(").concat(r,");\n          for (var p in table) {\n            input[table[p]] = rawInput.hasOwnProperty(p) ? rawInput[p] : 0;\n          }\n          result.push(input);\n        }\n        return result;\n      }"):""}function d(){return i?1===o?n===i?"function lookupOutputPartial(output, input) {\n            var table = ".concat(JSON.stringify(i),";\n            var offset = input.length;\n            var result = {};\n            var i = 0;\n            for (var p in table) {\n              if (i++ < offset) continue;\n              result[p] = output[table[p] - offset][0];\n            }\n            return result;\n          }"):"function lookupOutput(output) {\n          var table = ".concat(JSON.stringify(i),";\n          var result = {};\n          for (var p in table) {\n            result[p] = output[table[p]][0];\n          }\n          return result;\n        }"):"function lookupOutput(output) {\n        var table = ".concat(JSON.stringify(i),";\n        var result = {};\n        for (var p in table) {\n          result[p] = output[table[p]];\n        }\n        return result;\n      }"):""}function m(t){var e=t.toString().split("{");e.shift();var n=e.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function v(t){return"src/recurrent/matrix/".concat(t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),".js")}for(var y=[],g={},x=[],b=0,w=u.length;b<w;b++){var k=u[b];y.push("states[".concat(b,"] = {\n      name: '").concat(k.forwardFn.name,"',\n      left: ").concat(k.left?p(k.left,b):"undefined",",\n      right: ").concat(k.right?p(k.right,b):"undefined",",\n      product: ").concat(p(k.product,b),"\n    }"));var S=k.forwardFn.name;g[S]||(g[S]=!0,"input"===k.name?(x.push("case '".concat(S,"':")),x.push(n&&1===o?"product.weights = _i < input.length ? input[_i]: prevStates[prevStates.length - 1].product.weights;":1===o?"product.weights = [input[_i]];":"product.weights = input[_i];"),x.push("break;")):x.push("        case '".concat(S,"':").concat("forwardFn"!==S?" //compiled from ".concat(v(S)):"","\n          ").concat(m(k.forwardFn.toString()),"\n          break;")))}var T=1===o&&this.outputLookup,A="\n  var input = ".concat(this.inputLookup?"lookupInput(rawInput)":"rawInput",";\n  var json = ").concat(l,";\n  var output = [];\n  var states = [];\n  var prevStates;\n  var state;\n  var max = ").concat(T?n===i?r:"input.length + ".concat(a-1):"input.length",";\n  for (var _i = 0; _i < max; _i++) {\n    prevStates = states;\n    states = [];\n    ").concat(y.join(";\n    "),";\n    for (var stateIndex = 0, stateMax = ").concat(y.length,"; stateIndex < stateMax; stateIndex++) {\n      state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n\n      switch (state.name) {\n").concat(x.join("\n"),"\n      }\n    }\n    ").concat(1===o&&n?"if (_i >= input.length - 1) { output.push(state.product.weights); }":"output = state.product.weights;","\n  }\n  ").concat(i?i===n?"return lookupOutputPartial(output, input)":"return lookupOutput(output)":1===o?"return output[0]":"return output",";\n  ").concat(f(),"\n  ").concat(d(),"\n\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = new Float32Array(rows * columns);\n  }\n  ").concat(Qr.toString().replace("_2.default","Matrix"),"\n  ").concat(Pt.toString(),"\n  ").concat(ri.toString(),"\n  ").concat(ni.toString());return new Function("rawInput",t?t(A):A)}}]),n}(oi),di=f({},ii),mi=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return li(t,e)}},{key:"getEquation",value:function(t,e,n,r){return ci(t,e,n,r)}}]),n}(fi),vi=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return yi(t,e)}},{key:"getEquation",value:function(t,e,n,r){return gi(t,e,n,r)}}]),n}(oi);function yi(t,e){return{inputMatrix:new Pr(t,e,.08),inputHidden:new Pr(t,t,.08),inputBias:new Fr(t,1),forgetMatrix:new Pr(t,e,.08),forgetHidden:new Pr(t,t,.08),forgetBias:new Fr(t,1),outputMatrix:new Pr(t,e,.08),outputHidden:new Pr(t,t,.08),outputBias:new Fr(t,1),cellActivationMatrix:new Pr(t,e,.08),cellActivationHidden:new Pr(t,t,.08),cellActivationBias:new Fr(t,1)}}function gi(t,e,n,r){if(!r.inputMatrix||!r.inputHidden||!r.inputBias||!r.forgetMatrix||!r.forgetHidden||!r.forgetBias||!r.outputMatrix||!r.outputHidden||!r.outputBias||!r.cellActivationMatrix||!r.cellActivationHidden||!r.cellActivationBias)throw new Error("hiddenLayer does not have expected properties");var i=t.sigmoid.bind(t),a=t.add.bind(t),o=t.multiply.bind(t),s=t.multiplyElement.bind(t),u=t.tanh.bind(t),l=i(a(a(o(r.inputMatrix,e),o(r.inputHidden,n)),r.inputBias)),c=i(a(a(o(r.forgetMatrix,e),o(r.forgetHidden,n)),r.forgetBias)),h=i(a(a(o(r.outputMatrix,e),o(r.outputHidden,n)),r.outputBias)),p=u(a(a(o(r.cellActivationMatrix,e),o(r.cellActivationHidden,n)),r.cellActivationBias)),f=s(c,n),d=s(l,p);return s(h,u(a(f,d)))}var xi=function(t){c(n,t);var e=h(n);function n(){return d(this,n),e.apply(this,arguments)}return m(n,[{key:"getHiddenLayer",value:function(t,e){return yi(t,e)}},{key:"getEquation",value:function(t,e,n,r){return gi(t,e,n,r)}}]),n}(fi);function bi(t,e){for(var n=[];t<e;t++)n.push(t);return n}function wi(t){return Array.isArray(t)?Float32Array.from(t):Float32Array.from(Object.values(t))}function ki(t){var e=t.pixelX,n=t.pixelY,r=t.radius,i=t.inputs,a=t.row,o=t.line,s=t.fontSize,u=t.fontClassName,l='<rect\n              x="'.concat(e/2-r,'"\n              y="').concat(n/2+a*n-r,'"\n              width="').concat(2*r,'"\n              height="').concat(2*r,'"\n              stroke="black"\n              stroke-width="1"\n              fill="').concat(i.color,'"\n              class="').concat(i.className,'" />\n            <line\n              x1="').concat(e/4,'"\n              y1="').concat(n/2+a*n,'"\n              x2="').concat(e/2-r,'"\n              y2="').concat(n/2+a*n,'"\n              style="stroke:').concat(o.color,";stroke-width:").concat(o.width,'"\n              class="').concat(o.className,'" />');return i.labels&&(l+='<text\n              x="'.concat(e/8,'"\n              y="').concat(n/2+a*n-5,'"\n              fill="black"\n              font-size="').concat(s,'"\n              class="').concat(u,'">').concat(i.labels[a],"</text>")),l}function Si(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.hidden;return'<circle\n            cx="'.concat(e/2+i*e,'"\n            cy="').concat(n/2+r*n,'"\n            r="').concat(a,'"\n            stroke="black"\n            stroke-width="1"\n            fill="').concat(o.color,'"\n            class="').concat(o.className,'" />')}function Ti(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.line,o=t.outputs,s=t.radius;return'<circle\n            cx="'.concat(e/2+i*e,'"\n            cy="').concat(n/2+r*n,'"\n            r="').concat(s,'"\n            stroke="black"\n            stroke-width="1"\n            fill="').concat(o.color,'"\n            class="').concat(o.className,'" />\n          <line\n            x1="').concat(e/2+i*e+s,'"\n            y1="').concat(n/2+r*n,'"\n            x2="').concat(e/2+i*e+e/4,'"\n            y2="').concat(n/2+r*n,'"\n            style="stroke:').concat(a.color,";stroke-width:").concat(a.width,'"\n            class="').concat(a.className,'" />')}function Ai(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.lineY,s=t.line,u=t.previousConnectionIndex;return'<line\n            x1="'.concat(e/2+(i-1)*e+a,'"\n            y1="').concat(o/2+u*o,'"\n            x2="').concat(e/2+i*e-a,'"\n            y2="').concat(n/2+r*n,'"\n            style="stroke:').concat(s.color,";stroke-width:").concat(s.width,'"\n            class="').concat(s.className,'" />')}function Ei(t){for(var e=t.sizes,n=t.height,r="",i=t.width/e.length,a=0;a<e.length;a++)for(var o=e[a],s=n/o,u=0;u<o;u++)if(0===a)r+=ki(f({pixelX:i,pixelY:s,row:u,column:a},t));else{a===e.length-1?r+=Ti(f({pixelX:i,pixelY:s,row:u,column:a},t)):r+=Si(f({pixelX:i,pixelY:s,row:u,column:a},t));for(var l=e[a-1],c=n/l,h=0;h<l;h++)r+=Ai(f({pixelX:i,pixelY:s,row:u,column:a,lineY:c,previousConnectionIndex:h},t))}return r}function _i(t){var e=t.pixelX,n=t.pixelY,r=t.row,i=t.column,a=t.radius,o=t.recurrentLine,s=e/2+i*e+a+1,u=n/2+r*n,l=s-2*a-2,c=u,h=l+100,p=c+50,f=s-100,d=u+50;return'<path\n              d="M '.concat(s," ").concat(u," C ").concat(h," ").concat(p,", ").concat(f," ").concat(d,", ").concat(l," ").concat(c,'"\n              stroke="').concat(o.color,'"\n              stroke-width="').concat(o.width,'"\n              fill="transparent"\n              stroke-linecap="round"\n              marker-end="url(#arrow)"\n              class="').concat(o.className,'" />')}function Li(t){var e=t.width,n=t.height,r=t.recurrentLine,i=t.sizes,a=t.radius,o=e/i.length,s='<defs>\n              <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">\n                <path d="M0,0 L0,6 L9,3 z" fill="'.concat(r.color,'" />\n              </marker>\n            </defs>');s+=Ei(t);for(var u=1;u<i.length;u++)for(var l=i[u],c=n/l,h=0;h<l;h++)s+=_i({pixelX:o,pixelY:c,row:h,column:u,radius:a,recurrentLine:r});return s}function Ii(t){var e=t.options;if(!e)throw new Error("options not defined");if(!e.inputLayer)throw new Error("options.inputLater not defined");if(!e.hiddenLayers)throw new Error("options.hiddenLayers not defined");if(e.hiddenLayers.length<1)throw new Error("options.hiddenLayers is empty");if(!e.outputLayer)throw new Error("options.outputLayer not defined");var n=e.inputLayer(),r=[];r.push(e.hiddenLayers[0](n,0));for(var i=1;i<e.hiddenLayers.length;i++)r.push(e.hiddenLayers[i](r[i-1],i));var a=e.outputLayer(r[r.length-1],r.length);return{inputSize:n.height,hiddenLayers:r.map((function(t){return t.height})),outputSize:a.height}}function Ci(t){var e=[],n=t.options;if(!n.inputLayer)throw new Error("inputLayer not defined");if(!n.outputLayer)throw new Error("outputLayer not defined");var r=n.inputLayer();e.push(n.hiddenLayers[0](r,yn(),0));for(var i=1;i<n.hiddenLayers.length;i++)e.push(n.hiddenLayers[i](e[i-1],yn(),i));var a=n.outputLayer(e[e.length-1],-1);return{inputSize:r.height,hiddenLayers:e.map((function(t){return t.height})),outputSize:a.height}}function Di(t,e,n){return'<svg\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n            version="1.1"\n            width="'.concat(e,'"\n            height="').concat(n,'">').concat(t,"</svg>")}function Oi(t){return t.sizes}function Fi(t){var e=t.options,n=t.sizes,r=e.inputSize,i=e.outputSize,a=e.hiddenLayers;if(!n){if("number"===typeof r&&r<1)throw new Error("inputSize not set");if("number"===typeof i&&i<1)throw new Error("outputSize not set");if(null===a||void 0===a?void 0:a.some((function(t){return t<1})))throw new Error("hiddenLayers not set")}return"number"===typeof r&&Array.isArray(a)&&"number"===typeof i?[r].concat(a).concat([i]):n}function Pi(t){var e=t.options,n=e.inputSize,r=e.outputSize,i=e.hiddenLayers;return[n].concat(i).concat([r])}function Mi(){return{line:{width:.5,color:"black",className:"connection"},recurrentLine:{width:1,color:"red",className:"recurrence"},inputs:{color:"rgba(0, 128, 0, 0.5)",labels:null,className:"input"},outputs:{color:"rgba(100, 149, 237, 0.5)",className:"output"},hidden:{color:"rgba(255, 127, 80, 0.5)",className:"hidden-neuron"},fontSize:"14px",fontClassName:"label",radius:8,width:400,height:250,sizes:[]}}function Ri(t,e){var n=f(f({},Mi()),e),r=n.width,i=n.height,o=n.inputs,s=[];if(t instanceof mr||t instanceof Cr)s=Fi(t);else if(t instanceof Or){var u=Ci(t),l=u.inputSize,c=u.hiddenLayers,h=u.outputSize;s=[l].concat(c).concat([h])}else if(t instanceof Zn){var p=Ii(t),d=p.inputSize,m=p.hiddenLayers,v=p.outputSize;s=[d].concat(m).concat([v])}else{if(t instanceof oi||t instanceof vi||t instanceof ui||t instanceof fi||t instanceof xi||t instanceof mi)return Di(Li(f(f({},n),{},{sizes:Ni(Pi(t),o.labels)})),r,i);if(t.hasOwnProperty("type"))switch(t.type){case"NeuralNetwork":case"NeuralNetworkGPU":return Di(Ei(f(f({},n),{},{sizes:Ni(Oi(t),o.labels)})),r,i);case"RNN":case"GRU":case"LSTM":case"RNNTimeStep":case"GRUTimeStep":case"LSTMTimeStep":return Di(Li(f(f({},n),{},{sizes:Ni(Pi(t),o.labels)})),r,i);default:throw new Error("unrecognized network")}else if(t.hasOwnProperty("inputSize")&&t.hasOwnProperty("hiddenLayers")&&t.hasOwnProperty("outputSize")){var y=t.inputSize,g=t.hiddenLayers,x=t.outputSize;s=[y].concat(a(g),[x])}else{if(!t.hasOwnProperty("sizes"))throw new Error("unrecognized network");s=t.sizes}}return Di(Ei(f(f({},n),{},{sizes:Ni(s,o.labels)})),r,i)}function Ni(t,e){if(!t)throw new Error("sizes not set");if(t.some((function(t){return t<1})))throw new Error("sizes not set correctly");if(e&&e.length!==t[0])throw new Error("not enough labels for inputs");return t}var zi={RNNTimeStep:fi,LSTMTimeStep:xi,GRUTimeStep:mi,RNN:oi,LSTM:vi,GRU:ui},Vi={max:cr,mse:hr,ones:Ne,ones2D:ze,random:zt,randomWeight:Ft,randos:Vt,range:bi,toArray:wi,DataFormatter:Mr,zeros:H,toSVG:Ri};t.CrossValidate=L,t.FeedForward=Zn,t.NeuralNetwork=mr,t.NeuralNetworkGPU=Cr,t.Recurrent=Or,t.activation=_,t.layer=Hn,t.layerTypes=Wn,t.likely=tr,t.lookup=st,t.praxis=Et,t.recurrent=zi,t.utilities=Vi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},7049:function(t,e,n){for(var r=n(7424).default,i=n(9277),a={},o=0,s=Object.keys(i);o<s.length;o++){var u=s[o];a[i[u]]=u}var l={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};t.exports=l;for(var c=0,h=Object.keys(l);c<h.length;c++){var p=h[c];if(!("channels"in l[p]))throw new Error("missing channels property: "+p);if(!("labels"in l[p]))throw new Error("missing channel labels property: "+p);if(l[p].labels.length!==l[p].channels)throw new Error("channel and label counts mismatch: "+p);var f=l[p],d=f.channels,m=f.labels;delete l[p].channels,delete l[p].labels,Object.defineProperty(l[p],"channels",{value:d}),Object.defineProperty(l[p],"labels",{value:m})}l.rgb.hsl=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.min(n,r,i),o=Math.max(n,r,i),s=o-a;o===a?e=0:n===o?e=(r-i)/s:r===o?e=2+(i-n)/s:i===o&&(e=4+(n-r)/s),(e=Math.min(60*e,360))<0&&(e+=360);var u=(a+o)/2;return[e,100*(o===a?0:u<=.5?s/(o+a):s/(2-o-a)),100*u]},l.rgb.hsv=function(t){var e,n,r,i,a,o=t[0]/255,s=t[1]/255,u=t[2]/255,l=Math.max(o,s,u),c=l-Math.min(o,s,u),h=function(t){return(l-t)/6/c+.5};return 0===c?(i=0,a=0):(a=c/l,e=h(o),n=h(s),r=h(u),o===l?i=r-n:s===l?i=1/3+e-r:u===l&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*a,100*l]},l.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[l.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},l.rgb.cmyk=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r);return[100*((1-e-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},l.rgb.keyword=function(t){var e=a[t];if(e)return e;for(var n,r,o,s=1/0,u=0,l=Object.keys(i);u<l.length;u++){var c=l[u],h=i[c],p=(r=t,o=h,Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)+Math.pow(r[2]-o[2],2));p<s&&(s=p,n=c)}return n},l.keyword.rgb=function(t){return i[t]},l.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},l.rgb.lab=function(t){var e=l.rgb.xyz(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},l.hsl.rgb=function(t){var e,n,r,i=t[0]/360,a=t[1]/100,o=t[2]/100;if(0===a)return[r=255*o,r,r];for(var s=2*o-(e=o<.5?o*(1+a):o+a-o*a),u=[0,0,0],l=0;l<3;l++)(n=i+1/3*-(l-1))<0&&n++,n>1&&n--,r=6*n<1?s+6*(e-s)*n:2*n<1?e:3*n<2?s+(e-s)*(2/3-n)*6:s,u[l]=255*r;return u},l.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,a=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=a<=1?a:2-a,[e,100*(0===r?2*i/(a+i):2*n/(r+n)),100*((r+n)/2)]},l.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*r*(1-n),s=255*r*(1-n*a),u=255*r*(1-n*(1-a));switch(r*=255,i){case 0:return[r,u,o];case 1:return[s,r,o];case 2:return[o,r,u];case 3:return[o,s,r];case 4:return[u,o,r];case 5:return[r,o,s]}},l.hsv.hsl=function(t){var e,n,r=t[0],i=t[1]/100,a=t[2]/100,o=Math.max(a,.01);n=(2-i)*a;var s=(2-i)*o;return e=i*o,[r,100*(e=(e/=s<=1?s:2-s)||0),100*(n/=2)]},l.hwb.rgb=function(t){var e,n=t[0]/360,r=t[1]/100,i=t[2]/100,a=r+i;a>1&&(r/=a,i/=a);var o=Math.floor(6*n),s=1-i;e=6*n-o,0!==(1&o)&&(e=1-e);var u,l,c,h=r+e*(s-r);switch(o){default:case 6:case 0:u=s,l=h,c=r;break;case 1:u=h,l=s,c=r;break;case 2:u=r,l=s,c=h;break;case 3:u=r,l=h,c=s;break;case 4:u=h,l=r,c=s;break;case 5:u=s,l=r,c=h}return[255*u,255*l,255*c]},l.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},l.xyz.rgb=function(t){var e,n,r,i=t[0]/100,a=t[1]/100,o=t[2]/100;return n=-.9689*i+1.8758*a+.0415*o,r=.0557*i+-.204*a+1.057*o,e=(e=3.2406*i+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},l.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},l.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var a=Math.pow(n,3),o=Math.pow(e,3),s=Math.pow(r,3);return n=a>.008856?a:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},l.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},l.lch.lab=function(t){var e=t[0],n=t[1],r=t[2]/360*2*Math.PI;return[e,n*Math.cos(r),n*Math.sin(r)]},l.rgb.ansi16=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r(t,3),i=n[0],a=n[1],o=n[2],s=null===e?l.rgb.hsv(t)[2]:e;if(0===(s=Math.round(s/50)))return 30;var u=30+(Math.round(o/255)<<2|Math.round(a/255)<<1|Math.round(i/255));return 2===s&&(u+=60),u},l.hsv.ansi16=function(t){return l.rgb.ansi16(l.hsv.rgb(t),t[2])},l.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},l.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},l.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},l.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},l.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},l.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.max(Math.max(n,r),i),o=Math.min(Math.min(n,r),i),s=a-o;return e=s<=0?0:a===n?(r-i)/s%6:a===r?2+(i-n)/s:4+(n-r)/s,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},l.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n),i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},l.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},l.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,a=[0,0,0],o=e%1*6,s=o%1,u=1-s;switch(Math.floor(o)){case 0:a[0]=1,a[1]=s,a[2]=0;break;case 1:a[0]=u,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=s;break;case 3:a[0]=0,a[1]=u,a[2]=1;break;case 4:a[0]=s,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=u}return i=(1-n)*r,[255*(n*a[0]+i),255*(n*a[1]+i),255*(n*a[2]+i)]},l.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},l.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},l.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},l.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},l.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},l.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},l.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},l.gray.hsl=function(t){return[0,0,t[0]]},l.gray.hsv=l.gray.hsl,l.gray.hwb=function(t){return[0,100,t[0]]},l.gray.cmyk=function(t){return[0,0,0,t[0]]},l.gray.lab=function(t){return[t[0],0,0]},l.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},l.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},7287:function(t,e,n){var r=n(7049),i=n(9672),a={};Object.keys(r).forEach((function(t){a[t]={},Object.defineProperty(a[t],"channels",{value:r[t].channels}),Object.defineProperty(a[t],"labels",{value:r[t].labels});var e=i(t);Object.keys(e).forEach((function(n){var r=e[n];a[t][n]=function(t){var e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(void 0===i||null===i)return i;i.length>1&&(n=i);var a=t(n);if("object"===typeof a)for(var o=a.length,s=0;s<o;s++)a[s]=Math.round(a[s]);return a};return"conversion"in t&&(e.conversion=t.conversion),e}(r),a[t][n].raw=function(t){var e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];return void 0===i||null===i?i:(i.length>1&&(n=i),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=a},9277:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},9672:function(t,e,n){var r=n(7049);function i(t){var e=function(){for(var t={},e=Object.keys(r),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),a=Object.keys(r[i]),o=a.length,s=0;s<o;s++){var u=a[s],l=e[u];-1===l.distance&&(l.distance=e[i].distance+1,l.parent=i,n.unshift(u))}return e}function a(t,e){return function(n){return e(t(n))}}function o(t,e){for(var n=[e[t].parent,t],i=r[e[t].parent][t],o=e[t].parent;e[o].parent;)n.unshift(e[o].parent),i=a(r[e[o].parent][o],i),o=e[o].parent;return i.conversion=n,i}t.exports=function(t){for(var e=i(t),n={},r=Object.keys(e),a=r.length,s=0;s<a;s++){var u=r[s];null!==e[u].parent&&(n[u]=o(u,e))}return n}},888:function(t,e,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(t,e,n){t.exports=n(888)()},9047:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1425:function(t,e,n){var r;"undefined"!=typeof self&&self,t.exports=(r=n(2791),function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=r},function(t,e,n){"use strict";var r={linear:function(t,e,n,r){return(n-e)*t/r+e},easeInQuad:function(t,e,n,r){return(n-e)*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){return-(n-e)*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){return(n-e)*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){return(n-e)*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){return(n-e)*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){return-(n-e)*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){return(n-e)*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){return(n-e)*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){return(n-e)*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){return-(n-e)/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){return 0==t?e:(n-e)*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return 0===t?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,r){return-(n-e)*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){return(n-e)*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i,a,o,s=n-e;return o=1.70158,0===t?e:1==(t/=r)?e+s:((a=0)||(a=.3*r),(i=s)<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)+e)},easeOutElastic:function(t,e,n,r){var i,a,o,s=n-e;return o=1.70158,0===t?e:1==(t/=r)?e+s:((a=0)||(a=.3*r),(i=s)<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/a)+s+e)},easeInOutElastic:function(t,e,n,r){var i,a,o,s=n-e;return o=1.70158,0===t?e:2==(t/=r/2)?e+s:((a=0)||(a=r*(.3*1.5)),(i=s)<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*.5+s+e)},easeInBack:function(t,e,n,r,i){return void 0===i&&(i=1.70158),(n-e)*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){return void 0===i&&(i=1.70158),(n-e)*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var a=n-e;return void 0===i&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*((1+(i*=1.525))*t-i))+e:a/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},easeInBounce:function(t,e,n,i){var a=n-e;return a-r.easeOutBounce(i-t,0,a,i)+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){var a=n-e;return t<i/2?.5*r.easeInBounce(2*t,0,a,i)+e:.5*r.easeOutBounce(2*t-i,0,a,i)+.5*a+e}};t.exports=r},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";n.r(e),n.d(e,"ReactConfetti",(function(){return j}));var r,i,a=n(0),o=n.n(a),s=n(1),u=n.n(s);function l(t,e){return t+Math.random()*(e-t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"}(r||(r={})),function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"}(i||(i={}));var p=function(){function t(e,n,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"context",void 0),h(this,"radius",void 0),h(this,"x",void 0),h(this,"y",void 0),h(this,"w",void 0),h(this,"h",void 0),h(this,"vx",void 0),h(this,"vy",void 0),h(this,"shape",void 0),h(this,"angle",void 0),h(this,"angularSpin",void 0),h(this,"color",void 0),h(this,"rotateY",void 0),h(this,"rotationDirection",void 0),h(this,"getOptions",void 0),this.getOptions=n;var o,s,u=this.getOptions(),c=u.colors,p=u.initialVelocityX,f=u.initialVelocityY;this.context=e,this.x=r,this.y=a,this.w=l(5,20),this.h=l(5,20),this.radius=l(5,10),this.vx="number"==typeof p?l(-p,p):l(p.min,p.max),this.vy="number"==typeof f?l(-f,0):l(f.min,f.max),this.shape=(o=0,s=2,Math.floor(o+Math.random()*(s-o+1))),this.angle=l(0,360)*Math.PI/180,this.angularSpin=l(-.2,.2),this.color=c[Math.floor(Math.random()*c.length)],this.rotateY=l(0,1),this.rotationDirection=l(0,1)?i.Positive:i.Negative}var e,n,a;return e=t,(n=[{key:"update",value:function(){var t=this.getOptions(),e=t.gravity,n=t.wind,a=t.friction,o=t.opacity,s=t.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=e,this.vx+=n,this.vx*=a,this.vy*=a,this.rotateY>=1&&this.rotationDirection===i.Positive?this.rotationDirection=i.Negative:this.rotateY<=-1&&this.rotationDirection===i.Negative&&(this.rotationDirection=i.Positive);var u=.1*this.rotationDirection;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=o,this.context.lineCap="round",this.context.lineWidth=2,s&&"function"==typeof s)s.call(this,this.context);else switch(this.shape){case r.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case r.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case r.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&c(e.prototype,n),a&&c(e,a),t}();function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"canvas",void 0),f(this,"context",void 0),f(this,"getOptions",void 0),f(this,"x",0),f(this,"y",0),f(this,"w",0),f(this,"h",0),f(this,"lastNumberOfPieces",0),f(this,"tweenInitTime",Date.now()),f(this,"particles",[]),f(this,"particlesGenerated",0),f(this,"removeParticleAt",(function(t){r.particles.splice(t,1)})),f(this,"getParticle",(function(){var t=l(r.x,r.w+r.x),e=l(r.y,r.h+r.y);return new p(r.context,r.getOptions,t,e)})),f(this,"animate",(function(){var t=r.canvas,e=r.context,n=r.particlesGenerated,i=r.lastNumberOfPieces,a=r.getOptions(),o=a.run,s=a.recycle,u=a.numberOfPieces,l=a.debug,c=a.tweenFunction,h=a.tweenDuration;if(!o)return!1;var p=r.particles.length,f=s?p:n,d=Date.now();if(f<u){i!==u&&(r.tweenInitTime=d,r.lastNumberOfPieces=u);for(var m=r.tweenInitTime,v=c(d-m>h?h:Math.max(0,d-m),f,u,h),y=Math.round(v-f),g=0;g<y;g++)r.particles.push(r.getParticle());r.particlesGenerated+=y}return l&&(e.font="12px sans-serif",e.fillStyle="#333",e.textAlign="right",e.fillText("Particles: ".concat(p),t.width-10,t.height-20)),r.particles.forEach((function(e,n){e.update(),(e.y>t.height||e.y<-100||e.x>t.width+100||e.x<-100)&&(s&&f<=u?r.particles[n]=r.getParticle():r.removeParticleAt(n))})),p>0||f<u})),this.canvas=e;var i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.getOptions=n};function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x={width:"undefined"!=typeof window?window.innerWidth:300,height:"undefined"!=typeof window?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:u.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},b=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"canvas",void 0),g(this,"context",void 0),g(this,"_options",void 0),g(this,"generator",void 0),g(this,"rafId",void 0),g(this,"setOptionsWithDefaults",(function(t){var e={confettiSource:{x:0,y:0,w:r.canvas.width,h:0}};r._options=v(v(v({},e),x),t),Object.assign(r,t.confettiSource)})),g(this,"update",(function(){var t=r.options,e=t.run,n=t.onConfettiComplete,i=r.canvas,a=r.context;e&&(a.fillStyle="white",a.clearRect(0,0,i.width,i.height)),r.generator.animate()?r.rafId=requestAnimationFrame(r.update):(n&&"function"==typeof n&&r.generator.particlesGenerated>0&&n.call(r,r),r._options.run=!1)})),g(this,"reset",(function(){r.generator&&r.generator.particlesGenerated>0&&(r.generator.particlesGenerated=0,r.generator.particles=[],r.generator.lastNumberOfPieces=0)})),g(this,"stop",(function(){r.options={run:!1},r.rafId&&(cancelAnimationFrame(r.rafId),r.rafId=void 0)})),this.canvas=e;var i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.generator=new d(this.canvas,(function(){return r.options})),this.options=n,this.update()}var e,n,r;return e=t,(n=[{key:"options",get:function(){return this._options},set:function(t){var e=this._options&&this._options.run,n=this._options&&this._options.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),"boolean"==typeof t.recycle&&t.recycle&&!1===n&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),"boolean"==typeof t.run&&t.run&&!1===e&&this.update()}}])&&y(e.prototype,n),r&&y(e,r),t}();function w(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=M(t);if(e){var i=M(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=o.a.createRef(),z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(a,t);var e,n,r,i=O(a);function a(t){var e;I(this,a);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return R(P(e=i.call.apply(i,[this,t].concat(r))),"canvas",o.a.createRef()),R(P(e),"confetti",void 0),e.canvas=t.canvasRef||N,e}return e=a,(n=[{key:"componentDidMount",value:function(){if(this.canvas.current){var t=V(this.props)[0];this.confetti=new b(this.canvas.current,t)}}},{key:"componentDidUpdate",value:function(){var t=V(this.props)[0];this.confetti&&(this.confetti.options=t)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var t=E(V(this.props),2),e=t[0],n=t[1],r=A({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},n.style);return o.a.createElement("canvas",S({width:e.width,height:e.height,ref:this.canvas},n,{style:r}))}}])&&C(e.prototype,n),r&&C(e,r),a}(a.Component);function V(t){var e={},n={},r=[].concat(w(Object.keys(x)),["confettiSource","drawShape","onConfettiComplete"]),i=["canvasRef"];for(var a in t){var o=t[a];r.includes(a)?e[a]=o:i.includes(a)?i[a]=o:n[a]=o}return[e,n,{}]}R(z,"defaultProps",A({},x)),R(z,"displayName","ReactConfetti");var j=o.a.forwardRef((function(t,e){return o.a.createElement(z,S({canvasRef:e},t))}));e.default=j}]).default)},4463:function(t,e,n){"use strict";var r=n(2791),i=n(5296);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(s[t]=e,t=0;t<e.length;t++)o.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function m(t,e,n,r,i,a,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(t){return t[1].toUpperCase()}function x(t,e,n,r){var i=v.hasOwnProperty(e)?v[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(d,t)||!h.call(f,t)&&(p.test(t)?d[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,g);v[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,g);v[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,g);v[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=P&&t[P]||t["@@iterator"])?t:null}var R,N=Object.assign;function z(t){if(void 0===R)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R=e&&e[1]||""}return"\n"+R+t}var V=!1;function j(t,e){if(!t||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}}while(1<=o&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function K(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case k:return"Portal";case A:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case C:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case _:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case L:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case D:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return U(t(e))}catch(n){}}return null}function B(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function W(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function H(t){t._valueTracker||(t._valueTracker=function(t){var e=W(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function q(t,e){var n=e.checked;return N({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function $(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=G(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&x(t,"checked",e,!1)}function Q(t,e){J(t,e);var n=G(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+G(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return N({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(et(n)){if(1<n.length)throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:G(n)}}function at(t,e){var n=G(e.value),r=G(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var lt,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((lt=lt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function pt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function vt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function xt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var kt=null,St=null,Tt=null;function At(t){if(t=xi(t)){if("function"!==typeof kt)throw Error(a(280));var e=t.stateNode;e&&(e=wi(e),kt(t.stateNode,t.type,e))}}function Et(t){St?Tt?Tt.push(t):Tt=[t]:St=t}function _t(){if(St){var t=St,e=Tt;if(Tt=St=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Lt(t,e){return t(e)}function It(){}var Ct=!1;function Dt(t,e,n){if(Ct)return t(e,n);Ct=!0;try{return Lt(t,e,n)}finally{Ct=!1,(null!==St||null!==Tt)&&(It(),_t())}}function Ot(t,e){var n=t.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var Ft=!1;if(c)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch(ct){Ft=!1}function Mt(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Rt=!1,Nt=null,zt=!1,Vt=null,jt={onError:function(t){Rt=!0,Nt=t}};function Kt(t,e,n,r,i,a,o,s,u){Rt=!1,Nt=null,Mt.apply(jt,arguments)}function Ut(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Bt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(Ut(t)!==t)throw Error(a(188))}function Wt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ut(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Gt(i),t;if(o===r)return Gt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t))?Ht(t):null}function Ht(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Ht(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,qt=i.unstable_shouldYield,$t=i.unstable_requestPaint,Jt=i.unstable_now,Qt=i.unstable_getCurrentPriorityLevel,Zt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,ae=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/ue|0)|0},se=Math.log,ue=Math.LN2;var le=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=he(s):0!==(a&=o)&&(r=he(a))}else 0!==(o=n&~i)?r=he(o):0!==a&&(r=he(a));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(a=e&-e)||16===i&&0!==(4194240&a)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-oe(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=le;return 0===(4194240&(le<<=1))&&(le=64),t}function ve(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ge(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oe(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,ke,Se,Te,Ae,Ee=!1,_e=[],Le=null,Ie=null,Ce=null,De=new Map,Oe=new Map,Fe=[],Pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Me(t,e){switch(t){case"focusin":case"focusout":Le=null;break;case"dragenter":case"dragleave":Ie=null;break;case"mouseover":case"mouseout":Ce=null;break;case"pointerover":case"pointerout":De.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function Re(t,e,n,r,i,a){return null===t||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==e&&(null!==(e=xi(e))&&ke(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Ne(t){var e=gi(t.target);if(null!==e){var n=Ut(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Bt(n)))return t.blockedOn=e,void Ae(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=xi(n))&&ke(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function Ve(t,e,n){ze(t)&&n.delete(e)}function je(){Ee=!1,null!==Le&&ze(Le)&&(Le=null),null!==Ie&&ze(Ie)&&(Ie=null),null!==Ce&&ze(Ce)&&(Ce=null),De.forEach(Ve),Oe.forEach(Ve)}function Ke(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,je)))}function Ue(t){function e(e){return Ke(e,t)}if(0<_e.length){Ke(_e[0],t);for(var n=1;n<_e.length;n++){var r=_e[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Le&&Ke(Le,t),null!==Ie&&Ke(Ie,t),null!==Ce&&Ke(Ce,t),De.forEach(e),Oe.forEach(e),n=0;n<Fe.length;n++)(r=Fe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Fe.length&&null===(n=Fe[0]).blockedOn;)Ne(n),null===n.blockedOn&&Fe.shift()}var Be=b.ReactCurrentBatchConfig,Ge=!0;function We(t,e,n,r){var i=xe,a=Be.transition;Be.transition=null;try{xe=1,Xe(t,e,n,r)}finally{xe=i,Be.transition=a}}function He(t,e,n,r){var i=xe,a=Be.transition;Be.transition=null;try{xe=4,Xe(t,e,n,r)}finally{xe=i,Be.transition=a}}function Xe(t,e,n,r){if(Ge){var i=qe(t,e,n,r);if(null===i)Gr(t,e,r,Ye,n),Me(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Le=Re(Le,t,e,n,r,i),!0;case"dragenter":return Ie=Re(Ie,t,e,n,r,i),!0;case"mouseover":return Ce=Re(Ce,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return De.set(a,Re(De.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Oe.set(a,Re(Oe.get(a)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Me(t,r),4&e&&-1<Pe.indexOf(t)){for(;null!==i;){var a=xi(i);if(null!==a&&we(a),null===(a=qe(t,e,n,r))&&Gr(t,e,r,Ye,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(t,e,r,null,n)}}var Ye=null;function qe(t,e,n,r){if(Ye=null,null!==(t=gi(t=wt(r))))if(null===(e=Ut(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Bt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function $e(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Je=null,Qe=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Qe,r=n.length,i="value"in Je?Je.value:Je.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return Ze=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function an(t){function e(e,n,r,i,a){for(var o in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=N({},ln,{view:0,detail:0}),pn=an(hn),fn=N({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==un&&(un&&"mousemove"===t.type?(on=t.screenX-un.screenX,sn=t.screenY-un.screenY):sn=on=0,un=t),on)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),dn=an(fn),mn=an(N({},fn,{dataTransfer:0})),vn=an(N({},hn,{relatedTarget:0})),yn=an(N({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=N({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xn=an(gn),bn=an(N({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function An(){return Tn}var En=N({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?kn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),_n=an(En),Ln=an(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(N({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Cn=an(N({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=N({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Fn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Rn=c&&"TextEvent"in window&&!Mn,Nn=c&&(!Pn||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),Vn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Fn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Bn[t.type]:"textarea"===e}function Wn(t,e,n,r){Et(r),0<(e=Hr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hn=null,Xn=null;function Yn(t){zr(t,0)}function qn(t){if(X(bi(t)))return t}function $n(t,e){if("change"===t)return e}var Jn=!1;if(c){var Qn;if(c){var Zn="oninput"in document;if(!Zn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Zn="function"===typeof tr.oninput}Qn=Zn}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function er(){Hn&&(Hn.detachEvent("onpropertychange",nr),Xn=Hn=null)}function nr(t){if("value"===t.propertyName&&qn(Xn)){var e=[];Wn(e,Xn,t,wt(t)),Dt(Yn,e)}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(Hn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qn(Xn)}function ar(t,e){if("click"===t)return qn(e)}function or(t,e){if("input"===t||"change"===t)return qn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function ur(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pr(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function dr(t){var e=pr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,yr=null,gr=null,xr=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==vr||vr!==Y(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vr)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Tr={};function Ar(t){if(Sr[t])return Sr[t];if(!kr[t])return t;var e,n=kr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Tr)return Sr[t]=n[e];return t}c&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Ar("animationend"),_r=Ar("animationiteration"),Lr=Ar("animationstart"),Ir=Ar("transitionend"),Cr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){Cr.set(t,e),u(e,[t])}for(var Fr=0;Fr<Dr.length;Fr++){var Pr=Dr[Fr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(Er,"onAnimationEnd"),Or(_r,"onAnimationIteration"),Or(Lr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Nr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,u,l){if(Kt.apply(this,arguments),Rt){if(!Rt)throw Error(a(198));var c=Nt;Rt=!1,Nt=null,zt||(zt=!0,Vt=c)}}(r,e,void 0,t),t.currentTarget=null}function zr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break t;Nr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break t;Nr(i,s,l),a=u}}}if(zt)throw t=Vt,zt=!1,Vt=null,t}function Vr(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Br(e,t,2,!1),n.add(r))}function jr(t,e,n){var r=0;e&&(r|=4),Br(n,t,r,e)}var Kr="_reactListening"+Math.random().toString(36).slice(2);function Ur(t){if(!t[Kr]){t[Kr]=!0,o.forEach((function(e){"selectionchange"!==e&&(Rr.has(e)||jr(e,!1,t),jr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Kr]||(e[Kr]=!0,jr("selectionchange",!1,e))}}function Br(t,e,n,r){switch($e(e)){case 1:var i=We;break;case 4:i=He;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!Ft||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gr(t,e,n,r,i){var a=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue t}s=s.parentNode}}r=r.return}Dt((function(){var r=a,i=wt(n),o=[];t:{var s=Cr.get(t);if(void 0!==s){var u=cn,l=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":u=_n;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Er:case _r:case Lr:u=yn;break;case Ir:u=Cn;break;case"scroll":u=pn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ln}var c=0!==(4&e),h=!c&&"scroll"===t,p=c?null!==s?s+"Capture":null:s;c=[];for(var f,d=r;null!==d;){var m=(f=d).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&(null!=(m=Ot(d,p))&&c.push(Wr(d,m,f)))),h)break;d=d.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===bt||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[di])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=Ut(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=dn,m="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=Ln,m="onPointerLeave",p="onPointerEnter",d="pointer"),h=null==u?s:bi(u),f=null==l?s:bi(l),(s=new c(m,d+"leave",u,n,i)).target=h,s.relatedTarget=f,m=null,gi(i)===r&&((c=new c(p,d+"enter",l,n,i)).target=f,c.relatedTarget=h,m=c),h=m,u&&l)t:{for(p=l,d=0,f=c=u;f;f=Xr(f))d++;for(f=0,m=p;m;m=Xr(m))f++;for(;0<d-f;)c=Xr(c),d--;for(;0<f-d;)p=Xr(p),f--;for(;d--;){if(c===p||null!==p&&c===p.alternate)break t;c=Xr(c),p=Xr(p)}c=null}else c=null;null!==u&&Yr(o,s,u,c,!1),null!==l&&null!==h&&Yr(o,h,l,c,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=$n;else if(Gn(s))if(Jn)v=or;else{v=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ar);switch(v&&(v=v(t,r))?Wn(o,v,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=r?bi(r):window,t){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(vr=y,yr=r,gr=null);break;case"focusout":gr=yr=vr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)t:{switch(t){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else Un?jn(t,n)&&(x="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(x="onCompositionStart");x&&(Nn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==x?"onCompositionEnd"===x&&Un&&(g=tn()):(Qe="value"in(Je=i)?Je.value:Je.textContent,Un=!0)),0<(y=Hr(r,x)).length&&(x=new bn(x,t,null,n,i),o.push({event:x,listeners:y}),g?x.data=g:null!==(g=Kn(n))&&(x.data=g))),(g=Rn?function(t,e){switch(t){case"compositionend":return Kn(e);case"keypress":return 32!==e.which?null:(Vn=!0,zn);case"textInput":return(t=e.data)===zn&&Vn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!Pn&&jn(t,e)?(t=tn(),Ze=Qe=Je=null,Un=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}zr(o,e)}))}function Wr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ot(t,n))&&r.unshift(Wr(t,a,i)),null!=(a=Ot(t,e))&&r.push(Wr(t,a,i))),t=t.return}return r}function Xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yr(t,e,n,r,i){for(var a=e._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ot(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Ot(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(t){return("string"===typeof t?t:""+t).replace(qr,"\n").replace($r,"")}function Qr(t,e,n){if(e=Jr(e),Jr(t)!==e&&n)throw Error(a(425))}function Zr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(t){return ai.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function ui(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ue(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ue(e)}function li(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,fi="__reactProps$"+hi,di="__reactContainer$"+hi,mi="__reactEvents$"+hi,vi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(t){var e=t[pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[di]||n[pi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[pi])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function xi(t){return!(t=t[pi]||t[di])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function wi(t){return t[fi]||null}var ki=[],Si=-1;function Ti(t){return{current:t}}function Ai(t){0>Si||(t.current=ki[Si],ki[Si]=null,Si--)}function Ei(t,e){Si++,ki[Si]=t.current,t.current=e}var _i={},Li=Ti(_i),Ii=Ti(!1),Ci=_i;function Di(t,e){var n=t.type.contextTypes;if(!n)return _i;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Fi(){Ai(Ii),Ai(Li)}function Pi(t,e,n){if(Li.current!==_i)throw Error(a(168));Ei(Li,e),Ei(Ii,n)}function Mi(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(a(108,B(t)||"Unknown",i));return N({},n,r)}function Ri(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_i,Ci=Li.current,Ei(Li,t),Ei(Ii,Ii.current),!0}function Ni(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Mi(t,e,Ci),r.__reactInternalMemoizedMergedChildContext=t,Ai(Ii),Ai(Li),Ei(Li,t)):Ai(Ii),Ei(Ii,n)}var zi=null,Vi=!1,ji=!1;function Ki(t){null===zi?zi=[t]:zi.push(t)}function Ui(){if(!ji&&null!==zi){ji=!0;var t=0,e=xe;try{var n=zi;for(xe=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}zi=null,Vi=!1}catch(i){throw null!==zi&&(zi=zi.slice(t+1)),Xt(Zt,Ui),i}finally{xe=e,ji=!1}}return null}var Bi=[],Gi=0,Wi=null,Hi=0,Xi=[],Yi=0,qi=null,$i=1,Ji="";function Qi(t,e){Bi[Gi++]=Hi,Bi[Gi++]=Wi,Wi=t,Hi=e}function Zi(t,e,n){Xi[Yi++]=$i,Xi[Yi++]=Ji,Xi[Yi++]=qi,qi=t;var r=$i;t=Ji;var i=32-oe(r)-1;r&=~(1<<i),n+=1;var a=32-oe(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-oe(e)+i|n<<i|r,Ji=a+t}else $i=1<<a|n<<i|r,Ji=t}function ta(t){null!==t.return&&(Qi(t,1),Zi(t,1,0))}function ea(t){for(;t===Wi;)Wi=Bi[--Gi],Bi[Gi]=null,Hi=Bi[--Gi],Bi[Gi]=null;for(;t===qi;)qi=Xi[--Yi],Xi[Yi]=null,Ji=Xi[--Yi],Xi[Yi]=null,$i=Xi[--Yi],Xi[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(t,e){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function sa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,na=t,ra=li(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,na=t,ra=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==qi?{id:$i,overflow:Ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=e,n.return=t,t.child=n,na=t,ra=null,!0);default:return!1}}function ua(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function la(t){if(ia){var e=ra;if(e){var n=e;if(!sa(t,e)){if(ua(t))throw Error(a(418));e=li(n.nextSibling);var r=na;e&&sa(t,e)?oa(r,n):(t.flags=-4097&t.flags|2,ia=!1,na=t)}}else{if(ua(t))throw Error(a(418));t.flags=-4097&t.flags|2,ia=!1,na=t}}}function ca(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;na=t}function ha(t){if(t!==na)return!1;if(!ia)return ca(t),ia=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ra)){if(ua(t))throw pa(),Error(a(418));for(;e;)oa(t,e),e=li(e.nextSibling)}if(ca(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ra=li(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ra=null}}else ra=na?li(t.stateNode.nextSibling):null;return!0}function pa(){for(var t=ra;t;)t=li(t.nextSibling)}function fa(){ra=na=null,ia=!1}function da(t){null===aa?aa=[t]:aa.push(t)}var ma=b.ReactCurrentBatchConfig;function va(t,e){if(t&&t.defaultProps){for(var n in e=N({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ya=Ti(null),ga=null,xa=null,ba=null;function wa(){ba=xa=ga=null}function ka(t){var e=ya.current;Ai(ya),t._currentValue=e}function Sa(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ta(t,e){ga=t,ba=xa=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bs=!0),t.firstContext=null)}function Aa(t){var e=t._currentValue;if(ba!==t)if(t={context:t,memoizedValue:e,next:null},null===xa){if(null===ga)throw Error(a(308));xa=t,ga.dependencies={lanes:0,firstContext:t}}else xa=xa.next=t;return e}var Ea=null;function _a(t){null===Ea?Ea=[t]:Ea.push(t)}function La(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,_a(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ia(t,r)}function Ia(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ca=!1;function Da(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pa(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ia(t,n)}return null===(i=r.interleaved)?(e.next=e,_a(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ia(t,n)}function Ma(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ge(t,n)}}function Ra(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,r){var i=t.updateQueue;Ca=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var d=t,m=s;switch(p=e,f=n,m.tag){case 1:if("function"===typeof(d=m.payload)){h=d.call(f,h,p);break t}h=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(p="function"===typeof(d=m.payload)?d.call(f,h,p):d)||void 0===p)break t;h=N({},h,p);break t;case 2:Ca=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,o|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{o|=i.lane,i=i.next}while(i!==e)}else null===a&&(i.shared.lanes=0);Nu|=o,t.lanes=o,t.memoizedState=h}}function za(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:N({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Ka={isMounted:function(t){return!!(t=t._reactInternals)&&Ut(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=el(),i=nl(t),a=Fa(r,i);a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=Pa(t,a,i))&&(rl(e,t,i,r),Ma(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=el(),i=nl(t),a=Fa(r,i);a.tag=1,a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=Pa(t,a,i))&&(rl(e,t,i,r),Ma(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=el(),r=nl(t),i=Fa(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Pa(t,i,r))&&(rl(e,t,r,n),Ma(e,t,r))}};function Ua(t,e,n,r,i,a,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(t,e,n){var r=!1,i=_i,a=e.contextType;return"object"===typeof a&&null!==a?a=Aa(a):(i=Oi(e)?Ci:Li.current,a=(r=null!==(r=e.contextTypes)&&void 0!==r)?Di(t,i):_i),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ka,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Ga(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ka.enqueueReplaceState(e,e.state,null)}function Wa(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Va,Da(t);var a=e.contextType;"object"===typeof a&&null!==a?i.context=Aa(a):(a=Oi(e)?Ci:Li.current,i.context=Di(t,a)),i.state=t.memoizedState,"function"===typeof(a=e.getDerivedStateFromProps)&&(ja(t,e,a,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ka.enqueueReplaceState(i,i.state,null),Na(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Ha(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=r,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs;e===Va&&(e=i.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Xa(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ya(t){return(0,t._init)(t._payload)}function qa(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Pl(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=zl(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){var a=n.type;return a===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ya(a)===e.type)?((r=i(e,n.props)).ref=Ha(t,e,n),r.return=t,r):((r=Ml(n.type,n.key,n.props,null,t.mode,r)).ref=Ha(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Vl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,a){return null===e||7!==e.tag?((e=Rl(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zl(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Ml(e.type,e.key,e.props,null,t.mode,n)).ref=Ha(t,null,e),n.return=t,n;case k:return(e=Vl(e,t.mode,n)).return=t,e;case O:return p(t,(0,e._init)(e._payload),n)}if(et(e)||M(e))return(e=Rl(e,t.mode,n,null)).return=t,e;Xa(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(t,e,n,r):null;case k:return n.key===i?c(t,e,n,r):null;case O:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||M(n))return null!==i?null:h(t,e,n,r,null);Xa(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i);case k:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case O:return d(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||M(r))return h(e,t=t.get(n)||null,r,i,null);Xa(e,r)}return null}function m(i,a,s,u){for(var l=null,c=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var y=f(i,h,s[m],u);if(null===y){null===h&&(h=v);break}t&&h&&null===y.alternate&&e(i,h),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,h=v}if(m===s.length)return n(i,h),ia&&Qi(i,m),l;if(null===h){for(;m<s.length;m++)null!==(h=p(i,s[m],u))&&(a=o(h,a,m),null===c?l=h:c.sibling=h,c=h);return ia&&Qi(i,m),l}for(h=r(i,h);m<s.length;m++)null!==(v=d(h,i,m,s[m],u))&&(t&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v);return t&&h.forEach((function(t){return e(i,t)})),ia&&Qi(i,m),l}function v(i,s,u,l){var c=M(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,m=s,v=s=0,y=null,g=u.next();null!==m&&!g.done;v++,g=u.next()){m.index>v?(y=m,m=null):y=m.sibling;var x=f(i,m,g.value,l);if(null===x){null===m&&(m=y);break}t&&m&&null===x.alternate&&e(i,m),s=o(x,s,v),null===h?c=x:h.sibling=x,h=x,m=y}if(g.done)return n(i,m),ia&&Qi(i,v),c;if(null===m){for(;!g.done;v++,g=u.next())null!==(g=p(i,g.value,l))&&(s=o(g,s,v),null===h?c=g:h.sibling=g,h=g);return ia&&Qi(i,v),c}for(m=r(i,m);!g.done;v++,g=u.next())null!==(g=d(m,i,v,g.value,l))&&(t&&null!==g.alternate&&m.delete(null===g.key?v:g.key),s=o(g,s,v),null===h?c=g:h.sibling=g,h=g);return t&&m.forEach((function(t){return e(i,t)})),ia&&Qi(i,v),c}return function t(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:t:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===S){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break t}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&Ya(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ha(r,c,o),a.return=r,r=a;break t}n(r,c);break}e(r,c),c=c.sibling}o.type===S?((a=Rl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Ml(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case k:t:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break t}n(r,a);break}e(r,a),a=a.sibling}(a=Vl(o,r.mode,u)).return=r,r=a}return s(r);case O:return t(r,a,(c=o._init)(o._payload),u)}if(et(o))return m(r,a,o,u);if(M(o))return v(r,a,o,u);Xa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=zl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=qa(!0),Ja=qa(!1),Qa={},Za=Ti(Qa),to=Ti(Qa),eo=Ti(Qa);function no(t){if(t===Qa)throw Error(a(174));return t}function ro(t,e){switch(Ei(eo,e),Ei(to,t),Ei(Za,Qa),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ut(null,"");break;default:e=ut(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ai(Za),Ei(Za,e)}function io(){Ai(Za),Ai(to),Ai(eo)}function ao(t){no(eo.current);var e=no(Za.current),n=ut(e,t.type);e!==n&&(Ei(to,t),Ei(Za,n))}function oo(t){to.current===t&&(Ai(Za),Ai(to))}var so=Ti(0);function uo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lo=[];function co(){for(var t=0;t<lo.length;t++)lo[t]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,po=b.ReactCurrentBatchConfig,fo=0,mo=null,vo=null,yo=null,go=!1,xo=!1,bo=0,wo=0;function ko(){throw Error(a(321))}function So(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function To(t,e,n,r,i,o){if(fo=o,mo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ho.current=null===t||null===t.memoizedState?ss:us,t=n(r,i),xo){o=0;do{if(xo=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=vo=null,e.updateQueue=null,ho.current=ls,t=n(r,i)}while(xo)}if(ho.current=os,e=null!==vo&&null!==vo.next,fo=0,yo=vo=mo=null,go=!1,e)throw Error(a(300));return t}function Ao(){var t=0!==bo;return bo=0,t}function Eo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=t:yo=yo.next=t,yo}function _o(){if(null===vo){var t=mo.alternate;t=null!==t?t.memoizedState:null}else t=vo.next;var e=null===yo?mo.memoizedState:yo.next;if(null!==e)yo=e,vo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(vo=t).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===yo?mo.memoizedState=yo=t:yo=yo.next=t}return yo}function Lo(t,e){return"function"===typeof e?e(t):e}function Io(t){var e=_o(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=vo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((fo&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=p,s=r):l=l.next=p,mo.lanes|=h,Nu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,e.memoizedState)||(bs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{o=i.lane,mo.lanes|=o,Nu|=o,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Co(t){var e=_o(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);sr(o,e.memoizedState)||(bs=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Oo(t,e){var n=mo,r=_o(),i=e(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Go(Mo.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,e),void 0,null),null===Cu)throw Error(a(349));0!==(30&fo)||Fo(n,e,i)}return i}function Fo(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Po(t,e,n,r){e.value=n,e.getSnapshot=r,Ro(e)&&No(t)}function Mo(t,e,n){return n((function(){Ro(e)&&No(t)}))}function Ro(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function No(t){var e=Ia(t,1);null!==e&&rl(e,t,1,-1)}function zo(t){var e=Eo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,mo,t),[e.memoizedState,t]}function Vo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function jo(){return _o().memoizedState}function Ko(t,e,n,r){var i=Eo();mo.flags|=t,i.memoizedState=Vo(1|e,n,void 0,void 0===r?null:r)}function Uo(t,e,n,r){var i=_o();r=void 0===r?null:r;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Vo(e,n,a,r))}mo.flags|=t,i.memoizedState=Vo(1|e,n,a,r)}function Bo(t,e){return Ko(8390656,8,t,e)}function Go(t,e){return Uo(2048,8,t,e)}function Wo(t,e){return Uo(4,2,t,e)}function Ho(t,e){return Uo(4,4,t,e)}function Xo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Yo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Uo(4,4,Xo.bind(null,e,t),n)}function qo(){}function $o(t,e){var n=_o();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&So(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Jo(t,e){var n=_o();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&So(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qo(t,e,n){return 0===(21&fo)?(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=n):(sr(n,e)||(n=me(),mo.lanes|=n,Nu|=n,t.baseState=!0),e)}function Zo(t,e){var n=xe;xe=0!==n&&4>n?n:4,t(!0);var r=po.transition;po.transition={};try{t(!1),e()}finally{xe=n,po.transition=r}}function ts(){return _o().memoizedState}function es(t,e,n){var r=nl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(t))is(e,n);else if(null!==(n=La(t,e,n,r))){rl(n,t,r,el()),as(n,e,r)}}function ns(t,e,n){var r=nl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(t))is(e,i);else{var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=e.interleaved;return null===u?(i.next=i,_a(e)):(i.next=u.next,u.next=i),void(e.interleaved=i)}}catch(l){}null!==(n=La(t,e,i,r))&&(rl(n,t,r,i=el()),as(n,e,r))}}function rs(t){var e=t.alternate;return t===mo||null!==e&&e===mo}function is(t,e){xo=go=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function as(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ge(t,n)}}var os={readContext:Aa,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Aa,useCallback:function(t,e){return Eo().memoizedState=[t,void 0===e?null:e],t},useContext:Aa,useEffect:Bo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ko(4194308,4,Xo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ko(4,2,t,e)},useMemo:function(t,e){var n=Eo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Eo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=es.bind(null,mo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Eo().memoizedState=t},useState:zo,useDebugValue:qo,useDeferredValue:function(t){return Eo().memoizedState=t},useTransition:function(){var t=zo(!1),e=t[0];return t=Zo.bind(null,t[1]),Eo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=mo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===Cu)throw Error(a(349));0!==(30&fo)||Fo(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Bo(Mo.bind(null,r,o,t),[t]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Eo(),e=Cu.identifierPrefix;if(ia){var n=Ji;e=":"+e+"R"+(n=($i&~(1<<32-oe($i)-1)).toString(32)+n),0<(n=bo++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=wo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},us={readContext:Aa,useCallback:$o,useContext:Aa,useEffect:Go,useImperativeHandle:Yo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:Io,useRef:jo,useState:function(){return Io(Lo)},useDebugValue:qo,useDeferredValue:function(t){return Qo(_o(),vo.memoizedState,t)},useTransition:function(){return[Io(Lo)[0],_o().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:ts,unstable_isNewReconciler:!1},ls={readContext:Aa,useCallback:$o,useContext:Aa,useEffect:Go,useImperativeHandle:Yo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:Co,useRef:jo,useState:function(){return Co(Lo)},useDebugValue:qo,useDeferredValue:function(t){var e=_o();return null===vo?e.memoizedState=t:Qo(e,vo.memoizedState,t)},useTransition:function(){return[Co(Lo)[0],_o().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:ts,unstable_isNewReconciler:!1};function cs(t,e){try{var n="",r=e;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:i,digest:null}}function hs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ps(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=Fa(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wu||(Wu=!0,Hu=r),ps(0,e)},n}function ms(t,e,n){(n=Fa(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ps(0,e)}}var a=t.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ps(0,e),"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function vs(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fs;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=El.bind(null,t,e,n),e.then(t,t))}function ys(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function gs(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Fa(-1,1)).tag=2,Pa(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var xs=b.ReactCurrentOwner,bs=!1;function ws(t,e,n,r){e.child=null===t?Ja(e,null,n,r):$a(e,t.child,n,r)}function ks(t,e,n,r,i){n=n.render;var a=e.ref;return Ta(e,i),r=To(t,e,n,r,a,i),n=Ao(),null===t||bs?(ia&&n&&ta(e),e.flags|=1,ws(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ws(t,e,i))}function Ss(t,e,n,r,i){if(null===t){var a=n.type;return"function"!==typeof a||Fl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ml(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ts(t,e,a,r,i))}if(a=t.child,0===(t.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&t.ref===e.ref)return Ws(t,e,i)}return e.flags|=1,(t=Pl(a,r)).ref=e.ref,t.return=e,e.child=t}function Ts(t,e,n,r,i){if(null!==t){var a=t.memoizedProps;if(ur(a,r)&&t.ref===e.ref){if(bs=!1,e.pendingProps=r=a,0===(t.lanes&i))return e.lanes=t.lanes,Ws(t,e,i);0!==(131072&t.flags)&&(bs=!0)}}return _s(t,e,n,r,i)}function As(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Pu,Fu),Fu|=n;else{if(0===(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ei(Pu,Fu),Fu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Pu,Fu),Fu|=r}else null!==a?(r=a.baseLanes|n,e.memoizedState=null):r=n,Ei(Pu,Fu),Fu|=r;return ws(t,e,i,n),e.child}function Es(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _s(t,e,n,r,i){var a=Oi(n)?Ci:Li.current;return a=Di(e,a),Ta(e,i),n=To(t,e,n,r,a,i),r=Ao(),null===t||bs?(ia&&r&&ta(e),e.flags|=1,ws(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ws(t,e,i))}function Ls(t,e,n,r,i){if(Oi(n)){var a=!0;Ri(e)}else a=!1;if(Ta(e,i),null===e.stateNode)Gs(t,e),Ba(e,n,r),Wa(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Aa(l):l=Di(e,l=Oi(n)?Ci:Li.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Ga(e,o,r,l),Ca=!1;var p=e.memoizedState;o.state=p,Na(e,r,o,i),u=e.memoizedState,s!==r||p!==u||Ii.current||Ca?("function"===typeof c&&(ja(e,n,c,r),u=e.memoizedState),(s=Ca||Ua(e,n,s,r,p,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Oa(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:va(e.type,s),o.props=l,h=e.pendingProps,p=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Aa(u):u=Di(e,u=Oi(n)?Ci:Li.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||p!==u)&&Ga(e,o,r,u),Ca=!1,p=e.memoizedState,o.state=p,Na(e,r,o,i);var d=e.memoizedState;s!==h||p!==d||Ii.current||Ca?("function"===typeof f&&(ja(e,n,f,r),d=e.memoizedState),(l=Ca||Ua(e,n,l,r,p,d,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),o.props=r,o.state=d,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Is(t,e,n,r,a,i)}function Is(t,e,n,r,i,a){Es(t,e);var o=0!==(128&e.flags);if(!r&&!o)return i&&Ni(e,n,!1),Ws(t,e,a);r=e.stateNode,xs.current=e;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&o?(e.child=$a(e,t.child,null,a),e.child=$a(e,null,s,a)):ws(t,e,s,a),e.memoizedState=r.state,i&&Ni(e,n,!0),e.child}function Cs(t){var e=t.stateNode;e.pendingContext?Pi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Pi(0,e.context,!1),ro(t,e.containerInfo)}function Ds(t,e,n,r,i){return fa(),da(i),e.flags|=256,ws(t,e,n,r),e.child}var Os,Fs,Ps,Ms,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ns(t){return{baseLanes:t,cachePool:null,transitions:null}}function zs(t,e,n){var r,i=e.pendingProps,o=so.current,s=!1,u=0!==(128&e.flags);if((r=u)||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Ei(so,1&o),null===t)return la(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(u=i.children,t=i.fallback,s?(i=e.mode,s=e.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Nl(u,i,0,null),t=Rl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ns(n),e.memoizedState=Rs,t):Vs(e,u));if(null!==(o=t.memoizedState)&&null!==(r=o.dehydrated))return function(t,e,n,r,i,o,s){if(n)return 256&e.flags?(e.flags&=-257,js(t,e,s,r=hs(Error(a(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Nl({mode:"visible",children:r.children},i,0,null),(o=Rl(o,i,s,null)).flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,0!==(1&e.mode)&&$a(e,t.child,null,s),e.child.memoizedState=Ns(s),e.memoizedState=Rs,o);if(0===(1&e.mode))return js(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,js(t,e,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&t.childLanes),bs||u){if(null!==(r=Cu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(t,i),rl(r,t,i,-1))}return vl(),js(t,e,s,r=hs(Error(a(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Ll.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ra=li(i.nextSibling),na=e,ia=!0,aa=null,null!==t&&(Xi[Yi++]=$i,Xi[Yi++]=Ji,Xi[Yi++]=qi,$i=t.id,Ji=t.overflow,qi=e),e=Vs(e,r.children),e.flags|=4096,e)}(t,e,u,i,r,o,n);if(s){s=i.fallback,u=e.mode,r=(o=t.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&e.child!==o?((i=e.child).childLanes=0,i.pendingProps=l,e.deletions=null):(i=Pl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Pl(r,s):(s=Rl(s,u,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,u=null===(u=t.child.memoizedState)?Ns(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=t.childLanes&~n,e.memoizedState=Rs,i}return t=(s=t.child).sibling,i=Pl(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Vs(t,e){return(e=Nl({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function js(t,e,n,r){return null!==r&&da(r),$a(e,t.child,null,n),(t=Vs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ks(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Sa(t.return,e,n)}function Us(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bs(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(ws(t,e,r.children,n),0!==(2&(r=so.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ks(t,n,e);else if(19===t.tag)Ks(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ei(so,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===uo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Us(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===uo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Us(e,!0,n,null,a);break;case"together":Us(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ws(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Nu|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Pl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Pl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Hs(t,e){if(!ia)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ys(t,e,n){var r=e.pendingProps;switch(ea(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(e),null;case 1:case 17:return Oi(e.type)&&Fi(),Xs(e),null;case 3:return r=e.stateNode,io(),Ai(Ii),Ai(Li),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ha(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==aa&&(sl(aa),aa=null))),Fs(t,e),Xs(e),null;case 5:oo(e);var i=no(eo.current);if(n=e.type,null!==t&&null!=e.stateNode)Ps(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(a(166));return Xs(e),null}if(t=no(Za.current),ha(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[pi]=e,r[fi]=o,t=0!==(1&e.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":it(r,o),Vr("invalid",r)}for(var u in gt(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,t),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,t),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),ot(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),"select"===n&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[pi]=e,t[fi]=r,Os(t,e,!1,!1),e.stateNode=t;t:{switch(u=xt(n,r),n){case"dialog":Vr("cancel",t),Vr("close",t),i=r;break;case"iframe":case"object":case"embed":Vr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],t);i=r;break;case"source":Vr("error",t),i=r;break;case"img":case"image":case"link":Vr("error",t),Vr("load",t),i=r;break;case"details":Vr("toggle",t),i=r;break;case"input":$(t,r),i=q(t,r),Vr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),Vr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Vr("invalid",t)}for(o in gt(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?vt(t,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&pt(t,c):"number"===typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",t):null!=c&&x(t,o,c,u))}switch(n){case"input":H(t),Z(t,r,!1);break;case"textarea":H(t),ot(t);break;case"option":null!=r.value&&t.setAttribute("value",""+G(r.value));break;case"select":t.multiple=!!r.multiple,null!=(o=r.value)?nt(t,!!r.multiple,o,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xs(e),null;case 6:if(t&&null!=e.stateNode)Ms(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));if(n=no(eo.current),no(Za.current),ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[pi]=e,(o=r.nodeValue!==n)&&null!==(t=na))switch(t.tag){case 3:Qr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=e,e.stateNode=r}return Xs(e),null;case 13:if(Ai(so),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&e.mode)&&0===(128&e.flags))pa(),fa(),e.flags|=98560,o=!1;else if(o=ha(e),null!==r&&null!==r.dehydrated){if(null===t){if(!o)throw Error(a(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(a(317));o[pi]=e}else fa(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xs(e),o=!1}else null!==aa&&(sl(aa),aa=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&so.current)?0===Mu&&(Mu=3):vl())),null!==e.updateQueue&&(e.flags|=4),Xs(e),null);case 4:return io(),Fs(t,e),null===t&&Ur(e.stateNode.containerInfo),Xs(e),null;case 10:return ka(e.type._context),Xs(e),null;case 19:if(Ai(so),null===(o=e.memoizedState))return Xs(e),null;if(r=0!==(128&e.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Mu||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(u=uo(t))){for(e.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,t=u.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),e.child}t=t.sibling}null!==o.tail&&Jt()>Bu&&(e.flags|=128,r=!0,Hs(o,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=uo(u))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Xs(e),null}else 2*Jt()-o.renderingStartTime>Bu&&1073741824!==n&&(e.flags|=128,r=!0,Hs(o,!1),e.lanes=4194304);o.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=o.last)?n.sibling=u:e.child=u,o.last=u)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Jt(),e.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),e):(Xs(e),null);case 22:case 23:return pl(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Fu)&&(Xs(e),6&e.subtreeFlags&&(e.flags|=8192)):Xs(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}function qs(t,e){switch(ea(e),e.tag){case 1:return Oi(e.type)&&Fi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return io(),Ai(Ii),Ai(Li),co(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return oo(e),null;case 13:if(Ai(so),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));fa()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ai(so),null;case 4:return io(),null;case 10:return ka(e.type._context),null;case 22:case 23:return pl(),null;default:return null}}Os=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fs=function(){},Ps=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=q(t,i),r=q(t,r),o=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),o=[];break;case"textarea":i=rt(t,i),r=rt(t,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Zr)}for(c in gt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Vr("scroll",t),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}},Ms=function(t,e,n,r){n!==r&&(e.flags|=4)};var $s=!1,Js=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function tu(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Al(t,e,r)}else n.current=null}function eu(t,e,n){try{n()}catch(r){Al(t,e,r)}}var nu=!1;function ru(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(e,n,a)}i=i.next}while(i!==r)}}function iu(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function au(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ou(t){var e=t.alternate;null!==e&&(t.alternate=null,ou(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[pi],delete e[fi],delete e[mi],delete e[vi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function su(t){return 5===t.tag||3===t.tag||4===t.tag}function uu(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||su(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function lu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zr));else if(4!==r&&null!==(t=t.child))for(lu(t,e,n),t=t.sibling;null!==t;)lu(t,e,n),t=t.sibling}function cu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cu(t,e,n),t=t.sibling;null!==t;)cu(t,e,n),t=t.sibling}var hu=null,pu=!1;function fu(t,e,n){for(n=n.child;null!==n;)du(t,e,n),n=n.sibling}function du(t,e,n){if(ae&&"function"===typeof ae.onCommitFiberUnmount)try{ae.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Js||tu(n,e);case 6:var r=hu,i=pu;hu=null,fu(t,e,n),pu=i,null!==(hu=r)&&(pu?(t=hu,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(pu?(t=hu,n=n.stateNode,8===t.nodeType?ui(t.parentNode,n):1===t.nodeType&&ui(t,n),Ue(t)):ui(hu,n.stateNode));break;case 4:r=hu,i=pu,hu=n.stateNode.containerInfo,pu=!0,fu(t,e,n),hu=r,pu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,e,o),i=i.next}while(i!==r)}fu(t,e,n);break;case 1:if(!Js&&(tu(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Al(n,e,s)}fu(t,e,n);break;case 21:fu(t,e,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,fu(t,e,n),Js=r):fu(t,e,n);break;default:fu(t,e,n)}}function mu(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qs),e.forEach((function(e){var r=Il.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function vu(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,u=s;t:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,pu=!1;break t;case 3:case 4:hu=u.stateNode.containerInfo,pu=!0;break t}u=u.return}if(null===hu)throw Error(a(160));du(o,s,i),hu=null,pu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Al(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yu(e,t),e=e.sibling}function yu(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vu(e,t),gu(t),4&r){try{ru(3,t,t.return),iu(3,t)}catch(v){Al(t,t.return,v)}try{ru(5,t,t.return)}catch(v){Al(t,t.return,v)}}break;case 1:vu(e,t),gu(t),512&r&&null!==n&&tu(n,n.return);break;case 5:if(vu(e,t),gu(t),512&r&&null!==n&&tu(n,n.return),32&t.flags){var i=t.stateNode;try{pt(i,"")}catch(v){Al(t,t.return,v)}}if(4&r&&null!=(i=t.stateNode)){var o=t.memoizedProps,s=null!==n?n.memoizedProps:o,u=t.type,l=t.updateQueue;if(t.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),xt(u,s);var c=xt(u,o);for(s=0;s<l.length;s+=2){var h=l[s],p=l[s+1];"style"===h?vt(i,p):"dangerouslySetInnerHTML"===h?ht(i,p):"children"===h?pt(i,p):x(i,h,p,c)}switch(u){case"input":Q(i,o);break;case"textarea":at(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;null!=d?nt(i,!!o.multiple,d,!1):f!==!!o.multiple&&(null!=o.defaultValue?nt(i,!!o.multiple,o.defaultValue,!0):nt(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(v){Al(t,t.return,v)}}break;case 6:if(vu(e,t),gu(t),4&r){if(null===t.stateNode)throw Error(a(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Al(t,t.return,v)}}break;case 3:if(vu(e,t),gu(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ue(e.containerInfo)}catch(v){Al(t,t.return,v)}break;case 4:default:vu(e,t),gu(t);break;case 13:vu(e,t),gu(t),8192&(i=t.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Uu=Jt())),4&r&&mu(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Js=(c=Js)||h,vu(e,t),Js=c):vu(e,t),gu(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Zs=t,h=t.child;null!==h;){for(p=Zs=h;null!==Zs;){switch(d=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:tu(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Al(r,n,v)}}break;case 5:tu(f,f.return);break;case 22:if(null!==f.memoizedState){ku(p);continue}}null!==d?(d.return=f,Zs=d):ku(p)}h=h.sibling}t:for(h=null,p=t;;){if(5===p.tag){if(null===h){h=p;try{i=p.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=p.stateNode,s=void 0!==(l=p.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=mt("display",s))}catch(v){Al(t,t.return,v)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(v){Al(t,t.return,v)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vu(e,t),gu(t),4&r&&mu(t);case 21:}}function gu(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(su(n)){var r=n;break t}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pt(i,""),r.flags&=-33),cu(t,uu(t),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lu(t,uu(t),o);break;default:throw Error(a(161))}}catch(s){Al(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function xu(t,e,n){Zs=t,bu(t,e,n)}function bu(t,e,n){for(var r=0!==(1&t.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=$s;var l=Js;if($s=o,(Js=u)&&!l)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?Su(i):null!==u?(u.return=o,Zs=u):Su(i);for(;null!==a;)Zs=a,bu(a,e,n),a=a.sibling;Zs=i,$s=s,Js=l}wu(t)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(t)}}function wu(t){for(;null!==Zs;){var e=Zs;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Js||iu(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Js)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:va(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&za(e,o,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}za(e,s,n)}break;case 5:var u=e.stateNode;if(null===n&&4&e.flags){n=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&Ue(p)}}}break;default:throw Error(a(163))}Js||512&e.flags&&au(e)}catch(f){Al(e,e.return,f)}}if(e===t){Zs=null;break}if(null!==(n=e.sibling)){n.return=e.return,Zs=n;break}Zs=e.return}}function ku(t){for(;null!==Zs;){var e=Zs;if(e===t){Zs=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Zs=n;break}Zs=e.return}}function Su(t){for(;null!==Zs;){var e=Zs;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{iu(4,e)}catch(u){Al(e,n,u)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(u){Al(e,i,u)}}var a=e.return;try{au(e)}catch(u){Al(e,a,u)}break;case 5:var o=e.return;try{au(e)}catch(u){Al(e,o,u)}}}catch(u){Al(e,e.return,u)}if(e===t){Zs=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Zs=s;break}Zs=e.return}}var Tu,Au=Math.ceil,Eu=b.ReactCurrentDispatcher,_u=b.ReactCurrentOwner,Lu=b.ReactCurrentBatchConfig,Iu=0,Cu=null,Du=null,Ou=0,Fu=0,Pu=Ti(0),Mu=0,Ru=null,Nu=0,zu=0,Vu=0,ju=null,Ku=null,Uu=0,Bu=1/0,Gu=null,Wu=!1,Hu=null,Xu=null,Yu=!1,qu=null,$u=0,Ju=0,Qu=null,Zu=-1,tl=0;function el(){return 0!==(6&Iu)?Jt():-1!==Zu?Zu:Zu=Jt()}function nl(t){return 0===(1&t.mode)?1:0!==(2&Iu)&&0!==Ou?Ou&-Ou:null!==ma.transition?(0===tl&&(tl=me()),tl):0!==(t=xe)?t:t=void 0===(t=window.event)?16:$e(t.type)}function rl(t,e,n,r){if(50<Ju)throw Ju=0,Qu=null,Error(a(185));ye(t,n,r),0!==(2&Iu)&&t===Cu||(t===Cu&&(0===(2&Iu)&&(zu|=n),4===Mu&&ul(t,Ou)),il(t,r),1===n&&0===Iu&&0===(1&e.mode)&&(Bu=Jt()+500,Vi&&Ui()))}function il(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-oe(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=fe(s,e)):u<=e&&(t.expiredLanes|=s),a&=~s}}(t,e);var r=pe(t,t===Cu?Ou:0);if(0===r)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Vi=!0,Ki(t)}(ll.bind(null,t)):Ki(ll.bind(null,t)),oi((function(){0===(6&Iu)&&Ui()})),n=null;else{switch(be(r)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Cl(n,al.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function al(t,e){if(Zu=-1,tl=0,0!==(6&Iu))throw Error(a(327));var n=t.callbackNode;if(Sl()&&t.callbackNode!==n)return null;var r=pe(t,t===Cu?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=yl(t,r);else{e=r;var i=Iu;Iu|=2;var o=ml();for(Cu===t&&Ou===e||(Gu=null,Bu=Jt()+500,fl(t,e));;)try{xl();break}catch(u){dl(t,u)}wa(),Eu.current=o,Iu=i,null!==Du?e=0:(Cu=null,Ou=0,e=Mu)}if(0!==e){if(2===e&&(0!==(i=de(t))&&(r=i,e=ol(t,i))),1===e)throw n=Ru,fl(t,0),ul(t,r),il(t,Jt()),n;if(6===e)ul(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=yl(t,r))&&(0!==(o=de(t))&&(r=o,e=ol(t,o))),1===e))throw n=Ru,fl(t,0),ul(t,r),il(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(a(345));case 2:case 5:kl(t,Ku,Gu);break;case 3:if(ul(t,r),(130023424&r)===r&&10<(e=Uu+500-Jt())){if(0!==pe(t,0))break;if(((i=t.suspendedLanes)&r)!==r){el(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(kl.bind(null,t,Ku,Gu),e);break}kl(t,Ku,Gu);break;case 4:if(ul(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-oe(r);o=1<<s,(s=e[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Jt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Au(r/1960))-r)){t.timeoutHandle=ri(kl.bind(null,t,Ku,Gu),r);break}kl(t,Ku,Gu);break;default:throw Error(a(329))}}}return il(t,Jt()),t.callbackNode===n?al.bind(null,t):null}function ol(t,e){var n=ju;return t.current.memoizedState.isDehydrated&&(fl(t,e).flags|=256),2!==(t=yl(t,e))&&(e=Ku,Ku=n,null!==e&&sl(e)),t}function sl(t){null===Ku?Ku=t:Ku.push.apply(Ku,t)}function ul(t,e){for(e&=~Vu,e&=~zu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),r=1<<n;t[n]=-1,e&=~r}}function ll(t){if(0!==(6&Iu))throw Error(a(327));Sl();var e=pe(t,0);if(0===(1&e))return il(t,Jt()),null;var n=yl(t,e);if(0!==t.tag&&2===n){var r=de(t);0!==r&&(e=r,n=ol(t,r))}if(1===n)throw n=Ru,fl(t,0),ul(t,e),il(t,Jt()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kl(t,Ku,Gu),il(t,Jt()),null}function cl(t,e){var n=Iu;Iu|=1;try{return t(e)}finally{0===(Iu=n)&&(Bu=Jt()+500,Vi&&Ui())}}function hl(t){null!==qu&&0===qu.tag&&0===(6&Iu)&&Sl();var e=Iu;Iu|=1;var n=Lu.transition,r=xe;try{if(Lu.transition=null,xe=1,t)return t()}finally{xe=r,Lu.transition=n,0===(6&(Iu=e))&&Ui()}}function pl(){Fu=Pu.current,Ai(Pu)}function fl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(ea(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Fi();break;case 3:io(),Ai(Ii),Ai(Li),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ai(so);break;case 10:ka(r.type._context);break;case 22:case 23:pl()}n=n.return}if(Cu=t,Du=t=Pl(t.current,null),Ou=Fu=e,Mu=0,Ru=null,Vu=zu=Nu=0,Ku=ju=null,null!==Ea){for(e=0;e<Ea.length;e++)if(null!==(r=(n=Ea[e]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return t}function dl(t,e){for(;;){var n=Du;try{if(wa(),ho.current=os,go){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(fo=0,yo=vo=mo=null,xo=!1,bo=0,_u.current=null,null===n||null===n.return){Mu=1,Ru=e,Du=null;break}t:{var o=t,s=n.return,u=n,l=e;if(e=Ou,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=ys(s);if(null!==d){d.flags&=-257,gs(d,s,u,0,e),1&d.mode&&vs(o,c,e),l=c;var m=(e=d).updateQueue;if(null===m){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break t}if(0===(1&e)){vs(o,c,e),vl();break t}l=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,e),da(cs(l,u));break t}}o=l=cs(l,u),4!==Mu&&(Mu=2),null===ju?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Ra(o,ds(0,l,e));break t;case 1:u=l;var g=o.type,x=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e,Ra(o,ms(o,u,e));break t}}o=o.return}while(null!==o)}wl(n)}catch(b){e=b,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function ml(){var t=Eu.current;return Eu.current=os,null===t?os:t}function vl(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Cu||0===(268435455&Nu)&&0===(268435455&zu)||ul(Cu,Ou)}function yl(t,e){var n=Iu;Iu|=2;var r=ml();for(Cu===t&&Ou===e||(Gu=null,fl(t,e));;)try{gl();break}catch(i){dl(t,i)}if(wa(),Iu=n,Eu.current=r,null!==Du)throw Error(a(261));return Cu=null,Ou=0,Mu}function gl(){for(;null!==Du;)bl(Du)}function xl(){for(;null!==Du&&!qt();)bl(Du)}function bl(t){var e=Tu(t.alternate,t,Fu);t.memoizedProps=t.pendingProps,null===e?wl(t):Du=e,_u.current=null}function wl(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ys(n,e,Fu)))return void(Du=n)}else{if(null!==(n=qs(n,e)))return n.flags&=32767,void(Du=n);if(null===t)return Mu=6,void(Du=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Du=e);Du=e=t}while(null!==e);0===Mu&&(Mu=5)}function kl(t,e,n){var r=xe,i=Lu.transition;try{Lu.transition=null,xe=1,function(t,e,n,r){do{Sl()}while(null!==qu);if(0!==(6&Iu))throw Error(a(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-oe(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}(t,o),t===Cu&&(Du=Cu=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yu||(Yu=!0,Cl(ee,(function(){return Sl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Lu.transition,Lu.transition=null;var s=xe;xe=1;var u=Iu;Iu|=4,_u.current=null,function(t,e){if(ti=Ge,fr(t=pr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break t}var s=0,u=-1,l=-1,c=0,h=0,p=t,f=null;e:for(;;){for(var d;p!==n||0!==i&&3!==p.nodeType||(u=s+i),p!==o||0!==r&&3!==p.nodeType||(l=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(d=p.firstChild);)f=p,p=d;for(;;){if(p===t)break e;if(f===n&&++c===i&&(u=s),f===o&&++h===r&&(l=s),null!==(d=p.nextSibling))break;f=(p=f).parentNode}p=d}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ge=!1,Zs=e;null!==Zs;)if(t=(e=Zs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Zs=t;else for(;null!==Zs;){e=Zs;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,y=m.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:va(e.type,v),y);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Al(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Zs=t;break}Zs=e.return}m=nu,nu=!1}(t,n),yu(n,t),dr(ei),Ge=!!ti,ei=ti=null,t.current=n,xu(n,t,i),$t(),Iu=u,xe=s,Lu.transition=o}else t.current=n;if(Yu&&(Yu=!1,qu=t,$u=i),o=t.pendingLanes,0===o&&(Xu=null),function(t){if(ae&&"function"===typeof ae.onCommitFiberRoot)try{ae.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),il(t,Jt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,t=Hu,Hu=null,t;0!==(1&$u)&&0!==t.tag&&Sl(),o=t.pendingLanes,0!==(1&o)?t===Qu?Ju++:(Ju=0,Qu=t):Ju=0,Ui()}(t,e,n,r)}finally{Lu.transition=i,xe=r}return null}function Sl(){if(null!==qu){var t=be($u),e=Lu.transition,n=xe;try{if(Lu.transition=null,xe=16>t?16:t,null===qu)var r=!1;else{if(t=qu,qu=null,$u=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Zs=t.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:ru(8,h,o)}var p=h.child;if(null!==p)p.return=h,Zs=p;else for(;null!==Zs;){var f=(h=Zs).sibling,d=h.return;if(ou(h),h===c){Zs=null;break}if(null!==f){f.return=d,Zs=f;break}Zs=d}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(null!==v)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else t:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break t}Zs=o.return}}var x=t.current;for(Zs=x;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else t:for(s=x;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(k){Al(u,u.return,k)}if(u===s){Zs=null;break t}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break t}Zs=u.return}}if(Iu=i,Ui(),ae&&"function"===typeof ae.onPostCommitFiberRoot)try{ae.onPostCommitFiberRoot(ie,t)}catch(k){}r=!0}return r}finally{xe=n,Lu.transition=e}}return!1}function Tl(t,e,n){t=Pa(t,e=ds(0,e=cs(n,e),1),1),e=el(),null!==t&&(ye(t,1,e),il(t,e))}function Al(t,e,n){if(3===t.tag)Tl(t,t,n);else for(;null!==e;){if(3===e.tag){Tl(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){e=Pa(e,t=ms(e,t=cs(n,t),1),1),t=el(),null!==e&&(ye(e,1,t),il(e,t));break}}e=e.return}}function El(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=el(),t.pingedLanes|=t.suspendedLanes&n,Cu===t&&(Ou&n)===n&&(4===Mu||3===Mu&&(130023424&Ou)===Ou&&500>Jt()-Uu?fl(t,0):Vu|=n),il(t,e)}function _l(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=el();null!==(t=Ia(t,e))&&(ye(t,e,n),il(t,n))}function Ll(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),_l(t,n)}function Il(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(e),_l(t,n)}function Cl(t,e){return Xt(t,e)}function Dl(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(t,e,n,r){return new Dl(t,e,n,r)}function Fl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Pl(t,e){var n=t.alternate;return null===n?((n=Ol(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ml(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Fl(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Rl(n.children,i,o,e);case T:s=8,i|=8;break;case A:return(t=Ol(12,n,e,2|i)).elementType=A,t.lanes=o,t;case I:return(t=Ol(13,n,e,i)).elementType=I,t.lanes=o,t;case C:return(t=Ol(19,n,e,i)).elementType=C,t.lanes=o,t;case F:return Nl(n,i,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:s=10;break t;case _:s=9;break t;case L:s=11;break t;case D:s=14;break t;case O:s=16,r=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Ol(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Rl(t,e,n,r){return(t=Ol(7,t,r,e)).lanes=n,t}function Nl(t,e,n,r){return(t=Ol(22,t,r,e)).elementType=F,t.lanes=n,t.stateNode={isHidden:!1},t}function zl(t,e,n){return(t=Ol(6,t,null,e)).lanes=n,t}function Vl(t,e,n){return(e=Ol(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jl(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ve(0),this.expirationTimes=ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kl(t,e,n,r,i,a,o,s,u){return t=new jl(t,e,n,s,u),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Ol(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),t}function Ul(t){if(!t)return _i;t:{if(Ut(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(Oi(n))return Mi(t,n,e)}return e}function Bl(t,e,n,r,i,a,o,s,u){return(t=Kl(n,r,!0,t,0,a,0,s,u)).context=Ul(null),n=t.current,(a=Fa(r=el(),i=nl(n))).callback=void 0!==e&&null!==e?e:null,Pa(n,a,i),t.current.lanes=i,ye(t,i,r),il(t,r),t}function Gl(t,e,n,r){var i=e.current,a=el(),o=nl(i);return n=Ul(n),null===e.context?e.context=n:e.pendingContext=n,(e=Fa(a,o)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Pa(i,e,o))&&(rl(t,i,o,a),Ma(t,i,o)),o}function Wl(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Hl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xl(t,e){Hl(t,e),(t=t.alternate)&&Hl(t,e)}Tu=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ii.current)bs=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bs=!1,function(t,e,n){switch(e.tag){case 3:Cs(e),fa();break;case 5:ao(e);break;case 1:Oi(e.type)&&Ri(e);break;case 4:ro(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),e.flags|=128,null):0!==(n&e.child.childLanes)?zs(t,e,n):(Ei(so,1&so.current),null!==(t=Ws(t,e,n))?t.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Bs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return e.lanes=0,As(t,e,n)}return Ws(t,e,n)}(t,e,n);bs=0!==(131072&t.flags)}else bs=!1,ia&&0!==(1048576&e.flags)&&Zi(e,Hi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gs(t,e),t=e.pendingProps;var i=Di(e,Li.current);Ta(e,n),i=To(null,e,r,t,i,n);var o=Ao();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(r)?(o=!0,Ri(e)):o=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(e),i.updater=Ka,e.stateNode=i,i._reactInternals=e,Wa(e,r,t,n),e=Is(null,e,r,!0,o,n)):(e.tag=0,ia&&o&&ta(e),ws(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Gs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Fl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===L)return 11;if(t===D)return 14}return 2}(r),t=va(r,t),i){case 0:e=_s(null,e,r,t,n);break t;case 1:e=Ls(null,e,r,t,n);break t;case 11:e=ks(null,e,r,t,n);break t;case 14:e=Ss(null,e,r,va(r.type,t),n);break t}throw Error(a(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,_s(t,e,r,i=e.elementType===r?i:va(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ls(t,e,r,i=e.elementType===r?i:va(r,i),n);case 3:t:{if(Cs(e),null===t)throw Error(a(387));r=e.pendingProps,i=(o=e.memoizedState).element,Oa(t,e),Na(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Ds(t,e,r,n,i=cs(Error(a(423)),e));break t}if(r!==i){e=Ds(t,e,r,n,i=cs(Error(a(424)),e));break t}for(ra=li(e.stateNode.containerInfo.firstChild),na=e,ia=!0,aa=null,n=Ja(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){e=Ws(t,e,n);break t}ws(t,e,r,n)}e=e.child}return e;case 5:return ao(e),null===t&&la(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(e.flags|=32),Es(t,e),ws(t,e,s,n),e.child;case 6:return null===t&&la(e),null;case 13:return zs(t,e,n);case 4:return ro(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=$a(e,null,r,n):ws(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ks(t,e,r,i=e.elementType===r?i:va(r,i),n);case 7:return ws(t,e,e.pendingProps,n),e.child;case 8:case 12:return ws(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ei(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){e=Ws(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Fa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sa(o.return,n,e),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Sa(s,n,e),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ta(e,n),r=r(i=Aa(i)),e.flags|=1,ws(t,e,r,n),e.child;case 14:return i=va(r=e.type,e.pendingProps),Ss(t,e,r,i=va(r.type,i),n);case 15:return Ts(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:va(r,i),Gs(t,e),e.tag=1,Oi(r)?(t=!0,Ri(e)):t=!1,Ta(e,n),Ba(e,r,i),Wa(e,r,i,n),Is(null,e,r,!0,t,n);case 19:return Bs(t,e,n);case 22:return As(t,e,n)}throw Error(a(156,e.tag))};var Yl="function"===typeof reportError?reportError:function(t){console.error(t)};function ql(t){this._internalRoot=t}function $l(t){this._internalRoot=t}function Jl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Ql(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zl(){}function tc(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var t=Wl(o);s.call(t)}}Gl(e,o,t,i)}else o=function(t,e,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var t=Wl(o);a.call(t)}}var o=Bl(e,r,t,0,null,!1,0,"",Zl);return t._reactRootContainer=o,t[di]=o.current,Ur(8===t.nodeType?t.parentNode:t),hl(),o}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Wl(u);s.call(t)}}var u=Kl(t,0,!1,null,0,!1,0,"",Zl);return t._reactRootContainer=u,t[di]=u.current,Ur(8===t.nodeType?t.parentNode:t),hl((function(){Gl(e,u,n,r)})),u}(n,e,t,i,r);return Wl(o)}$l.prototype.render=ql.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(a(409));Gl(t,e,null,null)},$l.prototype.unmount=ql.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hl((function(){Gl(null,t,null,null)})),e[di]=null}},$l.prototype.unstable_scheduleHydration=function(t){if(t){var e=Te();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fe.length&&0!==e&&e<Fe[n].priority;n++);Fe.splice(n,0,t),0===n&&Ne(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ge(e,1|n),il(e,Jt()),0===(6&Iu)&&(Bu=Jt()+500,Ui()))}break;case 13:hl((function(){var e=Ia(t,1);if(null!==e){var n=el();rl(e,t,1,n)}})),Xl(t,1)}},ke=function(t){if(13===t.tag){var e=Ia(t,134217728);if(null!==e)rl(e,t,134217728,el());Xl(t,134217728)}},Se=function(t){if(13===t.tag){var e=nl(t),n=Ia(t,e);if(null!==n)rl(n,t,e,el());Xl(t,e)}},Te=function(){return xe},Ae=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}},kt=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wi(r);if(!i)throw Error(a(90));X(r),Q(r,i)}}}break;case"textarea":at(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Lt=cl,It=hl;var ec={usingClientEntryPoint:!1,Events:[xi,bi,wi,Et,_t,cl]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Wt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(rc),ae=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(e))throw Error(a(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Jl(t))throw Error(a(299));var n=!1,r="",i=Yl;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Kl(t,1,!1,null,0,n,0,r,i),t[di]=e.current,Ur(8===t.nodeType?t.parentNode:t),new ql(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return t=null===(t=Wt(e))?null:t.stateNode},e.flushSync=function(t){return hl(t)},e.hydrate=function(t,e,n){if(!Ql(e))throw Error(a(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Jl(t))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Bl(e,null,t,1,null!=n?n:null,i,0,o,s),t[di]=e.current,Ur(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $l(e)},e.render=function(t,e,n){if(!Ql(e))throw Error(a(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ql(t))throw Error(a(40));return!!t._reactRootContainer&&(hl((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[di]=null}))})),!0)},e.unstable_batchedUpdates=cl,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ql(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return tc(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:function(t,e,n){"use strict";var r=n(4164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},9321:function(t,e,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)o.call(e,r)&&!u.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===a[r]&&(a[r]=e[r]);return{$$typeof:i,type:t,key:l,ref:c,props:a,_owner:s.current}}e.jsx=l,e.jsxs=l},9117:function(t,e){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||d}function g(){}function x(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||d}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},g.prototype=y.prototype;var b=x.prototype=new g;b.constructor=x,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,r){var i,a={},o=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)k.call(e,i)&&!T.hasOwnProperty(i)&&(a[i]=e[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(i in u=t.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:t,key:o,ref:s,props:a,_owner:S.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var _=/\/+/g;function L(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function I(t,e,i,a,o){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=t),t=""===a?"."+L(u,0):a,w(o)?(i="",null!=t&&(i=t.replace(_,"$&/")+"/"),I(o,e,i,"",(function(t){return t}))):null!=o&&(E(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+t)),e.push(o)),1;if(u=0,a=""===a?".":a+":",w(t))for(var l=0;l<t.length;l++){var c=a+L(s=t[l],l);u+=I(s,e,i,c,o)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),l=0;!(s=t.next()).done;)u+=I(s=s.value,e,i,c=a+L(s,l++),o);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function C(t,e,n){if(null==t)return t;var r=[],i=0;return I(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function D(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},F={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:F,ReactCurrentOwner:S};e.Children={map:C,forEach:function(t,e,n){C(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return C(t,(function(){e++})),e},toArray:function(t){return C(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=o,e.PureComponent=x,e.StrictMode=a,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),a=t.key,o=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,s=S.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)k.call(e,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==u?u[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:t.type,key:a,ref:o,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:u,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:D}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=F.transition;F.transition={};try{t()}finally{F.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,n){return O.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,n){return O.current.useReducer(t,e,n)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return O.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return O.current.useTransition()},e.version="18.2.0"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(9321)},6813:function(t,e){"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<a(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=t[s],l=s+1,c=t[l];if(0>a(u,n))l<i&&0>a(c,u)?(t[r]=c,t[l]=n,r=l):(t[r]=u,t[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break t;t[r]=c,t[l]=n,r=l}}}return e}function a(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,p=null,f=3,d=!1,m=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(l,e)}e=r(c)}}function w(t){if(v=!1,b(t),!m)if(null!==r(l))m=!0,F(k);else{var e=r(c);null!==e&&P(w,e.startTime-t)}}function k(t,n){m=!1,v&&(v=!1,g(E),E=-1),d=!0;var a=f;try{for(b(n),p=r(l);null!==p&&(!(p.expirationTime>n)||t&&!I());){var o=p.callback;if("function"===typeof o){p.callback=null,f=p.priorityLevel;var s=o(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?p.callback=s:p===r(l)&&i(l),b(n)}else i(l);p=r(l)}if(null!==p)var u=!0;else{var h=r(c);null!==h&&P(w,h.startTime-n),u=!1}return u}finally{p=null,f=a,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,A=null,E=-1,_=5,L=-1;function I(){return!(e.unstable_now()-L<_)}function C(){if(null!==A){var t=e.unstable_now();L=t;var n=!0;try{n=A(!0,t)}finally{n?S():(T=!1,A=null)}}else T=!1}if("function"===typeof x)S=function(){x(C)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=C,S=function(){O.postMessage(null)}}else S=function(){y(C,0)};function F(t){A=t,T||(T=!0,S())}function P(t,n){E=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||d||(m=!0,F(k))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,a){var o=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(t.sortIndex=a,n(c,t),null===r(l)&&t===r(c)&&(v?(g(E),E=-1):v=!0,P(w,a-o))):(t.sortIndex=s,n(l,t),m||d||(m=!0,F(k))),t},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},5932:function(t,e,n){"use strict";t.exports=n.p+"static/media/IMG_8098.5329f66f3d45a0435f43.JPG"},9906:function(t,e,n){"use strict";t.exports=n.p+"static/media/IVAN0476.8adf0de837f0e91e4e49.JPG"},6829:function(t,e,n){"use strict";t.exports=n.p+"static/media/IVAN0739.b074b37f584c0811b6fc.JPG"},1149:function(t,e,n){"use strict";t.exports=n.p+"static/media/IVAN1103.8511344a1033746ab256.JPG"},3819:function(t,e,n){"use strict";t.exports=n.p+"static/media/Advertisement_Image1.227f4f39a5109f3300b7.jpeg"},4615:function(t,e,n){"use strict";t.exports=n.p+"static/media/Ambience 1.436ee10422726acf0bf9.jpg"},4831:function(t,e,n){"use strict";t.exports=n.p+"static/media/Ambience 3.667d52ae4693b42f2e9c.jpg"},7306:function(t,e,n){"use strict";t.exports=n.p+"static/media/Ambience 6.47deee594146c6bb11ad.jpg"},1378:function(t,e,n){"use strict";t.exports=n.p+"static/media/HeroImage.be88f98fff3b6ee8cf6d.jpeg"},4033:function(t,e,n){"use strict";t.exports=n.p+"static/media/Mee Tjap Hokee logo.ce02966a5b6da35afa1e.png"},3028:function(t,e,n){"use strict";t.exports=n.p+"static/media/PromotionImage.241f56457e2e1c51df68.jpeg"},6279:function(t,e,n){"use strict";t.exports=n.p+"static/media/_DSC0091.8fd48134b49bc95a1a07.jpg"},7223:function(t,e,n){"use strict";t.exports=n.p+"static/media/_DSC0148.464ac5d840e3b0e6fc3e.jpg"},6890:function(t,e,n){"use strict";t.exports=n.p+"static/media/_DSC0196.0697a90487bf808ed0cb.jpg"},1196:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic1.47b5424d6cbf9c130fe6.jpeg"},6831:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic10.60f3b9554221fef85535.jpeg"},1939:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic11.14d2b3f8c300c7e5f673.jpeg"},4318:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic3.054b924645bfbce6068d.jpeg"},2017:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic4.622ac6d844d8db5ddaa3.jpeg"},7238:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic6.077fcf3fe6fe2bc88693.jpeg"},4821:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic7.7e75022095067a140989.jpeg"},9426:function(t,e,n){"use strict";t.exports=n.p+"static/media/pic8.3b29e6e7e0decee36c1f.jpeg"},5230:function(t,e,n){"use strict";t.exports=n.p+"static/media/placeholder.0b183c048cf0a7a3456b.jpg"},3119:function(t,e,n){"use strict";t.exports=n.p+"static/media/Soulfit-Logo.021633808a7f335defa8.png"},3897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},5372:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3405:function(t,e,n){var r=n(3897);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6115:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},7156:function(t){function e(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=t.apply(n,r);function s(t){e(o,i,a,s,u,"next",t)}function u(t){e(o,i,a,s,u,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},6690:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9728:function(t,e,n){var r=n(4062);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},6389:function(t,e,n){var r=n(3808),i=n(9617),a=n(4993);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},8416:function(t,e,n){var r=n(4062);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},1588:function(t,e,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},3808:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},1655:function(t,e,n){var r=n(6015);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},9617:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8872:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},2218:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2122:function(t,e,n){var r=n(8416);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},t.exports.__esModule=!0,t.exports.default=t.exports},4993:function(t,e,n){var r=n(8698).default,i=n(6115);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},7061:function(t,e,n){var r=n(8698).default;function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(D){h=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:T(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=p;var d={};function m(){}function v(){}function y(){}var g={};h(g,u,(function(){return this}));var x=Object.getPrototypeOf,b=x&&x(x(I([])));b&&b!==n&&a.call(b,u)&&(g=b);var w=y.prototype=m.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,s,u){var l=f(t[i],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==r(h)&&a.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}})}function T(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=A(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function A(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=h(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(S.prototype),h(S.prototype,l,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(p(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(w),h(w,c,"Generator"),h(w,u,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},6015:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7424:function(t,e,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},1753:function(t,e,n){var r=n(3808);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);t.exports=function(t){return r(t)||i(t)||a(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},5036:function(t,e,n){var r=n(8698).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4062:function(t,e,n){var r=n(8698).default,i=n(5036);t.exports=function(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},8698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6116:function(t,e,n){var r=n(3897);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){o[t]=function(){return r[t]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/webletter-to-miley/",function(){"use strict";var t=n(2791),e=n.t(t,2),r=n(1250);function i(t){if(Array.isArray(t))return t}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){return i(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(t,e)||o(t,e)||s()}n(1851);var l=n(184);var c;function h(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function p(t){return function(t){if(Array.isArray(t))return a(t)}(t)||h(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function y(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function x(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){var e=w();return function(){var n,r=b(t);if(e){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}(this,n)}}function T(t,e,n){return T=w()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&g(i,n.prototype),i},T.apply(null,arguments)}function A(t){var e="function"===typeof Map?new Map:void 0;return A=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return T(t,arguments,b(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,t)},A(t)}function E(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function _(){return _=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(c||(c={}));var L,I="popstate";function C(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function D(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function O(t,e){return{usr:t.state,key:t.key,idx:e}}function F(t,e,n,r){return void 0===n&&(n=null),_({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?M(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function P(t){var e=t.pathname,n=void 0===e?"/":e,r=t.search,i=void 0===r?"":r,a=t.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function R(t,e,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,l=o.history,h=c.Pop,p=null,f=d();function d(){return(l.state||{idx:null}).idx}function m(){h=c.Pop;var t=d(),e=null==t?null:t-f;f=t,p&&p({action:h,location:y.location,delta:e})}function v(t){var e="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof t?t:P(t);return C(e,"No window.location.(origin|href) available to create URL for href: "+(n=n.replace(/ $/,"%20"))),new URL(n,e)}null==f&&(f=0,l.replaceState(_({},l.state,{idx:f}),""));var y={get action(){return h},get location(){return t(o,l)},listen:function(t){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(I,m),p=t,function(){o.removeEventListener(I,m),p=null}},createHref:function(t){return e(o,t)},createURL:v,encodeLocation:function(t){var e=v(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){h=c.Push;var r=F(y.location,t,e);n&&n(r,t);var i=O(r,f=d()+1),a=y.createHref(r);try{l.pushState(i,"",a)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;o.location.assign(a)}u&&p&&p({action:h,location:y.location,delta:1})},replace:function(t,e){h=c.Replace;var r=F(y.location,t,e);n&&n(r,t);var i=O(r,f=d()),a=y.createHref(r);l.replaceState(i,"",a),u&&p&&p({action:h,location:y.location,delta:0})},go:function(t){return l.go(t)}};return y}!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(L||(L={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function N(t,e,n){void 0===n&&(n="/");var r=J(("string"===typeof e?M(e):e).pathname||"/",n);if(null==r)return null;var i=z(t);!function(t){t.sort((function(t,e){return t.score!==e.score?e.score-t.score:function(t,e){var n=t.length===e.length&&t.slice(0,-1).every((function(t,n){return t===e[n]}));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((function(t){return t.childrenIndex})),e.routesMeta.map((function(t){return t.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o){var s=$(r);a=Y(i[o],s)}return a}function z(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(t,i,a){var o={relativePath:void 0===a?t.path||"":a,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};o.relativePath.startsWith("/")&&(C(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=Q([r,o.relativePath]),u=n.concat(o);t.children&&t.children.length>0&&(C(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),z(t.children,e,u,s)),(null!=t.path||t.index)&&e.push({path:s,score:X(s,t.index),routesMeta:u})};return t.forEach((function(t,e){var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?")){var r,a=E(V(t.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(t,e,o)}}catch(s){a.e(s)}finally{a.f()}}else i(t,e)})),e}function V(t){var e=t.split("/");if(0===e.length)return[];var n,r=i(n=e)||h(n)||o(n)||s(),a=r[0],u=r.slice(1),l=a.endsWith("?"),c=a.replace(/\?$/,"");if(0===u.length)return l?[c,""]:[c];var f=V(u.join("/")),d=[];return d.push.apply(d,p(f.map((function(t){return""===t?c:[c,t].join("/")})))),l&&d.push.apply(d,p(f)),d.map((function(e){return t.startsWith("/")&&""===e?"/":e}))}var j=/^:[\w-]+$/,K=3,U=2,B=1,G=10,W=-2,H=function(t){return"*"===t};function X(t,e){var n=t.split("/"),r=n.length;return n.some(H)&&(r+=W),e&&(r+=U),n.filter((function(t){return!H(t)})).reduce((function(t,e){return t+(j.test(e)?K:""===e?B:G)}),r)}function Y(t,e){for(var n=t.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?e:e.slice(i.length)||"/",c=q({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:Q([i,c.pathname]),pathnameBase:Z(Q([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=Q([i,c.pathnameBase]))}return a}function q(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});var n=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);D("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');var r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(function(t,e,n){return r.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));t.endsWith("*")?(r.push({paramName:"*"}),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,e?void 0:"i");return[a,r]}(t.path,t.caseSensitive,t.end),r=u(n,2),i=r[0],a=r[1],o=e.match(i);if(!o)return null;var s=o[0],l=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(t,e,n){var r=e.paramName,i=e.isOptional;if("*"===r){var a=c[n]||"";l=s.slice(0,s.length-a.length).replace(/(.)\/+$/,"$1")}var o=c[n];return t[r]=i&&!o?void 0:(o||"").replace(/%2F/g,"/"),t}),{});return{params:h,pathname:s,pathnameBase:l,pattern:t}}function $(t){try{return t.split("/").map((function(t){return decodeURIComponent(t).replace(/\//g,"%2F")})).join("/")}catch(e){return D(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function J(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;var n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}var Q=function(t){return t.join("/").replace(/\/\/+/g,"/")},Z=function(t){return t.replace(/\/+$/,"").replace(/^\/*/,"/")},tt=function(t){x(n,t);var e=S(n);function n(){return f(this,n),e.apply(this,arguments)}return y(n)}(A(Error));function et(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}var nt=["post","put","patch","delete"],rt=(new Set(nt),["get"].concat(nt));new Set(rt),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function it(){return it=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},it.apply(this,arguments)}var at=t.createContext(null);var ot=t.createContext(null);var st=t.createContext(null);var ut=t.createContext(null);var lt=t.createContext(null);var ct=t.createContext({outlet:null,matches:[],isDataRoute:!1});var ht=t.createContext(null);function pt(){return null!=t.useContext(lt)}function ft(){return pt()||C(!1),t.useContext(lt).location}function dt(e,n,r,i){pt()||C(!1);var a,o=t.useContext(ut).navigator,s=t.useContext(ct).matches,u=s[s.length-1],l=u?u.params:{},h=(u&&u.pathname,u?u.pathnameBase:"/"),p=(u&&u.route,ft());if(n){var f,d="string"===typeof n?M(n):n;"/"===h||(null==(f=d.pathname)?void 0:f.startsWith(h))||C(!1),a=d}else a=p;var m=a.pathname||"/",v=m;if("/"!==h){var y=h.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}var g=N(e,{pathname:v});var x=xt(g&&g.map((function(t){return Object.assign({},t,{params:Object.assign({},l,t.params),pathname:Q([h,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?h:Q([h,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])})})),s,r,i);return n&&x?t.createElement(lt.Provider,{value:{location:it({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:c.Pop}},x):x}function mt(){var e=function(){var e,n=t.useContext(ht),r=wt(bt.UseRouteError),i=kt(bt.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=et(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var vt=t.createElement(mt,null),yt=function(e){x(r,e);var n=S(r);function r(t){var e;return f(this,r),(e=n.call(this,t)).state={location:t.location,revalidation:t.revalidation,error:t.error},e}return y(r,[{key:"componentDidCatch",value:function(t,e){console.error("React Router caught the following error during render",t,e)}},{key:"render",value:function(){return void 0!==this.state.error?t.createElement(ct.Provider,{value:this.props.routeContext},t.createElement(ht.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return{error:t}}},{key:"getDerivedStateFromProps",value:function(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}}]),r}(t.Component);function gt(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(at);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(ct.Provider,{value:n},i)}function xt(e,n,r,i){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}var s=e,u=null==(a=r)?void 0:a.errors;if(null!=u){var l=s.findIndex((function(t){return t.route.id&&(null==u?void 0:u[t.route.id])}));l>=0||C(!1),s=s.slice(0,Math.min(s.length,l+1))}var c=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(var p=0;p<s.length;p++){var f=s[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=p),f.route.id){var d=r,m=d.loaderData,v=d.errors,y=f.route.loader&&void 0===m[f.route.id]&&(!v||void 0===v[f.route.id]);if(f.route.lazy||y){c=!0,s=h>=0?s.slice(0,h+1):[s[0]];break}}}return s.reduceRight((function(e,i,a){var o,l=!1,p=null,f=null;r&&(o=u&&i.route.id?u[i.route.id]:void 0,p=i.route.errorElement||vt,c&&(h<0&&0===a?(!function(t,e,n){e||St[t]||(St[t]=!0)}("route-fallback",!1),l=!0,f=null):h===a&&(l=!0,f=i.route.hydrateFallbackElement||null)));var d=n.concat(s.slice(0,a+1)),m=function(){var n;return n=o?p:l?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(gt,{match:i,routeContext:{outlet:e,matches:d,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(yt,{location:r.location,revalidation:r.revalidation,component:p,error:o,children:m(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):m()}),null)}var bt=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bt||{});function wt(e){var n=t.useContext(ot);return n||C(!1),n}function kt(e){var n=function(e){var n=t.useContext(ct);return n||C(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||C(!1),r.route.id}var St={};e.startTransition;function Tt(t){C(!1)}function At(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?c.Pop:s,l=e.navigator,h=e.static,p=void 0!==h&&h,f=e.future;pt()&&C(!1);var d=r.replace(/^\/*/,"/"),m=t.useMemo((function(){return{basename:d,navigator:l,static:p,future:it({v7_relativeSplatPath:!1},f)}}),[d,f,l,p]);"string"===typeof o&&(o=M(o));var v=o,y=v.pathname,g=void 0===y?"/":y,x=v.search,b=void 0===x?"":x,w=v.hash,k=void 0===w?"":w,S=v.state,T=void 0===S?null:S,A=v.key,E=void 0===A?"default":A,_=t.useMemo((function(){var t=J(g,d);return null==t?null:{location:{pathname:t,search:b,hash:k,state:T,key:E},navigationType:u}}),[d,g,b,k,T,E,u]);return null==_?null:t.createElement(ut.Provider,{value:m},t.createElement(lt.Provider,{children:a,value:_}))}function Et(t){var e=t.children,n=t.location;return dt(It(e),n)}var _t=function(t){return t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error",t}(_t||{}),Lt=new Promise((function(){}));t.Component;function It(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(p(n),[i]);if(e.type!==t.Fragment){e.type!==Tt&&C(!1),e.props.index&&e.props.children&&C(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=It(e.props.children,a)),r.push(o)}else r.push.apply(r,It(e.props.children,a))}})),r}var Ct=n(4164),Dt=n.t(Ct,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(zp){}new Map;var Ot=e.startTransition;Dt.flushSync,e.useId;function Ft(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,s=t.useRef();null==s.current&&(s.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),R((function(t,e){var n=t.location;return F("",{pathname:n.pathname,search:n.search,hash:n.hash},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:P(e)}),null,n)));var l=s.current,c=u(t.useState({action:l.action,location:l.location}),2),h=c[0],p=c[1],f=(a||{}).v7_startTransition,d=t.useCallback((function(t){f&&Ot?Ot((function(){return p(t)})):p(t)}),[p,f]);return t.useLayoutEffect((function(){return l.listen(d)}),[l,d]),t.createElement(At,{basename:r,children:i,location:h.location,navigationType:h.action,navigator:l,future:a})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Pt,Mt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Pt||(Pt={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(Mt||(Mt={}));function Rt(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){Rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vt=(0,t.createContext)({transformPagePoint:function(t){return t},isStatic:!1,reducedMotion:"never"}),jt=(0,t.createContext)({}),Kt=(0,t.createContext)(null),Ut="undefined"!==typeof document,Bt=Ut?t.useLayoutEffect:t.useEffect,Gt=(0,t.createContext)({strict:!1}),Wt=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},Ht="data-"+Wt("framerAppearId"),Xt=!1,Yt=!1,qt=function(){function t(){f(this,t),this.order=[],this.scheduled=new Set}return y(t,[{key:"add",value:function(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}},{key:"remove",value:function(t){var e=this.order.indexOf(t);-1!==e&&(this.order.splice(e,1),this.scheduled.delete(t))}},{key:"clear",value:function(){this.order.length=0,this.scheduled.clear()}}]),t}();var $t=["read","resolveKeyframes","update","preRender","render","postRender"];function Jt(t,e){var n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},a=$t.reduce((function(t,e){return t[e]=function(t){var e=new qt,n=new qt,r=0,i=!1,a=!1,o=new WeakSet,s={schedule:function(t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=a?e:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(t),s.add(t)&&a&&i&&(r=e.order.length),t},cancel:function(t){n.remove(t),o.delete(t)},process:function(u){if(i)a=!0;else{i=!0;var l=[n,e];if(e=l[0],(n=l[1]).clear(),r=e.order.length)for(var c=0;c<r;c++){var h=e.order[c];o.has(h)&&(s.schedule(h),t()),h(u)}i=!1,a&&(a=!1,s.process(u))}}};return s}((function(){return n=!0})),t}),{}),o=function(t){a[t].process(i)},s=function a(){var s=Yt?i.timestamp:performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,$t.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},u=$t.reduce((function(e,o){var u=a[o];return e[o]=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||t(s)),u.schedule(e,a,o)},e}),{});return{schedule:u,cancel:function(t){return $t.forEach((function(e){return a[e].cancel(t)}))},state:i,steps:a}}var Qt=Jt(queueMicrotask,!1),Zt=Qt.schedule;Qt.cancel;function te(t){return t&&"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function ee(t){return"string"===typeof t||Array.isArray(t)}function ne(t){return null!==t&&"object"===typeof t&&"function"===typeof t.start}var re=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ie=["initial"].concat(re);function ae(t){return ne(t.animate)||ie.some((function(e){return ee(t[e])}))}function oe(t){return Boolean(ae(t)||t.variants)}function se(e){var n=function(t,e){if(ae(t)){var n=t.initial,r=t.animate;return{initial:!1===n||ee(n)?n:void 0,animate:ee(r)?r:void 0}}return!1!==t.inherit?e:{}}(e,(0,t.useContext)(jt)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[ue(r),ue(i)])}function ue(t){return Array.isArray(t)?t.join(" "):t}var le={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ce={},he=function(t){ce[t]={isEnabled:function(e){return le[t].some((function(t){return!!e[t]}))}}};for(var pe in le)he(pe);var fe=(0,t.createContext)({}),de=(0,t.createContext)({}),me=Symbol.for("motionComponentSymbol");function ve(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.useRender,a=e.useVisualState,o=e.Component;n&&function(t){for(var e in t)ce[e]=zt(zt({},ce[e]),t[e])}(n);var s=(0,t.forwardRef)((function(e,s){var u,l=zt(zt(zt({},(0,t.useContext)(Vt)),e),{},{layoutId:ye(e)}),c=l.isStatic,h=se(e),p=a(e,c);if(!c&&Ut){h.visualElement=function(e,n,r,i){var a=(0,t.useContext)(jt).visualElement,o=(0,t.useContext)(Gt),s=(0,t.useContext)(Kt),u=(0,t.useContext)(Vt).reducedMotion,l=(0,t.useRef)();i=i||o.renderer,!l.current&&i&&(l.current=i(e,{visualState:n,parent:a,props:r,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:u}));var c=l.current;(0,t.useInsertionEffect)((function(){c&&c.update(r,s)}));var h=(0,t.useRef)(Boolean(r[Ht]&&!window.HandoffComplete));return Bt((function(){c&&(Zt.postRender(c.render),h.current&&c.animationState&&c.animationState.animateChanges())})),(0,t.useEffect)((function(){c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))})),c}(o,p,l,r);var f=(0,t.useContext)(de),d=(0,t.useContext)(Gt).strict;h.visualElement&&(u=h.visualElement.loadFeatures(l,d,n,f))}return t.createElement(jt.Provider,{value:h},u&&h.visualElement?t.createElement(u,zt({visualElement:h.visualElement},l)):null,i(o,e,function(e,n,r){return(0,t.useCallback)((function(t){t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):te(r)&&(r.current=t))}),[n])}(p,h.visualElement,s),p,c,h.visualElement))}));return s[me]=o,s}function ye(e){var n=e.layoutId,r=(0,t.useContext)(fe).id;return r&&void 0!==n?r+"-"+n:n}function ge(t){function e(e){return ve(t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return e;var n=new Map;return new Proxy(e,{get:function(t,r){return n.has(r)||n.set(r,e(r)),n.get(r)}})}var xe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function be(t){return"string"===typeof t&&!t.includes("-")&&!!(xe.indexOf(t)>-1||/[A-Z]/.test(t))}var we={};var ke=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Se=new Set(ke);function Te(t,e){var n=e.layout,r=e.layoutId;return Se.has(t)||t.startsWith("origin")||(n||void 0!==r)&&(!!we[t]||"opacity"===t)}var Ae=function(t){return Boolean(t&&t.getVelocity)},Ee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_e=ke.length;var Le=function(t){return function(e){return"string"===typeof e&&e.startsWith(t)}},Ie=Le("--"),Ce=Le("var(--"),De=function(t){return!!Ce(t)&&Oe.test(t.split("/*")[0].trim())},Oe=/var\(\x2D\x2D(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,Fe=function(t,e){return e&&"number"===typeof t?e.transform(t):t},Pe=function(t,e,n){return n>e?e:n<t?t:n},Me={test:function(t){return"number"===typeof t},parse:parseFloat,transform:function(t){return t}},Re=zt(zt({},Me),{},{transform:function(t){return Pe(0,1,t)}}),Ne=zt(zt({},Me),{},{default:1}),ze=function(t){return Math.round(1e5*t)/1e5},Ve=/\x2D?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g,je=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:\x2D?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}\x2D?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi,Ke=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:\x2D?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}\x2D?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i;function Ue(t){return"string"===typeof t}var Be=function(t){return{test:function(e){return Ue(e)&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return"".concat(e).concat(t)}}},Ge=Be("deg"),We=Be("%"),He=Be("px"),Xe=Be("vh"),Ye=Be("vw"),qe=zt(zt({},We),{},{parse:function(t){return We.parse(t)/100},transform:function(t){return We.transform(100*t)}}),$e=zt(zt({},Me),{},{transform:Math.round}),Je={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,size:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,rotate:Ge,rotateX:Ge,rotateY:Ge,rotateZ:Ge,scale:Ne,scaleX:Ne,scaleY:Ne,scaleZ:Ne,skew:Ge,skewX:Ge,skewY:Ge,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:Re,originX:qe,originY:qe,originZ:He,zIndex:$e,backgroundPositionX:He,backgroundPositionY:He,fillOpacity:Re,strokeOpacity:Re,numOctaves:$e};function Qe(t,e,n,r){var i=t.style,a=t.vars,o=t.transform,s=t.transformOrigin,u=!1,l=!1,c=!0;for(var h in e){var p=e[h];if(Ie(h))a[h]=p;else{var f=Je[h],d=Fe(p,f);if(Se.has(h)){if(u=!0,o[h]=d,!c)continue;p!==(f.default||0)&&(c=!1)}else h.startsWith("origin")?(l=!0,s[h]=d):i[h]=d}}if(e.transform||(u||r?i.transform=function(t,e,n,r){for(var i=e.enableHardwareAcceleration,a=void 0===i||i,o=e.allowTransformNone,s=void 0===o||o,u="",l=0;l<_e;l++){var c=ke[l];if(void 0!==t[c]){var h=Ee[c]||c;u+="".concat(h,"(").concat(t[c],") ")}}return a&&!t.z&&(u+="translateZ(0)"),u=u.trim(),r?u=r(t,n?"":u):s&&n&&(u="none"),u}(t.transform,n,c,r):i.transform&&(i.transform="none")),l){var m=s.originX,v=void 0===m?"50%":m,y=s.originY,g=void 0===y?"50%":y,x=s.originZ,b=void 0===x?0:x;i.transformOrigin="".concat(v," ").concat(g," ").concat(b)}}var Ze=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function tn(t,e,n){for(var r in e)Ae(e[r])||Te(r,n)||(t[r]=e[r])}function en(e,n,r){var i={};return tn(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var t=Ze();return Qe(t,n,{enableHardwareAcceleration:!r},i),Object.assign({},t.vars,t.style)}),[n])}(e,n,r)),i}function nn(t,e,n){var r={},i=en(t,e,n);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}var rn=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function an(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rn.has(t)}var on,sn=function(t){return!an(t)};try{(on=require("@emotion/is-prop-valid").default)&&(sn=function(t){return t.startsWith("on")?!an(t):on(t)})}catch(Vp){}function un(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ln(t,e,n){return"string"===typeof t?t:He.transform(e+n*t)}var cn={offset:"stroke-dashoffset",array:"stroke-dasharray"},hn={offset:"strokeDashoffset",array:"strokeDasharray"};var pn=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function fn(t,e,n,r,i){var a=e.attrX,o=e.attrY,s=e.attrScale,u=e.originX,l=e.originY,c=e.pathLength,h=e.pathSpacing,p=void 0===h?1:h,f=e.pathOffset,d=void 0===f?0:f;if(Qe(t,un(e,pn),n,i),r)t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);else{t.attrs=t.style,t.style={};var m=t.attrs,v=t.style,y=t.dimensions;m.transform&&(y&&(v.transform=m.transform),delete m.transform),y&&(void 0!==u||void 0!==l||v.transform)&&(v.transformOrigin=function(t,e,n){var r=ln(e,t.x,t.width),i=ln(n,t.y,t.height);return"".concat(r," ").concat(i)}(y,void 0!==u?u:.5,void 0!==l?l:.5)),void 0!==a&&(m.x=a),void 0!==o&&(m.y=o),void 0!==s&&(m.scale=s),void 0!==c&&function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t.pathLength=1;var a=i?cn:hn;t[a.offset]=He.transform(-r);var o=He.transform(e),s=He.transform(n);t[a.array]="".concat(o," ").concat(s)}(m,c,p,d,!1)}}var dn=function(){return zt(zt({},Ze()),{},{attrs:{}})},mn=function(t){return"string"===typeof t&&"svg"===t.toLowerCase()};function vn(e,n,r,i){var a=(0,t.useMemo)((function(){var t=dn();return fn(t,n,{enableHardwareAcceleration:!1},mn(i),e.transformTemplate),zt(zt({},t.attrs),{},{style:zt({},t.style)})}),[n]);if(e.style){var o={};tn(o,e.style,e),a.style=zt(zt({},o),a.style)}return a}function yn(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n,r,i,a,o){var s=a.latestValues,u=(be(n)?vn:nn)(r,s,o,n),l=function(t,e,n){var r={};for(var i in t)"values"===i&&"object"===typeof t.values||(sn(i)||!0===n&&an(i)||!e&&!an(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}(r,"string"===typeof n,e),c=n!==t.Fragment?zt(zt(zt({},l),u),{},{ref:i}):{},h=r.children,p=(0,t.useMemo)((function(){return Ae(h)?h.get():h}),[h]);return(0,t.createElement)(n,zt(zt({},c),{},{children:p}))}}function gn(t,e,n,r){var i=e.style,a=e.vars;for(var o in Object.assign(t.style,i,r&&r.getProjectionStyles(n)),a)t.style.setProperty(o,a[o])}var xn=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bn(t,e,n,r){for(var i in gn(t,e,void 0,r),e.attrs)t.setAttribute(xn.has(i)?i:Wt(i),e.attrs[i])}function wn(t,e,n){var r,i=t.style,a={};for(var o in i)(Ae(i[o])||e.style&&Ae(e.style[o])||Te(o,t)||void 0!==(null===(r=null===n||void 0===n?void 0:n.getValue(o))||void 0===r?void 0:r.liveStyle))&&(a[o]=i[o]);return a}function kn(t,e,n){var r=wn(t,e,n);for(var i in t){if(Ae(t[i])||Ae(e[i]))r[-1!==ke.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=t[i]}return r}function Sn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),"string"===typeof e&&(e=t.variants&&t.variants[e]),"function"===typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),e}function Tn(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var An=function(t){return Array.isArray(t)},En=function(t){return Boolean(t&&"object"===typeof t&&t.mix&&t.toValue)},_n=function(t){return An(t)?t[t.length-1]||0:t};function Ln(t){var e=Ae(t)?t.get():t;return En(e)?e.toValue():e}var In=["transitionEnd","transition"];var Cn=function(e){return function(n,r){var i=(0,t.useContext)(jt),a=(0,t.useContext)(Kt),o=function(){return function(t,e,n,r){var i=t.scrapeMotionValuesFromProps,a=t.createRenderState,o=t.onMount,s={latestValues:Dn(e,n,r,i),renderState:a()};return o&&(s.mount=function(t){return o(e,t,s)}),s}(e,n,i,a)};return r?o():Tn(o)}};function Dn(t,e,n,r){var i={},a=r(t,{});for(var o in a)i[o]=Ln(a[o]);var s=t.initial,u=t.animate,l=ae(t),c=oe(t);e&&c&&!l&&!1!==t.inherit&&(void 0===s&&(s=e.initial),void 0===u&&(u=e.animate));var h=!!n&&!1===n.initial,p=(h=h||!1===s)?u:s;p&&"boolean"!==typeof p&&!ne(p)&&(Array.isArray(p)?p:[p]).forEach((function(e){var n=Sn(t,e);if(n){var r=n.transitionEnd,a=(n.transition,un(n,In));for(var o in a){var s=a[o];if(Array.isArray(s))s=s[h?s.length-1:0];null!==s&&(i[o]=s)}for(var u in r)i[u]=r[u]}}));return i}var On=function(t){return t},Fn=Jt("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:On,!0),Pn=Fn.schedule,Mn=Fn.cancel,Rn=Fn.state,Nn=Fn.steps,zn={useVisualState:Cn({scrapeMotionValuesFromProps:kn,createRenderState:dn,onMount:function(t,e,n){var r=n.renderState,i=n.latestValues;Pn.read((function(){try{r.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(zp){r.dimensions={x:0,y:0,width:0,height:0}}})),Pn.render((function(){fn(r,i,{enableHardwareAcceleration:!1},mn(e.tagName),t.transformTemplate),bn(e,r)}))}})},Vn={useVisualState:Cn({scrapeMotionValuesFromProps:wn,createRenderState:Ze})};function jn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n)}}var Kn=function(t){return"mouse"===t.pointerType?"number"!==typeof t.button||t.button<=0:!1!==t.isPrimary};function Un(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:t[e+"X"],y:t[e+"Y"]}}}var Bn=function(t){return function(e){return Kn(e)&&t(e,Un(e))}};function Gn(t,e,n,r){return jn(t,e,Bn(n),r)}var Wn=function(t,e){return function(n){return e(t(n))}},Hn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(Wn)};function Xn(t){var e=null;return function(){return null===e&&(e=t,function(){e=null})}}var Yn=Xn("dragHorizontal"),qn=Xn("dragVertical");function $n(t){var e=!1;if("y"===t)e=qn();else if("x"===t)e=Yn();else{var n=Yn(),r=qn();n&&r?e=function(){n(),r()}:(n&&n(),r&&r())}return e}function Jn(){var t=$n(!0);return!t||(t(),!1)}var Qn=function(){function t(e){f(this,t),this.isMounted=!1,this.node=e}return y(t,[{key:"update",value:function(){}}]),t}();function Zn(t,e){var n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End");return Gn(t.current,n,(function(n,i){if("touch"!==n.pointerType&&!Jn()){var a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&a[r](n,i)}}),{passive:!t.getProps()[r]})}var tr=function(t){x(n,t);var e=S(n);function n(){return f(this,n),e.apply(this,arguments)}return y(n,[{key:"mount",value:function(){this.unmount=Hn(Zn(this.node,!0),Zn(this.node,!1))}},{key:"unmount",value:function(){}}]),n}(Qn),er=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).isActive=!1,t}return y(n,[{key:"onFocus",value:function(){var t=!1;try{t=this.node.current.matches(":focus-visible")}catch(zp){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var t=this;this.unmount=Hn(jn(this.node.current,"focus",(function(){return t.onFocus()})),jn(this.node.current,"blur",(function(){return t.onBlur()})))}},{key:"unmount",value:function(){}}]),n}(Qn),nr=function t(e,n){return!!n&&(e===n||t(e,n.parentElement))};function rr(t,e){if(e){var n=new PointerEvent("pointer"+t);e(n,Un(n))}}var ir=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).removeStartListeners=On,t.removeEndListeners=On,t.removeAccessibleListeners=On,t.startPointerPress=function(e,n){if(!t.isPressing){t.removeEndListeners();var r=t.node.getProps(),i=Gn(window,"pointerup",(function(e,n){if(t.checkPressEnd()){var r=t.node.getProps(),i=r.onTap,a=r.onTapCancel;r.globalTapTarget||nr(t.node.current,e.target)?i&&i(e,n):a&&a(e,n)}}),{passive:!(r.onTap||r.onPointerUp)}),a=Gn(window,"pointercancel",(function(e,n){return t.cancelPress(e,n)}),{passive:!(r.onTapCancel||r.onPointerCancel)});t.removeEndListeners=Hn(i,a),t.startPress(e,n)}},t.startAccessiblePress=function(){var e=jn(t.node.current,"keydown",(function(e){if("Enter"===e.key&&!t.isPressing){t.removeEndListeners(),t.removeEndListeners=jn(t.node.current,"keyup",(function(e){"Enter"===e.key&&t.checkPressEnd()&&rr("up",(function(e,n){var r=t.node.getProps().onTap;r&&r(e,n)}))})),rr("down",(function(e,n){t.startPress(e,n)}))}})),n=jn(t.node.current,"blur",(function(){t.isPressing&&rr("cancel",(function(e,n){return t.cancelPress(e,n)}))}));t.removeAccessibleListeners=Hn(e,n)},t}return y(n,[{key:"startPress",value:function(t,e){this.isPressing=!0;var n=this.node.getProps(),r=n.onTapStart;n.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&r(t,e)}},{key:"checkPressEnd",value:function(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Jn()}},{key:"cancelPress",value:function(t,e){if(this.checkPressEnd()){var n=this.node.getProps().onTapCancel;n&&n(t,e)}}},{key:"mount",value:function(){var t=this.node.getProps(),e=Gn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=jn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Hn(e,n)}},{key:"unmount",value:function(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}]),n}(Qn),ar=["root"],or=new WeakMap,sr=new WeakMap,ur=function(t){var e=or.get(t.target);e&&e(t)},lr=function(t){t.forEach(ur)};function cr(t,e,n){var r=function(t){var e=t.root,n=un(t,ar),r=e||document;sr.has(r)||sr.set(r,{});var i=sr.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(lr,zt({root:e},n))),i[a]}(e);return or.set(t,n),r.observe(t),function(){or.delete(t),r.unobserve(t)}}var hr={some:0,all:1},pr=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).hasEnteredView=!1,t.isInView=!1,t}return y(n,[{key:"startObserver",value:function(){var t=this;this.unmount();var e=this.node.getProps().viewport,n=void 0===e?{}:e,r=n.root,i=n.margin,a=n.amount,o=void 0===a?"some":a,s=n.once,u={root:r?r.current:void 0,rootMargin:i,threshold:"number"===typeof o?o:hr[o]};return cr(this.node.current,u,(function(e){var n=e.isIntersecting;if(t.isInView!==n&&(t.isInView=n,!s||n||!t.hasEnteredView)){n&&(t.hasEnteredView=!0),t.node.animationState&&t.node.animationState.setActive("whileInView",n);var r=t.node.getProps(),i=r.onViewportEnter,a=r.onViewportLeave,o=n?i:a;o&&o(e)}}))}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!==typeof IntersectionObserver){var t=this.node,e=t.props,n=t.prevProps,r=["amount","margin","root"].some(function(t){var e=t.viewport,n=void 0===e?{}:e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.viewport,a=void 0===i?{}:i;return function(t){return n[t]!==a[t]}}(e,n));r&&this.startObserver()}}},{key:"unmount",value:function(){}}]),n}(Qn);var fr={inView:{Feature:pr},tap:{Feature:ir},focus:{Feature:er},hover:{Feature:tr}};function dr(t,e){if(!Array.isArray(e))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function mr(t,e,n){var r=t.getProps();return Sn(r,e,void 0!==n?n:r.custom,function(t){var e={};return t.values.forEach((function(t,n){return e[n]=t.get()})),e}(t),function(t){var e={};return t.values.forEach((function(t,n){return e[n]=t.getVelocity()})),e}(t))}var vr=function(t){return 1e3*t},yr=function(t){return t/1e3},gr={type:"spring",stiffness:500,damping:25,restSpeed:10},xr={type:"keyframes",duration:.8},br={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wr=function(t,e){var n=e.keyframes;return n.length>2?xr:Se.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:gr:br},kr=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Sr(t,e){return t[e]||t.default||t}var Tr,Ar=!1,Er=function(t){return null!==t};function _r(t,e,n){var r=e.repeat,i=e.repeatType,a=void 0===i?"loop":i,o=t.filter(Er),s=r&&"loop"!==a&&r%2===1?0:o.length-1;return s&&void 0!==n?n:o[s]}function Lr(){Tr=void 0}var Ir={now:function(){return void 0===Tr&&Ir.set(Rn.isProcessing||Yt?Rn.timestamp:performance.now()),Tr},set:function(t){Tr=t,queueMicrotask(Lr)}};function Cr(){return Cr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Cr.apply(this,arguments)}var Dr=function(t){return/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(t)};function Or(t){return"number"===typeof t?0===t:null===t||("none"===t||"0"===t||Dr(t))}var Fr=On,Pr=On;var Mr=function(t){return/^\x2D?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(t)},Rr=/^var\(\x2D\x2D(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function Nr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Pr(n<=4,'Max CSS variable fallback depth detected in property "'.concat(t,'". This may indicate a circular fallback dependency.'));var r=function(t){var e=Rr.exec(t);if(!e)return[,];var n=u(e,4),r=n[1],i=n[2],a=n[3];return["--".concat(null!==r&&void 0!==r?r:i),a]}(t),i=u(r,2),a=i[0],o=i[1];if(a){var s=window.getComputedStyle(e).getPropertyValue(a);if(s){var l=s.trim();return Mr(l)?parseFloat(l):l}return De(o)?Nr(o,e,n+1):o}}var zr=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Vr=function(t){return t===Me||t===He},jr=function(t,e){return parseFloat(t.split(", ")[e])},Kr=function(t,e){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);if(a)return jr(a[1],e);var o=i.match(/^matrix\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);return o?jr(o[1],t):0}},Ur=new Set(["x","y","z"]),Br=ke.filter((function(t){return!Ur.has(t)}));function Gr(t){var e=[];return Br.forEach((function(n){var r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e}var Wr={width:function(t,e){var n=t.x,r=e.paddingLeft,i=void 0===r?"0":r,a=e.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(t,e){var n=t.y,r=e.paddingTop,i=void 0===r?"0":r,a=e.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(t,e){var n=e.top;return parseFloat(n)},left:function(t,e){var n=e.left;return parseFloat(n)},bottom:function(t,e){var n=t.y,r=e.top;return parseFloat(r)+(n.max-n.min)},right:function(t,e){var n=t.x,r=e.left;return parseFloat(r)+(n.max-n.min)},x:Kr(4,13),y:Kr(5,14)};Wr.translateX=Wr.x,Wr.translateY=Wr.y;var Hr=function(t){return function(e){return e.test(t)}},Xr=[Me,He,We,Ge,Ye,Xe,{test:function(t){return"auto"===t},parse:function(t){return t}}],Yr=function(t){return Xr.find(Hr(t))},qr=new Set,$r=!1,Jr=!1;function Qr(){if(Jr){var t=Array.from(qr).filter((function(t){return t.needsMeasurement})),e=new Set(t.map((function(t){return t.element}))),n=new Map;e.forEach((function(t){Gr(t).length&&(n.set(t,Gr(t)),t.render())})),t.forEach((function(t){return t.measureInitialState()})),e.forEach((function(t){t.render()})),t.forEach((function(t){return t.measureEndState()})),t.forEach((function(t){void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)}))}Jr=!1,$r=!1,qr.forEach((function(t){return t.complete()})),qr.clear()}function Zr(){qr.forEach((function(t){t.readKeyframes(),t.needsMeasurement&&(Jr=!0)}))}var ti=function(){function t(e,n,r,i,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];f(this,t),this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=p(e),this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}return y(t,[{key:"scheduleResolve",value:function(){this.isScheduled=!0,this.isAsync?(qr.add(this),$r||($r=!0,Pn.read(Zr),Pn.resolveKeyframes(Qr))):(this.readKeyframes(),this.complete())}},{key:"readKeyframes",value:function(){for(var t=this.unresolvedKeyframes,e=this.name,n=this.element,r=this.motionValue,i=0;i<t.length;i++)if(null===t[i])if(0===i){var a=null===r||void 0===r?void 0:r.get(),o=t[t.length-1];if(void 0!==a)t[0]=a;else if(n&&e){var s=n.readValue(e,o);void 0!==s&&null!==s&&(t[0]=s)}void 0===t[0]&&(t[0]=o),r&&void 0===a&&r.set(t[0])}else t[i]=t[i-1]}},{key:"setFinalKeyframe",value:function(){}},{key:"measureInitialState",value:function(){}},{key:"renderEndStyles",value:function(){}},{key:"measureEndState",value:function(){}},{key:"complete",value:function(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),qr.delete(this)}},{key:"cancel",value:function(){this.isComplete||(this.isScheduled=!1,qr.delete(this))}},{key:"resume",value:function(){this.isComplete||this.scheduleResolve()}}]),t}(),ei=function(t,e){return function(n){return Boolean(Ue(n)&&Ke.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e))}},ni=function(t,e,n){return function(r){var i;if(!Ue(r))return r;var a=u(r.match(Ve),4),o=a[0],s=a[1],l=a[2],c=a[3];return Rt(i={},t,parseFloat(o)),Rt(i,e,parseFloat(s)),Rt(i,n,parseFloat(l)),Rt(i,"alpha",void 0!==c?parseFloat(c):1),i}},ri=zt(zt({},Me),{},{transform:function(t){return Math.round(function(t){return Pe(0,255,t)}(t))}}),ii={test:ei("rgb","red"),parse:ni("red","green","blue"),transform:function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha,a=void 0===i?1:i;return"rgba("+ri.transform(e)+", "+ri.transform(n)+", "+ri.transform(r)+", "+ze(Re.transform(a))+")"}};var ai={test:ei("#"),parse:function(t){var e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:ii.transform},oi={test:ei("hsl","hue"),parse:ni("hue","saturation","lightness"),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha,a=void 0===i?1:i;return"hsla("+Math.round(e)+", "+We.transform(ze(n))+", "+We.transform(ze(r))+", "+ze(Re.transform(a))+")"}},si={test:function(t){return ii.test(t)||ai.test(t)||oi.test(t)},parse:function(t){return ii.test(t)?ii.parse(t):oi.test(t)?oi.parse(t):ai.parse(t)},transform:function(t){return Ue(t)?t:t.hasOwnProperty("red")?ii.transform(t):oi.transform(t)}};var ui="number",li="color",ci="var",hi="var(",pi="${}",fi=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\x2D\x2D(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:\x2D?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}\x2D?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|\x2D?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function di(t){var e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[],a=0,o=e.replace(fi,(function(t){return si.test(t)?(r.color.push(a),i.push(li),n.push(si.parse(t))):t.startsWith(hi)?(r.var.push(a),i.push(ci),n.push(t)):(r.number.push(a),i.push(ui),n.push(parseFloat(t))),++a,pi})).split(pi);return{values:n,split:o,indexes:r,types:i}}function mi(t){return di(t).values}function vi(t){var e=di(t),n=e.split,r=e.types,i=n.length;return function(t){for(var e="",a=0;a<i;a++)if(e+=n[a],void 0!==t[a]){var o=r[a];e+=o===ui?ze(t[a]):o===li?si.transform(t[a]):t[a]}return e}}var yi=function(t){return"number"===typeof t?0:t};var gi={test:function(t){var e,n;return isNaN(t)&&Ue(t)&&((null===(e=t.match(Ve))||void 0===e?void 0:e.length)||0)+((null===(n=t.match(je))||void 0===n?void 0:n.length)||0)>0},parse:mi,createTransformer:vi,getAnimatableNone:function(t){var e=mi(t);return vi(t)(e.map(yi))}},xi=new Set(["brightness","contrast","saturate","opacity"]);function bi(t){var e=u(t.slice(0,-1).split("("),2),n=e[0],r=e[1];if("drop-shadow"===n)return t;var i=u(r.match(Ve)||[],1)[0];if(!i)return t;var a=r.replace(i,""),o=xi.has(n)?1:0;return i!==r&&(o*=100),n+"("+o+a+")"}var wi=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,ki=zt(zt({},gi),{},{getAnimatableNone:function(t){var e=t.match(wi);return e?e.map(bi).join(" "):t}}),Si=zt(zt({},Je),{},{color:si,backgroundColor:si,outlineColor:si,fill:si,stroke:si,borderColor:si,borderTopColor:si,borderRightColor:si,borderBottomColor:si,borderLeftColor:si,filter:ki,WebkitFilter:ki}),Ti=function(t){return Si[t]};function Ai(t,e){var n=Ti(t);return n!==ki&&(n=gi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}var Ei=function(t){x(n,t);var e=S(n);function n(t,r,i,a){return f(this,n),e.call(this,t,r,i,a,null===a||void 0===a?void 0:a.owner,!0)}return y(n,[{key:"readKeyframes",value:function(){var t=this.unresolvedKeyframes,e=this.element,r=this.name;if(e.current){Cr(b(n.prototype),"readKeyframes",this).call(this);for(var i=0;i<t.length;i++){var a=t[i];if("string"===typeof a&&De(a)){var o=Nr(a,e.current);void 0!==o&&(t[i]=o)}}if(!zr.has(r)||2!==t.length)return this.resolveNoneKeyframes();var s=u(t,2),l=s[0],c=s[1],h=Yr(l),p=Yr(c);if(h!==p)if(Vr(h)&&Vr(p))for(var f=0;f<t.length;f++){var d=t[f];"string"===typeof d&&(t[f]=parseFloat(d))}else this.needsMeasurement=!0}}},{key:"resolveNoneKeyframes",value:function(){for(var t=this.unresolvedKeyframes,e=this.name,n=[],r=0;r<t.length;r++)Or(t[r])&&n.push(r);n.length&&function(t,e,n){for(var r=0,i=void 0;r<t.length&&!i;)"string"===typeof t[r]&&"none"!==t[r]&&"0"!==t[r]&&(i=t[r]),r++;if(i&&n){var a,o=E(e);try{for(o.s();!(a=o.n()).done;)t[a.value]=Ai(n,i)}catch(s){o.e(s)}finally{o.f()}}}(t,n,e)}},{key:"measureInitialState",value:function(){var t=this.element,e=this.unresolvedKeyframes,n=this.name;if(t.current){"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;var r=e[e.length-1];void 0!==r&&t.getValue(n,r).jump(r,!1)}}},{key:"measureEndState",value:function(){var t,e=this.element,n=this.name,r=this.unresolvedKeyframes;if(e.current){var i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);var a=r.length-1,o=r[a];r[a]=Wr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==o&&(this.finalKeyframe=o),(null===(t=this.removedTransforms)||void 0===t?void 0:t.length)&&this.removedTransforms.forEach((function(t){var n=u(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),this.resolveNoneKeyframes()}}}]),n}(ti);var _i=function(t,e){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!gi.test(t)&&"0"!==t||t.startsWith("url(")))};var Li=["autoplay","delay","type","repeat","repeatDelay","repeatType"],Ii=function(){function t(e){var n=e.autoplay,r=void 0===n||n,i=e.delay,a=void 0===i?0:i,o=e.type,s=void 0===o?"keyframes":o,u=e.repeat,l=void 0===u?0:u,c=e.repeatDelay,h=void 0===c?0:c,p=e.repeatType,d=void 0===p?"loop":p,m=un(e,Li);f(this,t),this.isStopped=!1,this.hasAttemptedResolve=!1,this.options=zt({autoplay:r,delay:a,type:s,repeat:l,repeatDelay:h,repeatType:d},m),this.updateFinishedPromise()}return y(t,[{key:"resolved",get:function(){return this._resolved||this.hasAttemptedResolve||(Zr(),Qr()),this._resolved}},{key:"onKeyframesResolved",value:function(t,e){this.hasAttemptedResolve=!0;var n=this.options,r=n.name,i=n.type,a=n.velocity,o=n.delay,s=n.onComplete,u=n.onUpdate;if(!n.isGenerator&&!function(t,e,n,r){var i=t[0];if(null===i)return!1;var a=t[t.length-1],o=_i(i,e),s=_i(a,e);return Fr(o===s,"You are trying to animate ".concat(e,' from "').concat(i,'" to "').concat(a,'". ').concat(i," is not an animatable value - to enable this animation set ").concat(i," to a value animatable to ").concat(a," via the `style` property.")),!(!o||!s)&&(function(t){var e=t[0];if(1===t.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||"spring"===n&&r)}(t,r,i,a)){if(Ar||!o)return null===u||void 0===u||u(_r(t,this.options,e)),null===s||void 0===s||s(),void this.resolveFinishedPromise();this.options.duration=0}var l=this.initPlayback(t,e);!1!==l&&(this._resolved=zt({keyframes:t,finalKeyframe:e},l),this.onPostResolved())}},{key:"onPostResolved",value:function(){}},{key:"then",value:function(t,e){return this.currentFinishedPromise.then(t,e)}},{key:"updateFinishedPromise",value:function(){var t=this;this.currentFinishedPromise=new Promise((function(e){t.resolveFinishedPromise=e}))}}]),t}();function Ci(t,e){return e?t*(1e3/e):0}var Di=5;function Oi(t,e,n){var r=Math.max(e-Di,0);return Ci(n-t(r),e-r)}var Fi=.001,Pi=.01,Mi=10,Ri=.05,Ni=1;function zi(t){var e,n,r=t.duration,i=void 0===r?800:r,a=t.bounce,o=void 0===a?.25:a,s=t.velocity,u=void 0===s?0:s,l=t.mass,c=void 0===l?1:l;Fr(i<=vr(Mi),"Spring duration must be 10 seconds or less");var h=1-o;h=Pe(Ri,Ni,h),i=Pe(Pi,Mi,yr(i)),h<1?(e=function(t){var e=t*h,n=e*i,r=e-u,a=ji(t,h),o=Math.exp(-n);return Fi-r/a*o},n=function(t){var n=t*h*i,r=n*u+u,a=Math.pow(h,2)*Math.pow(t,2)*i,o=Math.exp(-n),s=ji(Math.pow(t,2),h);return(-e(t)+Fi>0?-1:1)*((r-a)*o)/s}):(e=function(t){return Math.exp(-t*i)*((t-u)*i+1)-Fi},n=function(t){return Math.exp(-t*i)*(i*i*(u-t))});var p=function(t,e,n){for(var r=n,i=1;i<Vi;i++)r-=t(r)/e(r);return r}(e,n,5/i);if(i=vr(i),isNaN(p))return{stiffness:100,damping:10,duration:i};var f=Math.pow(p,2)*c;return{stiffness:f,damping:2*h*Math.sqrt(c*f),duration:i}}var Vi=12;function ji(t,e){return t*Math.sqrt(1-e*e)}var Ki=["keyframes","restDelta","restSpeed"],Ui=["duration","bounce"],Bi=["stiffness","damping","mass"];function Gi(t,e){return e.some((function(e){return void 0!==t[e]}))}function Wi(t){var e,n=t.keyframes,r=t.restDelta,i=t.restSpeed,a=un(t,Ki),o=n[0],s=n[n.length-1],u={done:!1,value:o},l=function(t){var e=zt({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!Gi(t,Bi)&&Gi(t,Ui)){var n=zi(t);(e=zt(zt(zt({},e),n),{},{mass:1})).isResolvedFromDuration=!0}return e}(zt(zt({},a),{},{velocity:-yr(a.velocity||0)})),c=l.stiffness,h=l.damping,p=l.mass,f=l.duration,d=l.velocity,m=l.isResolvedFromDuration,v=d||0,y=h/(2*Math.sqrt(c*p)),g=s-o,x=yr(Math.sqrt(c/p)),b=Math.abs(g)<5;if(i||(i=b?.01:2),r||(r=b?.005:.5),y<1){var w=ji(x,y);e=function(t){var e=Math.exp(-y*x*t);return s-e*((v+y*x*g)/w*Math.sin(w*t)+g*Math.cos(w*t))}}else if(1===y)e=function(t){return s-Math.exp(-x*t)*(g+(v+x*g)*t)};else{var k=x*Math.sqrt(y*y-1);e=function(t){var e=Math.exp(-y*x*t),n=Math.min(k*t,300);return s-e*((v+y*x*g)*Math.sinh(n)+k*g*Math.cosh(n))/k}}return{calculatedDuration:m&&f||null,next:function(t){var n=e(t);if(m)u.done=t>=f;else{var a=v;0!==t&&(a=y<1?Oi(e,t,n):0);var o=Math.abs(a)<=i,l=Math.abs(s-n)<=r;u.done=o&&l}return u.value=u.done?s:n,u}}}function Hi(t){var e=t.keyframes,n=t.velocity,r=void 0===n?0:n,i=t.power,a=void 0===i?.8:i,o=t.timeConstant,s=void 0===o?325:o,u=t.bounceDamping,l=void 0===u?10:u,c=t.bounceStiffness,h=void 0===c?500:c,p=t.modifyTarget,f=t.min,d=t.max,m=t.restDelta,v=void 0===m?.5:m,y=t.restSpeed,g=e[0],x={done:!1,value:g},b=function(t){return void 0===f?d:void 0===d||Math.abs(f-t)<Math.abs(d-t)?f:d},w=a*r,k=g+w,S=void 0===p?k:p(k);S!==k&&(w=S-g);var T,A,E=function(t){return-w*Math.exp(-t/s)},_=function(t){return S+E(t)},L=function(t){var e=E(t),n=_(t);x.done=Math.abs(e)<=v,x.value=x.done?S:n},I=function(t){var e;(e=x.value,void 0!==f&&e<f||void 0!==d&&e>d)&&(T=t,A=Wi({keyframes:[x.value,b(x.value)],velocity:Oi(_,t,x.value),damping:l,stiffness:h,restDelta:v,restSpeed:y}))};return I(0),{calculatedDuration:null,next:function(t){var e=!1;return A||void 0!==T||(e=!0,L(t),I(t)),void 0!==T&&t>=T?A.next(t-T):(!e&&L(t),x)}}}var Xi=function(t,e,n){return(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t},Yi=1e-7,qi=12;function $i(t,e,n,r){if(t===e&&n===r)return On;var i=function(e){return function(t,e,n,r,i){var a,o,s=0;do{(a=Xi(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o}while(Math.abs(a)>Yi&&++s<qi);return o}(e,0,1,t,n)};return function(t){return 0===t||1===t?t:Xi(i(t),e,r)}}var Ji=$i(.42,0,1,1),Qi=$i(0,0,.58,1),Zi=$i(.42,0,.58,1),ta=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},ea=function(t){return function(e){return 1-t(1-e)}},na=function(t){return 1-Math.sin(Math.acos(t))},ra=ea(na),ia=ta(na),aa=$i(.33,1.53,.69,.99),oa=ea(aa),sa=ta(oa),ua={linear:On,easeIn:Ji,easeInOut:Zi,easeOut:Qi,circIn:na,circInOut:ia,circOut:ra,backIn:oa,backInOut:sa,backOut:aa,anticipate:function(t){return(t*=2)<1?.5*oa(t):.5*(2-Math.pow(2,-10*(t-1)))}},la=function(t){if(Array.isArray(t)){Pr(4===t.length,"Cubic bezier arrays must contain four numerical values.");var e=u(t,4);return $i(e[0],e[1],e[2],e[3])}return"string"===typeof t?(Pr(void 0!==ua[t],"Invalid easing type '".concat(t,"'")),ua[t]):t},ca=function(t,e,n){var r=e-t;return 0===r?1:(n-t)/r},ha=function(t,e,n){return t+(e-t)*n};function pa(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var fa=function(t,e,n){var r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},da=[ai,ii,oi];function ma(t){var e,n=(e=t,da.find((function(t){return t.test(e)})));Pr(Boolean(n),"'".concat(t,"' is not an animatable color. Use the equivalent color code instead."));var r=n.parse(t);return n===oi&&(r=function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha;e/=360,r/=100;var a=0,o=0,s=0;if(n/=100){var u=r<.5?r*(1+n):r+n-r*n,l=2*r-u;a=pa(l,u,e+1/3),o=pa(l,u,e),s=pa(l,u,e-1/3)}else a=o=s=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*s),alpha:i}}(r)),r}var va=function(t,e){var n=ma(t),r=ma(e),i=zt({},n);return function(t){return i.red=fa(n.red,r.red,t),i.green=fa(n.green,r.green,t),i.blue=fa(n.blue,r.blue,t),i.alpha=ha(n.alpha,r.alpha,t),ii.transform(i)}};function ya(t,e){return function(n){return n>0?e:t}}function ga(t,e){return function(n){return ha(t,e,n)}}function xa(t){return"number"===typeof t?ga:"string"===typeof t?De(t)?ya:si.test(t)?va:ka:Array.isArray(t)?ba:"object"===typeof t?si.test(t)?va:wa:ya}function ba(t,e){var n=p(t),r=n.length,i=t.map((function(t,n){return xa(t)(t,e[n])}));return function(t){for(var e=0;e<r;e++)n[e]=i[e](t);return n}}function wa(t,e){var n=zt(zt({},t),e),r={};for(var i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=xa(t[i])(t[i],e[i]));return function(t){for(var e in r)n[e]=r[e](t);return n}}var ka=function(t,e){var n=gi.createTransformer(e),r=di(t),i=di(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Hn(ba(function(t,e){for(var n,r=[],i={color:0,var:0,number:0},a=0;a<e.values.length;a++){var o=e.types[a],s=t.indexes[o][i[o]],u=null!==(n=t.values[s])&&void 0!==n?n:0;r[a]=u,i[o]++}return r}(r,i),i.values),n):(Fr(!0,"Complex values '".concat(t,"' and '").concat(e,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),ya(t,e))};function Sa(t,e,n){return"number"===typeof t&&"number"===typeof e&&"number"===typeof n?ha(t,e,n):xa(t)(t,e)}function Ta(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=void 0===r||r,a=n.ease,o=n.mixer,s=t.length;if(Pr(s===e.length,"Both input and output ranges must be the same length"),1===s)return function(){return e[0]};if(2===s&&t[0]===t[1])return function(){return e[1]};t[0]>t[s-1]&&(t=p(t).reverse(),e=p(e).reverse());var u=function(t,e,n){for(var r=[],i=n||Sa,a=t.length-1,o=0;o<a;o++){var s=i(t[o],t[o+1]);if(e){var u=Array.isArray(e)?e[o]||On:e;s=Hn(u,s)}r.push(s)}return r}(e,a,o),l=u.length,c=function(e){var n=0;if(l>1)for(;n<t.length-2&&!(e<t[n+1]);n++);var r=ca(t[n],t[n+1],e);return u[n](r)};return i?function(e){return c(Pe(t[0],t[s-1],e))}:c}function Aa(t){var e=[0];return function(t,e){for(var n=t[t.length-1],r=1;r<=e;r++){var i=ca(0,e,r);t.push(ha(n,1,i))}}(e,t.length-1),e}function Ea(t){var e,n,r=t.duration,i=void 0===r?300:r,a=t.keyframes,o=t.times,s=t.ease,u=void 0===s?"easeInOut":s,l=function(t){return Array.isArray(t)&&"number"!==typeof t[0]}(u)?u.map(la):la(u),c={done:!1,value:a[0]},h=function(t,e){return t.map((function(t){return t*e}))}(o&&o.length===a.length?o:Aa(a),i),p=Ta(h,a,{ease:Array.isArray(l)?l:(e=a,n=l,e.map((function(){return n||Zi})).splice(0,e.length-1))});return{calculatedDuration:i,next:function(t){return c.value=p(t),c.done=t>=i,c}}}var _a=function(t){var e=function(e){var n=e.timestamp;return t(n)};return{start:function(){return Pn.update(e,!0)},stop:function(){return Mn(e)},now:function(){return Rn.isProcessing?Rn.timestamp:Ir.now()}}},La=["KeyframeResolver"],Ia={decay:Hi,inertia:Hi,tween:Ea,keyframes:Ea,spring:Wi},Ca=function(t){return t/100},Da=function(t){x(n,t);var e=S(n);function n(t){var r,i=t.KeyframeResolver,a=void 0===i?ti:i,o=un(t,La);f(this,n),(r=e.call(this,o)).holdTime=null,r.startTime=null,r.cancelTime=null,r.currentTime=0,r.playbackSpeed=1,r.pendingPlayState="running",r.state="idle";var s=r.options,u=s.name,l=s.motionValue,c=s.keyframes,h=function(t,e){return r.onKeyframesResolved(t,e)};return u&&l&&l.owner?r.resolver=l.owner.resolveKeyframes(c,h,u,l):r.resolver=new a(c,h,u,l),r.resolver.scheduleResolve(),r}return y(n,[{key:"initPlayback",value:function(t){var e,n,r=this.options,i=r.type,a=void 0===i?"keyframes":i,o=r.repeat,s=void 0===o?0:o,u=r.repeatDelay,l=void 0===u?0:u,c=r.repeatType,h=r.velocity,f=void 0===h?0:h,d=Ia[a]||Ea;d!==Ea&&"number"!==typeof t[0]&&(e=Hn(Ca,Sa(t[0],t[1])),t=[0,100]);var m=d(zt(zt({},this.options),{},{keyframes:t}));"mirror"===c&&(n=d(zt(zt({},this.options),{},{keyframes:p(t).reverse(),velocity:-f}))),null===m.calculatedDuration&&(m.calculatedDuration=function(t){for(var e=0,n=t.next(e);!n.done&&e<2e4;)e+=50,n=t.next(e);return e>=2e4?1/0:e}(m));var v=m.calculatedDuration,y=v+l;return{generator:m,mirroredGenerator:n,mapPercentToKeyframes:e,calculatedDuration:v,resolvedDuration:y,totalDuration:y*(s+1)-l}}},{key:"onPostResolved",value:function(){var t=this.options.autoplay,e=void 0===t||t;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}},{key:"tick",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.resolved;if(!n){var r=this.options.keyframes;return{done:!0,value:r[r.length-1]}}var i=n.finalKeyframe,a=n.generator,o=n.mirroredGenerator,s=n.mapPercentToKeyframes,u=n.keyframes,l=n.calculatedDuration,c=n.totalDuration,h=n.resolvedDuration;if(null===this.startTime)return a.next(0);var p=this.options,f=p.delay,d=p.repeat,m=p.repeatType,v=p.repeatDelay,y=p.onUpdate;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),e?this.currentTime=t:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;var g=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);var b=this.currentTime,w=a;if(d){var k=Math.min(this.currentTime,c)/h,S=Math.floor(k),T=k%1;!T&&k>=1&&(T=1),1===T&&S--,S=Math.min(S,d+1),Boolean(S%2)&&("reverse"===m?(T=1-T,v&&(T-=v/h)):"mirror"===m&&(w=o)),b=Pe(0,1,T)*h}var A=x?{done:!1,value:u[0]}:w.next(b);s&&(A.value=s(A.value));var E=A.done;x||null===l||(E=this.speed>=0?this.currentTime>=c:this.currentTime<=0);var _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&E);return _&&void 0!==i&&(A.value=_r(u,this.options,i)),y&&y(A.value),_&&this.finish(),A}},{key:"duration",get:function(){var t=this.resolved;return t?yr(t.calculatedDuration):0}},{key:"time",get:function(){return yr(this.currentTime)},set:function(t){t=vr(t),this.currentTime=t,null!==this.holdTime||0===this.speed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}},{key:"speed",get:function(){return this.playbackSpeed},set:function(t){var e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=yr(this.currentTime))}},{key:"play",value:function(){var t=this;if(this.resolver.isScheduled||this.resolver.resume(),this._resolved){if(!this.isStopped){var e=this.options,n=e.driver,r=void 0===n?_a:n,i=e.onPlay;this.driver||(this.driver=r((function(e){return t.tick(e)}))),i&&i();var a=this.driver.now();null!==this.holdTime?this.startTime=a-this.holdTime:this.startTime&&"finished"!==this.state||(this.startTime=a),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}}else this.pendingPlayState="running"}},{key:"pause",value:function(){var t;this._resolved?(this.state="paused",this.holdTime=null!==(t=this.currentTime)&&void 0!==t?t:0):this.pendingPlayState="paused"}},{key:"stop",value:function(){if(this.resolver.cancel(),this.isStopped=!0,"idle"!==this.state){this.teardown();var t=this.options.onStop;t&&t()}}},{key:"complete",value:function(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}},{key:"finish",value:function(){this.teardown(),this.state="finished";var t=this.options.onComplete;t&&t()}},{key:"cancel",value:function(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}},{key:"teardown",value:function(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}},{key:"stopDriver",value:function(){this.driver&&(this.driver.stop(),this.driver=void 0)}},{key:"sample",value:function(t){return this.startTime=0,this.tick(t,!0)}}]),n}(Ii);var Oa=function(t){return Array.isArray(t)&&"number"===typeof t[0]};function Fa(t){return Boolean(!t||"string"===typeof t&&Ma[t]||Oa(t)||Array.isArray(t)&&t.every(Fa))}var Pa=function(t){var e=u(t,4),n=e[0],r=e[1],i=e[2],a=e[3];return"cubic-bezier(".concat(n,", ").concat(r,", ").concat(i,", ").concat(a,")")},Ma={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pa([0,.65,.55,1]),circOut:Pa([.55,0,1,.45]),backIn:Pa([.31,.01,.66,-.59]),backOut:Pa([.33,1.53,.69,.99])};function Ra(t){if(t)return Oa(t)?Pa(t):Array.isArray(t)?t.map(Ra):Ma[t]}var Na=["onComplete","onUpdate","motionValue"],za=["motionValue","onUpdate","onComplete"],Va=function(t){var e;return function(){return void 0===e&&(e=t()),e}}((function(){return Object.hasOwnProperty.call(Element.prototype,"animate")})),ja=new Set(["opacity","clipPath","filter","transform"]);var Ka=function(t){x(n,t);var e=S(n);function n(t){var r;f(this,n);var i=(r=e.call(this,t)).options,a=i.name,o=i.motionValue,s=i.keyframes;return r.resolver=new Ei(s,(function(t,e){return r.onKeyframesResolved(t,e)}),a,o),r.resolver.scheduleResolve(),r}return y(n,[{key:"initPlayback",value:function(t,e){var n,r=this,i=this.options,a=i.duration,o=void 0===a?300:a,s=i.times,u=i.ease,l=i.type,c=i.motionValue,h=i.name;if(!(null===(n=c.owner)||void 0===n?void 0:n.current))return!1;if(function(t){return"spring"===t.type||"backgroundColor"===t.name||!Fa(t.ease)}(this.options)){var p=this.options,f=(p.onComplete,p.onUpdate,p.motionValue,un(p,Na)),d=function(t,e){for(var n=new Da(zt(zt({},e),{},{keyframes:t,repeat:0,delay:0,isGenerator:!0})),r={done:!1,value:t[0]},i=[],a=0;!r.done&&a<2e4;)r=n.sample(a),i.push(r.value),a+=10;return{times:void 0,keyframes:i,duration:a-10,ease:"linear"}}(t,f);1===(t=d.keyframes).length&&(t[1]=t[0]),o=d.duration,s=d.times,u=d.ease,l="keyframes"}var m=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.delay,a=void 0===i?0:i,o=r.duration,s=void 0===o?300:o,u=r.repeat,l=void 0===u?0:u,c=r.repeatType,h=void 0===c?"loop":c,p=r.ease,f=r.times,d=Rt({},e,n);f&&(d.offset=f);var m=Ra(p);return Array.isArray(m)&&(d.easing=m),t.animate(d,{delay:a,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:l+1,direction:"reverse"===h?"alternate":"normal"})}(c.owner.current,h,t,zt(zt({},this.options),{},{duration:o,times:s,ease:u}));return m.startTime=Ir.now(),this.pendingTimeline?(m.timeline=this.pendingTimeline,this.pendingTimeline=void 0):m.onfinish=function(){var n=r.options.onComplete;c.set(_r(t,r.options,e)),n&&n(),r.cancel(),r.resolveFinishedPromise()},{animation:m,duration:o,times:s,type:l,ease:u,keyframes:t}}},{key:"duration",get:function(){var t=this.resolved;if(!t)return 0;var e=t.duration;return yr(e)}},{key:"time",get:function(){var t=this.resolved;if(!t)return 0;var e=t.animation;return yr(e.currentTime||0)},set:function(t){var e=this.resolved;e&&(e.animation.currentTime=vr(t))}},{key:"speed",get:function(){var t=this.resolved;return t?t.animation.playbackRate:1},set:function(t){var e=this.resolved;e&&(e.animation.playbackRate=t)}},{key:"state",get:function(){var t=this.resolved;return t?t.animation.playState:"idle"}},{key:"attachTimeline",value:function(t){if(this._resolved){var e=this.resolved;if(!e)return On;var n=e.animation;n.timeline=t,n.onfinish=null}else this.pendingTimeline=t;return On}},{key:"play",value:function(){if(!this.isStopped){var t=this.resolved;if(t){var e=t.animation;"finished"===e.playState&&this.updateFinishedPromise(),e.play()}}}},{key:"pause",value:function(){var t=this.resolved;t&&t.animation.pause()}},{key:"stop",value:function(){if(this.resolver.cancel(),this.isStopped=!0,"idle"!==this.state){var t=this.resolved;if(t){var e=t.animation,n=t.keyframes,r=t.duration,i=t.type,a=t.ease,o=t.times;if("idle"!==e.playState&&"finished"!==e.playState){if(this.time){var s=this.options,u=s.motionValue,l=(s.onUpdate,s.onComplete,un(s,za)),c=new Da(zt(zt({},l),{},{keyframes:n,duration:r,type:i,ease:a,times:o,isGenerator:!0})),h=vr(this.time);u.setWithVelocity(c.sample(h-10).value,c.sample(h).value,10)}this.cancel()}}}}},{key:"complete",value:function(){var t=this.resolved;t&&t.animation.finish()}},{key:"cancel",value:function(){var t=this.resolved;t&&t.animation.cancel()}}],[{key:"supports",value:function(t){var e=t.motionValue,n=t.name,r=t.repeatDelay,i=t.repeatType,a=t.damping,o=t.type;return Va()&&n&&ja.has(n)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!r&&"mirror"!==i&&0!==a&&"inertia"!==o}}]),n}(Ii),Ua=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(o){var s=Sr(r,t)||{},u=s.delay||r.delay||0,l=r.elapsed,c=void 0===l?0:l;c-=vr(u);var h=zt(zt({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity()},s),{},{delay:-c,onUpdate:function(t){e.set(t),s.onUpdate&&s.onUpdate(t)},onComplete:function(){o(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:a?void 0:i});(function(t){t.when,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.repeat,t.repeatType,t.repeatDelay,t.from,t.elapsed;var e=un(t,kr);return!!Object.keys(e).length})(s)||(h=zt(zt({},h),wr(t,h))),h.duration&&(h.duration=vr(h.duration)),h.repeatDelay&&(h.repeatDelay=vr(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);var p=!1;if(!1===h.type&&(h.duration=0,0===h.delay&&(p=!0)),(Ar||Xt)&&(p=!0,h.duration=0,h.delay=0),p&&!a&&void 0!==e.get()){var f=_r(h.keyframes,s);if(void 0!==f)return void Pn.update((function(){h.onUpdate(f),h.onComplete()}))}return!a&&Ka.supports(h)?new Ka(h):new Da(h)}};function Ba(t){return Boolean(Ae(t)&&t.add)}function Ga(t,e){-1===t.indexOf(e)&&t.push(e)}function Wa(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Ha=function(){function t(){f(this,t),this.subscriptions=[]}return y(t,[{key:"add",value:function(t){var e=this;return Ga(this.subscriptions,t),function(){return Wa(e.subscriptions,t)}}},{key:"notify",value:function(t,e,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(t,e,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),t}(),Xa={current:void 0},Ya=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,t),this.version="11.0.24",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Ir.now();n.updatedAt!==r&&n.setPrevFrameValue(),n.prev=n.current,n.setCurrent(t),n.current!==n.prev&&n.events.change&&n.events.change.notify(n.current),e&&n.events.renderRequest&&n.events.renderRequest.notify(n.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=function(t){return!isNaN(parseFloat(t))}(this.current),this.owner=r.owner}return y(t,[{key:"setCurrent",value:function(t){this.current=t,this.updatedAt=Ir.now()}},{key:"setPrevFrameValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}},{key:"onChange",value:function(t){return this.on("change",t)}},{key:"on",value:function(t,e){var n=this;this.events[t]||(this.events[t]=new Ha);var r=this.events[t].add(e);return"change"===t?function(){r(),Pn.read((function(){n.events.change.getSize()||n.stop()}))}:r}},{key:"clearListeners",value:function(){for(var t in this.events)this.events[t].clear()}},{key:"attach",value:function(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}},{key:"set",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}},{key:"setWithVelocity",value:function(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}},{key:"jump",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"get",value:function(){return Xa.current&&Xa.current.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){var t=Ir.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;var e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Ci(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}},{key:"start",value:function(t){var e=this;return this.stop(),new Promise((function(n){e.hasAnimated=!0,e.animation=t(n),e.events.animationStart&&e.events.animationStart.notify()})).then((function(){e.events.animationComplete&&e.events.animationComplete.notify(),e.clearAnimation()}))}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),t}();function qa(t,e){return new Ya(t,e)}var $a=["transitionEnd","transition"];function Ja(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qa(n))}var Qa=["transition","transitionEnd"];function Za(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.delay,a=void 0===i?0:i,o=r.transitionOverride,s=r.type,u=e.transition,l=void 0===u?t.getDefaultTransition():u,c=e.transitionEnd,h=un(e,Qa),p=t.getValue("willChange");o&&(l=o);var f=[],d=s&&t.animationState&&t.animationState.getState()[s],m=function(e){var r=t.getValue(e,null!==(n=t.latestValues[e])&&void 0!==n?n:null),i=h[e];if(void 0===i||d&&function(t,e){var n=t.protectedKeys,r=t.needsAnimating,i=n.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,i}(d,e))return"continue";var o=zt({delay:a,elapsed:0},Sr(l||{},e)),s=!1;if(window.HandoffAppearAnimations){var u=t.getProps()[Ht];if(u){var c=window.HandoffAppearAnimations(u,e);null!==c&&(o.elapsed=c,s=!0)}}r.start(Ua(e,r,i,t.shouldReduceMotion&&Se.has(e)?{type:!1}:o,t,s));var m=r.animation;m&&(Ba(p)&&(p.add(e),m.then((function(){return p.remove(e)}))),f.push(m))};for(var v in h)m(v);return c&&Promise.all(f).then((function(){Pn.update((function(){c&&function(t,e){var n=mr(t,e)||{},r=n.transitionEnd,i=void 0===r?{}:r,a=(n.transition,un(n,$a));for(var o in a=zt(zt({},a),i))Ja(t,o,_n(a[o]))}(t,c)}))})),f}function to(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=mr(t,e,"exit"===r.type?null===(n=t.presenceContext)||void 0===n?void 0:n.custom:void 0),a=(i||{}).transition,o=void 0===a?t.getDefaultTransition()||{}:a;r.transitionOverride&&(o=r.transitionOverride);var s=i?function(){return Promise.all(Za(t,i,r))}:function(){return Promise.resolve()},l=t.variantChildren&&t.variantChildren.size?function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=o,a=i.delayChildren,s=void 0===a?0:a,u=i.staggerChildren,l=i.staggerDirection;return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],s=(t.variantChildren.size-1)*r,u=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(t.variantChildren).sort(eo).forEach((function(t,r){t.notify("AnimationStart",e),o.push(to(t,e,zt(zt({},a),{},{delay:n+u(r)})).then((function(){return t.notify("AnimationComplete",e)})))})),Promise.all(o)}(t,e,s+n,u,l,r)}:function(){return Promise.resolve()},c=o.when;if(c){var h=u("beforeChildren"===c?[s,l]:[l,s],2),p=h[0],f=h[1];return p().then((function(){return f()}))}return Promise.all([s(),l(r.delay)])}function eo(t,e){return t.sortNodePosition(e)}var no=["transition","transitionEnd"],ro=p(re).reverse(),io=re.length;function ao(t){return function(e){return Promise.all(e.map((function(e){var n=e.animation,r=e.options;return function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.notify("AnimationStart",e),Array.isArray(e)){var i=e.map((function(e){return to(t,e,r)}));n=Promise.all(i)}else if("string"===typeof e)n=to(t,e,r);else{var a="function"===typeof e?mr(t,e,r.custom):e;n=Promise.all(Za(t,a,r))}return n.then((function(){Pn.postRender((function(){t.notify("AnimationComplete",e)}))}))}(t,n,r)})))}}function oo(t){var e=ao(t),n={animate:so(!0),whileInView:so(),whileHover:so(),whileTap:so(),whileDrag:so(),whileFocus:so(),exit:so()},r=!0,i=function(e){return function(n,r){var i,a=mr(t,r,"exit"===e?null===(i=t.presenceContext)||void 0===i?void 0:i.custom:void 0);if(a){a.transition;var o=a.transitionEnd,s=un(a,no);n=zt(zt(zt({},n),s),o)}return n}};function a(a){for(var o=t.getProps(),s=t.getVariantContext(!0)||{},u=[],l=new Set,c={},h=1/0,f=function(){var e=ro[d],f=n[e],m=void 0!==o[e]?o[e]:s[e],v=ee(m),y=e===a?f.isActive:null;!1===y&&(h=d);var g=m===s[e]&&m!==o[e]&&v;if(g&&r&&t.manuallyAnimateOnMount&&(g=!1),f.protectedKeys=zt({},c),!f.isActive&&null===y||!m&&!f.prevProp||ne(m)||"boolean"===typeof m)return"continue";var x=function(t,e){if("string"===typeof e)return e!==t;if(Array.isArray(e))return!dr(e,t);return!1}(f.prevProp,m),b=x||e===a&&f.isActive&&!g&&v||d>h&&v,w=!1,k=Array.isArray(m)?m:[m],S=k.reduce(i(e),{});!1===y&&(S={});var T=f.prevResolvedValues,A=void 0===T?{}:T,E=zt(zt({},A),S),_=function(e){b=!0,l.has(e)&&(w=!0,l.delete(e)),f.needsAnimating[e]=!0;var n=t.getValue(e);n&&(n.liveStyle=!1)};for(var L in E){var I=S[L],C=A[L];if(!c.hasOwnProperty(L)){(An(I)&&An(C)?!dr(I,C):I!==C)?void 0!==I&&null!==I?_(L):l.add(L):void 0!==I&&l.has(L)?_(L):f.protectedKeys[L]=!0}}f.prevProp=m,f.prevResolvedValues=S,f.isActive&&(c=zt(zt({},c),S)),r&&t.blockInitialAnimation&&(b=!1),!b||g&&!w||u.push.apply(u,p(k.map((function(t){return{animation:t,options:{type:e}}}))))},d=0;d<io;d++)f();if(l.size){var m={};l.forEach((function(e){var n=t.getBaseTarget(e),r=t.getValue(e);r&&(r.liveStyle=!0),m[e]=void 0===n?null:n})),u.push({animation:m})}var v=Boolean(u.length);return!r||!1!==o.initial&&o.initial!==o.animate||t.manuallyAnimateOnMount||(v=!1),r=!1,v?e(u):Promise.resolve()}return{animateChanges:a,setActive:function(e,r){var i;if(n[e].isActive===r)return Promise.resolve();null===(i=t.variantChildren)||void 0===i||i.forEach((function(t){var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r;var o=a(e);for(var s in n)n[s].protectedKeys={};return o},setAnimateFunction:function(n){e=n(t)},getState:function(){return n}}}function so(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var uo=function(t){x(n,t);var e=S(n);function n(t){var r;return f(this,n),r=e.call(this,t),t.animationState||(t.animationState=oo(t)),r}return y(n,[{key:"updateAnimationControlsSubscription",value:function(){var t=this.node.getProps().animate;this.unmount(),ne(t)&&(this.unmount=t.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){}}]),n}(Qn),lo=0,co=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).id=lo++,t}return y(n,[{key:"update",value:function(){var t=this;if(this.node.presenceContext){var e=this.node.presenceContext,n=e.isPresent,r=e.onExitComplete,i=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&n!==i){var a=this.node.animationState.setActive("exit",!n);r&&!n&&a.then((function(){return r(t.id)}))}}}},{key:"mount",value:function(){var t=(this.node.presenceContext||{}).register;t&&(this.unmount=t(this.id))}},{key:"unmount",value:function(){}}]),n}(Qn),ho={animation:{Feature:uo},exit:{Feature:co}},po=function(t,e){return Math.abs(t-e)};var fo=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.transformPagePoint,o=i.contextWindow,s=i.dragSnapToOrigin,u=void 0!==s&&s;if(f(this,t),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var t=yo(r.lastMoveEventInfo,r.history),e=null!==r.startEvent,n=function(t,e){var n=po(t.x,e.x),r=po(t.y,e.y);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}(t.offset,{x:0,y:0})>=3;if(e||n){var i=t.point,a=Rn.timestamp;r.history.push(zt(zt({},i),{},{timestamp:a}));var o=r.handlers,s=o.onStart,u=o.onMove;e||(s&&s(r.lastMoveEvent,t),r.startEvent=r.lastMoveEvent),u&&u(r.lastMoveEvent,t)}}},this.handlePointerMove=function(t,e){r.lastMoveEvent=t,r.lastMoveEventInfo=mo(e,r.transformPagePoint),Pn.update(r.updatePoint,!0)},this.handlePointerUp=function(t,e){r.end();var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=n.resumeAnimation;if(r.dragSnapToOrigin&&o&&o(),r.lastMoveEvent&&r.lastMoveEventInfo){var s=yo("pointercancel"===t.type?r.lastMoveEventInfo:mo(e,r.transformPagePoint),r.history);r.startEvent&&i&&i(t,s),a&&a(t,s)}},Kn(e)){this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=a,this.contextWindow=o||window;var l=mo(Un(e),this.transformPagePoint),c=l.point,h=Rn.timestamp;this.history=[zt(zt({},c),{},{timestamp:h})];var p=n.onSessionStart;p&&p(e,yo(l,this.history)),this.removeListeners=Hn(Gn(this.contextWindow,"pointermove",this.handlePointerMove),Gn(this.contextWindow,"pointerup",this.handlePointerUp),Gn(this.contextWindow,"pointercancel",this.handlePointerUp))}}return y(t,[{key:"updateHandlers",value:function(t){this.handlers=t}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),Mn(this.updatePoint)}}]),t}();function mo(t,e){return e?{point:e(t.point)}:t}function vo(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yo(t,e){var n=t.point;return{point:n,delta:vo(n,xo(e)),offset:vo(n,go(e)),velocity:bo(e,.1)}}function go(t){return t[0]}function xo(t){return t[t.length-1]}function bo(t,e){if(t.length<2)return{x:0,y:0};for(var n=t.length-1,r=null,i=xo(t);n>=0&&(r=t[n],!(i.timestamp-r.timestamp>vr(e)));)n--;if(!r)return{x:0,y:0};var a=yr(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wo(t){return t.max-t.min}function ko(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(t-e)<=n}function So(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;t.origin=r,t.originPoint=ha(e.min,e.max,t.origin),t.scale=wo(n)/wo(e),(ko(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ha(n.min,n.max,t.origin)-t.originPoint,(ko(t.translate)||isNaN(t.translate))&&(t.translate=0)}function To(t,e,n,r){So(t.x,e.x,n.x,r?r.originX:void 0),So(t.y,e.y,n.y,r?r.originY:void 0)}function Ao(t,e,n){t.min=n.min+e.min,t.max=t.min+wo(e)}function Eo(t,e,n){t.min=e.min-n.min,t.max=t.min+wo(e)}function _o(t,e,n){Eo(t.x,e.x,n.x),Eo(t.y,e.y,n.y)}function Lo(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function Io(t,e){var n=e.min-t.min,r=e.max-t.max;if(e.max-e.min<t.max-t.min){var i=[r,n];n=i[0],r=i[1]}return{min:n,max:r}}var Co=.35;function Do(t,e,n){return{min:Oo(t,e),max:Oo(t,n)}}function Oo(t,e){return"number"===typeof t?t:t[e]||0}var Fo=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},Po=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function Mo(t){return[t("x"),t("y")]}function Ro(t){var e=t.top;return{x:{min:t.left,max:t.right},y:{min:e,max:t.bottom}}}function No(t){return void 0===t||1===t}function zo(t){var e=t.scale,n=t.scaleX,r=t.scaleY;return!No(e)||!No(n)||!No(r)}function Vo(t){return zo(t)||jo(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function jo(t){return Ko(t.x)||Ko(t.y)}function Ko(t){return t&&"0%"!==t}function Uo(t,e,n){return n+e*(t-n)}function Bo(t,e,n,r,i){return void 0!==i&&(t=Uo(t,i,r)),Uo(t,n,r)+e}function Go(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;t.min=Bo(t.min,e,n,r,i),t.max=Bo(t.max,e,n,r,i)}function Wo(t,e){var n=e.x,r=e.y;Go(t.x,n.translate,n.scale,n.originPoint),Go(t.y,r.translate,r.scale,r.originPoint)}function Ho(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Xo(t,e){t.min=t.min+e,t.max=t.max+e}function Yo(t,e,n){var r=u(n,3),i=r[0],a=r[1],o=r[2],s=void 0!==e[o]?e[o]:.5,l=ha(t.min,t.max,s);Go(t,e[i],e[a],l,e.scale)}var qo=["x","scaleX","originX"],$o=["y","scaleY","originY"];function Jo(t,e){Yo(t.x,e,qo),Yo(t.y,e,$o)}function Qo(t,e){return Ro(function(t,e){if(!e)return t;var n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}var Zo=function(t){var e=t.current;return e?e.ownerDocument.defaultView:null},ts=new WeakMap,es=function(){function t(e){f(this,t),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Po(),this.visualElement=e}return y(t,[{key:"start",value:function(t){var e=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).snapToCursor,r=void 0!==n&&n,i=this.visualElement.presenceContext;if(!i||!1!==i.isPresent){var a=this.getProps().dragSnapToOrigin;this.panSession=new fo(t,{onSessionStart:function(t){e.getProps().dragSnapToOrigin?e.pauseAnimation():e.stopAnimation(),r&&e.snapToCursor(Un(t,"page").point)},onStart:function(t,n){var r=e.getProps(),i=r.drag,a=r.dragPropagation,o=r.onDragStart;if(!i||a||(e.openGlobalLock&&e.openGlobalLock(),e.openGlobalLock=$n(i),e.openGlobalLock)){e.isDragging=!0,e.currentDirection=null,e.resolveConstraints(),e.visualElement.projection&&(e.visualElement.projection.isAnimationBlocked=!0,e.visualElement.projection.target=void 0),Mo((function(t){var n=e.getAxisMotionValue(t).get()||0;if(We.test(n)){var r=e.visualElement.projection;if(r&&r.layout){var i=r.layout.layoutBox[t];if(i)n=wo(i)*(parseFloat(n)/100)}}e.originPoint[t]=n})),o&&o(t,n);var s=e.visualElement.animationState;s&&s.setActive("whileDrag",!0)}},onMove:function(t,n){var r=e.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,s=r.onDrag;if(i||e.openGlobalLock){var u=n.offset;if(a&&null===e.currentDirection)return e.currentDirection=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(u),void(null!==e.currentDirection&&o&&o(e.currentDirection));e.updateAxis("x",n.point,u),e.updateAxis("y",n.point,u),e.visualElement.render(),s&&s(t,n)}},onSessionEnd:function(t,n){return e.stop(t,n)},resumeAnimation:function(){return Mo((function(t){var n;return"paused"===e.getAnimationState(t)&&(null===(n=e.getAxisMotionValue(t).animation)||void 0===n?void 0:n.play())}))}},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:a,contextWindow:Zo(this.visualElement)})}}},{key:"stop",value:function(t,e){var n=this.isDragging;if(this.cancel(),n){var r=e.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;i&&i(t,e)}}},{key:"cancel",value:function(){this.isDragging=!1;var t=this.visualElement,e=t.projection,n=t.animationState;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(t,e,n){var r=this.getProps().drag;if(n&&ns(t,r,this.currentDirection)){var i=this.getAxisMotionValue(t),a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=function(t,e,n){var r=e.min,i=e.max;return void 0!==r&&t<r?t=n?ha(r,t,n.min):Math.max(t,r):void 0!==i&&t>i&&(t=n?ha(i,t,n.max):Math.min(t,i)),t}(a,this.constraints[t],this.elastic[t])),i.set(a)}}},{key:"resolveConstraints",value:function(){var t,e=this,n=this.getProps(),r=n.dragConstraints,i=n.dragElastic,a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,o=this.constraints;r&&te(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!r||!a)&&function(t,e){var n=e.top,r=e.left,i=e.bottom,a=e.right;return{x:Lo(t.x,r,a),y:Lo(t.y,n,i)}}(a.layoutBox,r),this.elastic=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Co;return!1===t?t=0:!0===t&&(t=Co),{x:Do(t,"left","right"),y:Do(t,"top","bottom")}}(i),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Mo((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(t,e){var n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(a.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var t=this.getProps(),e=t.dragConstraints,n=t.onMeasureDragConstraints;if(!e||!te(e))return!1;var r=e.current;Pr(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(t,e,n){var r=Qo(t,n),i=e.scroll;return i&&(Xo(r.x,i.offset.x),Xo(r.y,i.offset.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(t,e){return{x:Io(t.x,e.x),y:Io(t.y,e.y)}}(i.layout.layoutBox,a);if(n){var s=n(function(t){var e=t.x,n=t.y;return{top:n.min,right:e.max,bottom:n.max,left:e.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=Ro(s))}return o}},{key:"startAnimation",value:function(t){var e=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,s=n.dragSnapToOrigin,u=n.onDragTransitionEnd,l=this.constraints||{},c=Mo((function(n){if(ns(n,r,e.currentDirection)){var u=l&&l[n]||{};s&&(u={min:0,max:0});var c=a?200:1e6,h=a?40:1e7,p=zt(zt({type:"inertia",velocity:i?t[n]:0,bounceStiffness:c,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},o),u);return e.startAxisValueAnimation(n,p)}}));return Promise.all(c).then(u)}},{key:"startAxisValueAnimation",value:function(t,e){var n=this.getAxisMotionValue(t);return n.start(Ua(t,n,0,e,this.visualElement))}},{key:"stopAnimation",value:function(){var t=this;Mo((function(e){return t.getAxisMotionValue(e).stop()}))}},{key:"pauseAnimation",value:function(){var t=this;Mo((function(e){var n;return null===(n=t.getAxisMotionValue(e).animation)||void 0===n?void 0:n.pause()}))}},{key:"getAnimationState",value:function(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}},{key:"getAxisMotionValue",value:function(t){var e="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}},{key:"snapToCursor",value:function(t){var e=this;Mo((function(n){if(ns(n,e.getProps().drag,e.currentDirection)){var r=e.visualElement.projection,i=e.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.layoutBox[n],o=a.min,s=a.max;i.set(t[n]-ha(o,s,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var t=this;if(this.visualElement.current){var e=this.getProps(),n=e.drag,r=e.dragConstraints,i=this.visualElement.projection;if(te(r)&&i&&this.constraints){this.stopAnimation();var a={x:0,y:0};Mo((function(e){var n=t.getAxisMotionValue(e);if(n){var r=n.get();a[e]=function(t,e){var n=.5,r=wo(t),i=wo(e);return i>r?n=ca(e.min,e.max-r,t.min):r>i&&(n=ca(t.min,t.max-i,e.min)),Pe(0,1,n)}({min:r,max:r},t.constraints[e])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Mo((function(e){if(ns(e,n,null)){var r=t.getAxisMotionValue(e),i=t.constraints[e],o=i.min,s=i.max;r.set(ha(o,s,a[e]))}}))}}}},{key:"addListeners",value:function(){var t=this;if(this.visualElement.current){ts.set(this.visualElement,this);var e=Gn(this.visualElement.current,"pointerdown",(function(e){var n=t.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),n=function(){te(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},r=this.visualElement.projection,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();var a=jn(window,"resize",(function(){return t.scalePositionWithinConstraints()})),o=r.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(Mo((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.render())}));return function(){a(),e(),i(),o&&o()}}}},{key:"getProps",value:function(){var t=this.visualElement.getProps(),e=t.drag,n=void 0!==e&&e,r=t.dragDirectionLock,i=void 0!==r&&r,a=t.dragPropagation,o=void 0!==a&&a,s=t.dragConstraints,u=void 0!==s&&s,l=t.dragElastic,c=void 0===l?Co:l,h=t.dragMomentum,p=void 0===h||h;return zt(zt({},t),{},{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:u,dragElastic:c,dragMomentum:p})}}]),t}();function ns(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}var rs=function(t){x(n,t);var e=S(n);function n(t){var r;return f(this,n),(r=e.call(this,t)).removeGroupControls=On,r.removeListeners=On,r.controls=new es(t),r}return y(n,[{key:"mount",value:function(){var t=this.node.getProps().dragControls;t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||On}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),n}(Qn),is=function(t){return function(e,n){t&&t(e,n)}},as=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).removePointerDownListener=On,t}return y(n,[{key:"onPointerDown",value:function(t){this.session=new fo(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zo(this.node)})}},{key:"createPanHandlers",value:function(){var t=this,e=this.node.getProps(),n=e.onPanSessionStart,r=e.onPanStart,i=e.onPan,a=e.onPanEnd;return{onSessionStart:is(n),onStart:is(r),onMove:i,onEnd:function(e,n){delete t.session,a&&a(e,n)}}}},{key:"mount",value:function(){var t=this;this.removePointerDownListener=Gn(this.node.current,"pointerdown",(function(e){return t.onPointerDown(e)}))}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),n}(Qn);var os={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ss(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}var us={correct:function(t,e){if(!e.target)return t;if("string"===typeof t){if(!He.test(t))return t;t=parseFloat(t)}var n=ss(t,e.target.x),r=ss(t,e.target.y);return"".concat(n,"% ").concat(r,"%")}},ls={correct:function(t,e){var n=e.treeScale,r=e.projectionDelta,i=t,a=gi.parse(t);if(a.length>5)return i;var o=gi.createTransformer(t),s="number"!==typeof a[0]?1:0,u=r.x.scale*n.x,l=r.y.scale*n.y;a[0+s]/=u,a[1+s]/=l;var c=ha(u,l,.5);return"number"===typeof a[2+s]&&(a[2+s]/=c),"number"===typeof a[3+s]&&(a[3+s]/=c),o(a)}},cs=function(t){x(n,t);var e=S(n);function n(){return f(this,n),e.apply(this,arguments)}return y(n,[{key:"componentDidMount",value:function(){var t,e=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,s=r.projection;t=ps,Object.assign(we,t),s&&(i.group&&i.group.add(s),a&&a.register&&o&&a.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){e.safeToRemove()})),s.setOptions(zt(zt({},s.options),{},{onExitComplete:function(){return e.safeToRemove()}}))),os.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(t){var e=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,s=i.projection;return s?(s.isPresent=o,a||t.layoutDependency!==r||void 0===r?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||Pn.postRender((function(){var t=s.getStack();t&&t.members.length||e.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var t=this,e=this.props.visualElement.projection;e&&(e.root.didUpdate(),Zt.postRender((function(){!e.currentAnimation&&e.isLead()&&t.safeToRemove()})))}},{key:"componentWillUnmount",value:function(){var t=this.props,e=t.visualElement,n=t.layoutGroup,r=t.switchLayoutGroup,i=e.projection;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}},{key:"safeToRemove",value:function(){var t=this.props.safeToRemove;t&&t()}},{key:"render",value:function(){return null}}]),n}(t.Component);function hs(e){var n=function(){var e=(0,t.useContext)(Kt);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=(0,t.useId)();return(0,t.useEffect)((function(){return i(a)}),[]),!n&&r?[!1,function(){return r&&r(a)}]:[!0]}(),r=u(n,2),i=r[0],a=r[1],o=(0,t.useContext)(fe);return t.createElement(cs,zt(zt({},e),{},{layoutGroup:o,switchLayoutGroup:(0,t.useContext)(de),isPresent:i,safeToRemove:a}))}var ps={borderRadius:zt(zt({},us),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:us,borderTopRightRadius:us,borderBottomLeftRadius:us,borderBottomRightRadius:us,boxShadow:ls},fs=["TopLeft","TopRight","BottomLeft","BottomRight"],ds=fs.length,ms=function(t){return"string"===typeof t?parseFloat(t):t},vs=function(t){return"number"===typeof t||He.test(t)};function ys(t,e){return void 0!==t[e]?t[e]:t.borderRadius}var gs=bs(0,.5,ra),xs=bs(.5,.95,On);function bs(t,e,n){return function(r){return r<t?0:r>e?1:n(ca(t,e,r))}}function ws(t,e){t.min=e.min,t.max=e.max}function ks(t,e){ws(t.x,e.x),ws(t.y,e.y)}function Ss(t,e,n,r,i){return t=Uo(t-=e,1/n,r),void 0!==i&&(t=Uo(t,1/i,r)),t}function Ts(t,e,n,r,i){var a=u(n,3),o=a[0],s=a[1],l=a[2];!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t;if(We.test(e)&&(e=parseFloat(e),e=ha(o.min,o.max,e/100)-o.min),"number"===typeof e){var s=ha(a.min,a.max,r);t===a&&(s-=e),t.min=Ss(t.min,e,n,s,i),t.max=Ss(t.max,e,n,s,i)}}(t,e[o],e[s],e[l],e.scale,r,i)}var As=["x","scaleX","originX"],Es=["y","scaleY","originY"];function _s(t,e,n,r){Ts(t.x,e,As,n?n.x:void 0,r?r.x:void 0),Ts(t.y,e,Es,n?n.y:void 0,r?r.y:void 0)}function Ls(t){return 0===t.translate&&1===t.scale}function Is(t){return Ls(t.x)&&Ls(t.y)}function Cs(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Ds(t){return wo(t.x)/wo(t.y)}var Os=function(){function t(){f(this,t),this.members=[]}return y(t,[{key:"add",value:function(t){Ga(this.members,t),t.scheduleRender()}},{key:"remove",value:function(t){if(Wa(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){var e=this.members[this.members.length-1];e&&this.promote(e)}}},{key:"relegate",value:function(t){var e,n=this.members.findIndex((function(e){return t===e}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){e=i;break}}return!!e&&(this.promote(e),!0)}},{key:"promote",value:function(t,e){var n=this.lead;t!==n&&(this.prevLead=n,this.lead=t,t.show(),n&&(n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0),!1===t.options.crossfade&&n.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(t){var e=t.options,n=t.resumingFrom;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(t){t.instance&&t.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),t}();function Fs(t,e,n){var r="",i=t.x.translate/e.x,a=t.y.translate/e.y,o=(null===n||void 0===n?void 0:n.z)||0;if((i||a||o)&&(r="translate3d(".concat(i,"px, ").concat(a,"px, ").concat(o,"px) ")),1===e.x&&1===e.y||(r+="scale(".concat(1/e.x,", ").concat(1/e.y,") ")),n){var s=n.rotate,u=n.rotateX,l=n.rotateY,c=n.skewX,h=n.skewY;s&&(r+="rotate(".concat(s,"deg) ")),u&&(r+="rotateX(".concat(u,"deg) ")),l&&(r+="rotateY(".concat(l,"deg) ")),c&&(r+="skewX(".concat(c,"deg) ")),h&&(r+="skewY(".concat(h,"deg) "))}var p=t.x.scale*e.x,f=t.y.scale*e.y;return 1===p&&1===f||(r+="scale(".concat(p,", ").concat(f,")")),r||"none"}var Ps=function(t,e){return t.depth-e.depth},Ms=function(){function t(){f(this,t),this.children=[],this.isDirty=!1}return y(t,[{key:"add",value:function(t){Ga(this.children,t),this.isDirty=!0}},{key:"remove",value:function(t){Wa(this.children,t),this.isDirty=!0}},{key:"forEach",value:function(t){this.isDirty&&this.children.sort(Ps),this.isDirty=!1,this.children.forEach(t)}}]),t}();var Rs=["","X","Y","Z"],Ns={visibility:"hidden"},zs=0,Vs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function js(t,e,n,r){var i=e.latestValues;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Ks(t){var e=t.attachResizeListener,n=t.defaultParent,r=t.measureScroll,i=t.checkIsScrollRoot,a=t.resetTransform;return function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();f(this,t),this.id=zs++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=function(){e.isUpdating&&(e.isUpdating=!1,e.clearAllSnapshots())},this.updateProjection=function(){var t;e.projectionUpdateScheduled=!1,Vs.totalNodes=Vs.resolvedTargetDeltas=Vs.recalculatedProjection=0,e.nodes.forEach(Gs),e.nodes.forEach(Js),e.nodes.forEach(Qs),e.nodes.forEach(Ws),t=Vs,window.MotionDebug&&window.MotionDebug.record(t)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=i?i.root||i:this,this.path=i?[].concat(p(i.path),[i]):[],this.parent=i,this.depth=i?i.depth+1:0;for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ms)}return y(t,[{key:"addEventListener",value:function(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new Ha),this.eventHandlers.get(t).add(e)}},{key:"notifyListeners",value:function(t){for(var e=this.eventHandlers.get(t),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&e.notify.apply(e,r)}},{key:"hasListeners",value:function(t){return this.eventHandlers.has(t)}},{key:"mount",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(!this.instance){var i;this.isSVG=(i=t)instanceof SVGElement&&"svg"!==i.tagName,this.instance=t;var a=this.options,o=a.layoutId,s=a.layout,u=a.visualElement;if(u&&!u.current&&u.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(s||o)&&(this.isLayoutDirty=!0),e){var l,c=function(){return n.root.updateBlockedByResize=!1};e(t,(function(){n.root.updateBlockedByResize=!0,l&&l(),l=function(t,e){var n=Ir.now(),r=function r(i){var a=i.timestamp-n;a>=e&&(Mn(r),t(a-e))};return Pn.read(r,!0),function(){return Mn(r)}}(c,250),os.hasAnimatedSinceResize&&(os.hasAnimatedSinceResize=!1,n.nodes.forEach($s))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&u&&(o||s)&&this.addEventListener("didUpdate",(function(t){var e=t.delta,r=t.hasLayoutChanged,i=t.hasRelativeTargetChanged,a=t.layout;if(n.isTreeAnimationBlocked())return n.target=void 0,void(n.relativeTarget=void 0);var o=n.options.transition||u.getDefaultTransition()||iu,s=u.getProps(),l=s.onLayoutAnimationStart,c=s.onLayoutAnimationComplete,h=!n.targetLayout||!Cs(n.targetLayout,a)||i,p=!r&&i;if(n.options.layoutRoot||n.resumeFrom&&n.resumeFrom.instance||p||r&&(h||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0),n.setAnimationOrigin(e,p);var f=zt(zt({},Sr(o,"layout")),{},{onPlay:l,onComplete:c});(u.shouldReduceMotion||n.options.layoutRoot)&&(f.delay=0,f.type=!1),n.startAnimation(f)}else r||$s(n),n.isLead()&&n.options.onExitComplete&&n.options.onExitComplete();n.targetLayout=a}))}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Mn(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zs),this.animationId++)}},{key:"getTransformTemplate",value:function(){var t=this.options.visualElement;return t&&t.getProps().transformTemplate}},{key:"willUpdate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())this.options.onExitComplete&&this.options.onExitComplete();else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var e=0;e<this.path.length;e++){var n=this.path[e];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}var r=this.options,i=r.layoutId,a=r.layout;if(void 0!==i||a){var o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}}}},{key:"update",value:function(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Xs);this.isUpdating||this.nodes.forEach(Ys),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(qs),this.nodes.forEach(Us),this.nodes.forEach(Bs),this.clearAllSnapshots();var t=Ir.now();Rn.delta=Pe(0,1e3/60,t-Rn.timestamp),Rn.timestamp=t,Rn.isProcessing=!0,Nn.update.process(Rn),Nn.preRender.process(Rn),Nn.render.process(Rn),Rn.isProcessing=!1}},{key:"didUpdate",value:function(){var t=this;this.updateScheduled||(this.updateScheduled=!0,Zt.read((function(){return t.update()})))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(Hs),this.sharedNodes.forEach(tu)}},{key:"scheduleUpdateProjection",value:function(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pn.preRender(this.updateProjection,!1,!0))}},{key:"scheduleCheckAfterUnmount",value:function(){var t=this;Pn.postRender((function(){t.isLayoutDirty?t.root.didUpdate():t.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Po(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var n=this.options.visualElement;n&&n.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&(this.scroll={animationId:this.root.animationId,phase:t,isRoot:i(this.instance),offset:r(this.instance)})}},{key:"resetTransform",value:function(){if(a){var t=this.isLayoutDirty||this.shouldResetTransform,e=this.projectionDelta&&!Is(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;t&&(e||Vo(this.latestValues)||i)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.measurePageBox(),r=this.removeElementScroll(n);return e&&(r=this.removeTransform(r)),su((t=r).x),su(t.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var t=this.options.visualElement;if(!t)return Po();var e=t.measureViewportBox(),n=this.root.scroll;return n&&(Xo(e.x,n.offset.x),Xo(e.y,n.offset.y)),e}},{key:"removeElementScroll",value:function(t){var e=Po();ks(e,t);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){ks(e,t);var o=this.root.scroll;o&&(Xo(e.x,-o.offset.x),Xo(e.y,-o.offset.y))}Xo(e.x,i.offset.x),Xo(e.y,i.offset.y)}}return e}},{key:"applyTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Po();ks(n,t);for(var r=0;r<this.path.length;r++){var i=this.path[r];!e&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Jo(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),Vo(i.latestValues)&&Jo(n,i.latestValues)}return Vo(this.latestValues)&&Jo(n,this.latestValues),n}},{key:"removeTransform",value:function(t){var e=Po();ks(e,t);for(var n=0;n<this.path.length;n++){var r=this.path[n];if(r.instance&&Vo(r.latestValues)){zo(r.latestValues)&&r.updateSnapshot();var i=Po();ks(i,r.measurePageBox()),_s(e,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}}return Vo(this.latestValues)&&_s(e,this.latestValues),e}},{key:"setTargetDelta",value:function(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(t){this.options=zt(zt(zt({},this.options),t),{},{crossfade:void 0===t.crossfade||t.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);var r=Boolean(this.resumingFrom)||this!==n;if(!!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget)){var i=this.options,a=i.layout,o=i.layoutId;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=Rn.timestamp,!this.targetDelta&&!this.relativeTarget){var s=this.getClosestProjectingParent();s&&s.layout&&1!==this.animationProgress?(this.relativeParent=s,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Po(),this.relativeTargetOrigin=Po(),_o(this.relativeTargetOrigin,this.layout.layoutBox,s.layout.layoutBox),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var u,l,c;if(this.target||(this.target=Po(),this.targetWithTransforms=Po()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),u=this.target,l=this.relativeTarget,c=this.relativeParent.target,Ao(u.x,l.x,c.x),Ao(u.y,l.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):ks(this.target,this.layout.layoutBox),Wo(this.target,this.targetDelta)):ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var h=this.getClosestProjectingParent();h&&Boolean(h.resumingFrom)===Boolean(this.resumingFrom)&&!h.options.layoutScroll&&h.target&&1!==this.animationProgress?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Po(),this.relativeTargetOrigin=Po(),_o(this.relativeTargetOrigin,this.target,h.target),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vs.resolvedTargetDeltas++}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!zo(this.parent.latestValues)&&!jo(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"calcProjection",value:function(){var t,e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e,r=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Rn.timestamp&&(r=!1),!r){var i=this.options,a=i.layout,o=i.layoutId;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(a||o)){ks(this.layoutCorrected,this.layout.layoutBox);var s=this.treeScale.x,u=this.treeScale.y;!function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.length;if(i){var a,o;e.x=e.y=1;for(var s=0;s<i;s++){o=(a=n[s]).projectionDelta;var u=a.instance;u&&u.style&&"contents"===u.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Jo(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Wo(t,o)),r&&Vo(a.latestValues)&&Jo(t,a.latestValues))}e.x=Ho(e.x),e.y=Ho(e.y)}}(this.layoutCorrected,this.treeScale,this.path,n),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms=Po());var l=e.target;if(l){this.projectionDelta||(this.projectionDelta=Fo(),this.projectionDeltaWithTransform=Fo());var c=this.projectionTransform;To(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Fs(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===s&&this.treeScale.y===u||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Vs.recalculatedProjection++}else this.projectionTransform&&(this.projectionDelta=Fo(),this.projectionTransform="none",this.scheduleRender())}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),t){var e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.snapshot,i=r?r.latestValues:{},a=zt({},this.latestValues),o=Fo();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;var s,u=Po(),l=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),h=!c||c.members.length<=1,p=Boolean(l&&!h&&!0===this.options.crossfade&&!this.path.some(ru));this.animationProgress=0,this.mixTargetDelta=function(n){var r,c,f=n/1e3;eu(o.x,t.x,f),eu(o.y,t.y,f),e.setTargetDelta(o),e.relativeTarget&&e.relativeTargetOrigin&&e.layout&&e.relativeParent&&e.relativeParent.layout&&(_o(u,e.layout.layoutBox,e.relativeParent.layout.layoutBox),function(t,e,n,r){nu(t.x,e.x,n.x,r),nu(t.y,e.y,n.y,r)}(e.relativeTarget,e.relativeTargetOrigin,u,f),s&&(r=e.relativeTarget,c=s,r.x.min===c.x.min&&r.x.max===c.x.max&&r.y.min===c.y.min&&r.y.max===c.y.max)&&(e.isProjectionDirty=!1),s||(s=Po()),ks(s,e.relativeTarget)),l&&(e.animationValues=a,function(t,e,n,r,i,a){i?(t.opacity=ha(0,void 0!==n.opacity?n.opacity:1,gs(r)),t.opacityExit=ha(void 0!==e.opacity?e.opacity:1,0,xs(r))):a&&(t.opacity=ha(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(var o=0;o<ds;o++){var s="border".concat(fs[o],"Radius"),u=ys(e,s),l=ys(n,s);void 0===u&&void 0===l||(u||(u=0),l||(l=0),0===u||0===l||vs(u)===vs(l)?(t[s]=Math.max(ha(ms(u),ms(l),r),0),(We.test(l)||We.test(u))&&(t[s]+="%")):t[s]=l)}(e.rotate||n.rotate)&&(t.rotate=ha(e.rotate||0,n.rotate||0,r))}(a,i,e.latestValues,f,p,h)),e.root.scheduleUpdateProjection(),e.scheduleRender(),e.animationProgress=f},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}},{key:"startAnimation",value:function(t){var e=this;this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Mn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pn.update((function(){os.hasAnimatedSinceResize=!0,e.currentAnimation=function(t,e,n){var r=Ae(t)?t:qa(t);return r.start(Ua("",r,e,n)),r.animation}(0,1e3,zt(zt({},t),{},{onUpdate:function(n){e.mixTargetDelta(n),t.onUpdate&&t.onUpdate(n)},onComplete:function(){t.onComplete&&t.onComplete(),e.completeAnimation()}})),e.resumingFrom&&(e.resumingFrom.currentAnimation=e.currentAnimation),e.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var t=this.getLead(),e=t.targetWithTransforms,n=t.target,r=t.layout,i=t.latestValues;if(e&&n&&r){if(this!==t&&this.layout&&r&&uu(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Po();var a=wo(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+a;var o=wo(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+o}ks(e,n),Jo(e,i),To(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}},{key:"registerSharedNode",value:function(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new Os),this.sharedNodes.get(t).add(e);var n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}},{key:"isLead",value:function(){var t=this.getStack();return!t||t.lead===this}},{key:"getLead",value:function(){var t;return this.options.layoutId&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}},{key:"getPrevLead",value:function(){var t;return this.options.layoutId?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}},{key:"getStack",value:function(){var t=this.options.layoutId;if(t)return this.root.sharedNodes.get(t)}},{key:"promote",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.needsReset,n=t.transition,r=t.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var t=this.getStack();return!!t&&t.relegate(this)}},{key:"resetSkewAndRotation",value:function(){var t=this.options.visualElement;if(t){var e=!1,n=t.latestValues;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),e){var r={};n.z&&js("z",t,r,this.animationValues);for(var i=0;i<Rs.length;i++)js("rotate".concat(Rs[i]),t,r,this.animationValues),js("skew".concat(Rs[i]),t,r,this.animationValues);for(var a in t.render(),r)t.setStaticValue(a,r[a]),this.animationValues&&(this.animationValues[a]=r[a]);t.scheduleRender()}}}},{key:"getProjectionStyles",value:function(t){var e,n;if(this.instance&&!this.isSVG){if(!this.isVisible)return Ns;var r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Ln(null===t||void 0===t?void 0:t.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var o={};return this.options.layoutId&&(o.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,o.pointerEvents=Ln(null===t||void 0===t?void 0:t.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(o.transform=i?i({},""):"none",this.hasProjected=!1),o}var s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=Fs(this.projectionDeltaWithTransform,this.treeScale,s),i&&(r.transform=i(s,r.transform));var u=this.projectionDelta,l=u.x,c=u.y;for(var h in r.transformOrigin="".concat(100*l.origin,"% ").concat(100*c.origin,"% 0"),a.animationValues?r.opacity=a===this?null!==(n=null!==(e=s.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,we)if(void 0!==s[h]){var p=we[h],f=p.correct,d=p.applyTo,m="none"===r.transform?s[h]:f(s[h],a);if(d)for(var v=d.length,y=0;y<v;y++)r[d[y]]=m;else r[h]=m}return this.options.layoutId&&(r.pointerEvents=a===this?Ln(null===t||void 0===t?void 0:t.pointerEvents)||"":"none"),r}}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(t){var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(Xs),this.root.sharedNodes.clear()}}]),t}()}function Us(t){t.updateLayout()}function Bs(t){var e,n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){var r=t.layout,i=r.layoutBox,a=r.measuredBox,o=t.options.animationType,s=n.source!==t.layout.source;"size"===o?Mo((function(t){var e=s?n.measuredBox[t]:n.layoutBox[t],r=wo(e);e.min=i[t].min,e.max=e.min+r})):uu(o,n.layoutBox,i)&&Mo((function(e){var r=s?n.measuredBox[e]:n.layoutBox[e],a=wo(i[e]);r.max=r.min+a,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[e].max=t.relativeTarget[e].min+a)}));var u=Fo();To(u,i,n.layoutBox);var l=Fo();s?To(l,t.applyTransform(a,!0),n.measuredBox):To(l,i,n.layoutBox);var c=!Is(u),h=!1;if(!t.resumeFrom){var p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){var f=p.snapshot,d=p.layout;if(f&&d){var m=Po();_o(m,n.layoutBox,f.layoutBox);var v=Po();_o(v,i,d.layoutBox),Cs(m,v)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=m,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:u,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){var y=t.options.onExitComplete;y&&y()}t.options.transition=void 0}function Gs(t){Vs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ws(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Hs(t){t.clearSnapshot()}function Xs(t){t.clearMeasurements()}function Ys(t){t.isLayoutDirty=!1}function qs(t){var e=t.options.visualElement;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $s(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Js(t){t.resolveTargetDelta()}function Qs(t){t.calcProjection()}function Zs(t){t.resetSkewAndRotation()}function tu(t){t.removeLeadSnapshot()}function eu(t,e,n){t.translate=ha(e.translate,0,n),t.scale=ha(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function nu(t,e,n,r){t.min=ha(e.min,n.min,r),t.max=ha(e.max,n.max,r)}function ru(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}var iu={duration:.45,ease:[.4,0,.1,1]},au=function(t){return"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t)},ou=au("applewebkit/")&&!au("chrome/")?Math.round:On;function su(t){t.min=ou(t.min),t.max=ou(t.max)}function uu(t,e,n){return"position"===t||"preserve-aspect"===t&&!ko(Ds(e),Ds(n),.2)}var lu=Ks({attachResizeListener:function(t,e){return jn(t,"resize",e)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),cu={current:void 0},hu=Ks({measureScroll:function(t){return{x:t.scrollLeft,y:t.scrollTop}},defaultParent:function(){if(!cu.current){var t=new lu({});t.mount(window),t.setOptions({layoutScroll:!0}),cu.current=t}return cu.current},resetTransform:function(t,e){t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:function(t){return Boolean("fixed"===window.getComputedStyle(t).position)}}),pu={pan:{Feature:as},drag:{Feature:rs,ProjectionNode:hu,MeasureLayout:hs}},fu={current:null},du={current:!1};var mu=new WeakMap,vu=[].concat(p(Xr),[si,gi]),yu=["willChange"],gu=["children"],xu=Object.keys(ce),bu=xu.length,wu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],ku=ie.length,Su=function(){function t(e){var n=this,r=e.parent,i=e.props,a=e.presenceContext,o=e.reducedMotionConfig,s=e.blockInitialAnimation,u=e.visualState,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,t),this.resolveKeyframes=function(t,e,r,i){return new n.KeyframeResolver(t,e,r,i,n)},this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ti,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return Pn.render(n.render,!1,!0)};var c=u.latestValues,h=u.renderState;this.latestValues=c,this.baseTarget=zt({},c),this.initialValues=i.initial?zt({},c):{},this.renderState=h,this.parent=r,this.props=i,this.presenceContext=a,this.depth=r?r.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=ae(i),this.isVariantNode=oe(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(r&&r.current);var p=this.scrapeMotionValuesFromProps(i,{},this),d=p.willChange,m=un(p,yu);for(var v in m){var y=m[v];void 0!==c[v]&&Ae(y)&&(y.set(c[v],!1),Ba(d)&&d.add(v))}}return y(t,[{key:"scrapeMotionValuesFromProps",value:function(t,e,n){return{}}},{key:"mount",value:function(t){var e=this;this.current=t,mu.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((function(t,n){return e.bindToMotionValue(n,t)})),du.current||function(){if(du.current=!0,Ut)if(window.matchMedia){var t=window.matchMedia("(prefers-reduced-motion)"),e=function(){return fu.current=t.matches};t.addListener(e),e()}else fu.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||fu.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){for(var t in mu.delete(this.current),this.projection&&this.projection.unmount(),Mn(this.notifyUpdate),Mn(this.render),this.valueSubscriptions.forEach((function(t){return t()})),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[t].clear();for(var e in this.features)this.features[e].unmount();this.current=null}},{key:"bindToMotionValue",value:function(t,e){var n=this,r=Se.has(t),i=e.on("change",(function(e){n.latestValues[t]=e,n.props.onUpdate&&Pn.preRender(n.notifyUpdate),r&&n.projection&&(n.projection.isTransformDirty=!0)})),a=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,(function(){i(),a(),e.owner&&e.stop()}))}},{key:"sortNodePosition",value:function(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}},{key:"loadFeatures",value:function(t,e,n,r){for(var i,a,o=this,s=(t.children,un(t,gu)),u=0;u<bu;u++){var l=xu[u],c=ce[l],h=c.isEnabled,p=c.Feature,f=c.ProjectionNode,d=c.MeasureLayout;f&&(i=f),h(s)&&(!this.features[l]&&p&&(this.features[l]=new p(this)),d&&(a=d))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);var m=s.layoutId,v=s.layout,y=s.drag,g=s.dragConstraints,x=s.layoutScroll,b=s.layoutRoot;this.projection.setOptions({layoutId:m,layout:v,alwaysMeasureLayout:Boolean(y)||g&&te(g),visualElement:this,scheduleRender:function(){return o.scheduleRender()},animationType:"string"===typeof v?v:"both",initialPromotionConfig:r,layoutScroll:x,layoutRoot:b})}return a}},{key:"updateFeatures",value:function(){for(var t in this.features){var e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Po()}},{key:"getStaticValue",value:function(t){return this.latestValues[t]}},{key:"setStaticValue",value:function(t,e){this.latestValues[t]=e}},{key:"update",value:function(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(var n=0;n<wu.length;n++){var r=wu[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);var i=t["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(t,e,n){var r=e.willChange;for(var i in e){var a=e[i],o=n[i];if(Ae(a))t.addValue(i,a),Ba(r)&&r.add(i);else if(Ae(o))t.addValue(i,qa(a,{owner:t})),Ba(r)&&r.remove(i);else if(o!==a)if(t.hasValue(i)){var s=t.getValue(i);!0===s.liveStyle?s.jump(a):s.hasAnimated||s.set(a)}else{var u=t.getStaticValue(i);t.addValue(i,qa(void 0!==u?u:a,{owner:t}))}}for(var l in n)void 0===e[l]&&t.removeValue(l);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(t){return this.props.variants?this.props.variants[t]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"getVariantContext",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){var t=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}for(var e={},n=0;n<ku;n++){var r=ie[n],i=this.props[r];(ee(i)||!1===i)&&(e[r]=i)}return e}},{key:"addVariantChild",value:function(t){var e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),function(){return e.variantChildren.delete(t)}}},{key:"addValue",value:function(t,e){e!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,e)),this.values.set(t,e),this.latestValues[t]=e.get()}},{key:"removeValue",value:function(t){this.values.delete(t);var e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}},{key:"hasValue",value:function(t){return this.values.has(t)}},{key:"getValue",value:function(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];var n=this.values.get(t);return void 0===n&&void 0!==e&&(n=qa(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}},{key:"readValue",value:function(t,e){var n,r,i=void 0===this.latestValues[t]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,t))&&void 0!==n?n:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];return void 0!==i&&null!==i&&("string"===typeof i&&(Mr(i)||Dr(i))?i=parseFloat(i):(r=i,!vu.find(Hr(r))&&gi.test(e)&&(i=Ai(t,e))),this.setBaseTarget(t,Ae(i)?i.get():i)),Ae(i)?i.get():i}},{key:"setBaseTarget",value:function(t,e){this.baseTarget[t]=e}},{key:"getBaseTarget",value:function(t){var e,n,r=this.props.initial,i="string"===typeof r||"object"===typeof r?null===(n=Sn(this.props,r,null===(e=this.presenceContext)||void 0===e?void 0:e.custom))||void 0===n?void 0:n[t]:void 0;if(r&&void 0!==i)return i;var a=this.getBaseTargetFromProps(this.props,t);return void 0===a||Ae(a)?void 0!==this.initialValues[t]&&void 0===i?void 0:this.baseTarget[t]:a}},{key:"on",value:function(t,e){return this.events[t]||(this.events[t]=new Ha),this.events[t].add(e)}},{key:"notify",value:function(t){if(this.events[t]){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.events[t]).notify.apply(e,r)}}}]),t}(),Tu=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).KeyframeResolver=Ei,t}return y(n,[{key:"sortInstanceNodePosition",value:function(t,e){return 2&t.compareDocumentPosition(e)?1:-1}},{key:"getBaseTargetFromProps",value:function(t,e){return t.style?t.style[e]:void 0}},{key:"removeValueFromRenderState",value:function(t,e){var n=e.vars,r=e.style;delete n[t],delete r[t]}}]),n}(Su);var Au=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).type="html",t}return y(n,[{key:"readValueFromInstance",value:function(t,e){if(Se.has(e)){var n=Ti(e);return n&&n.default||0}var r,i=(r=t,window.getComputedStyle(r)),a=(Ie(e)?i.getPropertyValue(e):i[e])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(t,e){return Qo(t,e.transformPagePoint)}},{key:"build",value:function(t,e,n,r){Qe(t,e,n,r.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(t,e,n){return wn(t,e,n)}},{key:"handleChildMotionValue",value:function(){var t=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var e=this.props.children;Ae(e)&&(this.childSubscription=e.on("change",(function(e){t.current&&(t.current.textContent="".concat(e))})))}},{key:"renderInstance",value:function(t,e,n,r){gn(t,e,n,r)}}]),n}(Tu),Eu=function(t){x(n,t);var e=S(n);function n(){var t;return f(this,n),(t=e.apply(this,arguments)).type="svg",t.isSVGTag=!1,t}return y(n,[{key:"getBaseTargetFromProps",value:function(t,e){return t[e]}},{key:"readValueFromInstance",value:function(t,e){if(Se.has(e)){var n=Ti(e);return n&&n.default||0}return e=xn.has(e)?e:Wt(e),t.getAttribute(e)}},{key:"measureInstanceViewportBox",value:function(){return Po()}},{key:"scrapeMotionValuesFromProps",value:function(t,e){return kn(t,e,this)}},{key:"build",value:function(t,e,n,r){fn(t,e,n,this.isSVGTag,r.transformTemplate)}},{key:"renderInstance",value:function(t,e,n,r){bn(t,e,0,r)}},{key:"mount",value:function(t){this.isSVGTag=mn(t.tagName),Cr(b(n.prototype),"mount",this).call(this,t)}}]),n}(Tu),_u=function(t,e){return be(t)?new Eu(e,{enableHardwareAcceleration:!1}):new Au(e,{enableHardwareAcceleration:!0})},Lu={layout:{ProjectionNode:hu,MeasureLayout:hs}},Iu=zt(zt(zt(zt({},ho),fr),pu),Lu),Cu=ge((function(t,e){return function(t,e,n,r){var i=e.forwardMotionProps,a=void 0!==i&&i;return zt(zt({},be(t)?zn:Vn),{},{preloadedFeatures:n,useRender:yn(a),createVisualElement:r,Component:t})}(t,e,Iu,_u)}));function Du(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ou(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Du(Object(n),!0).forEach((function(e){Mu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Du(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fu(t){return Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(t)}function Pu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ru(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(t,e)||zu(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nu(t){return function(t){if(Array.isArray(t))return Vu(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zu(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zu(t,e){if(t){if("string"===typeof t)return Vu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vu(t,e):void 0}}function Vu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ju=function(){},Ku={},Uu={},Bu=null,Gu={mark:ju,measure:ju};try{"undefined"!==typeof window&&(Ku=window),"undefined"!==typeof document&&(Uu=document),"undefined"!==typeof MutationObserver&&(Bu=MutationObserver),"undefined"!==typeof performance&&(Gu=performance)}catch(zp){}var Wu,Hu,Xu,Yu,qu,$u=(Ku.navigator||{}).userAgent,Ju=void 0===$u?"":$u,Qu=Ku,Zu=Uu,tl=Bu,el=Gu,nl=(Qu.document,!!Zu.documentElement&&!!Zu.head&&"function"===typeof Zu.addEventListener&&"function"===typeof Zu.createElement),rl=~Ju.indexOf("MSIE")||~Ju.indexOf("Trident/"),il="___FONT_AWESOME___",al=16,ol="fa",sl="svg-inline--fa",ul="data-fa-i2svg",ll="data-fa-pseudo-element",cl="data-fa-pseudo-element-pending",hl="data-prefix",pl="data-icon",fl="fontawesome-i2svg",dl="async",ml=["HTML","HEAD","STYLE","SCRIPT"],vl=function(){try{return!0}catch(zp){return!1}}(),yl="classic",gl="sharp",xl=[yl,gl];function bl(t){return new Proxy(t,{get:function(t,e){return e in t?t[e]:t[yl]}})}var wl=bl((Mu(Wu={},yl,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),Mu(Wu,gl,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Wu)),kl=bl((Mu(Hu={},yl,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Mu(Hu,gl,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Hu)),Sl=bl((Mu(Xu={},yl,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Mu(Xu,gl,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Xu)),Tl=bl((Mu(Yu={},yl,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Mu(Yu,gl,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Yu)),Al=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,El="fa-layers-text",_l=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Ll=bl((Mu(qu={},yl,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Mu(qu,gl,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),qu)),Il=[1,2,3,4,5,6,7,8,9,10],Cl=Il.concat([11,12,13,14,15,16,17,18,19,20]),Dl=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ol={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Fl=new Set;Object.keys(kl[yl]).map(Fl.add.bind(Fl)),Object.keys(kl[gl]).map(Fl.add.bind(Fl));var Pl=[].concat(xl,Nu(Fl),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ol.GROUP,Ol.SWAP_OPACITY,Ol.PRIMARY,Ol.SECONDARY]).concat(Il.map((function(t){return"".concat(t,"x")}))).concat(Cl.map((function(t){return"w-".concat(t)}))),Ml=Qu.FontAwesomeConfig||{};if(Zu&&"function"===typeof Zu.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(t){var e=Ru(t,2),n=e[0],r=e[1],i=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=Zu.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(n));void 0!==i&&null!==i&&(Ml[r]=i)}))}var Rl={styleDefault:"solid",familyDefault:"classic",cssPrefix:ol,replacementClass:sl,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Ml.familyPrefix&&(Ml.cssPrefix=Ml.familyPrefix);var Nl=Ou(Ou({},Rl),Ml);Nl.autoReplaceSvg||(Nl.observeMutations=!1);var zl={};Object.keys(Rl).forEach((function(t){Object.defineProperty(zl,t,{enumerable:!0,set:function(e){Nl[t]=e,Vl.forEach((function(t){return t(zl)}))},get:function(){return Nl[t]}})})),Object.defineProperty(zl,"familyPrefix",{enumerable:!0,set:function(t){Nl.cssPrefix=t,Vl.forEach((function(t){return t(zl)}))},get:function(){return Nl.cssPrefix}}),Qu.FontAwesomeConfig=zl;var Vl=[];var jl=al,Kl={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var Ul="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Bl(){for(var t=12,e="";t-- >0;)e+=Ul[62*Math.random()|0];return e}function Gl(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function Wl(t){return t.classList?Gl(t.classList):(t.getAttribute("class")||"").split(" ").filter((function(t){return t}))}function Hl(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Xl(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")}),"")}function Yl(t){return t.size!==Kl.size||t.x!==Kl.x||t.y!==Kl.y||t.rotate!==Kl.rotate||t.flipX||t.flipY}var ql=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, 0));\n          transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function $l(){var t=ol,e=sl,n=zl.cssPrefix,r=zl.replacementClass,i=ql;if(n!==t||r!==e){var a=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(e),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var Jl=!1;function Ql(){zl.autoAddCss&&!Jl&&(!function(t){if(t&&nl){var e=Zu.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Zu.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}Zu.head.insertBefore(e,r)}}($l()),Jl=!0)}var Zl={mixout:function(){return{dom:{css:$l,insertCss:Ql}}},hooks:function(){return{beforeDOMElementCreation:function(){Ql()},beforeI2svg:function(){Ql()}}}},tc=Qu||{};tc[il]||(tc[il]={}),tc[il].styles||(tc[il].styles={}),tc[il].hooks||(tc[il].hooks={}),tc[il].shims||(tc[il].shims=[]);var ec=tc[il],nc=[],rc=!1;function ic(t){var e=t.tag,n=t.attributes,r=void 0===n?{}:n,i=t.children,a=void 0===i?[]:i;return"string"===typeof t?Hl(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,'="').concat(Hl(t[n]),'" ')}),"").trim()}(r),">").concat(a.map(ic).join(""),"</").concat(e,">")}function ac(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}nl&&((rc=(Zu.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Zu.readyState))||Zu.addEventListener("DOMContentLoaded",(function t(){Zu.removeEventListener("DOMContentLoaded",t),rc=1,nc.map((function(t){return t()}))})));var oc=function(t,e,n,r){var i,a,o,s=Object.keys(t),u=s.length,l=void 0!==r?function(t,e){return function(n,r,i,a){return t.call(e,n,r,i,a)}}(e,r):e;for(void 0===n?(i=1,o=t[s[0]]):(i=0,o=n);i<u;i++)o=l(o,t[a=s[i]],a,t);return o};function sc(t){var e=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&i)<<10)+(1023&a)+65536):(e.push(i),n--)}else e.push(i)}return e}(t);return 1===e.length?e[0].toString(16):null}function uc(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{})}function lc(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=uc(e);"function"!==typeof ec.hooks.addPack||r?ec.styles[t]=Ou(Ou({},ec.styles[t]||{}),i):ec.hooks.addPack(t,uc(e)),"fas"===t&&lc("fa",e)}var cc,hc,pc,fc=ec.styles,dc=ec.shims,mc=(Mu(cc={},yl,Object.values(Sl[yl])),Mu(cc,gl,Object.values(Sl[gl])),cc),vc=null,yc={},gc={},xc={},bc={},wc={},kc=(Mu(hc={},yl,Object.keys(wl[yl])),Mu(hc,gl,Object.keys(wl[gl])),hc);function Sc(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r!==t||""===i||function(t){return~Pl.indexOf(t)}(i)?null:i}var Tc,Ac=function(){var t=function(t){return oc(fc,(function(e,n,r){return e[r]=oc(n,t,{}),e}),{})};yc=t((function(t,e,n){(e[3]&&(t[e[3]]=n),e[2])&&e[2].filter((function(t){return"number"===typeof t})).forEach((function(e){t[e.toString(16)]=n}));return t})),gc=t((function(t,e,n){(t[n]=n,e[2])&&e[2].filter((function(t){return"string"===typeof t})).forEach((function(e){t[e]=n}));return t})),wc=t((function(t,e,n){var r=e[2];return t[n]=n,r.forEach((function(e){t[e]=n})),t}));var e="far"in fc||zl.autoFetchSvg,n=oc(dc,(function(t,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||e||(i="fas"),"string"===typeof r&&(t.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(t.unicodes[r.toString(16)]={prefix:i,iconName:a}),t}),{names:{},unicodes:{}});xc=n.names,bc=n.unicodes,vc=Dc(zl.styleDefault,{family:zl.familyDefault})};function Ec(t,e){return(yc[t]||{})[e]}function _c(t,e){return(wc[t]||{})[e]}function Lc(t){return xc[t]||{prefix:null,iconName:null}}function Ic(){return vc}Tc=function(t){vc=Dc(t.styleDefault,{family:zl.familyDefault})},Vl.push(Tc),Ac();var Cc=function(){return{prefix:null,iconName:null,rest:[]}};function Dc(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===e?yl:e,r=wl[n][t],i=kl[n][t]||kl[n][r],a=t in ec.styles?t:null;return i||a||null}var Oc=(Mu(pc={},yl,Object.keys(Sl[yl])),Mu(pc,gl,Object.keys(Sl[gl])),pc);function Fc(t){var e,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(Mu(e={},yl,"".concat(zl.cssPrefix,"-").concat(yl)),Mu(e,gl,"".concat(zl.cssPrefix,"-").concat(gl)),e),a=null,o=yl;(t.includes(i[yl])||t.some((function(t){return Oc[yl].includes(t)})))&&(o=yl),(t.includes(i[gl])||t.some((function(t){return Oc[gl].includes(t)})))&&(o=gl);var s=t.reduce((function(t,e){var n=Sc(zl.cssPrefix,e);if(fc[e]?(e=mc[o].includes(e)?Tl[o][e]:e,a=e,t.prefix=e):kc[o].indexOf(e)>-1?(a=e,t.prefix=Dc(e,{family:o})):n?t.iconName=n:e!==zl.replacementClass&&e!==i[yl]&&e!==i[gl]&&t.rest.push(e),!r&&t.prefix&&t.iconName){var s="fa"===a?Lc(t.iconName):{},u=_c(t.prefix,t.iconName);s.prefix&&(a=null),t.iconName=s.iconName||u||t.iconName,t.prefix=s.prefix||t.prefix,"far"!==t.prefix||fc.far||!fc.fas||zl.autoFetchSvg||(t.prefix="fas")}return t}),Cc());return(t.includes("fa-brands")||t.includes("fab"))&&(s.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(s.prefix="fad"),s.prefix||o!==gl||!fc.fass&&!zl.autoFetchSvg||(s.prefix="fass",s.iconName=_c(s.prefix,s.iconName)||s.iconName),"fa"!==s.prefix&&"fa"!==a||(s.prefix=Ic()||"fas"),s}var Pc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e,n,r;return e=t,n=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(e){t.definitions[e]=Ou(Ou({},t.definitions[e]||{}),i[e]),lc(e,i[e]);var n=Sl[yl][e];n&&lc(n,i[e]),Ac()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map((function(e){var r=n[e],i=r.prefix,a=r.iconName,o=r.icon,s=o[2];t[i]||(t[i]={}),s.length>0&&s.forEach((function(e){"string"===typeof e&&(t[i][e]=o)})),t[i][a]=o})),t}}],n&&Pu(e.prototype,n),r&&Pu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Mc=[],Rc={},Nc={},zc=Object.keys(Nc);function Vc(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(Rc[t]||[]).forEach((function(t){e=t.apply(null,[e].concat(r))})),e}function jc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(Rc[t]||[]).forEach((function(t){t.apply(null,n)}))}function Kc(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Nc[t]?Nc[t].apply(null,e):void 0}function Uc(t){"fa"===t.prefix&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Ic();if(e)return e=_c(n,e)||e,ac(Bc.definitions,n,e)||ac(ec.styles,n,e)}var Bc=new Pc,Gc={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nl?(jc("beforeI2svg",t),Kc("pseudoElements2svg",t),Kc("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.autoReplaceSvgRoot;!1===zl.autoReplaceSvg&&(zl.autoReplaceSvg=!0),zl.observeMutations=!0,t=function(){Xc({autoReplaceSvgRoot:n}),jc("watch",e)},nl&&(rc?setTimeout(t,0):nc.push(t))}},Wc={icon:function(t){if(null===t)return null;if("object"===Fu(t)&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:_c(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&2===t.length){var e=0===t[1].indexOf("fa-")?t[1].slice(3):t[1],n=Dc(t[0]);return{prefix:n,iconName:_c(n,e)||e}}if("string"===typeof t&&(t.indexOf("".concat(zl.cssPrefix,"-"))>-1||t.match(Al))){var r=Fc(t.split(" "),{skipLookups:!0});return{prefix:r.prefix||Ic(),iconName:_c(r.prefix,r.iconName)||r.iconName}}if("string"===typeof t){var i=Ic();return{prefix:i,iconName:_c(i,t)||t}}}},Hc={noAuto:function(){zl.autoReplaceSvg=!1,zl.observeMutations=!1,jc("noAuto")},config:zl,dom:Gc,parse:Wc,library:Bc,findIconDefinition:Uc,toHtml:ic},Xc=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,e=void 0===t?Zu:t;(Object.keys(ec.styles).length>0||zl.autoFetchSvg)&&nl&&zl.autoReplaceSvg&&Hc.dom.i2svg({node:e})};function Yc(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(t){return ic(t)}))}}),Object.defineProperty(t,"node",{get:function(){if(nl){var e=Zu.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function qc(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,a=t.iconName,o=t.transform,s=t.symbol,u=t.title,l=t.maskId,c=t.titleId,h=t.extra,p=t.watchable,f=void 0!==p&&p,d=r.found?r:n,m=d.width,v=d.height,y="fak"===i,g=[zl.replacementClass,a?"".concat(zl.cssPrefix,"-").concat(a):""].filter((function(t){return-1===h.classes.indexOf(t)})).filter((function(t){return""!==t||!!t})).concat(h.classes).join(" "),x={children:[],attributes:Ou(Ou({},h.attributes),{},{"data-prefix":i,"data-icon":a,class:g,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(v)})},b=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/v*16*.0625,"em")}:{};f&&(x.attributes[ul]=""),u&&(x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(c||Bl())},children:[u]}),delete x.attributes.title);var w=Ou(Ou({},x),{},{prefix:i,iconName:a,main:n,mask:r,maskId:l,transform:o,symbol:s,styles:Ou(Ou({},b),h.styles)}),k=r.found&&n.found?Kc("generateAbstractMask",w)||{children:[],attributes:{}}:Kc("generateAbstractIcon",w)||{children:[],attributes:{}},S=k.children,T=k.attributes;return w.children=S,w.attributes=T,s?function(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,a=t.symbol,o=!0===a?"".concat(e,"-").concat(zl.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ou(Ou({},i),{},{id:o}),children:r}]}]}(w):function(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,a=t.styles,o=t.transform;if(Yl(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=Xl(Ou(Ou({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}(w)}function $c(t){var e=t.content,n=t.width,r=t.height,i=t.transform,a=t.title,o=t.extra,s=t.watchable,u=void 0!==s&&s,l=Ou(Ou(Ou({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});u&&(l[ul]="");var c=Ou({},o.styles);Yl(i)&&(c.transform=function(t){var e=t.transform,n=t.width,r=void 0===n?al:n,i=t.height,a=void 0===i?al:i,o=t.startCentered,s=void 0!==o&&o,u="";return u+=s&&rl?"translate(".concat(e.x/jl-r/2,"em, ").concat(e.y/jl-a/2,"em) "):s?"translate(calc(-50% + ".concat(e.x/jl,"em), calc(-50% + ").concat(e.y/jl,"em)) "):"translate(".concat(e.x/jl,"em, ").concat(e.y/jl,"em) "),u+="scale(".concat(e.size/jl*(e.flipX?-1:1),", ").concat(e.size/jl*(e.flipY?-1:1),") "),u+"rotate(".concat(e.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);var h=Xl(c);h.length>0&&(l.style=h);var p=[];return p.push({tag:"span",attributes:l,children:[e]}),a&&p.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),p}var Jc=ec.styles;function Qc(t){var e=t[0],n=t[1],r=Ru(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(zl.cssPrefix,"-").concat(Ol.GROUP)},children:[{tag:"path",attributes:{class:"".concat(zl.cssPrefix,"-").concat(Ol.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(zl.cssPrefix,"-").concat(Ol.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var Zc={found:!1,width:512,height:512};function th(t,e){var n=e;return"fa"===e&&null!==zl.styleDefault&&(e=Ic()),new Promise((function(r,i){Kc("missingIconAbstract");if("fa"===n){var a=Lc(t)||{};t=a.iconName||t,e=a.prefix||e}if(t&&e&&Jc[e]&&Jc[e][t])return r(Qc(Jc[e][t]));!function(t,e){vl||zl.showMissingIcons||!t||console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}(t,e),r(Ou(Ou({},Zc),{},{icon:zl.showMissingIcons&&t&&Kc("missingIconAbstract")||{}}))}))}var eh=function(){},nh=zl.measurePerformance&&el&&el.mark&&el.measure?el:{mark:eh,measure:eh},rh='FA "6.5.2"',ih=function(t){nh.mark("".concat(rh," ").concat(t," ends")),nh.measure("".concat(rh," ").concat(t),"".concat(rh," ").concat(t," begins"),"".concat(rh," ").concat(t," ends"))},ah={begin:function(t){return nh.mark("".concat(rh," ").concat(t," begins")),function(){return ih(t)}},end:ih},oh=function(){};function sh(t){return"string"===typeof(t.getAttribute?t.getAttribute(ul):null)}function uh(t){return Zu.createElementNS("http://www.w3.org/2000/svg",t)}function lh(t){return Zu.createElement(t)}function ch(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===e?"svg"===t.tag?uh:lh:e;if("string"===typeof t)return Zu.createTextNode(t);var r=n(t.tag);return Object.keys(t.attributes||[]).forEach((function(e){r.setAttribute(e,t.attributes[e])})),(t.children||[]).forEach((function(t){r.appendChild(ch(t,{ceFn:n}))})),r}var hh={replace:function(t){var e=t[0];if(e.parentNode)if(t[1].forEach((function(t){e.parentNode.insertBefore(ch(t),e)})),null===e.getAttribute(ul)&&zl.keepOriginalSource){var n=Zu.createComment(function(t){var e=" ".concat(t.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){var e=t[0],n=t[1];if(~Wl(e).indexOf(zl.replacementClass))return hh.replace(t);var r=new RegExp("".concat(zl.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(t,e){return e===zl.replacementClass||e.match(r)?t.toSvg.push(e):t.toNode.push(e),t}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?e.removeAttribute("class"):e.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(t){return ic(t)})).join("\n");e.setAttribute(ul,""),e.innerHTML=a}};function ph(t){t()}function fh(t,e){var n="function"===typeof e?e:oh;if(0===t.length)n();else{var r=ph;zl.mutateApproach===dl&&(r=Qu.requestAnimationFrame||ph),r((function(){var e=!0===zl.autoReplaceSvg?hh.replace:hh[zl.autoReplaceSvg]||hh.replace,r=ah.begin("mutate");t.map(e),r(),n()}))}}var dh=!1;function mh(){dh=!0}function vh(){dh=!1}var yh=null;function gh(t){if(tl&&zl.observeMutations){var e=t.treeCallback,n=void 0===e?oh:e,r=t.nodeCallback,i=void 0===r?oh:r,a=t.pseudoElementsCallback,o=void 0===a?oh:a,s=t.observeMutationsRoot,u=void 0===s?Zu:s;yh=new tl((function(t){if(!dh){var e=Ic();Gl(t).forEach((function(t){if("childList"===t.type&&t.addedNodes.length>0&&!sh(t.addedNodes[0])&&(zl.searchPseudoElements&&o(t.target),n(t.target)),"attributes"===t.type&&t.target.parentNode&&zl.searchPseudoElements&&o(t.target.parentNode),"attributes"===t.type&&sh(t.target)&&~Dl.indexOf(t.attributeName))if("class"===t.attributeName&&function(t){var e=t.getAttribute?t.getAttribute(hl):null,n=t.getAttribute?t.getAttribute(pl):null;return e&&n}(t.target)){var r=Fc(Wl(t.target)),a=r.prefix,s=r.iconName;t.target.setAttribute(hl,a||e),s&&t.target.setAttribute(pl,s)}else(u=t.target)&&u.classList&&u.classList.contains&&u.classList.contains(zl.replacementClass)&&i(t.target);var u}))}})),nl&&yh.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function xh(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=void 0!==t.innerText?t.innerText.trim():"",i=Fc(Wl(t));return i.prefix||(i.prefix=Ic()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(t,e){return(gc[t]||{})[e]}(i.prefix,t.innerText)||Ec(i.prefix,sc(t.innerText))),!i.iconName&&zl.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function bh(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=xh(t),r=n.iconName,i=n.prefix,a=n.rest,o=function(t){var e=Gl(t.attributes).reduce((function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t}),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return zl.autoA11y&&(n?e["aria-labelledby"]="".concat(zl.replacementClass,"-title-").concat(r||Bl()):(e["aria-hidden"]="true",e.focusable="false")),e}(t),s=Vc("parseNodeAttributes",{},t),u=e.styleParser?function(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce((function(t,e){var n=e.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(t[r]=i.join(":").trim()),t}),{})),n}(t):[];return Ou({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Kl,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:u,attributes:o}},s)}var wh=ec.styles;function kh(t){var e="nest"===zl.autoReplaceSvg?bh(t,{styleParser:!1}):bh(t);return~e.extra.classes.indexOf(El)?Kc("generateLayersText",t,e):Kc("generateSvgReplacementMutation",t,e)}var Sh=new Set;function Th(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!nl)return Promise.resolve();var n=Zu.documentElement.classList,r=function(t){return n.add("".concat(fl,"-").concat(t))},i=function(t){return n.remove("".concat(fl,"-").concat(t))},a=zl.autoFetchSvg?Sh:xl.map((function(t){return"fa-".concat(t)})).concat(Object.keys(wh));a.includes("fa")||a.push("fa");var o=[".".concat(El,":not([").concat(ul,"])")].concat(a.map((function(t){return".".concat(t,":not([").concat(ul,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=Gl(t.querySelectorAll(o))}catch(zp){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var u=ah.begin("onTree"),l=s.reduce((function(t,e){try{var n=kh(e);n&&t.push(n)}catch(zp){vl||"MissingIcon"===zp.name&&console.error(zp)}return t}),[]);return new Promise((function(t,n){Promise.all(l).then((function(n){fh(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof e&&e(),u(),t()}))})).catch((function(t){u(),n(t)}))}))}function Ah(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;kh(t).then((function(t){t&&fh([t],e)}))}xl.map((function(t){Sh.add("fa-".concat(t))})),Object.keys(wl[yl]).map(Sh.add.bind(Sh)),Object.keys(wl[gl]).map(Sh.add.bind(Sh)),Sh=Nu(Sh);var Eh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,r=void 0===n?Kl:n,i=e.symbol,a=void 0!==i&&i,o=e.mask,s=void 0===o?null:o,u=e.maskId,l=void 0===u?null:u,c=e.title,h=void 0===c?null:c,p=e.titleId,f=void 0===p?null:p,d=e.classes,m=void 0===d?[]:d,v=e.attributes,y=void 0===v?{}:v,g=e.styles,x=void 0===g?{}:g;if(t){var b=t.prefix,w=t.iconName,k=t.icon;return Yc(Ou({type:"icon"},t),(function(){return jc("beforeDOMElementCreation",{iconDefinition:t,params:e}),zl.autoA11y&&(h?y["aria-labelledby"]="".concat(zl.replacementClass,"-title-").concat(f||Bl()):(y["aria-hidden"]="true",y.focusable="false")),qc({icons:{main:Qc(k),mask:s?Qc(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:w,transform:Ou(Ou({},Kl),r),symbol:a,title:h,maskId:l,titleId:f,extra:{attributes:y,styles:x,classes:m}})}))}},_h={mixout:function(){return{icon:(t=Eh,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e||{}).icon?e:Uc(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Uc(i||{})),t(r,Ou(Ou({},n),{},{mask:i}))})};var t},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=Th,t.nodeCallback=Ah,t}}},provides:function(t){t.i2svg=function(t){var e=t.node,n=void 0===e?Zu:e,r=t.callback;return Th(n,void 0===r?function(){}:r)},t.generateSvgReplacementMutation=function(t,e){var n=e.iconName,r=e.title,i=e.titleId,a=e.prefix,o=e.transform,s=e.symbol,u=e.mask,l=e.maskId,c=e.extra;return new Promise((function(e,h){Promise.all([th(n,a),u.iconName?th(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(u){var h=Ru(u,2),p=h[0],f=h[1];e([t,qc({icons:{main:p,mask:f},prefix:a,iconName:n,transform:o,symbol:s,maskId:l,title:r,titleId:i,extra:c,watchable:!0})])})).catch(h)}))},t.generateAbstractIcon=function(t){var e,n=t.children,r=t.attributes,i=t.main,a=t.transform,o=Xl(t.styles);return o.length>0&&(r.style=o),Yl(a)&&(e=Kc("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(e||i.icon),{children:n,attributes:r}}}},Lh={mixout:function(){return{layer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.classes,r=void 0===n?[]:n;return Yc({type:"layer"},(function(){jc("beforeDOMElementCreation",{assembler:t,params:e});var n=[];return t((function(t){Array.isArray(t)?t.map((function(t){n=n.concat(t.abstract)})):n=n.concat(t.abstract)})),[{tag:"span",attributes:{class:["".concat(zl.cssPrefix,"-layers")].concat(Nu(r)).join(" ")},children:n}]}))}}}},Ih={mixout:function(){return{counter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.title,r=void 0===n?null:n,i=e.classes,a=void 0===i?[]:i,o=e.attributes,s=void 0===o?{}:o,u=e.styles,l=void 0===u?{}:u;return Yc({type:"counter",content:t},(function(){return jc("beforeDOMElementCreation",{content:t,params:e}),function(t){var e=t.content,n=t.title,r=t.extra,i=Ou(Ou(Ou({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=Xl(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:t.toString(),title:r,extra:{attributes:s,styles:l,classes:["".concat(zl.cssPrefix,"-layers-counter")].concat(Nu(a))}})}))}}}},Ch={mixout:function(){return{text:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,r=void 0===n?Kl:n,i=e.title,a=void 0===i?null:i,o=e.classes,s=void 0===o?[]:o,u=e.attributes,l=void 0===u?{}:u,c=e.styles,h=void 0===c?{}:c;return Yc({type:"text",content:t},(function(){return jc("beforeDOMElementCreation",{content:t,params:e}),$c({content:t,transform:Ou(Ou({},Kl),r),title:a,extra:{attributes:l,styles:h,classes:["".concat(zl.cssPrefix,"-layers-text")].concat(Nu(s))}})}))}}},provides:function(t){t.generateLayersText=function(t,e){var n=e.title,r=e.transform,i=e.extra,a=null,o=null;if(rl){var s=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/s,o=u.height/s}return zl.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([t,$c({content:t.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},Dh=new RegExp('"',"ug"),Oh=[1105920,1112319];function Fh(t,e){var n="".concat(cl).concat(e.replace(":","-"));return new Promise((function(r,i){if(null!==t.getAttribute(n))return r();var a=Gl(t.children).filter((function(t){return t.getAttribute(ll)===e}))[0],o=Qu.getComputedStyle(t,e),s=o.getPropertyValue("font-family").match(_l),u=o.getPropertyValue("font-weight"),l=o.getPropertyValue("content");if(a&&!s)return t.removeChild(a),r();if(s&&"none"!==l&&""!==l){var c=o.getPropertyValue("content"),h=~["Sharp"].indexOf(s[2])?gl:yl,p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?kl[h][s[2].toLowerCase()]:Ll[h][u],f=function(t){var e=t.replace(Dh,""),n=function(t,e){var n,r=t.length,i=t.charCodeAt(e);return i>=55296&&i<=56319&&r>e+1&&(n=t.charCodeAt(e+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(e,0),r=n>=Oh[0]&&n<=Oh[1],i=2===e.length&&e[0]===e[1];return{value:sc(i?e[0]:e),isSecondary:r||i}}(c),d=f.value,m=f.isSecondary,v=s[0].startsWith("FontAwesome"),y=Ec(p,d),g=y;if(v){var x=function(t){var e=bc[t],n=Ec("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);x.iconName&&x.prefix&&(y=x.iconName,p=x.prefix)}if(!y||m||a&&a.getAttribute(hl)===p&&a.getAttribute(pl)===g)r();else{t.setAttribute(n,g),a&&t.removeChild(a);var b={iconName:null,title:null,titleId:null,prefix:null,transform:Kl,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},w=b.extra;w.attributes[ll]=e,th(y,p).then((function(i){var a=qc(Ou(Ou({},b),{},{icons:{main:i,mask:Cc()},prefix:p,iconName:g,extra:w,watchable:!0})),o=Zu.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===e?t.insertBefore(o,t.firstChild):t.appendChild(o),o.outerHTML=a.map((function(t){return ic(t)})).join("\n"),t.removeAttribute(n),r()})).catch(i)}}else r()}))}function Ph(t){return Promise.all([Fh(t,"::before"),Fh(t,"::after")])}function Mh(t){return t.parentNode!==document.head&&!~ml.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(ll)&&(!t.parentNode||"svg"!==t.parentNode.tagName)}function Rh(t){if(nl)return new Promise((function(e,n){var r=Gl(t.querySelectorAll("*")).filter(Mh).map(Ph),i=ah.begin("searchPseudoElements");mh(),Promise.all(r).then((function(){i(),vh(),e()})).catch((function(){i(),vh(),n()}))}))}var Nh=!1,zh=function(t){return t.toLowerCase().split(" ").reduce((function(t,e){var n=e.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return t.flipX=!0,t;if(r&&"v"===i)return t.flipY=!0,t;if(i=parseFloat(i),isNaN(i))return t;switch(r){case"grow":t.size=t.size+i;break;case"shrink":t.size=t.size-i;break;case"left":t.x=t.x-i;break;case"right":t.x=t.x+i;break;case"up":t.y=t.y-i;break;case"down":t.y=t.y+i;break;case"rotate":t.rotate=t.rotate+i}return t}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Vh={mixout:function(){return{parse:{transform:function(t){return zh(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,e){var n=e.getAttribute("data-fa-transform");return n&&(t.transform=zh(n)),t}}},provides:function(t){t.generateAbstractTransformGrouping=function(t){var e=t.main,n=t.transform,r=t.containerWidth,i=t.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),u="rotate(".concat(n.rotate," 0 0)"),l={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(u)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:Ou({},l.outer),children:[{tag:"g",attributes:Ou({},l.inner),children:[{tag:e.icon.tag,children:e.icon.children,attributes:Ou(Ou({},e.icon.attributes),l.path)}]}]}}}},jh={x:0,y:0,width:"100%",height:"100%"};function Kh(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}var Uh={hooks:function(){return{parseNodeAttributes:function(t,e){var n=e.getAttribute("data-fa-mask"),r=n?Fc(n.split(" ").map((function(t){return t.trim()}))):Cc();return r.prefix||(r.prefix=Ic()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides:function(t){t.generateAbstractMask=function(t){var e,n=t.children,r=t.attributes,i=t.main,a=t.mask,o=t.maskId,s=t.transform,u=i.width,l=i.icon,c=a.width,h=a.icon,p=function(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),s="rotate(".concat(e.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:c,iconWidth:u}),f={tag:"rect",attributes:Ou(Ou({},jh),{},{fill:"white"})},d=l.children?{children:l.children.map(Kh)}:{},m={tag:"g",attributes:Ou({},p.inner),children:[Kh(Ou({tag:l.tag,attributes:Ou(Ou({},l.attributes),p.path)},d))]},v={tag:"g",attributes:Ou({},p.outer),children:[m]},y="mask-".concat(o||Bl()),g="clip-".concat(o||Bl()),x={tag:"mask",attributes:Ou(Ou({},jh),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,v]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(e=h,"g"===e.tag?e.children:[e])},x]};return n.push(b,{tag:"rect",attributes:Ou({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(y,")")},jh)}),{children:n,attributes:r}}}},Bh={provides:function(t){var e=!1;Qu.matchMedia&&(e=Qu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var t=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:Ou(Ou({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=Ou(Ou({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Ou(Ou({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||a.children.push({tag:"animate",attributes:Ou(Ou({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ou(Ou({},i),{},{values:"1;0;1;1;0;1;"})}),t.push(a),t.push({tag:"path",attributes:Ou(Ou({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:Ou(Ou({},i),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:Ou(Ou({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ou(Ou({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}};!function(t,e){var n=e.mixoutsTo;Mc=t,Rc={},Object.keys(Nc).forEach((function(t){-1===zc.indexOf(t)&&delete Nc[t]})),Mc.forEach((function(t){var e=t.mixout?t.mixout():{};if(Object.keys(e).forEach((function(t){"function"===typeof e[t]&&(n[t]=e[t]),"object"===Fu(e[t])&&Object.keys(e[t]).forEach((function(r){n[t]||(n[t]={}),n[t][r]=e[t][r]}))})),t.hooks){var r=t.hooks();Object.keys(r).forEach((function(t){Rc[t]||(Rc[t]=[]),Rc[t].push(r[t])}))}t.provides&&t.provides(Nc)}))}([Zl,_h,Lh,Ih,Ch,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=Rh,t}}},provides:function(t){t.pseudoElements2svg=function(t){var e=t.node,n=void 0===e?Zu:e;zl.searchPseudoElements&&Rh(n)}}},{mixout:function(){return{dom:{unwatch:function(){mh(),Nh=!0}}}},hooks:function(){return{bootstrap:function(){gh(Vc("mutationObserverCallbacks",{}))},noAuto:function(){yh&&yh.disconnect()},watch:function(t){var e=t.observeMutationsRoot;Nh?vh():gh(Vc("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}},Vh,Uh,Bh,{hooks:function(){return{parseNodeAttributes:function(t,e){var n=e.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return t.symbol=r,t}}}}],{mixoutsTo:Hc});var Gh=Hc.parse,Wh=Hc.icon,Hh=n(2007),Xh=n.n(Hh);function Yh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yh(Object(n),!0).forEach((function(e){Jh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $h(t){return $h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(t)}function Jh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qh(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zh(t){return function(t){if(Array.isArray(t))return tp(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return tp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ep(t){return e=t,(e-=0)===e?t:(t=t.replace(/[\-_\s]+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))).substr(0,1).toLowerCase()+t.substr(1);var e}var np=["style"];var rp=!1;try{rp=!0}catch(zp){}function ip(t){return t&&"object"===$h(t)&&t.prefix&&t.iconName&&t.icon?t:Gh.icon?Gh.icon(t):null===t?null:t&&"object"===$h(t)&&t.prefix&&t.iconName?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"===typeof t?{prefix:"fas",iconName:t}:void 0}function ap(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Jh({},t,e):{}}var op=t.forwardRef((function(t,e){var n=t.icon,r=t.mask,i=t.symbol,a=t.className,o=t.title,s=t.titleId,u=t.maskId,l=ip(n),c=ap("classes",[].concat(Zh(function(t){var e,n=t.beat,r=t.fade,i=t.beatFade,a=t.bounce,o=t.shake,s=t.flash,u=t.spin,l=t.spinPulse,c=t.spinReverse,h=t.pulse,p=t.fixedWidth,f=t.inverse,d=t.border,m=t.listItem,v=t.flip,y=t.size,g=t.rotation,x=t.pull,b=(Jh(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":u,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":h,"fa-fw":p,"fa-inverse":f,"fa-border":d,"fa-li":m,"fa-flip":!0===v,"fa-flip-horizontal":"horizontal"===v||"both"===v,"fa-flip-vertical":"vertical"===v||"both"===v},"fa-".concat(y),"undefined"!==typeof y&&null!==y),Jh(e,"fa-rotate-".concat(g),"undefined"!==typeof g&&null!==g&&0!==g),Jh(e,"fa-pull-".concat(x),"undefined"!==typeof x&&null!==x),Jh(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(b).map((function(t){return b[t]?t:null})).filter((function(t){return t}))}(t)),Zh(a.split(" ")))),h=ap("transform","string"===typeof t.transform?Gh.transform(t.transform):t.transform),p=ap("mask",ip(r)),f=Wh(l,qh(qh(qh(qh({},c),h),p),{},{symbol:i,title:o,titleId:s,maskId:u}));if(!f)return function(){var t;!rp&&console&&"function"===typeof console.error&&(t=console).error.apply(t,arguments)}("Could not find icon",l),null;var d=f.abstract,m={ref:e};return Object.keys(t).forEach((function(e){op.defaultProps.hasOwnProperty(e)||(m[e]=t[e])})),sp(d[0],m)}));op.displayName="FontAwesomeIcon",op.propTypes={beat:Xh().bool,border:Xh().bool,beatFade:Xh().bool,bounce:Xh().bool,className:Xh().string,fade:Xh().bool,flash:Xh().bool,mask:Xh().oneOfType([Xh().object,Xh().array,Xh().string]),maskId:Xh().string,fixedWidth:Xh().bool,inverse:Xh().bool,flip:Xh().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Xh().oneOfType([Xh().object,Xh().array,Xh().string]),listItem:Xh().bool,pull:Xh().oneOf(["right","left"]),pulse:Xh().bool,rotation:Xh().oneOf([0,90,180,270]),shake:Xh().bool,size:Xh().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Xh().bool,spinPulse:Xh().bool,spinReverse:Xh().bool,symbol:Xh().oneOfType([Xh().bool,Xh().string]),title:Xh().string,titleId:Xh().string,transform:Xh().oneOfType([Xh().string,Xh().object]),swapOpacity:Xh().bool},op.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var sp=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return t(e,n)})),a=Object.keys(n.attributes||{}).reduce((function(t,e){var r=n.attributes[e];switch(e){case"class":t.attrs.className=r,delete n.attributes.class;break;case"style":t.attrs.style=r.split(";").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n,r=e.indexOf(":"),i=ep(e.slice(0,r)),a=e.slice(r+1).trim();return i.startsWith("webkit")?t[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:t[i]=a,t}),{});break;default:0===e.indexOf("aria-")||0===e.indexOf("data-")?t.attrs[e.toLowerCase()]=r:t.attrs[ep(e)]=r}return t}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,u=Qh(r,np);return a.attrs.style=qh(qh({},a.attrs.style),s),e.apply(void 0,[n.tag,qh(qh({},a.attrs),u)].concat(Zh(i)))}.bind(null,t.createElement),up={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},lp={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},cp={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},hp={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},pp=function(t){var e=t.bgColor,r=t.textColor,i=t.title,a=t.description,o=(t.buttonLabel,t.complementColor,t.imageSrc,{backgroundColor:e,color:r});return(0,l.jsxs)("section",{className:"hero relative flex flex-col items-center justify-center lg:h-auto h-screen",style:o,children:[(0,l.jsx)(Cu.h1,{className:"text-5xl font-bold mb-4 mt-12 text-center",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},style:{color:r},whileHover:{scale:1.1},children:i}),(0,l.jsx)(Cu.h1,{className:"text-lg mb-8 text-white",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},style:{color:r},whileHover:{scale:1.1},children:a}),(0,l.jsx)(Cu.div,{className:"heart-icon",style:{text:r},initial:{scale:0},animate:{scale:[0,1.2,1],rotate:[0,10,0]},transition:{repeat:1/0,duration:.5,repeatDelay:1},children:(0,l.jsx)(op,{icon:up})}),(0,l.jsx)("br",{}),(0,l.jsx)(Cu.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-primary w-1/2 h-3/4",children:(0,l.jsx)("img",{className:"rounded-md",src:n(1196)})})]})},fp=(n(7287),["as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"]),dp=Object.defineProperty,mp=function(t,e,n){return function(t,e,n){e in t?dp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n}(t,"symbol"!==typeof e?e+"":e,n),n},vp=new Map,yp=new WeakMap,gp=0,xp=void 0;function bp(t){return Object.keys(t).sort().filter((function(e){return void 0!==t[e]})).map((function(e){return"".concat(e,"_").concat("root"===e?function(t){return t?(yp.has(t)||(gp+=1,yp.set(t,gp.toString())),yp.get(t)):"0"}(t.root):t[e])})).toString()}function wp(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xp;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var a=function(t){var e=bp(t),n=vp.get(e);if(!n){var r,i=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var n,a=e.isIntersecting&&r.some((function(t){return e.intersectionRatio>=t}));t.trackVisibility&&"undefined"===typeof e.isVisible&&(e.isVisible=a),null==(n=i.get(e.target))||n.forEach((function(t){t(a,e)}))}))}),t);r=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:a,elements:i},vp.set(e,n)}return n}(n),o=a.id,s=a.observer,u=a.elements,l=u.get(t)||[];return u.has(t)||u.set(t,l),l.push(e),s.observe(t),function(){l.splice(l.indexOf(e),1),0===l.length&&(u.delete(t),s.unobserve(t)),0===u.size&&(s.disconnect(),vp.delete(o))}}t.Component;function kp(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.threshold,i=n.delay,a=n.trackVisibility,o=n.rootMargin,s=n.root,l=n.triggerOnce,c=n.skip,h=n.initialInView,p=n.fallbackInView,f=n.onChange,d=u(t.useState(null),2),m=d[0],v=d[1],y=t.useRef(),g=u(t.useState({inView:!!h,entry:void 0}),2),x=g[0],b=g[1];y.current=f,t.useEffect((function(){var t;if(!c&&m)return t=wp(m,(function(e,n){b({inView:e,entry:n}),y.current&&y.current(e,n),n.isIntersecting&&l&&t&&(t(),t=void 0)}),{root:s,rootMargin:o,threshold:r,trackVisibility:a,delay:i},p),function(){t&&t()}}),[Array.isArray(r)?r.toString():r,m,s,o,l,c,a,p,i]);var w=null==(e=x.entry)?void 0:e.target,k=t.useRef();m||!w||l||c||k.current===w||(k.current=w,b({inView:!!h,entry:void 0}));var S=[v,x.inView,x.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}var Sp=function(e){var n=e.title,r=e.content,i=e.signature,a=e.bgColor,o=e.textColor,s=u((0,t.useState)(!1),2),c=s[0],h=s[1],p=u((0,t.useState)(!1),2),f=p[0],d=p[1],m=kp({triggerOnce:!0,threshold:.5}),v=m.ref,y=m.inView;return(0,t.useEffect)((function(){y&&!f&&d(!0)}),[y,f]),(0,t.useEffect)((function(){f&&h(!0)}),[f]),(0,l.jsx)("section",{ref:v,className:"py-14",style:{background:a},children:(0,l.jsxs)("div",{className:"max-w-screen-xl mx-auto px-4 text-gray-800 md:px-8",children:[(0,l.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,l.jsx)("h2",{className:"text-3xl font-semibold mb-6 text-center",style:{color:o},children:n}),(0,l.jsx)(Cu.div,{initial:{width:0},animate:{width:c?"100%":0},transition:{duration:1},className:"border-t-4 border-b-2 my-4",style:{borderColor:o}})]}),(0,l.jsxs)("div",{className:"mt-12",children:[(0,l.jsx)("div",{className:"text-2xl italic text-justify",children:r.map((function(t,e){return(0,l.jsx)(Cu.p,{initial:{opacity:0,y:20},animate:{opacity:c?1:0,y:c?0:20},transition:{duration:.5,delay:.2*e},className:"mb-4 text-center text-white",children:t},e)}))}),(0,l.jsx)(Cu.div,{initial:{width:0},animate:{width:c?"100%":0},transition:{duration:1},className:"border-t-4 border-b-2 my-4",style:{borderColor:o}}),(0,l.jsxs)(Cu.div,{initial:{opacity:0,y:20},animate:{opacity:c?1:0,y:c?0:20},transition:{duration:.5,delay:.2*r.length},className:"flex justify-end items-center",children:[(0,l.jsx)("p",{className:"text-xl font-bold mr-2",style:{color:o},children:i}),(0,l.jsx)(Cu.div,{whileHover:{rotate:360},children:(0,l.jsx)(op,{icon:cp,size:24,color:o})})]})]})]})})};function Tp(){var e=(0,t.useRef)(!1);return Bt((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var Ap=function(t){x(n,t);var e=S(n);function n(){return f(this,n),e.apply(this,arguments)}return y(n,[{key:"getSnapshotBeforeUpdate",value:function(t){var e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){var n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),n}(t.Component);function Ep(e){var n=e.children,r=e.isPresent,i=(0,t.useId)(),a=(0,t.useRef)(null),o=(0,t.useRef)({width:0,height:0,top:0,left:0}),s=(0,t.useContext)(Vt).nonce;return(0,t.useInsertionEffect)((function(){var t=o.current,e=t.width,n=t.height,u=t.top,l=t.left;if(!r&&a.current&&e&&n){a.current.dataset.motionPopId=i;var c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(n,"px !important;\n            top: ").concat(u,"px !important;\n            left: ").concat(l,"px !important;\n          }\n        ")),function(){document.head.removeChild(c)}}}),[r]),t.createElement(Ap,{isPresent:r,childRef:a,sizeRef:o},t.cloneElement(n,{ref:a}))}var _p=function(e){var n=e.children,r=e.initial,i=e.isPresent,a=e.onExitComplete,o=e.custom,s=e.presenceAffectsLayout,u=e.mode,l=Tn(Lp),c=(0,t.useId)(),h=(0,t.useMemo)((function(){return{id:c,initial:r,isPresent:i,custom:o,onExitComplete:function(t){l.set(t,!0);var e,n=E(l.values());try{for(n.s();!(e=n.n()).done;){if(!e.value)return}}catch(r){n.e(r)}finally{n.f()}a&&a()},register:function(t){return l.set(t,!1),function(){return l.delete(t)}}}}),s?void 0:[i]);return(0,t.useMemo)((function(){l.forEach((function(t,e){return l.set(e,!1)}))}),[i]),t.useEffect((function(){!i&&!l.size&&a&&a()}),[i]),"popLayout"===u&&(n=t.createElement(Ep,{isPresent:i},n)),t.createElement(Kt.Provider,{value:h},n)};function Lp(){return new Map}var Ip=function(t){return t.key||""};var Cp=function(e){var n=e.children,r=e.custom,i=e.initial,a=void 0===i||i,o=e.onExitComplete,s=e.exitBeforeEnter,l=e.presenceAffectsLayout,c=void 0===l||l,h=e.mode,f=void 0===h?"sync":h;Pr(!s,"Replace exitBeforeEnter with mode='wait'");var d,m=(0,t.useContext)(fe).forceRender||function(){var e=Tp(),n=u((0,t.useState)(0),2),r=n[0],i=n[1],a=(0,t.useCallback)((function(){e.current&&i(r+1)}),[r]);return[(0,t.useCallback)((function(){return Pn.postRender(a)}),[a]),r]}()[0],v=Tp(),y=function(e){var n=[];return t.Children.forEach(e,(function(e){(0,t.isValidElement)(e)&&n.push(e)})),n}(n),g=y,x=(0,t.useRef)(new Map).current,b=(0,t.useRef)(g),w=(0,t.useRef)(new Map).current,k=(0,t.useRef)(!0);if(Bt((function(){k.current=!1,function(t,e){t.forEach((function(t){var n=Ip(t);e.set(n,t)}))}(y,w),b.current=g})),d=function(){k.current=!0,w.clear(),x.clear()},(0,t.useEffect)((function(){return function(){return d()}}),[]),k.current)return t.createElement(t.Fragment,null,g.map((function(e){return t.createElement(_p,{key:Ip(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:c,mode:f},e)})));g=p(g);for(var S=b.current.map(Ip),T=y.map(Ip),A=S.length,E=0;E<A;E++){var _=S[E];-1!==T.indexOf(_)||x.has(_)||x.set(_,void 0)}return"wait"===f&&x.size&&(g=[]),x.forEach((function(e,n){if(-1===T.indexOf(n)){var i=w.get(n);if(i){var a=S.indexOf(n),s=e;if(!s){s=t.createElement(_p,{key:Ip(i),isPresent:!1,onExitComplete:function(){x.delete(n);var t=Array.from(w.keys()).filter((function(t){return!T.includes(t)}));if(t.forEach((function(t){return w.delete(t)})),b.current=y.filter((function(e){var r=Ip(e);return r===n||t.includes(r)})),!x.size){if(!1===v.current)return;m(),o&&o()}},custom:r,presenceAffectsLayout:c,mode:f},i),x.set(n,s)}g.splice(a,0,s)}}})),g=g.map((function(e){var n=e.key;return x.has(n)?e:t.createElement(_p,{key:Ip(e),isPresent:!0,presenceAffectsLayout:c,mode:f},e)})),t.createElement(t.Fragment,null,x.size?g:g.map((function(e){return(0,t.cloneElement)(e)})))},Dp=function(e){var n=e.title,r=e.description,i=e.textColor,a=(e.bgColor,e.images),o=u((0,t.useState)(null),2),s=o[0],c=o[1],h=kp({triggerOnce:!0}),p=h.ref,f=h.inView;return(0,l.jsxs)("section",{ref:p,className:"py-8 mt-12",children:[(0,l.jsxs)("div",{className:"max-w-screen-xl mx-auto px-4 text-gray-600 md:px-8",children:[(0,l.jsx)("h2",{className:"text-3xl font-semibold mb-4 text-center",style:{color:i},children:n}),(0,l.jsx)("p",{className:"text-lg mb-8 text-center text-white",children:r}),(0,l.jsx)(Cp,{children:f&&(0,l.jsx)(Cu.div,{className:"flex flex-wrap justify-center gap-4 p-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:1,delay:1.5},children:a.map((function(t,e){return(0,l.jsxs)(Cu.div,{className:"relative overflow-hidden rounded-lg cursor-pointer w-48",whileHover:{scale:1.05},onClick:function(){return function(t){c(t)}(e)},children:[(0,l.jsx)("img",{src:t.url,alt:"Artwork ".concat(e+1),className:"w-full h-auto max-h-48 object-cover rounded-lg"}),(0,l.jsx)(Cp,{children:s===e&&(0,l.jsx)(Cu.div,{className:"absolute inset-0 bg-black bg-opacity-50 text-white flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,l.jsx)("div",{className:"text-lg",children:t.description})})})]},e)}))})})]}),null!==s&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:(0,l.jsxs)(Cu.div,{className:"w-full h-full flex flex-col justify-center items-center",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},children:[(0,l.jsx)("img",{src:a[s].url,alt:"Artwork ".concat(s+1),className:"w-1/2 h-3/4 object-contain"}),(0,l.jsx)("div",{className:"text-white z-50 text-center",children:a[s].description}),(0,l.jsx)("div",{className:"absolute top-4 left-4 text-white",children:(0,l.jsx)("button",{onClick:function(){c((function(t){return 0===t?a.length-1:t-1}))},children:(0,l.jsx)(op,{icon:hp})})}),(0,l.jsx)("div",{className:"absolute top-4 right-4 text-white",children:(0,l.jsx)("button",{onClick:function(){c((function(t){return t===a.length-1?0:t+1}))},children:(0,l.jsx)(op,{icon:lp})})}),(0,l.jsx)("div",{className:"absolute bottom-4 right-4 text-white",children:(0,l.jsx)("button",{onClick:function(){c(null)},children:"Close"})})]})})]})},Op=function(){var e=u((0,t.useState)(""),2),r=(e[0],e[1],u((0,t.useState)("#94b1a0"),2)),i=r[0],a=(r[1],u((0,t.useState)("#AD3C34"),2)),o=a[0],s=(a[1],[{url:n(1939),description:"Recent moments in a Singapore train"},{url:n(4318),description:"Sun City moments"},{url:n(2017),description:"This was in Japan or Korea"},{url:n(9426),description:"Me and you goofing around"},{url:n(7238),description:"This was somewhere in Swiss.. I think"},{url:n(4821),description:"Korea where we dressed with the traditional Hanbok and walked around the street"},{url:n(6831),description:"Your trip to Singapore with mom to watch Taylor Swift"}]);return(0,l.jsxs)("div",{style:{background:i},children:[i&&(0,l.jsx)(pp,{bgColor:i,textColor:o,title:"Happy Birthday Miley!!",description:"From your amazing brother ;)",buttonLabel:"Get Started",complementColor:o,imageSrc:"https://via.placeholder.com/400x200"}),(0,l.jsx)("br",{}),i&&(0,l.jsx)(Dp,{title:"Our Fondest Memories",description:"I found some memories that we shared which were the best moments of my life :)",images:s,bgColor:i,textColor:o}),i&&(0,l.jsx)(Sp,{title:"My Letter",content:["Hey Miley,","As your brother, I really wish the best for your future.","I hope you dreams will come true and you will continue to become a better person.","Be grateful for your friends and family who will always be there for you.","I am grateful every day to have you by my side.","From,","Your Big Bro"],signature:"Maxwell Wijaya",bgColor:i,textColor:o})]})};var Fp=n(1425),Pp=n.n(Fp),Mp=function(e){var n=e.duration;(0,t.useEffect)((function(){}),[]);return(0,l.jsxs)("div",{className:"h-screen flex justify-center items-center text-center",style:{background:"#94b1a0"},children:[(0,l.jsx)(Cp,{children:(0,l.jsx)(Cu.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:1,delay:1},className:"text-7xl font-bold",style:{color:"#AD3C34"},children:"Happy Birthday Lil' Sis!\ud83d\ude0e".split("").map((function(t,e){return(0,l.jsx)(Cu.span,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:1,delay:.5+.1*e},children:t},e)}))})}),(0,l.jsx)(Pp(),{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:300,gravity:.4,run:n>0,timeout:n+1e4})]})},Rp=function(){var e=u((0,t.useState)(!0),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){var t=setTimeout((function(){r(!1)}),5e3);return function(){return clearTimeout(t)}}),[]),(0,l.jsx)("div",{children:n?(0,l.jsx)(Mp,{duration:5e3}):(0,l.jsx)(Op,{})})},Np=function(){return(0,l.jsx)(Ft,{children:(0,l.jsx)(Et,{children:(0,l.jsx)(Tt,{path:"/",element:(0,l.jsx)(Rp,{})})})})};r.createRoot(document.getElementById("root")).render((0,l.jsx)(Np,{}))}()}();
//# sourceMappingURL=main.862fb241.js.map